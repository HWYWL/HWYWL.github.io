<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>NacosåŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°</title>
      <link href="/2020/03/21/Nacos%E5%8A%A8%E6%80%81%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E3%80%81%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/"/>
      <url>/2020/03/21/Nacos%E5%8A%A8%E6%80%81%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E3%80%81%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>Nacos æä¾›äº†ä¸€ç»„ç®€å•æ˜“ç”¨çš„ç‰¹æ€§é›†ï¼Œå¯ä»¥å¿«é€Ÿå®ç°åŠ¨æ€æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®åŠæµé‡ç®¡ç†ã€‚<br>ä»Šå¤©æˆ‘ä»¬å°±ä½¿ç”¨Nacosçš„æœåŠ¡é…ç½®åŠŸèƒ½æ­å»ºæˆ‘ä»¬çš„é…ç½®ä¸­å¿ƒã€‚</p><p><a href="https://s1.ax1x.com/2020/03/21/8WO6hQ.jpg" data-fancybox="group" data-caption="8WO6hQ.jpg" class="fancybox"><img alt="8WO6hQ.jpg" data-src="https://s1.ax1x.com/2020/03/21/8WO6hQ.jpg" class="lazyload" title="8WO6hQ.jpg"></a></p><p>å®‰è£…ä¸ºäº†æ–¹ä¾¿è¿™é‡Œä½¿ç”¨dockerå®‰è£…Nacosï¼Œé¿å…å„ç§windowsçš„ç¯å¢ƒé—®é¢˜ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/nacos-group/nacos-docker.git</span><br><span class="line">cd nacos-docker</span><br></pre></td></tr></tbody></table></figure></div><p>å› ä¸ºæ˜¯æµ‹è¯•ï¼Œæ‰€ä»¥æˆ‘ä»¬èµ·ä¸€ä¸ªå•èŠ‚ç‚¹å°±å¤Ÿäº†,å•æœºæ¨¡å¼ Derby</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f example/standalone-derby.yaml up</span><br></pre></td></tr></tbody></table></figure></div><p>æµè§ˆå™¨è®¿é—®å®ƒçš„UIç•Œé¢ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8848/nacos/</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://s1.ax1x.com/2020/03/21/8WjGzd.png" data-fancybox="group" data-caption="8WjGzd.png" class="fancybox"><img alt="8WjGzd.png" data-src="https://s1.ax1x.com/2020/03/21/8WjGzd.png" class="lazyload" title="8WjGzd.png"></a></p><p>ç‚¹å‡»æœ€å³è¾¹çš„åŠ å·ï¼Œå¯ä»¥æ·»åŠ æˆ‘ä»¬çš„é…ç½®ï¼Œä¸‹é¢æ˜¯ä»–å¸¸ç”¨çš„é…ç½®æ ¼å¼ï¼š</p><ul><li>TEXT</li><li>JSON</li><li>XML</li><li>YAML</li><li>HTML</li><li>Properties</li></ul><p>æˆ‘ä»¬é…ç½®ä¸€ä¸ªJSONå’Œä¸€ä¸ªPropertiesæ¥æµ‹è¯•ä¸€ä¸‹</p><p><a href="https://s1.ax1x.com/2020/03/21/8WvFmt.png" data-fancybox="group" data-caption="8WvFmt.png" class="fancybox"><img alt="8WvFmt.png" data-src="https://s1.ax1x.com/2020/03/21/8WvFmt.png" class="lazyload" title="8WvFmt.png"></a></p><p><a href="https://s1.ax1x.com/2020/03/21/8WvPOI.png" data-fancybox="group" data-caption="8WvPOI.png" class="fancybox"><img alt="8WvPOI.png" data-src="https://s1.ax1x.com/2020/03/21/8WvPOI.png" class="lazyload" title="8WvPOI.png"></a></p><p>æ¥ä¸‹æ¥å°±æ˜¯ä»£ç ç¼–å†™ï¼Œç›´æ¥å»ºä¸€ä¸ªSpring bootå·¥ç¨‹ï¼Œç„¶ååŠ å…¥Nacosä¾èµ–</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><dependency></dependency></span><br><span class="line">    <groupid>com.alibaba.boot</groupid></span><br><span class="line">    <artifactid>nacos-config-spring-boot-starter</artifactid></span><br><span class="line">    <version>0.2.7</version></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>å› ä¸ºä½¿ç”¨å®˜æ–¹SDKçš„æ—¶å€™æˆ‘ä¸€ç›´æ‹¿åˆ°çš„æ•°æ®éƒ½æ˜¯nullï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œæ‰“ç®—ç›´æ¥ä½¿ç”¨ä»–çš„open-apiç›´æ¥è®¿é—®å–æ•°æ®ã€‚</p><p><strong>application.properties</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># nacos é…ç½®æœåŠ¡åœ°å€</span><br><span class="line">nacos.config.server-addr=127.0.0.1:8848</span><br><span class="line"></span><br><span class="line"># è·å–é…ç½®/å‘å¸ƒé…ç½®/åˆ é™¤é…ç½®</span><br><span class="line">conf.configs=http://127.0.0.1:8848/nacos/v1/cs/configs</span><br><span class="line"># ç›‘å¬é…ç½®</span><br><span class="line">conf.listener=http://127.0.0.1:8848/nacos/v1/cs/configs/listener</span><br></pre></td></tr></tbody></table></figure></div><p><strong>NacosConfig</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@Configuration</span><br><span class="line">@ConfigurationProperties(prefix = "conf")</span><br><span class="line">public class NacosConfig {</span><br><span class="line">    /**</span><br><span class="line">     * è·å–é…ç½®/å‘å¸ƒé…ç½®/åˆ é™¤é…ç½® URL</span><br><span class="line">     */</span><br><span class="line">    private String configs;</span><br><span class="line">    /**</span><br><span class="line">     * ç›‘å¬é…ç½® url</span><br><span class="line">     */</span><br><span class="line">    private String listener;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ¥æµ‹è¯•äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class SpringBootNacosConfigApplicationTests {</span><br><span class="line">    @Autowired</span><br><span class="line">    NaCosUtil naCosUtil;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    void test01() {</span><br><span class="line">        String properties = naCosUtil.getNacosConfig("ll.properties", "DEFAULT_GROUP");</span><br><span class="line">        String json = naCosUtil.getNacosConfig("OLConsumer", "HWY_GROUP");</span><br><span class="line"></span><br><span class="line">        System.out.println(properties);</span><br><span class="line">        System.out.println("************************************************************************");</span><br><span class="line">        System.out.println(json);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://s1.ax1x.com/2020/03/21/8WzzfU.png" data-fancybox="group" data-caption="8WzzfU.png" class="fancybox"><img alt="8WzzfU.png" data-src="https://s1.ax1x.com/2020/03/21/8WzzfU.png" class="lazyload" title="8WzzfU.png"></a></p><p>å¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯å®˜æ–¹çš„æ–‡æ¡£ï¼Œå…¶ä½™ <strong>ç›‘å¬é…ç½®</strong>ã€<strong>å‘å¸ƒé…ç½®</strong>ã€<strong>åˆ é™¤é…ç½®</strong> æ²¡å†™çš„æ¥å£ä¹Ÿåœ¨ä¸‹é¢ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://nacos.io/zh-cn/</span><br></pre></td></tr></tbody></table></figure></div><p>æºç åœ°å€ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-nacos-config" target="_blank" rel="noopener">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-nacos-config</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> Nacos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10å­ç³»ç»ŸUbuntu 18.04 LTSä¸Šå®‰è£…docker</title>
      <link href="/2020/03/20/Win10%E5%AD%90%E7%B3%BB%E7%BB%9FUbuntu%2018.04%20LTS%E4%B8%8A%E5%AE%89%E8%A3%85docker/"/>
      <url>/2020/03/20/Win10%E5%AD%90%E7%B3%BB%E7%BB%9FUbuntu%2018.04%20LTS%E4%B8%8A%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>å­ç³»ç»Ÿå®‰è£…dockeræŒºéº»çƒ¦çš„ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ä¸ºäº†åšä¸ªè®°å½•ï¼Œä»¥åæœ‰éœ€è¦å¯ä»¥ç¿»å‡ºæ¥ç…ç…ã€‚<br>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Ubuntu 18.04 LTSçš„ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨åº”ç”¨å•†åº—æœç´¢<strong>Linux</strong>ä¸‹è½½ã€‚</p><p><a href="https://s1.ax1x.com/2020/03/20/8gKiUH.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://s1.ax1x.com/2020/03/20/8gKiUH.png" class="lazyload" title></a></p><p>æˆ‘ä»¬è¦å…ˆå»dockerçš„å®˜ç½‘ä¸‹è½½ä¸€ä¸ªWindowsçš„dockerç‰ˆæœ¬ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hub.docker.com/?overlay=onboarding</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://s1.ax1x.com/2020/03/20/8gKNrT.png" data-fancybox="group" data-caption="8gKNrT.png" class="fancybox"><img alt="8gKNrT.png" data-src="https://s1.ax1x.com/2020/03/20/8gKNrT.png" class="lazyload" title="8gKNrT.png"></a></p><h2 id="Linuxé…ç½®"><a href="#Linuxé…ç½®" class="headerlink" title="Linuxé…ç½®"></a>Linuxé…ç½®</h2><p>Windows å­ç³»ç»ŸUbuntu 18.04 LTSå’Œdockeræ¡Œé¢ç‰ˆä¸‹è½½å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯åŠ¨å­ç³»ç»Ÿï¼Œé…ç½®ä¸€äº›å‚æ•°ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿åç»­ä½¿ç”¨sshå·¥å…·è¿æ¥linuxï¼Œéœ€è¦å…ˆå®‰è£…sshæœåŠ¡ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br><span class="line">sudo apt-get install openssh-client</span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹sshdé…ç½®æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹å†…å®¹åŒ…å«ä¸‹é¢çš„å‡ ä¸ªé…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ListenAddress 0.0.0.0 # å–æ¶ˆæ³¨é‡Š</span><br><span class="line">#StrictModes yes # æ³¨é‡Š</span><br><span class="line">PasswordAuthentication yes # å…è®¸å¯†ç ç™»å½•</span><br></pre></td></tr></tbody></table></figure></div><p>å¯åŠ¨ssh,sshæœåŠ¡ä¸ä¼šè·Ÿéšå­ç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨è¿™ä¸ªæ¯”è¾ƒéº»çƒ¦ï¼Œæ¯æ¬¡å¯åŠ¨å­ç³»ç»Ÿéƒ½éœ€è¦æ‰§è¡Œå¯åŠ¨çš„å‘½ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh start</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœæç¤º<strong>sshd error: could not load host key</strong>ï¼Œåˆ™ç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°ç”Ÿæˆ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/ssh/ssh*key</span><br><span class="line">dpkg-reconfigure openssh-server</span><br></pre></td></tr></tbody></table></figure></div><p>shellè½¯ä»¶æ¨èå›½äº§çš„<strong>FinalShell</strong>ï¼Œç¾è§‚åˆå¥½ç”¨ã€‚</p><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><p>æˆ‘ä»¬å…ˆæ¸…ä¸€ä¸‹è€ç‰ˆæœ¬çš„dockerï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“æ²¡æœ‰ï¼Œä½†å®˜æ–¹è®©æˆ‘ä»¬æ¸…ä¸€ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></tbody></table></figure></div><p>åœ¨å®‰è£… Docker å¼•æ“ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½® Docker å­˜å‚¨åº“ã€‚ä¹‹åï¼Œå¯ä»¥ä»å­˜å‚¨åº“å®‰è£…å’Œæ›´æ–° Dockerã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></tbody></table></figure></div><p>å®‰è£…åŒ…ä»¥å…è®¸é€šè¿‡ HTTPS ä½¿ç”¨å­˜å‚¨åº“:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></tbody></table></figure></div><p>æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></tbody></table></figure></div><p>é€šè¿‡æœç´¢æŒ‡çº¹çš„æœ€å8ä¸ªå­—ç¬¦ï¼ŒéªŒè¯æ‚¨ç°åœ¨æ˜¯å¦æ‹¥æœ‰å¸¦æœ‰æŒ‡çº¹çš„é’¥åŒ™ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br><span class="line"></span><br><span class="line">å‡ºç°ç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯ï¼Œè¯´æ˜æ˜¯æ­£ç¡®çš„</span><br><span class="line">pub   rsa4096 2017-02-22 [SCEA]</span><br><span class="line">      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88</span><br><span class="line">uid           [ unknown] Docker Release (CE deb) <docker@docker.com></docker@docker.com></span><br><span class="line">sub   rsa4096 2017-02-22 [S]</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®ç¨³å®šå­˜å‚¨åº“ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span><br><span class="line">   $(lsb_release -cs) \</span><br><span class="line">   stable"</span><br></pre></td></tr></tbody></table></figure></div><p>æ›´æ–°åŒ…ç´¢å¼•:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></tbody></table></figure></div><p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Docker å¼•æ“ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></tbody></table></figure></div><p>çœ‹æˆ‘ä»¬æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br><span class="line"></span><br><span class="line">å‡ºç°ä»¥ä¸‹ç±»ä¼¼çš„ä¿¡æ¯å°±è¯´æ˜å®‰è£…æˆåŠŸäº†</span><br><span class="line"></span><br><span class="line">Docker version 19.03.8, build afacb8b7f0</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ°æ­¤ä»¥ä½ ä¸ºå°±å®‰è£…æˆåŠŸäº†ï¼Œå¤ªå¤©çœŸäº†ï¼ˆæˆ‘ä»¥å‰å°±æ˜¯é‚£ä¹ˆå¤©çœŸï¼‰ã€‚</p><p>å¯åŠ¨æœåŠ¡ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start</span><br><span class="line"></span><br><span class="line">å®ƒä¼šæ˜¾ç¤º</span><br><span class="line">* Starting Dockerï¼šdocker[OK]</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶è€Œè¿™å¹¶ä¸å¯ä»¥ç”¨ï¼ï¼ï¼ï¼Œæˆ‘æ¥çœ‹ä¸€ä¸‹ç°åœ¨dockerçš„çŠ¶æ€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker status</span><br><span class="line"></span><br><span class="line">ä¼šå‘ç°ä»–å‡ºç°è¿™æ ·ä¸€è¡Œå­—</span><br><span class="line">* Docker is not running</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™ä½¿ç”¨dockeræ‹‰ä¸€ä¸ª<strong>hello-world</strong>,å®ƒä¼šè¹¦å‡ºä¸€å¥è¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?.</span><br></pre></td></tr></tbody></table></figure></div><p><strong>windows10å­ç³»ç»Ÿæœ‰å…¶ç‰¹æ®Šæ€§ï¼Œéœ€è¦å®‰è£…docker for windowsï¼Œç”¨æ¥ä½œä¸ºDockerçš„å®ˆæŠ¤è¿›ç¨‹(docker daemon)ï¼Œä½œä¸ºDockerçš„æœåŠ¡ç«¯ï¼Œubuntuä¸‹ä½œä¸ºå®¢æˆ·ç«¯å»è®¿é—®è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦ä¸‹è½½docker for windowçš„åŸå› </strong></p><h2 id="å®‰è£…-Docker-for-Windows"><a href="#å®‰è£…-Docker-for-Windows" class="headerlink" title="å®‰è£… Docker for Windows"></a>å®‰è£… Docker for Windows</h2><p>Typer-Vå¦‚æœæ²¡æœ‰å¼€å¯ï¼Œå¯åŠ¨è½¯ä»¶çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œè¿™é‡Œå¼€å¯ï¼Œé‡å¯ç”µè„‘å³å¯</p><p><a href="https://s1.ax1x.com/2020/03/20/8gJZBq.png" data-fancybox="group" data-caption="8gJZBq.png" class="fancybox"><img alt="8gJZBq.png" data-src="https://s1.ax1x.com/2020/03/20/8gJZBq.png" class="lazyload" title="8gJZBq.png"></a></p><p>ç„¶åå¼€å¯CPUçš„è™šæ‹ŸåŒ–</p><p><a href="https://s1.ax1x.com/2020/03/20/8gJBgH.png" data-fancybox="group" data-caption="8gJBgH.png" class="fancybox"><img alt="8gJBgH.png" data-src="https://s1.ax1x.com/2020/03/20/8gJBgH.png" class="lazyload" title="8gJBgH.png"></a></p><p>å¦‚æœå‘ç°æ˜¯ç¦ç”¨çš„ï¼Œéœ€è¦å»BOISè®¾ç½®å¼€å¯è™šæ‹ŸåŒ–ï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œç™¾åº¦å¾ˆå¤šæ–‡æ¡£ã€‚</p><p>å®‰è£…æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤å°±å¥½ï¼ŒæˆåŠŸå¯åŠ¨ä¹‹åï¼Œä¼šå¼•å¯¼ä½ ç™»å½•å®˜æ–¹Dockerçš„è´¦å·(ä¸ç™»å½•ä¹Ÿå¯ä»¥)ï¼ŒåŒæ—¶ç”µè„‘çš„å³ä¸‹æ–¹ä¼šæœ‰ä¸ªå°é²¸é±¼ï¼Œå³é”®å°é²¸é±¼ï¼Œå®‰è£…å®Œæˆä¹‹åæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€äº›ä¸œè¥¿ã€‚</p><p><a href="https://s1.ax1x.com/2020/03/20/8gtq9U.png" data-fancybox="group" data-caption="8gtq9U.png" class="fancybox"><img alt="8gtq9U.png" data-src="https://s1.ax1x.com/2020/03/20/8gtq9U.png" class="lazyload" title="8gtq9U.png"></a></p><p>æˆ‘ä»¬éœ€è¦æŠŠå®ˆæŠ¤è¿›ç¨‹å‹¾èµ·æ¥</p><p><a href="https://s1.ax1x.com/2020/03/20/8gNAjH.png" data-fancybox="group" data-caption="8gNAjH.png" class="fancybox"><img alt="8gNAjH.png" data-src="https://s1.ax1x.com/2020/03/20/8gNAjH.png" class="lazyload" title="8gNAjH.png"></a></p><p>ç„¶ååˆ‡æ¢åˆ°æˆ‘ä»¬linuxä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè®©å­è¿›ç¨‹é“¾æ¥å®¿ä¸»æœºDockerå®ˆæŠ¤è¿›ç¨‹ï¼ˆæ¯æ¬¡é‡å¯ç³»ç»Ÿéœ€è¦åˆ·ä¸€éï¼Œä¹ŸæŒºéº»çƒ¦ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "export DOCKER_HOST='tcp://0.0.0.0:2375'" >> ~/.bashrc</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></tbody></table></figure></div><p>å†æ¬¡ä½¿ç”¨æŸ¥çœ‹ç‰ˆæœ¬å‘½ä»¤ï¼Œå¯ä»¥å‘ç°å¤šäº†å¾ˆå¤šä¸œè¥¿</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™æ˜¯ä»¥å‰çš„çŠ¶æ€<br><a href="https://s1.ax1x.com/2020/03/20/8gUuL9.png" data-fancybox="group" data-caption="8gUuL9.png" class="fancybox"><img alt="8gUuL9.png" data-src="https://s1.ax1x.com/2020/03/20/8gUuL9.png" class="lazyload" title="8gUuL9.png"></a></p><p>è¿™æ˜¯å­è¿›ç¨‹é“¾æ¥å®¿ä¸»æœºDockerå®ˆæŠ¤è¿›ç¨‹åçš„çŠ¶æ€<br><a href="https://s1.ax1x.com/2020/03/20/8gU7SU.png" data-fancybox="group" data-caption="8gU7SU.png" class="fancybox"><img alt="8gU7SU.png" data-src="https://s1.ax1x.com/2020/03/20/8gU7SU.png" class="lazyload" title="8gU7SU.png"></a></p><p>ç°åœ¨å°±çœŸçš„å¯ä»¥å¯åŠ¨æœåŠ¡äº†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start</span><br><span class="line"></span><br><span class="line">å®ƒä¼šæ˜¾ç¤º</span><br><span class="line">* Starting Dockerï¼šdocker[OK]</span><br></pre></td></tr></tbody></table></figure></div><p>çœ‹ä¸€ä¸‹ç°åœ¨dockerçš„çŠ¶æ€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker status</span><br><span class="line"></span><br><span class="line">å¯èƒ½è¿˜æ˜¯ä¼šå‡ºç°dockeræœªè¿è¡Œçš„çŠ¶æ€ï¼Œä½†æ˜¯ç°åœ¨å·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸ªæµ‹è¯•ç¨‹åº</span><br><span class="line">* Docker is not running</span><br></pre></td></tr></tbody></table></figure></div><p>æ‹‰å–ä¸€ä¸ªhello worldæµ‹è¯•ç¨‹åºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hello-world</span><br></pre></td></tr></tbody></table></figure></div><p>æ‰§è¡Œæˆ‘ä»¬æ‹‰å–çš„hello-world</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></tbody></table></figure></div><p>å‡ºç°ä»¥ä¸‹ä¿¡æ¯è¯´æ˜å·²ç»æˆåŠŸäº†ï¼Œä¸å®¹æ˜“å‘€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@huangwenyi:~# docker run hello-world</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaçº¿ä¸ŠæœåŠ¡CPUé£™å‡é—®é¢˜å®šä½</title>
      <link href="/2020/03/19/Java%E7%BA%BF%E4%B8%8A%E6%9C%8D%E5%8A%A1CPU%E9%A3%99%E5%8D%87%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/"/>
      <url>/2020/03/19/Java%E7%BA%BF%E4%B8%8A%E6%9C%8D%E5%8A%A1CPU%E9%A3%99%E5%8D%87%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å®‰è£…ï¼ˆä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹å¼ï¼‰"><a href="#å®‰è£…ï¼ˆä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹å¼ï¼‰" class="headerlink" title="å®‰è£…ï¼ˆä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹å¼ï¼‰"></a>å®‰è£…ï¼ˆä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹å¼ï¼‰</h2><h1 id="ğŸŒ-ä¸‹è½½ä½¿ç”¨"><a href="#ğŸŒ-ä¸‹è½½ä½¿ç”¨" class="headerlink" title="ğŸŒ ä¸‹è½½ä½¿ç”¨"></a>ğŸŒ ä¸‹è½½ä½¿ç”¨</h1><h2 id="ä¸‹è½½æ•´ä¸ªå·¥ç¨‹çš„è„šæœ¬"><a href="#ä¸‹è½½æ•´ä¸ªå·¥ç¨‹çš„è„šæœ¬" class="headerlink" title="ä¸‹è½½æ•´ä¸ªå·¥ç¨‹çš„è„šæœ¬"></a>ä¸‹è½½æ•´ä¸ªå·¥ç¨‹çš„è„šæœ¬</h2><h3 id="ç›´æ¥cloneå·¥ç¨‹"><a href="#ç›´æ¥cloneå·¥ç¨‹" class="headerlink" title="ç›´æ¥cloneå·¥ç¨‹"></a>ç›´æ¥cloneå·¥ç¨‹</h3><p>ä½¿ç”¨ç®€å•ã€æ–¹ä¾¿æ›´æ–°ï¼Œä¸è¿‡è¦å®‰è£…æœ‰<code>git</code>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://github.com/oldratlee/useful-scripts.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> useful-scripts</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨Releaseåˆ†æ”¯çš„å†…å®¹</span></span><br><span class="line">git checkout release-2.x</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°è„šæœ¬</span></span><br><span class="line">git pull</span><br></pre></td></tr></tbody></table></figure></div><p>åŒ…å«2ä¸ªåˆ†æ”¯ï¼š</p><ul><li><code>dev-2.x</code>ï¼šå¼€å‘åˆ†æ”¯</li><li><code>release-2.x</code>ï¼šå‘å¸ƒåˆ†æ”¯ï¼ŒåŠŸèƒ½ç¨³å®šçš„è„šæœ¬</li></ul><p>å½“ç„¶å¦‚æœä½ ä¸æƒ³å®‰è£…<code>git</code>ï¼Œ<code>github</code>æ˜¯æ”¯æŒ<code>svn</code>çš„ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">svn co https://github.com/oldratlee/useful-scripts/branches/release-2.x</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> useful-scripts</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°è„šæœ¬</span></span><br><span class="line">svn up</span><br></pre></td></tr></tbody></table></figure></div><p>PSï¼š<br>æˆ‘çš„åšæ³•æ˜¯æŠŠ<code>useful-scripts</code> checkoutåˆ°<code>$HOME/bin</code>ç›®å½•ä¸‹ï¼Œå†æŠŠ<code>$HOME/bin/useful-scripts/bin</code>é…ç½®åˆ°<code>PATH</code>å˜é‡ä¸Šï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘æœ¬åœ°ä½¿ç”¨æ‰€æœ‰çš„è„šæœ¬ã€‚</p><h3 id="æ‰“åŒ…ä¸‹è½½"><a href="#æ‰“åŒ…ä¸‹è½½" class="headerlink" title="æ‰“åŒ…ä¸‹è½½"></a>æ‰“åŒ…ä¸‹è½½</h3><p>ä¸‹è½½æ–‡ä»¶<a href="https://github.com/oldratlee/useful-scripts/archive/release-2.x.zip" target="_blank" rel="noopener">release-2.x.zip</a>ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://github.com/oldratlee/useful-scripts/archive/release-2.x.zip</span><br><span class="line"></span><br><span class="line">unzip release-2.x.zip</span><br></pre></td></tr></tbody></table></figure></div><h2 id="ä¸‹è½½å’Œè¿è¡Œå•ä¸ªæ–‡ä»¶"><a href="#ä¸‹è½½å’Œè¿è¡Œå•ä¸ªæ–‡ä»¶" class="headerlink" title="ä¸‹è½½å’Œè¿è¡Œå•ä¸ªæ–‡ä»¶"></a>ä¸‹è½½å’Œè¿è¡Œå•ä¸ªæ–‡ä»¶</h2><p>ä»¥<a href="https://raw.github.com/oldratlee/useful-scripts/release-2.x/bin/show-busy-java-threads" target="_blank" rel="noopener"><code>show-busy-java-threads</code></a>ä¸ºä¾‹ã€‚</p><h3 id="curlæ–‡ä»¶ç›´æ¥ç”¨bashè¿è¡Œ"><a href="#curlæ–‡ä»¶ç›´æ¥ç”¨bashè¿è¡Œ" class="headerlink" title="curlæ–‡ä»¶ç›´æ¥ç”¨bashè¿è¡Œ"></a><code>curl</code>æ–‡ä»¶ç›´æ¥ç”¨<code>bash</code>è¿è¡Œ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sLk <span class="string">'https://raw.github.com/oldratlee/useful-scripts/release-2.x/bin/show-busy-java-threads'</span> | bash</span><br></pre></td></tr></tbody></table></figure></div><h3 id="ä¸‹è½½å•ä¸ªæ–‡ä»¶"><a href="#ä¸‹è½½å•ä¸ªæ–‡ä»¶" class="headerlink" title="ä¸‹è½½å•ä¸ªæ–‡ä»¶"></a>ä¸‹è½½å•ä¸ªæ–‡ä»¶</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://raw.github.com/oldratlee/useful-scripts/release-2.x/bin/show-busy-java-threads</span><br><span class="line">chmod +x show-busy-java-threads</span><br><span class="line"></span><br><span class="line">./show-busy-java-threads</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™é‡Œä¸€å®šè¦å¹çˆ†ä¸€ä¸ªè„šæœ¬<strong>useful-scripts</strong>ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ç”šè‡³å¯ä»¥è®©æˆ‘ä»¬ä¸€é”®å®šä½çº¿ä¸Šé—®é¢˜ã€‚</p><h2 id="Javaç›¸å…³è„šæœ¬"><a href="#Javaç›¸å…³è„šæœ¬" class="headerlink" title="Javaç›¸å…³è„šæœ¬"></a>Javaç›¸å…³è„šæœ¬</h2><ul><li><p><strong>show-busy-java-threads</strong><br>ç”¨äºå¿«é€Ÿæ’æŸ¥Javaçš„CPUæ€§èƒ½é—®é¢˜(top uså€¼è¿‡é«˜)ï¼Œè‡ªåŠ¨æŸ¥å‡ºè¿è¡Œçš„Javaè¿›ç¨‹ä¸­æ¶ˆè€—CPUå¤šçš„çº¿ç¨‹ï¼Œå¹¶æ‰“å°å‡ºå…¶çº¿ç¨‹æ ˆï¼Œä»è€Œç¡®å®šå¯¼è‡´æ€§èƒ½é—®é¢˜çš„æ–¹æ³•è°ƒç”¨ã€‚</p></li><li><p><strong>show-duplicate-java-classes</strong><br>æ‰¾å‡ºjaræ–‡ä»¶å’Œclassç›®å½•ä¸­çš„é‡å¤ç±»ã€‚ç”¨äºæ’æŸ¥Javaç±»å†²çªé—®é¢˜ã€‚</p></li><li><p><strong>find-in-jars</strong><br>åœ¨ç›®å½•ä¸‹æ‰€æœ‰jaræ–‡ä»¶é‡Œï¼ŒæŸ¥æ‰¾ç±»æˆ–èµ„æºæ–‡ä»¶ã€‚</p></li></ul><h1 id="ğŸŒ-Javaç›¸å…³è„šæœ¬"><a href="#ğŸŒ-Javaç›¸å…³è„šæœ¬" class="headerlink" title="ğŸŒ Javaç›¸å…³è„šæœ¬"></a>ğŸŒ <code>Java</code>ç›¸å…³è„šæœ¬</h1><!-- START doctoc generated TOC please keep comment here to allow auto update --><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><ul><li><a href="#-show-busy-java-threads">ğŸº show-busy-java-threads</a><ul><li><a href="#%E7%94%A8%E6%B3%95">ç”¨æ³•</a></li><li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a></li></ul></li><li><a href="#-show-duplicate-java-classes">ğŸº show-duplicate-java-classes</a><ul><li><a href="#%E7%94%A8%E6%B3%95-1">ç”¨æ³•</a><ul><li><a href="#jdk%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><code>JDK</code>å¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜</a><ul><li><a href="#%E5%AF%B9%E4%BA%8E%E4%B8%80%E8%88%AC%E7%9A%84%E5%B7%A5%E7%A8%8B">å¯¹äºä¸€èˆ¬çš„å·¥ç¨‹</a></li><li><a href="#%E5%AF%B9%E4%BA%8Eweb%E5%B7%A5%E7%A8%8B">å¯¹äº<code>Web</code>å·¥ç¨‹</a></li></ul></li><li><a href="#android%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><code>Android</code>å¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜</a></li></ul></li><li><a href="#%E7%A4%BA%E4%BE%8B-1">ç¤ºä¾‹</a></li></ul></li><li><a href="#-find-in-jars">ğŸº find-in-jars</a><ul><li><a href="#%E7%94%A8%E6%B3%95-2">ç”¨æ³•</a></li><li><a href="#%E7%A4%BA%E4%BE%8B-2">ç¤ºä¾‹</a></li><li><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C">è¿è¡Œæ•ˆæœ</a></li></ul></li></ul><!-- END doctoc generated TOC please keep comment here to allow auto update --><hr><p>å…³äº<code>Java</code>æ’é”™ä¸è¯Šæ–­ï¼ŒåŠ›èï¸<code>Arthas</code> â¤ï¸</p><ul><li><a href="https://github.com/alibaba/arthas" target="_blank" rel="noopener">alibaba/arthas: Alibaba Javaè¯Šæ–­åˆ©å™¨ - github.com</a></li><li><code>Arthas</code>ç”¨æˆ·æ–‡æ¡£ <a href="https://alibaba.github.io/arthas/" target="_blank" rel="noopener">https://alibaba.github.io/arthas/</a></li></ul><p><code>Arthas</code>åŠŸèƒ½å¼‚å¸¸(ğŸ˜œ)å¼ºåŠ²ï¼Œä¸”åœ¨é˜¿é‡Œå·´å·´çº¿ä¸Šæ”¯æŒä½¿ç”¨å¤šå¹´ã€‚æˆ‘è‡ªå·±ä¹Ÿå¸¸ç”¨ï¼Œä¸€å®šè¦çœ‹çœ‹ç”¨ç”¨ï¼</p><p><code>Arthas</code>æ˜¯é€šè¿‡<code>Agent</code>æ–¹å¼æ¥è¿æ¥è¿è¡Œçš„<code>Java</code>è¿›ç¨‹ã€ä¸»è¦é€šè¿‡äº¤äº’å¼æ¥å®ŒæˆåŠŸèƒ½ï¼Œä¸ä¹‹å¯¹åº”çš„è„šæœ¬æ–¹å¼ä¹Ÿæœ‰å…¶ä¼˜åŠ¿ï¼Œå¦‚ï¼š</p><ol><li>å¯ä»¥åœ¨è¿›ç¨‹ä¸èƒ½å¯åŠ¨çš„æƒ…å†µä¸‹å®Œæˆè¯Šæ–­ï¼ˆå¦‚ä¾èµ–ä¸­çš„é‡å¤ç±»åˆ†æã€<code>ClassPath</code>ä¸Šçš„èµ„æºæˆ–ç±»æŸ¥æ‰¾ï¼‰</li><li>å¼€é”€å°‘ï¼›ç®€å•å°‘ä¾èµ–ï¼ˆå°±çº¯æ–‡æœ¬çš„ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼‰</li><li>æ–¹ä¾¿ä¸ï¼ˆå·²æœ‰çš„ï¼‰å·¥å…·ï¼ˆå¦‚<code>awk</code>ã€<code>sed</code>ã€<code>cron</code>ï¼‰ã€æµç¨‹æˆ–è®¾æ–½é›†æˆï¼Œè¿›ä¸€æ­¥ç¼–ç¨‹/è‡ªåŠ¨åŒ–</li></ol><p>è¯·æŒ‰éœ€æŒ‰åœºæ™¯é€‰ç”¨ã€‚</p><hr><p><a id="beer-show-busy-java-threadssh"></a><br><a id="beer-show-busy-java-threads"></a></p><h2 id="ğŸº-show-busy-java-threads"><a href="#ğŸº-show-busy-java-threads" class="headerlink" title="ğŸº show-busy-java-threads"></a>ğŸº <a href="../bin/show-busy-java-threads">show-busy-java-threads</a></h2><p>ç”¨äºå¿«é€Ÿæ’æŸ¥<code>Java</code>çš„<code>CPU</code>æ€§èƒ½é—®é¢˜(<code>top us</code>å€¼è¿‡é«˜)ï¼Œè‡ªåŠ¨æŸ¥å‡ºè¿è¡Œçš„<code>Java</code>è¿›ç¨‹ä¸­æ¶ˆè€—<code>CPU</code>å¤šçš„çº¿ç¨‹ï¼Œå¹¶æ‰“å°å‡ºå…¶çº¿ç¨‹æ ˆï¼Œä»è€Œç¡®å®šå¯¼è‡´æ€§èƒ½é—®é¢˜çš„æ–¹æ³•è°ƒç”¨ã€‚<br>ç›®å‰åªæ”¯æŒ<code>Linux</code>ã€‚åŸå› æ˜¯<code>Mac</code>ã€<code>Windows</code>çš„<code>ps</code>å‘½ä»¤ä¸æ”¯æŒåˆ—å‡ºè¿›ç¨‹çš„çº¿ç¨‹<code>id</code>ï¼Œæ›´å¤šä¿¡æ¯å‚è§<a href="https://github.com/oldratlee/useful-scripts/issues/33" target="_blank" rel="noopener">#33</a>ï¼Œæ¬¢è¿æä¾›è§£æ³•ã€‚</p><p>PSï¼Œå¦‚ä½•æ“ä½œå¯ä»¥å‚è§<a href="http://weibo.com/bluedavy" target="_blank" rel="noopener">@bluedavy</a>çš„<a href="https://book.douban.com/subject/4848587/" target="_blank" rel="noopener">ã€Šåˆ†å¸ƒå¼Javaåº”ç”¨ã€‹</a>çš„ã€5.1.1 <code>CPU</code>æ¶ˆè€—åˆ†æã€‘ä¸€èŠ‚ï¼Œè¯´å¾—å¾ˆè¯¦ç»†ï¼š</p><ol><li><code>top</code>å‘½ä»¤æ‰¾å‡ºæ¶ˆè€—<code>CPU</code>é«˜çš„<code>Java</code>è¿›ç¨‹åŠå…¶çº¿ç¨‹<code>id</code>ï¼š<ol><li>å¼€å¯çº¿ç¨‹æ˜¾ç¤ºæ¨¡å¼ï¼ˆ<code>top -H</code>ï¼Œæˆ–æ˜¯æ‰“å¼€<code>top</code>åæŒ‰<code>H</code>ï¼‰</li><li>æŒ‰<code>CPU</code>ä½¿ç”¨ç‡æ’åºï¼ˆ<code>top</code>ç¼ºçœæ˜¯æŒ‰<code>CPU</code>ä½¿ç”¨é™åºï¼Œå·²ç»åˆè¦æ±‚ï¼›æ‰“å¼€<code>top</code>åæŒ‰<code>P</code>å¯ä»¥æ˜¾å¼æŒ‡å®šæŒ‰<code>CPU</code>ä½¿ç”¨é™åºï¼‰</li><li>è®°ä¸‹<code>Java</code>è¿›ç¨‹<code>id</code>åŠå…¶<code>CPU</code>é«˜çš„çº¿ç¨‹<code>id</code></li></ol></li><li>æŸ¥çœ‹æ¶ˆè€—<code>CPU</code>é«˜çš„çº¿ç¨‹æ ˆï¼š<ol><li>ç”¨è¿›ç¨‹<code>id</code>ä½œä¸ºå‚æ•°ï¼Œ<code>jstack</code>å‡ºæœ‰é—®é¢˜çš„<code>Java</code>è¿›ç¨‹</li><li>æ‰‹åŠ¨è½¬æ¢çº¿ç¨‹<code>id</code>æˆåå…­è¿›åˆ¶ï¼ˆå¯ä»¥ç”¨<code>printf %x 1234</code>ï¼‰</li><li>åœ¨<code>jstack</code>è¾“å‡ºä¸­æŸ¥æ‰¾åå…­è¿›åˆ¶çš„çº¿ç¨‹<code>id</code>ï¼ˆå¯ä»¥ç”¨<code>vim</code>çš„æŸ¥æ‰¾åŠŸèƒ½<code>/0x1234</code>ï¼Œæˆ–æ˜¯<code>grep 0x1234 -A 20</code>ï¼‰</li></ol></li><li>æŸ¥çœ‹å¯¹åº”çš„çº¿ç¨‹æ ˆï¼Œåˆ†æé—®é¢˜</li></ol><p>æŸ¥é—®é¢˜æ—¶ï¼Œä¼šè¦å¤šæ¬¡ä¸Šé¢çš„æ“ä½œä»¥åˆ†æç¡®å®šé—®é¢˜ï¼Œè¿™ä¸ªè¿‡ç¨‹<strong>å¤ªç¹çå¤ªæ…¢äº†</strong>ã€‚</p><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">show-busy-java-threads</span><br><span class="line"><span class="comment"># ä»æ‰€æœ‰è¿è¡Œçš„Javaè¿›ç¨‹ä¸­æ‰¾å‡ºæœ€æ¶ˆè€—CPUçš„çº¿ç¨‹ï¼ˆç¼ºçœ5ä¸ªï¼‰ï¼Œæ‰“å°å‡ºå…¶çº¿ç¨‹æ ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼ºçœä¼šè‡ªåŠ¨ä»æ‰€æœ‰çš„Javaè¿›ç¨‹ä¸­æ‰¾å‡ºæœ€æ¶ˆè€—CPUçš„çº¿ç¨‹ï¼Œè¿™æ ·ç”¨æ›´æ–¹ä¾¿</span></span><br><span class="line"><span class="comment"># å½“ç„¶ä½ å¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¦åˆ†æçš„Javaè¿›ç¨‹Idï¼Œä»¥ä¿è¯åªä¼šæ˜¾ç¤ºä½ å…³å¿ƒçš„é‚£ä¸ªJavaè¿›ç¨‹çš„ä¿¡æ¯</span></span><br><span class="line">show-busy-java-threads -p <æŒ‡å®šçš„Javaè¿›ç¨‹Id></span><br><span class="line"></span><br><span class="line">show-busy-java-threads -c <è¦æ˜¾ç¤ºçš„çº¿ç¨‹æ ˆæ•°></span><br><span class="line"></span><br><span class="line">show-busy-java-threads <é‡å¤æ‰§è¡Œçš„é—´éš”ç§’æ•°> [<é‡å¤æ‰§è¡Œçš„æ¬¡æ•°>]</span><br><span class="line"><span class="comment"># å¤šæ¬¡æ‰§è¡Œï¼›è¿™2ä¸ªå‚æ•°çš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼vmstatå‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">show-busy-java-threads -a <è¿è¡Œè¾“å‡ºçš„è®°å½•åˆ°çš„æ–‡ä»¶></span><br><span class="line"><span class="comment"># è®°å½•åˆ°æ–‡ä»¶ä»¥æ–¹ä¾¿å›æº¯æŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line">show-busy-java-threads -S <å­˜å‚¨jstackè¾“å‡ºæ–‡ä»¶çš„ç›®å½•></span><br><span class="line"><span class="comment"># æŒ‡å®šjstackè¾“å‡ºæ–‡ä»¶çš„å­˜å‚¨ç›®å½•ï¼Œæ–¹ä¾¿è®°å½•ä»¥åç»­åˆ†æ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##############################</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment">##############################</span></span><br><span class="line"><span class="comment"># å¦‚æœJavaè¿›ç¨‹çš„ç”¨æˆ· ä¸ æ‰§è¡Œè„šæœ¬çš„å½“å‰ç”¨æˆ· ä¸åŒï¼Œåˆ™jstackä¸äº†è¿™ä¸ªJavaè¿›ç¨‹</span></span><br><span class="line"><span class="comment"># ä¸ºäº†èƒ½åˆ‡æ¢åˆ°Javaè¿›ç¨‹çš„ç”¨æˆ·ï¼Œéœ€è¦åŠ sudoæ¥æ‰§è¡Œï¼Œå³å¯ä»¥è§£å†³ï¼š</span></span><br><span class="line">sudo show-busy-java-threads</span><br><span class="line"></span><br><span class="line">show-busy-java-threads -s <æŒ‡å®šjstackå‘½ä»¤çš„å…¨è·¯å¾„></span><br><span class="line"><span class="comment"># å¯¹äºsudoæ–¹å¼çš„è¿è¡Œï¼ŒJAVA_HOMEç¯å¢ƒå˜é‡ä¸èƒ½ä¼ é€’ç»™rootï¼Œ</span></span><br><span class="line"><span class="comment"># è€Œrootç”¨æˆ·å¾€å¾€æ²¡æœ‰é…ç½®JAVA_HOMEä¸”ä¸æ–¹ä¾¿é…ç½®ï¼Œ</span></span><br><span class="line"><span class="comment"># æ˜¾å¼æŒ‡å®šjstackå‘½ä»¤çš„è·¯å¾„å°±åè€Œæ˜¾å¾—æ›´æ–¹ä¾¿äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -mé€‰é¡¹ï¼šæ‰§è¡Œjstackå‘½ä»¤æ—¶åŠ ä¸Š-mé€‰é¡¹ï¼Œæ˜¾ç¤ºä¸ŠNativeçš„æ ˆå¸§ï¼Œä¸€èˆ¬åº”ç”¨æ’æŸ¥ä¸éœ€è¦ä½¿ç”¨</span></span><br><span class="line">show-busy-java-threads -m</span><br><span class="line"><span class="comment"># -Fé€‰é¡¹ï¼šæ‰§è¡Œjstackå‘½ä»¤æ—¶åŠ ä¸Š -F é€‰é¡¹ï¼ˆå¦‚æœç›´æ¥jstackæ— å“åº”æ—¶ï¼Œç”¨äºå¼ºåˆ¶jstackï¼‰ï¼Œä¸€èˆ¬æƒ…å†µä¸éœ€è¦ä½¿ç”¨</span></span><br><span class="line">show-busy-java-threads -F</span><br><span class="line"><span class="comment"># -lé€‰é¡¹ï¼šæ‰§è¡Œjstackå‘½ä»¤æ—¶åŠ ä¸Š -l é€‰é¡¹ï¼Œæ˜¾ç¤ºä¸Šæ›´å¤šç›¸å…³é”çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µä¸éœ€è¦ä½¿ç”¨</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šå’Œ -m -F é€‰é¡¹ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šå¤§å¤§å¢åŠ jstackæ“ä½œçš„è€—æ—¶</span></span><br><span class="line">show-busy-java-threads -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">$ show-busy-java-threads -h</span><br><span class="line">Usage: show-busy-java-threads [OPTION]... [delay [count]]</span><br><span class="line">Find out the highest cpu consumed threads of java processes,</span><br><span class="line">and <span class="built_in">print</span> the stack of these threads.</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line">  show-busy-java-threads       <span class="comment"># show busy java threads info</span></span><br><span class="line">  show-busy-java-threads 1     <span class="comment"># update every 1 second, (stop by eg: CTRL+C)</span></span><br><span class="line">  show-busy-java-threads 3 10  <span class="comment"># update every 3 seconds, update 10 times</span></span><br><span class="line"></span><br><span class="line">Output control:</span><br><span class="line">  -p, --pid <java pid>      find out the highest cpu consumed threads from</java></span><br><span class="line">                            the specified java process.</span><br><span class="line">                            default from all java process.</span><br><span class="line">  -c, --count <num>         <span class="built_in">set</span> the thread count to show, default is 5.</num></span><br><span class="line">                            <span class="built_in">set</span> count 0 to show all threads.</span><br><span class="line">  -a, --append-file <file>  specifies the file to append output as <span class="built_in">log</span>.</file></span><br><span class="line">  -S, --store-dir <dir>     specifies the directory <span class="keyword">for</span> storing<br><span class="line">                            the intermediate files, and keep files.</span><br><span class="line">                            default store intermediate files at tmp dir,</span><br><span class="line">                            and auto remove after run. use this option to keep</span><br><span class="line">                            files so as to review jstack/top/ps output later.</span><br><span class="line">  delay                     the delay between updates <span class="keyword">in</span> seconds.</span><br><span class="line">  count                     the number of updates.</span><br><span class="line">                            delay/count arguments imitates the style of</span><br><span class="line">                            vmstat <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">jstack control:</span><br><span class="line">  -s, --jstack-path <path>  specifies the path of jstack <span class="built_in">command</span>.</path></span><br><span class="line">  -F, --force               <span class="built_in">set</span> jstack to force a thread dump. use when jstack</span><br><span class="line">                            does not respond (process is hung).</span><br><span class="line">  -m, --mix-native-frames   <span class="built_in">set</span> jstack to <span class="built_in">print</span> both java and native frames</span><br><span class="line">                            (mixed mode).</span><br><span class="line">  -l, --lock-info           <span class="built_in">set</span> jstack with long listing.</span><br><span class="line">                            prints additional information about locks.</span><br><span class="line"></span><br><span class="line">CPU usage calculation control:</span><br><span class="line">  -d, --top-delay           specifies the delay between top samples.</span><br><span class="line">                            default is 0.5 (second). get thread cpu percentage</span><br><span class="line">                            during this delay interval.</span><br><span class="line">                            more info see top -d option. eg: -d 1 (1 second).</span><br><span class="line">  -P, --use-ps              use ps <span class="built_in">command</span> to find busy thread(cpu usage)</span><br><span class="line">                            instead of top <span class="built_in">command</span>.</span><br><span class="line">                            default use top <span class="built_in">command</span>, because cpu usage of</span><br><span class="line">                            ps <span class="built_in">command</span> is expressed as the percentage of</span><br><span class="line">                            time spent running during the *entire lifetime*</span><br><span class="line">                            of a process, this is not ideal <span class="keyword">in</span> general.</span><br><span class="line"></span><br><span class="line">Miscellaneous:</span><br><span class="line">  -h, --<span class="built_in">help</span>                display this <span class="built_in">help</span> and <span class="built_in">exit</span>.</span><br></dir></span></pre></td></tr></tbody></table></figure></div><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ show-busy-java-threads</span><br><span class="line">[1] Busy(57.0%) thread(23355/0x5b3b) stack of java process(23269) under user(admin):</span><br><span class="line"><span class="string">"pool-1-thread-1"</span> prio=10 tid=0x000000005b5c5000 nid=0x5b3b runnable [0x000000004062c000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">    at java.text.DateFormat.format(DateFormat.java:316)</span><br><span class="line">    at com.xxx.foo.services.common.DateFormatUtil.format(DateFormatUtil.java:41)</span><br><span class="line">    at com.xxx.foo.shared.monitor.schedule.AppMonitorDataAvgScheduler.run(AppMonitorDataAvgScheduler.java:127)</span><br><span class="line">    at com.xxx.foo.services.common.utils.AliTimer<span class="variable">$2</span>.run(AliTimer.java:128)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.runTask(ThreadPoolExecutor.java:886)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.run(ThreadPoolExecutor.java:908)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:662)</span><br><span class="line"></span><br><span class="line">[2] Busy(26.1%) thread(24018/0x5dd2) stack of java process(23269) under user(admin):</span><br><span class="line"><span class="string">"pool-1-thread-2"</span> prio=10 tid=0x000000005a968800 nid=0x5dd2 runnable [0x00000000420e9000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">    at java.util.Arrays.copyOf(Arrays.java:2882)</span><br><span class="line">    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)</span><br><span class="line">    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:572)</span><br><span class="line">    at java.lang.StringBuffer.append(StringBuffer.java:320)</span><br><span class="line">    - locked <0x00000007908d0030> (a java.lang.StringBuffer)</span><br><span class="line">    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:890)</span><br><span class="line">    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:869)</span><br><span class="line">    at java.text.DateFormat.format(DateFormat.java:316)</span><br><span class="line">    at com.xxx.foo.services.common.DateFormatUtil.format(DateFormatUtil.java:41)</span><br><span class="line">    at com.xxx.foo.shared.monitor.schedule.AppMonitorDataAvgScheduler.run(AppMonitorDataAvgScheduler.java:126)</span><br><span class="line">    at com.xxx.foo.services.common.utils.AliTimer<span class="variable">$2</span>.run(AliTimer.java:128)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.runTask(ThreadPoolExecutor.java:886)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.run(ThreadPoolExecutor.java:908)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:662)</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸Šé¢çš„çº¿ç¨‹æ ˆå¯ä»¥çœ‹å‡ºï¼Œ<code>CPU</code>æ¶ˆè€—æœ€é«˜çš„2ä¸ªçº¿ç¨‹éƒ½åœ¨æ‰§è¡Œ<code>java.text.DateFormat.format</code>ï¼Œä¸šåŠ¡ä»£ç å¯¹åº”çš„æ–¹æ³•æ˜¯<code>shared.monitor.schedule.AppMonitorDataAvgScheduler.run</code>ã€‚å¯ä»¥åŸºæœ¬ç¡®å®šï¼š</p><ul><li><code>AppMonitorDataAvgScheduler.run</code>è°ƒç”¨<code>DateFormat.format</code>æ¬¡æ•°æ¯”è¾ƒé¢‘ç¹ã€‚</li><li><code>DateFormat.format</code>æ¯”è¾ƒæ…¢ã€‚ï¼ˆè¿™ä¸ªå¯ä»¥ç”±<code>DateFormat.format</code>çš„å®ç°ç¡®å®šã€‚ï¼‰</li></ul><p>å¤šæ‰§è¡Œå‡ æ¬¡<code>show-busy-java-threads</code>ï¼Œå¦‚æœä¸Šé¢æƒ…å†µé«˜æ¦‚ç‡å‡ºç°ï¼Œåˆ™å¯ä»¥ç¡®å®šä¸Šé¢çš„åˆ¤å®šã€‚<br>å› ä¸ºè°ƒç”¨è¶Šå°‘ä»£ç æ‰§è¡Œè¶Šå¿«ï¼Œåˆ™å‡ºç°åœ¨çº¿ç¨‹æ ˆçš„æ¦‚ç‡å°±è¶Šä½ã€‚<br>è„šæœ¬æœ‰è‡ªåŠ¨å¤šæ¬¡æ‰§è¡Œçš„åŠŸèƒ½ï¼ŒæŒ‡å®š é‡å¤æ‰§è¡Œçš„é—´éš”ç§’æ•°/é‡å¤æ‰§è¡Œçš„æ¬¡æ•° å‚æ•°ã€‚</p><p>åˆ†æ<code>shared.monitor.schedule.AppMonitorDataAvgScheduler.run</code>å®ç°é€»è¾‘å’Œè°ƒç”¨æ–¹å¼ï¼Œä»¥ä¼˜åŒ–å®ç°è§£å†³é—®é¢˜ã€‚</p><p>æ‰¾å‡º<code>Java Lib</code>ï¼ˆ<code>Java</code>åº“ï¼Œå³<code>Jar</code>æ–‡ä»¶ï¼‰æˆ–<code>Class</code>ç›®å½•ï¼ˆç±»ç›®å½•ï¼‰ä¸­çš„é‡å¤ç±»ã€‚<br>å…¨ç³»ç»Ÿæ”¯æŒï¼ˆ<code>Python</code>å®ç°ï¼Œå®‰è£…<code>Python</code>å³å¯ï¼‰ï¼Œå¦‚<code>Linux</code>ã€<code>Mac</code>ã€<code>Windows</code>ã€‚</p><p><code>Java</code>å¼€å‘çš„ä¸€ä¸ªéº»çƒ¦çš„é—®é¢˜æ˜¯<code>Jar</code>å†²çªï¼ˆå³å¤šä¸ªç‰ˆæœ¬çš„<code>Jar</code>ï¼‰ï¼Œæˆ–è€…è¯´é‡å¤ç±»ã€‚ä¼šå‡º<code>NoSuchMethod</code>ç­‰çš„é—®é¢˜ï¼Œè¿˜ä¸è§å¾—å½“æ—¶å‡ºé—®é¢˜ã€‚æ‰¾å‡ºæœ‰é‡å¤ç±»çš„<code>Jar</code>ï¼Œå¯ä»¥é˜²æ‚£æœªç„¶ã€‚</p><h3 id="ç”¨æ³•-1"><a href="#ç”¨æ³•-1" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><ul><li>é€šè¿‡è„šæœ¬å‚æ•°æŒ‡å®š<code>Libs</code>ç›®å½•ï¼ŒæŸ¥æ‰¾ç›®å½•ä¸‹<code>Jar</code>æ–‡ä»¶ï¼Œæ”¶é›†<code>Jar</code>æ–‡ä»¶ä¸­<code>Class</code>æ–‡ä»¶ä»¥åˆ†æé‡å¤ç±»ã€‚å¯ä»¥æŒ‡å®šå¤šä¸ª<code>Libs</code>ç›®å½•ã€‚<br>  æ³¨æ„ï¼Œåªä¼šæŸ¥æ‰¾è¿™ä¸ªç›®å½•ä¸‹<code>Jar</code>æ–‡ä»¶ï¼Œä¸ä¼šæŸ¥æ‰¾å­ç›®å½•ä¸‹<code>Jar</code>æ–‡ä»¶ã€‚å› ä¸º<code>Libs</code>ç›®å½•ä¸€èˆ¬ä¸ä¼šç”¨å­ç›®å½•å†æ”¾<code>Jar</code>ï¼Œè¿™æ ·ä¹Ÿé¿å…æŠŠå»æŸ¥æ‰¾ä¸æœŸæœ›<code>Jar</code>ã€‚</li><li>é€šè¿‡<code>-c</code>é€‰é¡¹æŒ‡å®š<code>Class</code>ç›®å½•ï¼Œç›´æ¥æ”¶é›†è¿™ä¸ªç›®å½•ä¸‹çš„<code>Class</code>æ–‡ä»¶ä»¥åˆ†æé‡å¤ç±»ã€‚å¯ä»¥æŒ‡å®šå¤šä¸ª<code>Class</code>ç›®å½•ã€‚</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰€æœ‰Jarä¸­çš„é‡å¤ç±»</span></span><br><span class="line">show-duplicate-java-classes</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å¤šä¸ªæŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰Jarä¸­çš„é‡å¤ç±»</span></span><br><span class="line">show-duplicate-java-classes path/to/lib_dir1 /path/to/lib_dir2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å¤šä¸ªæŒ‡å®šClassç›®å½•ä¸‹çš„é‡å¤ç±»ã€‚ Classç›®å½• é€šè¿‡ -c é€‰é¡¹æŒ‡å®š</span></span><br><span class="line">show-duplicate-java-classes -c path/to/class_dir1 -c /path/to/class_dir2</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾æŒ‡å®šClassç›®å½•å’ŒæŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰Jarä¸­çš„é‡å¤ç±»çš„Jar</span></span><br><span class="line">show-duplicate-java-classes path/to/lib_dir1 /path/to/lib_dir2 -c path/to/class_dir1 -c path/to/class_dir2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">$ show-duplicate-java-classes -h</span><br><span class="line">Usage: show-duplicate-java-classes [-c class-dir1 [-c class-dir2] ...] [lib-dir1|jar-file1 [lib-dir2|jar-file2] ...]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -h, --<span class="built_in">help</span>            show this <span class="built_in">help</span> message and <span class="built_in">exit</span></span><br><span class="line">  -c CLASS_DIRS, --class-dir=CLASS_DIRS</span><br><span class="line">                        add class dir</span><br></pre></td></tr></tbody></table></figure></div><h4 id="JDKå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜"><a href="#JDKå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜" class="headerlink" title="JDKå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜"></a><code>JDK</code>å¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜</h4><p>ä»¥<code>Maven</code>ä½œä¸ºæ„å»ºå·¥ç¨‹ç¤ºæ„è¿‡ç¨‹ã€‚</p><h5 id="å¯¹äºä¸€èˆ¬çš„å·¥ç¨‹"><a href="#å¯¹äºä¸€èˆ¬çš„å·¥ç¨‹" class="headerlink" title="å¯¹äºä¸€èˆ¬çš„å·¥ç¨‹"></a>å¯¹äºä¸€èˆ¬çš„å·¥ç¨‹</h5><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨é¡¹ç›®æ¨¡å—ç›®å½•ä¸‹æ‰§è¡Œï¼Œæ‹·è´ä¾èµ–Jaråˆ°ç›®å½•target/dependencyä¸‹</span></span><br><span class="line">$ mvn dependency:copy-dependencies -DincludeScope=runtime</span><br><span class="line">...</span><br><span class="line"><span class="comment"># æ£€æŸ¥é‡å¤ç±»</span></span><br><span class="line">$ show-duplicate-java-classes target/dependency</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure></div><h5 id="å¯¹äºWebå·¥ç¨‹"><a href="#å¯¹äºWebå·¥ç¨‹" class="headerlink" title="å¯¹äºWebå·¥ç¨‹"></a>å¯¹äº<code>Web</code>å·¥ç¨‹</h5><p>å¯¹äº<code>Web</code>å·¥ç¨‹ï¼Œå³<code>war</code> <code>maven</code>æ¨¡å—ï¼Œä¼šæ‰“åŒ…ç”Ÿæˆ<code>war</code>æ–‡ä»¶ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨waræ¨¡å—ç›®å½•ä¸‹æ‰§è¡Œï¼Œç”Ÿæˆwaræ–‡ä»¶</span></span><br><span class="line">$ mvn install</span><br><span class="line">...</span><br><span class="line"><span class="comment"># è§£å‹waræ–‡ä»¶ï¼Œwaræ–‡ä»¶ä¸­åŒ…å«äº†åº”ç”¨çš„ä¾èµ–çš„Jaræ–‡ä»¶</span></span><br><span class="line">$ unzip target/*.war -d target/war</span><br><span class="line">...</span><br><span class="line"><span class="comment"># æ£€æŸ¥é‡å¤ç±»</span></span><br><span class="line">$ show-duplicate-java-classes -c target/war/WEB-INF/classes target/war/WEB-INF/lib</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure></div><h4 id="Androidå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜"><a href="#Androidå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜" class="headerlink" title="Androidå¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜"></a><code>Android</code>å¼€å‘åœºæ™¯ä½¿ç”¨è¯´æ˜</h4><p><code>Android</code>å¼€å‘ï¼Œæœ‰é‡å¤ç±»åœ¨ç¼–è¯‘æ‰“åŒ…æ—¶ä¼šæŠ¥<code>[Dex Loader] Unable to execute dex: Multiple dex files define Lorg/foo/xxx/Yyy</code>ã€‚</p><p>ä½†åªä¼šç»™å‡ºä¸€ä¸ªé‡å¤ç±»åï¼Œå¦‚æœé‡å¤ç±»æ¯”è¾ƒå¤šæ—¶ï¼Œä¸Šé¢æ‰“åŒ…/æŠ¥é”™/æ’æŸ¥ä¼šè¦è¿›è¡Œå¤šæ¬¡ï¼Œè€Œ<code>Android</code>çš„æ‰“åŒ…æ¯”è¾ƒè´¹æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ï¼Œå¸Œæœ›å¯ä»¥ä¸€æ¬¡æŠŠæ‰€æœ‰é‡å¤ç±»éƒ½åˆ—å‡ºæ¥ï¼Œä¸€èµ·æ’æŸ¥æ‰ã€‚</p><p>ä»¥<code>Gradle</code>ä½œä¸ºæ„å»ºå·¥ç¨‹ç¤ºæ„è¿‡ç¨‹ã€‚</p><p>åœ¨<code>App</code>çš„<code>build.gradle</code>ä¸­æ·»åŠ æ‹·è´åº“åˆ°ç›®å½•<code>build/dependencies</code>ä¸‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">task <span class="title">copyDependencies</span><span class="params">(type: Copy)</span> </span>{</span><br><span class="line">    def dest = <span class="keyword">new</span> File(buildDir, <span class="string">"dependencies"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// clean dir</span></span><br><span class="line">    dest.deleteDir()</span><br><span class="line">    dest.mkdirs()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill dir with dependencies</span></span><br><span class="line">    from configurations.compile into dest</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sh</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹·è´ä¾èµ–</span></span><br><span class="line">$ ./gradlew app:copyDependencies</span><br><span class="line">...</span><br><span class="line"><span class="comment"># æ£€æŸ¥é‡å¤ç±»</span></span><br><span class="line">$ show-duplicate-java-classes app/build/dependencies</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure></div><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">$ show-duplicate-java-classes WEB-INF/lib</span><br><span class="line">COOL! No duplicate classes found!</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">class paths to find:</span><br><span class="line">================================================================================</span><br><span class="line">1  : WEB-INF/lib/sourceforge.spring.modules.context-2.5.6.SEC02.jar</span><br><span class="line">2  : WEB-INF/lib/misc.htmlparser-0.0.0.jar</span><br><span class="line">3  : WEB-INF/lib/normandy.client-1.0.2.jar</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ show-duplicate-java-classes -c WEB-INF/classes WEB-INF/lib</span><br><span class="line">Found duplicate classes <span class="keyword">in</span> below class path:</span><br><span class="line">1  (293@2): WEB-INF/lib/sourceforge.spring-2.5.6.SEC02.jar WEB-INF/lib/sourceforge.spring.modules.orm-2.5.6.SEC02.jar</span><br><span class="line">2  (2@3): WEB-INF/lib/servlet-api-3.0-alpha-1.jar WEB-INF/lib/jsp-api-2.1-rev-1.jar WEB-INF/lib/jstl-api-1.2-rev-1.jar</span><br><span class="line">3  (104@2): WEB-INF/lib/commons-io-2.2.jar WEB-INF/lib/jakarta.commons.io-2.0.jar</span><br><span class="line">4  (6@3): WEB-INF/lib/jakarta.commons.logging-1.1.jar WEB-INF/lib/commons-logging-1.1.1.jar WEB-INF/lib/org.slf4j.jcl104-over-slf4j-1.5.6.jar</span><br><span class="line">5  (344@2): WEB-INF/lib/sourceforge.spring-2.5.6.SEC02.jar WEB-INF/lib/sourceforge.spring.modules.context-2.5.6.SEC02.jar</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">Duplicate classes detail info:</span><br><span class="line">================================================================================</span><br><span class="line">1  (293@2): WEB-INF/lib/sourceforge.spring-2.5.6.SEC02.jar WEB-INF/lib/sourceforge.spring.modules.orm-2.5.6.SEC02.jar</span><br><span class="line">    1   org/springframework/orm/toplink/TopLinkTemplate<span class="variable">$13</span>.class</span><br><span class="line">    2   org/springframework/orm/hibernate3/HibernateTemplate<span class="variable">$24</span>.class</span><br><span class="line">    3   org/springframework/orm/jpa/vendor/HibernateJpaDialect.class</span><br><span class="line">    4   org/springframework/orm/hibernate3/TypeDefinitionBean.class</span><br><span class="line">    5   org/springframework/orm/hibernate3/SessionHolder.class</span><br><span class="line">    ...</span><br><span class="line">2  (2@3): WEB-INF/lib/servlet-api-3.0-alpha-1.jar WEB-INF/lib/jsp-api-2.1-rev-1.jar WEB-INF/lib/jstl-api-1.2-rev-1.jar</span><br><span class="line">    1   javax/servlet/ServletException.class</span><br><span class="line">    2   javax/servlet/ServletContext.class</span><br><span class="line">3  (104@2): WEB-INF/lib/commons-io-2.2.jar WEB-INF/lib/jakarta.commons.io-2.0.jar</span><br><span class="line">    1   org/apache/commons/io/input/ProxyReader.class</span><br><span class="line">    2   org/apache/commons/io/output/FileWriterWithEncoding.class</span><br><span class="line">    3   org/apache/commons/io/output/TaggedOutputStream.class</span><br><span class="line">    4   org/apache/commons/io/filefilter/NotFileFilter.class</span><br><span class="line">    5   org/apache/commons/io/filefilter/TrueFileFilter.class</span><br><span class="line">    ...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">class paths to find:</span><br><span class="line">================================================================================</span><br><span class="line">1  : WEB-INF/lib/sourceforge.spring.modules.context-2.5.6.SEC02.jar</span><br><span class="line">2  : WEB-INF/lib/misc.htmlparser-0.0.0.jar</span><br><span class="line">3  : WEB-INF/lib/normandy.client-1.0.2.jar</span><br><span class="line">4  : WEB-INF/lib/xml.xmlgraphics__batik-css-1.7.jar-1.7.jar</span><br><span class="line">5  : WEB-INF/lib/jakarta.ecs-1.4.2.jar</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure></div><p>åœ¨å½“å‰ç›®å½•ä¸‹æ‰€æœ‰<code>jar</code>æ–‡ä»¶é‡Œï¼ŒæŸ¥æ‰¾ç±»æˆ–èµ„æºæ–‡ä»¶ã€‚<br>æ”¯æŒ<code>Linux</code>ã€<code>Mac</code>ã€<code>Windows</code>ï¼ˆ<code>cygwin</code>ã€<code>MSSYS</code>ï¼‰ã€‚</p><h3 id="ç”¨æ³•-2"><a href="#ç”¨æ³•-2" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å½“å‰ç›®å½•ä¸‹æ‰€æœ‰`jar`æ–‡ä»¶é‡Œï¼ŒæŸ¥æ‰¾ç±»æˆ–èµ„æºæ–‡ä»¶ã€‚</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.xml$'</span></span><br><span class="line">find-in-jars log4j\\.xml$ <span class="comment"># å’Œä¸Šé¢å‘½ä»¤ä¸€æ ·ï¼ŒShellè½¬ä¹‰çš„ä¸åŒå†™æ³•è€Œå·²</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.(properties|xml)$'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -dé€‰é¡¹ æŒ‡å®š æŸ¥æ‰¾ç›®å½•ï¼ˆè¦†ç›–ç¼ºçœçš„å½“å‰ç›®å½•ï¼‰</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties$'</span> -d /path/to/find/directory</span><br><span class="line"><span class="comment"># æ”¯æŒå¤šä¸ªæŸ¥æ‰¾ç›®å½•ï¼Œå¤šæ¬¡æŒ‡å®šè¿™ä¸ªé€‰é¡¹å³å¯</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -d /path/to/find/directory1 -d /path/to/find/directory2</span><br><span class="line"></span><br><span class="line"><span class="comment"># -eé€‰é¡¹ æŒ‡å®š æŸ¥æ‰¾`zip`æ–‡ä»¶çš„æ‰©å±•åï¼Œç¼ºçœæ˜¯`jar`</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -e zip</span><br><span class="line"><span class="comment"># æ”¯æŒå¤šç§æŸ¥æ‰¾æ‰©å±•åï¼Œå¤šæ¬¡æŒ‡å®šè¿™ä¸ªé€‰é¡¹å³å¯</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -e jar -e zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># -aé€‰é¡¹ æŒ‡å®š æŸ¥æ‰¾ç»“æœä¸­çš„Jaræ–‡ä»¶ä½¿ç”¨ç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="comment"># åˆ†äº«ç»™åˆ«äººæ—¶ï¼ŒJaræ–‡ä»¶è·¯å¾„æ˜¯å®Œæ•´çš„ï¼Œæ–¹ä¾¿åˆ«äººæ‰¾åˆ°æ–‡ä»¶</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># -sé€‰é¡¹ æŒ‡å®š æŸ¥æ‰¾ç»“æœä¸­çš„Jaræ–‡ä»¶å’ŒJaræ–‡ä»¶é‡Œçš„æŸ¥æ‰¾Entryé—´åˆ†éš”ç¬¦ï¼Œç¼ºçœæ˜¯ã€!ã€</span></span><br><span class="line"><span class="comment"># æ–¹ä¾¿ä½ å–œæ¬¢çš„äººçœ¼æŸ¥çœ‹ï¼Œæˆ–æ˜¯ä¸å·¥å…·è„šæœ¬å¦‚`awk`çš„å¤„ç†</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -s <span class="string">' <-> '</span></span><br><span class="line">find-in-jars <span class="string">'log4j\.properties'</span> -s <span class="string">' '</span> | awk <span class="string">'{print $2}'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">$ find-in-jars -h</span><br><span class="line">Usage: find-in-jars [OPTION]... PATTERN</span><br><span class="line">Find files <span class="keyword">in</span> the jar files under specified directory,</span><br><span class="line">search jar files recursively(include subdirectory).</span><br><span class="line">The pattern default is *extended* regex.</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line">  find-in-jars <span class="string">'log4j\.properties'</span></span><br><span class="line">  <span class="comment"># search file log4j.properties/log4j.xml at zip root</span></span><br><span class="line">  find-in-jars <span class="string">'^log4j\.(properties|xml)$'</span></span><br><span class="line">  find-in-jars <span class="string">'log4j\.properties$'</span> -d /path/to/find/directory</span><br><span class="line">  find-in-jars <span class="string">'\.properties$'</span> -d /path/to/find/dir1 -d path/to/find/dir2</span><br><span class="line">  find-in-jars <span class="string">'Service\.class$'</span> -e jar -e zip</span><br><span class="line">  find-in-jars <span class="string">'Mon[^$/]*Service\.class$'</span> -s <span class="string">' <-> '</span></span><br><span class="line"></span><br><span class="line">Find control:</span><br><span class="line">  -d, --dir              the directory that find jar files.</span><br><span class="line">                         default is current directory. this option can specify</span><br><span class="line">                         multiply <span class="built_in">times</span> to find <span class="keyword">in</span> multiply directories.</span><br><span class="line">  -e, --extension        <span class="built_in">set</span> find file extension, default is jar. this option</span><br><span class="line">                         can specify multiply <span class="built_in">times</span> to find multiply extension.</span><br><span class="line">  -E, --extended-regexp  PATTERN is an extended regular expression (*default*)</span><br><span class="line">  -F, --fixed-strings    PATTERN is a <span class="built_in">set</span> of newline-separated strings</span><br><span class="line">  -G, --basic-regexp     PATTERN is a basic regular expression</span><br><span class="line">  -P, --perl-regexp      PATTERN is a Perl regular expression</span><br><span class="line">  -i, --ignore-case      ignore <span class="keyword">case</span> distinctions</span><br><span class="line"></span><br><span class="line">Output control:</span><br><span class="line">  -a, --absolute-path    always <span class="built_in">print</span> absolute path of jar file</span><br><span class="line">  -s, --separator        specify the separator between jar file and zip entry.</span><br><span class="line">                         default is `!<span class="string">'.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Miscellaneous:</span></span><br><span class="line"><span class="string">  -h, --help             display this help and exit</span></span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼ŒPatternç¼ºçœæ˜¯<code>grep</code>çš„ <strong>æ‰©å±•</strong>æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h3 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰Jaræ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾å‡º log4j.propertiesæ–‡ä»¶</span></span><br><span class="line">$ find-in-jars <span class="string">'log4j\.properties$'</span></span><br><span class="line">./hadoop-core-0.20.2-cdh3u3.jar!log4j.properties</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å‡º ä»¥Serviceç»“å°¾çš„ç±»ï¼ŒJaræ–‡ä»¶è·¯å¾„è¾“å‡ºæˆç»å¯¹è·¯å¾„</span></span><br><span class="line">$ find-in-jars <span class="string">'Service.class$'</span> -a</span><br><span class="line">/home/foo/deploy/app/WEB-INF/libs/spring-2.5.6.SEC03.jar!org/springframework/stereotype/Service.class</span><br><span class="line">/home/foo/deploy/app/WEB-INF/libs/rpc-hello-0.0.1-SNAPSHOT.jar!com/taobao/biz/HelloService.class</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æŒ‡å®šçš„å¤šä¸ªç›®å½•çš„Jaræ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾å‡º propertiesæ–‡ä»¶</span></span><br><span class="line">$ find-in-jars <span class="string">'\.properties$'</span> -d WEB-INF/lib -d ../deploy/lib | grep -v <span class="string">'/pom\.properties$'</span></span><br><span class="line">WEB-INF/lib/aspectjtools-1.6.2.jar!org/aspectj/ajdt/ajc/messages.properties</span><br><span class="line">WEB-INF/lib/aspectjweaver-1.8.8.jar!org/aspectj/weaver/XlintDefault.properties</span><br><span class="line">../deploy/lib/groovy-all-1.1-rc-1.jar!groovy/ui/InteractiveShell.properties</span><br><span class="line">../deploy/lib/httpcore-4.3.3.jar!org/apache/http/version.properties</span><br><span class="line">../deploy/lib/javax.servlet-api-3.0.1.jar!javax/servlet/http/LocalStrings_es.properties</span><br><span class="line">......</span><br></pre></td></tr></tbody></table></figure></div><h3 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h3><p>æ”¯æŒå½©è‰²è¾“å‡ºï¼Œæ–‡ä»¶åä¸­çš„åŒ¹é…éƒ¨åˆ†ä»¥<code>grep</code>çš„é«˜äº®æ–¹å¼æ˜¾ç¤ºã€‚</p><p><a href="https://user-images.githubusercontent.com/1063891/33545067-9eb66072-d8a2-11e7-8a77-d815c0979e5e.gif" data-fancybox="group" data-caption="find-in-jar screenshot" class="fancybox"><img alt="find-in-jar screenshot" data-src="https://user-images.githubusercontent.com/1063891/33545067-9eb66072-d8a2-11e7-8a77-d815c0979e5e.gif" class="lazyload" title="find-in-jar screenshot"></a></p><p>é™„ä¸Šå¤§ä½¬çš„githubè„šæœ¬åœ°å€ï¼š<a href="https://github.com/oldratlee/useful-scripts" target="_blank" rel="noopener">https://github.com/oldratlee/useful-scripts</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº”åˆ†é’Ÿå­¦ä¼š Java å¼€å‘æ•ˆç‡ç¥å™¨ Lombokï¼</title>
      <link href="/2020/03/09/%E4%BA%94%E5%88%86%E9%92%9F%E5%AD%A6%E4%BC%9A%20Java%20%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%A5%9E%E5%99%A8%20Lombok/"/>
      <url>/2020/03/09/%E4%BA%94%E5%88%86%E9%92%9F%E5%AD%A6%E4%BC%9A%20Java%20%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%A5%9E%E5%99%A8%20Lombok/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Lombok æ˜¯ä¸€ä¸ª Java ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥é€è¿‡ç®€å•çš„æ³¨è§£çœç•¥ Java çš„ä»£ç ï¼Œåƒæ˜¯ setterã€getterã€loggerâ€¦ç­‰ï¼Œç›®çš„åœ¨æ¶ˆé™¤å†—é•¿çš„ä»£ç å’Œæé«˜å¼€å‘æ•ˆç‡</p><p>å‡è®¾ä½ åœ¨ç±»ä¸ŠåŠ ä¸Šäº†ä¸€ä¸ª <code>@Getter</code> å’Œ <code>@Setter</code> æ³¨è§£ï¼Œé‚£ä½ å°±ä¸ç”¨åœ¨å†™çƒ¦äººçš„ getter å’Œ setterï¼Œlombok ä¼šè‡ªåŠ¨å¸®ä½ äº§ç”Ÿå‡ºæ¥å•¦ï¼</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342560.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342560.png" class="lazyload" title></a></p><p>ä¹‹æ‰€ä»¥åŠ ä¸ª lombok çš„ @Getter æ³¨è§£å°±å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å˜é‡çš„ getterï¼Œæ˜¯å› ä¸º lombok å‚ä¸äº† Java åœ¨ compile é˜¶æ®µç”Ÿæˆ <code>.class</code> æ¡£çš„è¿‡ç¨‹ï¼Œlombok ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å†™ä¸€å † getterï¼Œç„¶åå¡è¿› <code>.class</code> æ¡£ï¼Œæ‰€ä»¥çœŸæ­£è¢«ç¼–è¯‘å‡ºæ¥çš„ User.class æ¡£æ¡‰ï¼Œæ˜¯åŒ…å«å®Œæ•´çš„ getter çš„</p><p>ç®€å•çš„è¯´ï¼Œlombokå¯ä»¥ç®—æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œåªæ˜¯åœ¨å¸®æˆ‘ä»¬å¢è¿›å¼€å‘æ•ˆç‡è€Œå·²ï¼Œå®é™…ä¸Šæ‰€äº§ç”Ÿå‡ºæ¥çš„<code>.class</code>æ¡£ä»ç„¶æ˜¯å®Œå…¨æ­£å¸¸çš„</p><h3 id="å®‰è£…-Lombok"><a href="#å®‰è£…-Lombok" class="headerlink" title="å®‰è£… Lombok"></a>å®‰è£… Lombok</h3><p>è¦åœ¨ project ä¸­ä½¿ç”¨ lombokï¼Œé™¤äº†è¦åœ¨ maven ä¸­åŠ å…¥ lombok ä¾èµ–ï¼Œè¿˜è¦å®‰è£… IDEA lombok æ’ä»¶</p><h4 id="1-åŠ å…¥-maven-ä¾èµ–"><a href="#1-åŠ å…¥-maven-ä¾èµ–" class="headerlink" title="1. åŠ å…¥ maven ä¾èµ–"></a><strong>1. åŠ å…¥ maven ä¾èµ–</strong></h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><dependency></dependency></span><br><span class="line">    <groupid>org.projectlombok</groupid></span><br><span class="line">    <artifactid>lombok</artifactid></span><br><span class="line">    <version>1.18.12</version></span><br><span class="line">    <scope>provided</scope></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><h4 id="2-åœ¨-IDEAä¸­å®‰è£…-lombok-æ’ä»¶"><a href="#2-åœ¨-IDEAä¸­å®‰è£…-lombok-æ’ä»¶" class="headerlink" title="2. åœ¨ IDEAä¸­å®‰è£… lombok æ’ä»¶"></a>2. åœ¨ IDEAä¸­å®‰è£… lombok æ’ä»¶</h4><blockquote><p>æˆ‘ä½¿ç”¨çš„ IDEA ç‰ˆæœ¬æ˜¯ 2019.3.3ï¼Œå¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬å·®å¼‚å¯¼è‡´å®‰è£…æ–¹å¼æœ‰æ”¹å˜</p></blockquote><p>å…ˆç‚¹é€‰å·¦ä¸Šè§’ Intellij IDEA -> Preferences</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342697.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342697.png" class="lazyload" title></a></p><p>ç„¶åç‚¹å‡»å·¦è¾¹çš„ Pluginsï¼Œå†ç‚¹å‡»ä¸Šé¢çš„ Marketplace tabï¼Œç„¶åå°±å¯ä»¥åœ¨æœå¯»æ ä¸­è¾“å…¥<code>lombok</code>ï¼Œå¹¶ä¸”æ‰¾åˆ°lombokæ’ä»¶å¹¶å®‰è£…å®ƒ</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342718.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342718.png" class="lazyload" title></a></p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦ç‰¹åœ°å®‰è£…-IDEA-lombok-æ’ä»¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ç‰¹åœ°å®‰è£…-IDEA-lombok-æ’ä»¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ç‰¹åœ°å®‰è£… IDEA lombok æ’ä»¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ç‰¹åœ°å®‰è£… IDEA lombok æ’ä»¶ï¼Ÿ</h4><p>å…¶å®åœ¨ maven åŠ å…¥ lombok ä¾èµ–ä¹‹åï¼Œä½¿ç”¨ <code>mvn clean package</code> å°±å¯ä»¥æ­£å¸¸ build è¿‡ï¼Œåœ¨ IDEA ä¸­ç‚¹å‡»ç»¿è‰²æŒ‰é’®ä¹Ÿå¯ä»¥è¿è¡Œç¨‹å¼</p><p>ä¹‹æ‰€ä»¥è¿˜è¦ç‰¹åœ°å®‰è£… IDEA lombok æ’ä»¶ï¼Œæ˜¯å› ä¸ºå¦‚æœä¸å®‰è£… lombok æ’ä»¶çš„è¯ï¼ŒIDEA å°±ä¼šæ²¡åŠæ³•è‡ªåŠ¨æç¤ºå‡º lombok äº§ç”Ÿçš„æ–¹æ³•ï¼Œæ‰€ä»¥å°±ä¼šå‘ç”Ÿä½ çš„ä»£ç ä¸€ç‰‡çº¢ï¼Œä½†æ˜¯è¿è¡Œå´å¯ä»¥é€šè¿‡çš„å¥‡å¦™ç°è±¡</p><p>åƒæ˜¯ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œå› ä¸ºå¯¹ IDEA æ¥è¯´ï¼Œä»£ç è£¡å¹¶ä¸å­˜åœ¨ setterï¼Œæ‰€ä»¥æ²¡åŠæ³•è‡ªåŠ¨æç¤º <code>setId()</code>ã€<code>setName()</code> ç­‰æ–¹æ³•ï¼Œä½†æ˜¯åˆå› ä¸ºæˆ‘ä»¬åœ¨mavenä¸­æœ‰åŠ å…¥ lombok ä¾èµ–ï¼Œæ‰€ä»¥ç‚¹å‡»ç¬¬ 13 è¡Œçš„ç»¿è‰²ç®­å¤´è¿è¡Œç¨‹å¼çš„è¯ï¼Œæ˜¯å¯ä»¥æ­£å¸¸è¿è¡ŒæˆåŠŸçš„</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342841.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342841.png" class="lazyload" title></a></p><p>æ‰€ä»¥ lombok ç®—ä¾µå…¥æ€§å¾ˆé«˜çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œåªè¦å›¢é˜Ÿä¸­æœ‰ä¸€ä¸ªäººç”¨ lombok å¼€å‘ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„äººéƒ½å¿…é¡»å¾—å®‰è£…ä¸Š lombok æ’ä»¶ï¼Œæ‰ä¸ä¼šåœ¨ IDEA ä¸­ä¸€æ‰“å¼€ project æ—¶ï¼Œæ•´ç‰‡éƒ½æ˜¯ç—›è‹¦çš„çº¢å­—</p><h3 id="Lombok-ç”¨æ³•"><a href="#Lombok-ç”¨æ³•" class="headerlink" title="Lombok ç”¨æ³•"></a>Lombok ç”¨æ³•</h3><p>lombok å®˜ç½‘æä¾›äº†è®¸å¤šæ³¨è§£ï¼Œä½†æ˜¯ã€ŒåŠ²é…’è™½å¥½ï¼Œå¯ä¸èƒ½è´ªæ¯ã€ï¼Œä½ ç”¨äº†è¶Šå¤š lombok çš„è¿›é˜¶ç”¨æ³•ï¼Œä¼šè®©æ•´ä¸ªå›¢é˜Ÿçš„å­¦ä¹ æ›²çº¿ä¸Šå‡ï¼Œåè€Œä¼šé€ æˆåæ•ˆæœï¼Œæ‰€ä»¥åœ¨æ­¤å¤„åªè§£é‡Šæœ€æœ€å¸¸è§ã€å¹¶ä¸”æˆ‘è®¤ä¸ºæœ€å¿…è¦çš„æ³¨è§£ä½¿ç”¨æ–¹å¼ï¼Œå…¶ä»–çš„ç”¨æ³•å°±ä¸ä»‹ç»äº†</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342875.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342875.png" class="lazyload" title></a></p><h4 id="1-Getter-Setter"><a href="#1-Getter-Setter" class="headerlink" title="1. @Getter/@Setter"></a>1. @Getter/@Setter</h4><p>è‡ªåŠ¨äº§ç”Ÿ getter/setter</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342898.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342898.png" class="lazyload" title></a></p><h4 id="2-ToString"><a href="#2-ToString" class="headerlink" title="2. @ToString"></a>2. @ToString</h4><p>è‡ªåŠ¨é‡å†™ <code>toString()</code> æ–¹æ³•ï¼Œä¼šå°å‡ºæ‰€æœ‰å˜é‡</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342923.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342923.png" class="lazyload" title></a></p><h4 id="3-EqualsAndHashCode"><a href="#3-EqualsAndHashCode" class="headerlink" title="3. @EqualsAndHashCode"></a>3. @EqualsAndHashCode</h4><p>è‡ªåŠ¨ç”Ÿæˆ <code>equals(Object other)</code> å’Œ <code>hashcode()</code> æ–¹æ³•ï¼ŒåŒ…æ‹¬æ‰€æœ‰éé™æ€å˜é‡å’Œé transient çš„å˜é‡</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342955.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342955.png" class="lazyload" title></a></p><p>å¦‚æœæŸäº›å˜é‡ä¸æƒ³è¦åŠ è¿›åˆ¤æ–­ï¼Œå¯ä»¥é€è¿‡ exclude æ’é™¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ of æŒ‡å®šæŸäº›å­—æ®µ</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342974.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342974.png" class="lazyload" title></a></p><p>Q : ä¸ºä»€ä¹ˆåªæœ‰ä¸€ä¸ªæ•´ä½“çš„ <code>@EqualsAndHashCode</code> æ³¨è§£ï¼Œè€Œä¸æ˜¯åˆ†å¼€çš„ä¸¤ä¸ª <code>@Equals</code> å’Œ <code>@HashCode</code>ï¼Ÿ</p><p>A : åœ¨ Java ä¸­æœ‰è§„å®šï¼Œå½“ä¸¤ä¸ªå¯¹è±¡ equals æ—¶ï¼Œä»–ä»¬çš„ hashcode ä¸€å®šè¦ç›¸åŒï¼Œåä¹‹ï¼Œå½“ hashcode ç›¸åŒæ—¶ï¼Œå¯¹è±¡ä¸ä¸€å®š equalsã€‚æ‰€ä»¥ equals å’Œ hashcode è¦ä¸€èµ·å®ç°ï¼Œå…å¾—å‘ç”Ÿè¿å Java è§„å®šçš„æƒ…å½¢å‘ç”Ÿ</p><h4 id="4-NoArgsConstructor-AllArgsConstructor-RequiredArgsConstructor"><a href="#4-NoArgsConstructor-AllArgsConstructor-RequiredArgsConstructor" class="headerlink" title="4. @NoArgsConstructor, @AllArgsConstructor, @RequiredArgsConstructor"></a>4. @NoArgsConstructor, @AllArgsConstructor, @RequiredArgsConstructor</h4><p>è¿™ä¸‰ä¸ªå¾ˆåƒï¼Œéƒ½æ˜¯åœ¨è‡ªåŠ¨ç”Ÿæˆè¯¥ç±»çš„æ„é€ å™¨ï¼Œå·®åˆ«åªåœ¨ç”Ÿæˆçš„æ„é€ å™¨çš„å‚æ•°ä¸ä¸€æ ·è€Œå·²</p><p><strong>@NoArgsConstructor</strong> : ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ„é€ å™¨</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342995.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072342995.png" class="lazyload" title></a></p><p><strong>@AllArgsConstructor</strong> : ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å‚æ•°çš„æ„é€ å™¨</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343018.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343018.png" class="lazyload" title></a></p><p>è¿™é‡Œæ³¨æ„ä¸€ä¸ª Java çš„å°å‘ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šæ„é€ å™¨æ—¶ï¼ŒJava ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°çš„æ„é€ å™¨ç»™è¯¥ç±»ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è‡ªå·±å†™äº†æ„é€ å™¨ä¹‹åï¼ŒJava å°±ä¸ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è¡¥ä¸Šé‚£ä¸ªæ— å‚æ•°çš„æ„é€ å™¨äº†</p><p>ç„¶è€Œå¾ˆå¤šåœ°æ–¹ï¼ˆåƒæ˜¯ Spring Data JPAï¼‰ï¼Œä¼šéœ€è¦æ¯ä¸ªç±»éƒ½ä¸€å®šè¦æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å™¨ï¼Œæ‰€ä»¥ä½ åœ¨åŠ ä¸Š <code>@AllArgsConstructor</code> æ—¶ï¼Œä¸€å®šè¦è¡¥ä¸Š <code>@NoArgsConstrcutor</code>ï¼Œä¸ç„¶ä¼šæœ‰å„ç§å‘ç­‰ç€ä½ </p><pre><code>@AllArgsConstructor@NoArgsConstructorpublicclassUser{    private Integer id;    private String name;}</code></pre><p><strong>@RequiredArgsConstructor</strong> : ç”Ÿæˆä¸€ä¸ªåŒ…å« â€œç‰¹å®šå‚æ•°â€ çš„æ„é€ å™¨ï¼Œç‰¹å®šå‚æ•°æŒ‡çš„æ˜¯é‚£äº›æœ‰åŠ ä¸Š final ä¿®é¥°è¯çš„å˜é‡ä»¬</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343058.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343058.png" class="lazyload" title></a></p><p>è¡¥å……ä¸€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯æ­£å¸¸çš„ï¼Œéƒ½æ²¡æœ‰ç”¨ final ä¿®é¥°çš„è¯ï¼Œé‚£å°±ä¼šç”Ÿæˆä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ„é€ å™¨</p><h4 id="5-Data"><a href="#5-Data" class="headerlink" title="5. @Data"></a>5. @Data</h4><p>æ•´åˆåŒ…ï¼Œåªè¦åŠ äº† @Data è¿™ä¸ªæ³¨è§£ï¼Œç­‰äºåŒæ—¶åŠ äº†ä»¥ä¸‹æ³¨è§£</p><ul><li><p>@Getter/@Setter</p></li><li><p>@ToString</p></li><li><p>@EqualsAndHashCode</p></li><li><p>@RequiredArgsConstructor</p></li></ul><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343091.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343091.png" class="lazyload" title></a></p><p>@Data æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ lombok æ³¨è§£ï¼Œé€šå¸¸ @Data ä¼šåŠ åœ¨ä¸€ä¸ªå€¼å¯ä»¥è¢«æ›´æ–°çš„å¯¹è±¡ä¸Šï¼Œåƒæ˜¯æ—¥å¸¸ä½¿ç”¨çš„ DTO ä»¬ã€æˆ–æ˜¯ JPA è£¡çš„ Entity ä»¬ï¼Œå°±å¾ˆé€‚åˆåŠ ä¸Š @Data æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯ @Data for mutable class</p><h4 id="6-Value"><a href="#6-Value" class="headerlink" title="6. @Value"></a>6. @Value</h4><p>ä¹Ÿæ˜¯æ•´åˆåŒ…ï¼Œä½†æ˜¯ä»–ä¼šæŠŠæ‰€æœ‰çš„å˜é‡éƒ½è®¾æˆ final çš„ï¼Œå…¶ä»–çš„å°±è·Ÿ @Data ä¸€æ ·ï¼Œç­‰äºåŒæ—¶åŠ äº†ä»¥ä¸‹æ³¨è§£</p><ul><li><p>@Getter (æ³¨æ„æ²¡æœ‰setter)</p></li><li><p>@ToString</p></li><li><p>@EqualsAndHashCode</p></li><li><p>@RequiredArgsConstructor</p></li></ul><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343118.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343118.png" class="lazyload" title></a></p><p>ä¸Šé¢é‚£ä¸ª @Data é€‚åˆç”¨åœ¨ POJO æˆ– DTO ä¸Šï¼Œè€Œè¿™ä¸ª @Value æ³¨è§£ï¼Œåˆ™æ˜¯é€‚åˆåŠ åœ¨å€¼ä¸å¸Œæœ›è¢«æ”¹å˜çš„ç±»ä¸Šï¼Œåƒæ˜¯æŸä¸ªç±»çš„å€¼å½“åˆ›å»ºåå°±ä¸å¸Œæœ›è¢«æ›´æ”¹ï¼Œåªå¸Œæœ›æˆ‘ä»¬è¯»å®ƒè€Œå·²ï¼Œå°±é€‚åˆåŠ ä¸Š @Value æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯ @Value for immutable class</p><p>å¦å¤–æ³¨æ„ä¸€ä¸‹ï¼Œæ­¤ lombok çš„æ³¨è§£ @Value å’Œå¦ä¸€ä¸ª Spring çš„æ³¨è§£ @Value æ’åï¼Œåœ¨ import æ—¶ä¸è¦ import é”™äº†</p><h4 id="7-Builder"><a href="#7-Builder" class="headerlink" title="7. @Builder"></a>7. @Builder</h4><p>è‡ªåŠ¨ç”Ÿæˆæµå¼ set å€¼å†™æ³•ï¼Œä»æ­¤ä¹‹åå†ä¹Ÿä¸ç”¨å†™ä¸€å † setter äº†</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343147.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343147.png" class="lazyload" title></a></p><p>æ³¨æ„ï¼Œè™½ç„¶åªè¦åŠ ä¸Š @Builder æ³¨è§£ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç”¨æµå¼å†™æ³•å¿«é€Ÿè®¾å®šå¯¹è±¡çš„å€¼ï¼Œä½†æ˜¯ setter è¿˜æ˜¯å¿…é¡»è¦å†™ä¸èƒ½çœç•¥çš„ï¼Œå› ä¸º Spring æˆ–æ˜¯å…¶ä»–æ¡†æ¶æœ‰å¾ˆå¤šåœ°æ–¹éƒ½ä¼šç”¨åˆ°å¯¹è±¡çš„ getter/setter å¯¹ä»–ä»¬å–å€¼/èµ‹å€¼</p><p>æ‰€ä»¥é€šå¸¸æ˜¯ @Data å’Œ @Builder ä¼šä¸€èµ·ç”¨åœ¨åŒä¸ªç±»ä¸Šï¼Œæ—¢æ–¹ä¾¿æˆ‘ä»¬æµå¼å†™ä»£ç ï¼Œä¹Ÿæ–¹ä¾¿æ¡†æ¶åšäº‹</p><pre><code>@Data@BuilderpublicclassUser{    private Integer id;    private String name;}</code></pre><h4 id="8-Slf4j"><a href="#8-Slf4j" class="headerlink" title="8. @Slf4j"></a>8. @Slf4j</h4><p>è‡ªåŠ¨ç”Ÿæˆè¯¥ç±»çš„ log é™æ€å¸¸é‡ï¼Œè¦æ‰“æ—¥å¿—å°±å¯ä»¥ç›´æ¥æ‰“ï¼Œä¸ç”¨å†æ‰‹åŠ¨ new log é™æ€å¸¸é‡äº†</p><p><a href="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343164.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.wazhi.com.cn//school/image/1166/20200308/20200308072343164.png" class="lazyload" title></a></p><p>é™¤äº† @Slf4j ä¹‹å¤–ï¼Œlombok ä¹Ÿæä¾›å…¶ä»–æ—¥å¿—æ¡†æ¶çš„å˜ç§æ³¨è§£å¯ä»¥ç”¨ï¼Œåƒæ˜¯ @Logã€@Log4jâ€¦ç­‰ï¼Œä»–ä»¬éƒ½æ˜¯å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé™æ€å¸¸é‡ logï¼Œåªæ˜¯ä½¿ç”¨çš„åº“ä¸ä¸€æ ·è€Œå·²</p><pre><code>@Log//å¯¹åº”çš„logè¯­å¥å¦‚ä¸‹privatestaticfinal java.util.logging.Logger log = java.util.logging.Logger.getLogger(LogExample.class.getName());@Log4j //å¯¹åº”çš„logè¯­å¥å¦‚ä¸‹privatestaticfinal org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger(LogExample.class);</code></pre><p>SpringBooté»˜è®¤æ”¯æŒçš„å°±æ˜¯ slf4j + logback çš„æ—¥å¿—æ¡†æ¶ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨å†å¤šåšå•¥è®¾å®šï¼Œç›´æ¥å°±å¯ä»¥ç”¨åœ¨ SpringBoot projectä¸Šï¼Œlog ç³»åˆ—æ³¨è§£æœ€å¸¸ç”¨çš„å°±æ˜¯ @Slf4j</p><blockquote><p>è½¬è‡ªï¼šå¤å¤è¯´</p></blockquote></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Lombok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7ä¿®æ”¹swapåˆ†åŒºå¤§å°</title>
      <link href="/2020/03/02/Centos7%E4%BF%AE%E6%94%B9swap%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/"/>
      <url>/2020/03/02/Centos7%E4%BF%AE%E6%94%B9swap%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="æŸ¥çœ‹åˆå§‹çŠ¶æ€"><a href="#æŸ¥çœ‹åˆå§‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹åˆå§‹çŠ¶æ€"></a>æŸ¥çœ‹åˆå§‹çŠ¶æ€</h2><p>æŸ¥çœ‹åŸå…ˆswapå¤§å°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[yi@localhost ~]$ free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           3.7G        429M        2.7G         11M        552M        3.0G</span><br><span class="line">Swap:          2.0G          0B        2.0G</span><br></pre></td></tr></tbody></table></figure></div><p>åŸå…ˆswapæ–‡ä»¶ä½ç½®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:~# swapon  -s</span><br><span class="line">æ–‡ä»¶å             ç±»å‹      å¤§å°       å·²ç”¨  æƒé™</span><br><span class="line">/swapfile1         file      12582908    0   -2</span><br><span class="line">root@gpu-2:~#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶</h2><p>ä¸€èˆ¬swapåˆ†åŒºè¦å¤§äºæˆ–ç­‰äºç‰©ç†å†…å­˜(1-1.5å€)ï¼Œæœ€å¤§ä¸€èˆ¬æœ‰20Gå³å¯ï¼Œæˆ‘è¿™é‡Œåˆ›å»º12Gï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:~# cd /</span><br><span class="line">root@gpu-2:/# dd if=/dev/zero of=/swapfile1 bs=1G count=12</span><br><span class="line">è®°å½•äº†12+0 çš„è¯»å…¥</span><br><span class="line">è®°å½•äº†12+0 çš„å†™å‡º</span><br><span class="line">12884901888 bytes (13 GB, 12 GiB) copied, 17.1497 s, 751 MB/s</span><br><span class="line">root@gpu-2:/# ll</span><br><span class="line">æ€»ç”¨é‡ 14680188</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ./</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ../</span><br><span class="line">drwxr-xr-x   2 root root        4096 4æœˆ  10 06:59 bin/</span><br><span class="line">drwxr-xr-x   4 root root        4096 4æœˆ  10 06:59 boot/</span><br><span class="line">drwxrwxr-x   2 root root        4096 3æœˆ  25 20:44 cdrom/</span><br><span class="line">drwxr-xr-x   5 netc netc          58 4æœˆ   9 14:01 data/</span><br><span class="line">drwxr-xr-x  19 root root        4340 3æœˆ  29 07:50 dev/</span><br><span class="line">drwxr-xr-x 127 root root       12288 4æœˆ  10 06:59 etc/</span><br><span class="line">drwxr-xr-x   3 root root        4096 3æœˆ  25 20:45 home/</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   3 06:24 initrd.img -> boot/initrd.img-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   4 06:31 initrd.img.old -> boot/initrd.img-4.18.0-16-generic</span><br><span class="line">drwxr-xr-x  21 root root        4096 3æœˆ  25 20:56 lib/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 lib64/</span><br><span class="line">drwx------   2 root root       16384 3æœˆ  25 20:41 lost+found/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 media/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 mnt/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 opt/</span><br><span class="line">dr-xr-xr-x 323 root root           0 3æœˆ  26 10:39 proc/</span><br><span class="line">drwx------   8 root root        4096 3æœˆ  26 11:22 root/</span><br><span class="line">drwxr-xr-x  31 root root        1040 4æœˆ  10 17:20 run/</span><br><span class="line">drwxr-xr-x   2 root root       12288 4æœˆ  10 06:58 sbin/</span><br><span class="line">drwxr-xr-x  12 root root        4096 3æœˆ  26 08:54 snap/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 srv/</span><br><span class="line">-rw-------   1 root root  2147483648 3æœˆ  25 20:41 swapfile     # ä¹‹å‰çš„swapæ–‡ä»¶</span><br><span class="line">-rw-r--r--   1 root root 12884901888 4æœˆ  10 17:22 swapfile1    # æ–°åˆ›å»ºçš„swapæ–‡ä»¶</span><br><span class="line">dr-xr-xr-x  13 root root           0 4æœˆ  10 17:11 sys/</span><br><span class="line">drwxrwxrwt  10 root root       12288 4æœˆ  10 17:23 tmp/</span><br><span class="line">drwxr-xr-x  10 root root        4096 2æœˆ  10 08:12 usr/</span><br><span class="line">drwxr-xr-x  14 root root        4096 2æœˆ  10 08:20 var/</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   3 06:24 vmlinuz -> boot/vmlinuz-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   4 06:31 vmlinuz.old -> boot/vmlinuz-4.18.0-16-generic</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ"></a>åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# mkswap -f swapfile1</span><br><span class="line">mkswap: swapfile1ï¼šä¸å®‰å…¨çš„æƒé™ 0644ï¼Œå»ºè®®ä½¿ç”¨ 0600ã€‚</span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 12 GiB (12884897792  ä¸ªå­—èŠ‚)</span><br><span class="line">æ— æ ‡ç­¾ï¼Œ UUID=3779f693-8356-42e9-8a2c-2ab51f12654a</span><br><span class="line">root@gpu-2:/# chmod 0600 swapfile1</span><br><span class="line">root@gpu-2:/# ll</span><br><span class="line">æ€»ç”¨é‡ 14680188</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ./</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ../</span><br><span class="line">drwxr-xr-x   2 root root        4096 4æœˆ  10 06:59 bin/</span><br><span class="line">drwxr-xr-x   4 root root        4096 4æœˆ  10 06:59 boot/</span><br><span class="line">drwxrwxr-x   2 root root        4096 3æœˆ  25 20:44 cdrom/</span><br><span class="line">drwxr-xr-x   5 netc netc          58 4æœˆ   9 14:01 data/</span><br><span class="line">drwxr-xr-x  19 root root        4340 3æœˆ  29 07:50 dev/</span><br><span class="line">drwxr-xr-x 127 root root       12288 4æœˆ  10 06:59 etc/</span><br><span class="line">drwxr-xr-x   3 root root        4096 3æœˆ  25 20:45 home/</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   3 06:24 initrd.img -> boot/initrd.img-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   4 06:31 initrd.img.old -> boot/initrd.img-4.18.0-16-generic</span><br><span class="line">drwxr-xr-x  21 root root        4096 3æœˆ  25 20:56 lib/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 lib64/</span><br><span class="line">drwx------   2 root root       16384 3æœˆ  25 20:41 lost+found/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 media/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 mnt/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 opt/</span><br><span class="line">dr-xr-xr-x 323 root root           0 3æœˆ  26 10:39 proc/</span><br><span class="line">drwx------   8 root root        4096 3æœˆ  26 11:22 root/</span><br><span class="line">drwxr-xr-x  31 root root        1040 4æœˆ  10 17:20 run/</span><br><span class="line">drwxr-xr-x   2 root root       12288 4æœˆ  10 06:58 sbin/</span><br><span class="line">drwxr-xr-x  12 root root        4096 3æœˆ  26 08:54 snap/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 srv/</span><br><span class="line">-rw-------   1 root root  2147483648 3æœˆ  25 20:41 swapfile</span><br><span class="line">-rw-------   1 root root 12884901888 4æœˆ  10 17:22 swapfile1</span><br><span class="line">dr-xr-xr-x  13 root root           0 4æœˆ  10 17:11 sys/</span><br><span class="line">drwxrwxrwt  10 root root       12288 4æœˆ  10 17:23 tmp/</span><br><span class="line">drwxr-xr-x  10 root root        4096 2æœˆ  10 08:12 usr/</span><br><span class="line">drwxr-xr-x  14 root root        4096 2æœˆ  10 08:20 var/</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   3 06:24 vmlinuz -> boot/vmlinuz-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   4 06:31 vmlinuz.old -> boot/vmlinuz-4.18.0-16-generic</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="å¼€å¯æ–°çš„swap"><a href="#å¼€å¯æ–°çš„swap" class="headerlink" title="å¼€å¯æ–°çš„swap"></a>å¼€å¯æ–°çš„swap</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# swapoff /swapfile</span><br><span class="line">root@gpu-2:/# free -h</span><br><span class="line">              æ€»è®¡         å·²ç”¨        ç©ºé—²      å…±äº«    ç¼“å†²/ç¼“å­˜    å¯ç”¨</span><br><span class="line">å†…å­˜ï¼š         62G        417M         38G        3.0M         23G         61G</span><br><span class="line">äº¤æ¢ï¼š          0B          0B          0B</span><br><span class="line">root@gpu-2:/# swapon /swapfile1</span><br><span class="line">root@gpu-2:/# free -h</span><br><span class="line">              æ€»è®¡         å·²ç”¨        ç©ºé—²      å…±äº«    ç¼“å†²/ç¼“å­˜    å¯ç”¨</span><br><span class="line">å†…å­˜ï¼š         62G        420M         38G        3.0M         23G         61G</span><br><span class="line">äº¤æ¢ï¼š         11G          0B         11G</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºå¯åŠ¨"></a>è®¾ç½®å¼€æœºå¯åŠ¨</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# vim /etc/fstab</span><br><span class="line">/swapfile                                 none            swap    sw              0       0</span><br><span class="line">æ”¹ä¸º</span><br><span class="line">/swapfile1                                none            swap    sw              0       0</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h2><p>é‡å¯ï¼Œç„¶åæŸ¥çœ‹æ˜¯å¦æœ‰é—®é¢˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now</span><br></pre></td></tr></tbody></table></figure></div><p>å¯ä»¥å…ˆåœ¨è™šæ‹Ÿæœºä¸Šæµ‹è¯•ï¼Œå¦‚æœæˆåŠŸçš„è¯ï¼Œå†åœ¨ç‰©ç†æœºæ“ä½œï¼Œå¦‚æœéƒ½æ²¡é—®é¢˜çš„è¯ï¼Œå¯ä»¥åˆ æ‰æ—§çš„swapæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f /swapfile</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢è¿ç§»ä¹‹ç—›</title>
      <link href="/2020/02/26/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E4%B9%8B%E7%97%9B/"/>
      <url>/2020/02/26/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E4%B9%8B%E7%97%9B/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>ä»Šå¤©å¯¹åšå®¢è¿›è¡Œçš„è¿ç§»ï¼Œå¯¼è‡´å¤§é‡åšæ–‡çš„ä¸¢å¤±ï¼Œæˆ‘çš„å¿ƒå¥½åµç—›ï¼Œæ˜¯è¿™æ ·çš„</p><a id="more"></a><h3 id="åšå®¢è¿ç§»"><a href="#åšå®¢è¿ç§»" class="headerlink" title="åšå®¢è¿ç§»"></a>åšå®¢è¿ç§»</h3><p>ä»Šå¤©å¯¹åšå®¢è¿›è¡Œçš„è¿ç§»ï¼Œå¯¼è‡´å¤§é‡åšæ–‡çš„ä¸¢å¤±ï¼Œæˆ‘çš„å¿ƒå¥½åµç—›ï¼Œæ˜¯è¿™æ ·çš„</p><p><a href="https://i.imgur.com/wc1JaEY.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/wc1JaEY.png" class="lazyload" title></a></p><p>ç‰¹åˆ«æ˜¯ä»¥å‰çš„åšæ–‡åº”ä¸ºä¸æ˜¯Markdownæ ¼å¼å¯¼è‡´å’Œç°åœ¨çš„åšå®¢ç³»ç»Ÿä¸å…¼å®¹ï¼Œåœ¨åšæ–‡çš„å›¾ç‰‡ä½¿ç”¨çš„æ˜¯æœ¬åœ°æœåŠ¡å™¨å­˜å‚¨ï¼Œå›¾ç‰‡ä¸¢å¤±ä¹Ÿå¯¼è‡´ä¸å¾—ä¸æ”¾å¼ƒä¸€éƒ¨åˆ†æ–‡ç« ï¼Œå…ˆè®©æˆ‘å“­ä¸€ä¼šã€‚</p><p><a href="https://i.imgur.com/rxEtTwb.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/rxEtTwb.jpg" class="lazyload" title></a></p><p>ä¸è¿‡å€¼å¾—é«˜å…´çš„æ˜¯è¿ç§»æ€»ç®—ç»“æŸäº†ï¼Œé€Ÿåº¦å¿«ä¹å¾ˆå¤šå‘¦ï¼Œä½ ä¸è¦è¯•è¯•å—ï¼</p><p><a href="https://i.imgur.com/ynQlEoT.gif" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/ynQlEoT.gif" class="lazyload" title></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu18.04ä¿®æ”¹swapåˆ†åŒºå¤§å°</title>
      <link href="/2020/02/26/Ubuntu18-04%E4%BF%AE%E6%94%B9swap%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/"/>
      <url>/2020/02/26/Ubuntu18-04%E4%BF%AE%E6%94%B9swap%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="æŸ¥çœ‹åˆå§‹çŠ¶æ€"><a href="#æŸ¥çœ‹åˆå§‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹åˆå§‹çŠ¶æ€"></a>æŸ¥çœ‹åˆå§‹çŠ¶æ€</h2><p>æŸ¥çœ‹åŸå…ˆswapå¤§å°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:~# free -h</span><br><span class="line">              æ€»è®¡         å·²ç”¨        ç©ºé—²      å…±äº«    ç¼“å†²/ç¼“å­˜    å¯ç”¨</span><br><span class="line">å†…å­˜ï¼š         62G        417M         38G        3.0M         23G         61G</span><br><span class="line">äº¤æ¢ï¼š        2.0G          0B        2.0G</span><br><span class="line">root@gpu-2:~#</span><br></pre></td></tr></tbody></table></figure></div><p>åŸå…ˆswapæ–‡ä»¶ä½ç½®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:~# swapon  -s</span><br><span class="line">æ–‡ä»¶å             ç±»å‹      å¤§å°       å·²ç”¨  æƒé™</span><br><span class="line">/swapfile1         file      12582908    0   -2</span><br><span class="line">root@gpu-2:~#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶"><a href="#åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶"></a>åˆ›å»ºä¸€ä¸ªæ–°çš„swapæ–‡ä»¶</h2><p>ä¸€èˆ¬swapåˆ†åŒºè¦å¤§äºæˆ–ç­‰äºç‰©ç†å†…å­˜(1-1.5å€)ï¼Œæœ€å¤§ä¸€èˆ¬æœ‰20Gå³å¯ï¼Œæˆ‘è¿™é‡Œåˆ›å»º12Gï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:~# cd /</span><br><span class="line">root@gpu-2:/# dd if=/dev/zero of=/swapfile1 bs=1G count=12</span><br><span class="line">è®°å½•äº†12+0 çš„è¯»å…¥</span><br><span class="line">è®°å½•äº†12+0 çš„å†™å‡º</span><br><span class="line">12884901888 bytes (13 GB, 12 GiB) copied, 17.1497 s, 751 MB/s</span><br><span class="line">root@gpu-2:/# ll</span><br><span class="line">æ€»ç”¨é‡ 14680188</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ./</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ../</span><br><span class="line">drwxr-xr-x   2 root root        4096 4æœˆ  10 06:59 bin/</span><br><span class="line">drwxr-xr-x   4 root root        4096 4æœˆ  10 06:59 boot/</span><br><span class="line">drwxrwxr-x   2 root root        4096 3æœˆ  25 20:44 cdrom/</span><br><span class="line">drwxr-xr-x   5 netc netc          58 4æœˆ   9 14:01 data/</span><br><span class="line">drwxr-xr-x  19 root root        4340 3æœˆ  29 07:50 dev/</span><br><span class="line">drwxr-xr-x 127 root root       12288 4æœˆ  10 06:59 etc/</span><br><span class="line">drwxr-xr-x   3 root root        4096 3æœˆ  25 20:45 home/</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   3 06:24 initrd.img -> boot/initrd.img-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   4 06:31 initrd.img.old -> boot/initrd.img-4.18.0-16-generic</span><br><span class="line">drwxr-xr-x  21 root root        4096 3æœˆ  25 20:56 lib/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 lib64/</span><br><span class="line">drwx------   2 root root       16384 3æœˆ  25 20:41 lost+found/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 media/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 mnt/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 opt/</span><br><span class="line">dr-xr-xr-x 323 root root           0 3æœˆ  26 10:39 proc/</span><br><span class="line">drwx------   8 root root        4096 3æœˆ  26 11:22 root/</span><br><span class="line">drwxr-xr-x  31 root root        1040 4æœˆ  10 17:20 run/</span><br><span class="line">drwxr-xr-x   2 root root       12288 4æœˆ  10 06:58 sbin/</span><br><span class="line">drwxr-xr-x  12 root root        4096 3æœˆ  26 08:54 snap/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 srv/</span><br><span class="line">-rw-------   1 root root  2147483648 3æœˆ  25 20:41 swapfile     # ä¹‹å‰çš„swapæ–‡ä»¶</span><br><span class="line">-rw-r--r--   1 root root 12884901888 4æœˆ  10 17:22 swapfile1    # æ–°åˆ›å»ºçš„swapæ–‡ä»¶</span><br><span class="line">dr-xr-xr-x  13 root root           0 4æœˆ  10 17:11 sys/</span><br><span class="line">drwxrwxrwt  10 root root       12288 4æœˆ  10 17:23 tmp/</span><br><span class="line">drwxr-xr-x  10 root root        4096 2æœˆ  10 08:12 usr/</span><br><span class="line">drwxr-xr-x  14 root root        4096 2æœˆ  10 08:20 var/</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   3 06:24 vmlinuz -> boot/vmlinuz-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   4 06:31 vmlinuz.old -> boot/vmlinuz-4.18.0-16-generic</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ"></a>åˆ›å»ºswapæ–‡ä»¶ç³»ç»Ÿ</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# mkswap -f swapfile1</span><br><span class="line">mkswap: swapfile1ï¼šä¸å®‰å…¨çš„æƒé™ 0644ï¼Œå»ºè®®ä½¿ç”¨ 0600ã€‚</span><br><span class="line">æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 12 GiB (12884897792  ä¸ªå­—èŠ‚)</span><br><span class="line">æ— æ ‡ç­¾ï¼Œ UUID=3779f693-8356-42e9-8a2c-2ab51f12654a</span><br><span class="line">root@gpu-2:/# chmod 0600 swapfile1</span><br><span class="line">root@gpu-2:/# ll</span><br><span class="line">æ€»ç”¨é‡ 14680188</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ./</span><br><span class="line">drwxr-xr-x  25 root root        4096 4æœˆ  10 17:22 ../</span><br><span class="line">drwxr-xr-x   2 root root        4096 4æœˆ  10 06:59 bin/</span><br><span class="line">drwxr-xr-x   4 root root        4096 4æœˆ  10 06:59 boot/</span><br><span class="line">drwxrwxr-x   2 root root        4096 3æœˆ  25 20:44 cdrom/</span><br><span class="line">drwxr-xr-x   5 netc netc          58 4æœˆ   9 14:01 data/</span><br><span class="line">drwxr-xr-x  19 root root        4340 3æœˆ  29 07:50 dev/</span><br><span class="line">drwxr-xr-x 127 root root       12288 4æœˆ  10 06:59 etc/</span><br><span class="line">drwxr-xr-x   3 root root        4096 3æœˆ  25 20:45 home/</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   3 06:24 initrd.img -> boot/initrd.img-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          33 4æœˆ   4 06:31 initrd.img.old -> boot/initrd.img-4.18.0-16-generic</span><br><span class="line">drwxr-xr-x  21 root root        4096 3æœˆ  25 20:56 lib/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 lib64/</span><br><span class="line">drwx------   2 root root       16384 3æœˆ  25 20:41 lost+found/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 media/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 mnt/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 opt/</span><br><span class="line">dr-xr-xr-x 323 root root           0 3æœˆ  26 10:39 proc/</span><br><span class="line">drwx------   8 root root        4096 3æœˆ  26 11:22 root/</span><br><span class="line">drwxr-xr-x  31 root root        1040 4æœˆ  10 17:20 run/</span><br><span class="line">drwxr-xr-x   2 root root       12288 4æœˆ  10 06:58 sbin/</span><br><span class="line">drwxr-xr-x  12 root root        4096 3æœˆ  26 08:54 snap/</span><br><span class="line">drwxr-xr-x   2 root root        4096 2æœˆ  10 08:12 srv/</span><br><span class="line">-rw-------   1 root root  2147483648 3æœˆ  25 20:41 swapfile</span><br><span class="line">-rw-------   1 root root 12884901888 4æœˆ  10 17:22 swapfile1</span><br><span class="line">dr-xr-xr-x  13 root root           0 4æœˆ  10 17:11 sys/</span><br><span class="line">drwxrwxrwt  10 root root       12288 4æœˆ  10 17:23 tmp/</span><br><span class="line">drwxr-xr-x  10 root root        4096 2æœˆ  10 08:12 usr/</span><br><span class="line">drwxr-xr-x  14 root root        4096 2æœˆ  10 08:20 var/</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   3 06:24 vmlinuz -> boot/vmlinuz-4.18.0-17-generic</span><br><span class="line">lrwxrwxrwx   1 root root          30 4æœˆ   4 06:31 vmlinuz.old -> boot/vmlinuz-4.18.0-16-generic</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="å¼€å¯æ–°çš„swap"><a href="#å¼€å¯æ–°çš„swap" class="headerlink" title="å¼€å¯æ–°çš„swap"></a>å¼€å¯æ–°çš„swap</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# swapoff /swapfile</span><br><span class="line">root@gpu-2:/# free -h</span><br><span class="line">              æ€»è®¡         å·²ç”¨        ç©ºé—²      å…±äº«    ç¼“å†²/ç¼“å­˜    å¯ç”¨</span><br><span class="line">å†…å­˜ï¼š         62G        417M         38G        3.0M         23G         61G</span><br><span class="line">äº¤æ¢ï¼š          0B          0B          0B</span><br><span class="line">root@gpu-2:/# swapon /swapfile1</span><br><span class="line">root@gpu-2:/# free -h</span><br><span class="line">              æ€»è®¡         å·²ç”¨        ç©ºé—²      å…±äº«    ç¼“å†²/ç¼“å­˜    å¯ç”¨</span><br><span class="line">å†…å­˜ï¼š         62G        420M         38G        3.0M         23G         61G</span><br><span class="line">äº¤æ¢ï¼š         11G          0B         11G</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºå¯åŠ¨"></a>è®¾ç½®å¼€æœºå¯åŠ¨</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@gpu-2:/# vim /etc/fstab</span><br><span class="line">/swapfile                                 none            swap    sw              0       0</span><br><span class="line">æ”¹ä¸º</span><br><span class="line">/swapfile1                                none            swap    sw              0       0</span><br><span class="line">root@gpu-2:/#</span><br></pre></td></tr></tbody></table></figure></div><h2 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h2><p>é‡å¯ï¼Œç„¶åæŸ¥çœ‹æ˜¯å¦æœ‰é—®é¢˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now</span><br></pre></td></tr></tbody></table></figure></div><p>å¯ä»¥å…ˆåœ¨è™šæ‹Ÿæœºä¸Šæµ‹è¯•ï¼Œå¦‚æœæˆåŠŸçš„è¯ï¼Œå†åœ¨ç‰©ç†æœºæ“ä½œï¼Œå¦‚æœéƒ½æ²¡é—®é¢˜çš„è¯ï¼Œå¯ä»¥åˆ æ‰æ—§çš„swapæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f /swapfile</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQLä¸­jsonbæ•°æ®æ ¼å¼æ“ä½œ</title>
      <link href="/2020/02/11/PostgreSQL%E4%B8%ADjsonb%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/02/11/PostgreSQL%E4%B8%ADjsonb%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å»ºè¡¨SQL"><a href="#å»ºè¡¨SQL" class="headerlink" title="å»ºè¡¨SQL"></a>å»ºè¡¨SQL</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE "public"."contents_review_log" (</span><br><span class="line">  "id" varchar(128) COLLATE "pg_catalog"."default" NOT NULL,</span><br><span class="line">  "app_id" int4 NOT NULL,</span><br><span class="line">  "open_id" varchar(128) COLLATE "pg_catalog"."default" NOT NULL,</span><br><span class="line">  "platform_id" int4,</span><br><span class="line">  "send_role_id" varchar(100) COLLATE "pg_catalog"."default" NOT NULL,</span><br><span class="line">  "receive_role_id" varchar(100) COLLATE "pg_catalog"."default",</span><br><span class="line">  "send_server_id" int4 DEFAULT 1,</span><br><span class="line">  "receive_server_id" int4,</span><br><span class="line">  "send_role_name" varchar(255) COLLATE "pg_catalog"."default",</span><br><span class="line">  "receive_role_name" varchar(255) COLLATE "pg_catalog"."default",</span><br><span class="line">  "send_vip_level" int4 DEFAULT 0,</span><br><span class="line">  "receive_vip_level" int4 DEFAULT 0,</span><br><span class="line">  "send_role_level" int4,</span><br><span class="line">  "receive_role_level" int4,</span><br><span class="line">  "chat_type" varchar(25) COLLATE "pg_catalog"."default",</span><br><span class="line">  "suggestion" varchar(25) COLLATE "pg_catalog"."default",</span><br><span class="line">  "detail" jsonb DEFAULT '{}'::jsonb,</span><br><span class="line">  "chat_content" varchar(2400) COLLATE "pg_catalog"."default" NOT NULL,</span><br><span class="line">  "event_time" timestamp(6) NOT NULL DEFAULT (now() + '08:00:00'::interval),</span><br><span class="line">  "creation_time" timestamp(6) DEFAULT (now() + '08:00:00'::interval),</span><br><span class="line">  "is_review" int2 NOT NULL DEFAULT 0,</span><br><span class="line">  "generate_id" varchar(128) COLLATE "pg_catalog"."default",</span><br><span class="line">  CONSTRAINT "review_contents_violation_pkey" PRIMARY KEY ("id")</span><br><span class="line">)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">ALTER TABLE "public"."contents_review_log" </span><br><span class="line">  OWNER TO "ikylin_nx";</span><br><span class="line"></span><br><span class="line">CREATE INDEX "contents_review_log_index_chat_tpye" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "chat_type" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE INDEX "contents_review_log_index_event_time" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "event_time" "pg_catalog"."timestamp_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE INDEX "contents_review_log_index_generate_id" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "generate_id" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE UNIQUE INDEX "contents_review_log_index_id" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "id" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE INDEX "contents_review_log_index_role" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "send_role_id" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST,</span><br><span class="line">  "receive_role_id" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE INDEX "contents_review_log_index_vip_level" ON "public"."contents_review_log" USING btree (</span><br><span class="line">  "send_vip_level" "pg_catalog"."int4_ops" ASC NULLS LAST,</span><br><span class="line">  "receive_vip_level" "pg_catalog"."int4_ops" ASC NULLS LAST</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TRIGGER "auto_del_chat" AFTER INSERT ON "public"."contents_review_log"</span><br><span class="line">FOR EACH ROW</span><br><span class="line">EXECUTE PROCEDURE "public"."auto_del_chat"();</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."id" IS 'å”¯ä¸€ä½¿ç”¨appid+è¿è§„è§’è‰²id+æœåŠ¡å™¨id+äº‹ä»¶æ—¶é—´æˆ³ç»„åˆ';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."app_id" IS 'æ¸¸æˆid';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."open_id" IS 'è¿è§„ç”¨æˆ·id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."platform_id" IS 'å¹³å°id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."send_role_id" IS 'è¿è§„è§’è‰²id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."receive_role_id" IS 'æ”¶ä¿¡è§’è‰²id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."send_server_id" IS 'å‘é€è€…æ‰€åœ¨æœåŠ¡å™¨id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."receive_server_id" IS 'æ¥æ”¶è€…æ‰€åœ¨æœåŠ¡å™¨id';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."send_role_name" IS 'å‘ä¿¡è€…è§’è‰²åç§°';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."receive_role_name" IS 'æ¥æ”¶è€…è§’è‰²åç§°';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."send_vip_level" IS 'è¿è§„è§’è‰²vipç­‰çº§';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."receive_vip_level" IS 'æ¥æ”¶è§’è‰²vipç­‰çº§';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."send_role_level" IS 'å‘é€è€…ç”¨æˆ·ç­‰çº§';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."receive_role_level" IS 'æ¥æ”¶è€…ç”¨æˆ·ç­‰çº§';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."chat_type" IS 'é¢‘é“';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."suggestion" IS 'æ£€æµ‹ç»“æœå¯åˆ†ä¸ºblockã€review';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."detail" IS 'è¯­ä¹‰æ£€æŸ¥ç»“æœ';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."chat_content" IS 'å®¡æ ¸æ–‡æœ¬';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."event_time" IS 'äº‹ä»¶ç”Ÿæˆæ—¶é—´æˆ³';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."creation_time" IS 'æ•°æ®å…¥åº“æ—¶é—´';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."is_review" IS 'åå°æ˜¯å¦å·²ç»å¤„ç†';</span><br><span class="line"></span><br><span class="line">COMMENT ON COLUMN "public"."contents_review_log"."generate_id" IS 'appid+è¿è§„è§’è‰²id+æœåŠ¡å™¨id+äº‹ä»¶æ—¶é—´æˆ³ç»„åˆ';</span><br><span class="line"></span><br><span class="line">COMMENT ON TABLE "public"."contents_review_log" IS 'å†…å®¹å®¡æŸ¥è¡¨';</span><br></pre></td></tr></tbody></table></figure></div><h2 id="JsonbTypeHandlerè§£æ"><a href="#JsonbTypeHandlerè§£æ" class="headerlink" title="JsonbTypeHandlerè§£æ"></a>JsonbTypeHandlerè§£æ</h2><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå«detailçš„å­—æ®µæ˜¯ä½¿ç”¨äº†jsonbçš„æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨JavaBeanä¸­å¯ä»¥è¿™æ ·å»ºç«‹ä¸€ä¸ªæ¨¡å‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jinkejoy.chat.aliyunchat.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.BaseTypeHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.JdbcType;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.MappedTypes;</span><br><span class="line"><span class="keyword">import</span> org.postgresql.util.PGobject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.CallableStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰PSQL jsonbæ•°æ®æ ¼å¼ç±»å‹å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> huangwenyi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-1-11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@MappedTypes</span>({Object<span class="class">.<span class="keyword">class</span>})</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">JsonbTypeHandler</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span><<span class="title">Object</span>> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> PGobject jsonObject = <span class="keyword">new</span> PGobject();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement preparedStatement, <span class="keyword">int</span> i, Object o, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        jsonObject.setType(<span class="string">"jsonb"</span>);</span><br><span class="line">        jsonObject.setValue(JSONUtil.toJsonStr(o));</span><br><span class="line">        preparedStatement.setObject(i, jsonObject);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, String s)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != resultSet.getString(s)) {</span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(resultSet.getString(s), Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != resultSet.getString(i)) {</span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(resultSet.getString(i), Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(CallableStatement callableStatement, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != callableStatement.getString(i)) {</span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(callableStatement.getString(i), Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>åœ¨modelä½¿ç”¨ä¸­ä½¿ç”¨mybatis plusä¸­çš„ @TableFieldæ³¨è§£è‡ªå®šä¹‰jsonè§£æ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">package com.jinkejoy.chat.aliyunchat.model;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line">import com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line">import com.jinkejoy.chat.aliyunchat.handler.JsonbTypeHandler;</span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.sql.Timestamp;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ•°æ®åº“bean</span><br><span class="line"> * @author huangwenyi</span><br><span class="line"> */</span><br><span class="line">@Data</span><br><span class="line">public class ContentsReviewLog implements Serializable {</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å”¯ä¸€ä½¿ç”¨appid+è¿è§„è§’è‰²id+æœåŠ¡å™¨id+äº‹ä»¶æ—¶é—´+éšæœºæ•°æˆ³ç»„åˆ</span><br><span class="line">     */</span><br><span class="line">    @TableId</span><br><span class="line">    private String id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ¸¸æˆid</span><br><span class="line">     */</span><br><span class="line">    public Integer app_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿è§„ç”¨æˆ·id</span><br><span class="line">     */</span><br><span class="line">    private String open_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å¹³å°id</span><br><span class="line">     */</span><br><span class="line">    private Integer platform_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿è§„è§’è‰²id</span><br><span class="line">     */</span><br><span class="line">    private String send_role_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ”¶ä¿¡è§’è‰²id</span><br><span class="line">     */</span><br><span class="line">    private String receive_role_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‘é€è€…æ‰€åœ¨æœåŠ¡å™¨id</span><br><span class="line">     */</span><br><span class="line">    private Integer send_server_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ¥æ”¶è€…æ‰€åœ¨æœåŠ¡å™¨id</span><br><span class="line">     */</span><br><span class="line">    private Integer receive_server_id;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‘ä¿¡è€…è§’è‰²åç§°</span><br><span class="line">     */</span><br><span class="line">    private String send_role_name;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ¥æ”¶è€…è§’è‰²åç§°</span><br><span class="line">     */</span><br><span class="line">    private String receive_role_name;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿è§„è§’è‰²vipç­‰çº§</span><br><span class="line">     */</span><br><span class="line">    private Integer send_vip_level;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ¥æ”¶è§’è‰²vipç­‰çº§</span><br><span class="line">     */</span><br><span class="line">    private Integer receive_vip_level;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‘é€è€…ç”¨æˆ·ç­‰çº§</span><br><span class="line">     */</span><br><span class="line">    private Integer send_role_level;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ¥æ”¶è€…ç”¨æˆ·ç­‰çº§</span><br><span class="line">     */</span><br><span class="line">    private Integer receive_role_level;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é¢‘é“</span><br><span class="line">     */</span><br><span class="line">    private String chat_type;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ£€æµ‹ç»“æœå¯åˆ†ä¸ºblockã€review</span><br><span class="line">     */</span><br><span class="line">    private String suggestion;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¯­ä¹‰æ£€æŸ¥ç»“æœ</span><br><span class="line">     */</span><br><span class="line">    @TableField(typeHandler = JsonbTypeHandler.class)</span><br><span class="line">    private Detail detail;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å®¡æ ¸æ–‡æœ¬</span><br><span class="line">     */</span><br><span class="line">    private String chat_content;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * äº‹ä»¶ç”Ÿæˆæ—¶é—´æˆ³</span><br><span class="line">     */</span><br><span class="line">    private Timestamp event_time;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ•°æ®å…¥åº“æ—¶é—´</span><br><span class="line">     */</span><br><span class="line">    private Date creation_time = new Date();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åå°æ˜¯å¦å·²ç»å¤„ç†</span><br><span class="line">     */</span><br><span class="line">    private Integer is_review = 0;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * appid+è¿è§„è§’è‰²id+æœåŠ¡å™¨id+äº‹ä»¶æ—¶é—´</span><br><span class="line">     */</span><br><span class="line">    private String generate_id;</span><br><span class="line"></span><br><span class="line">    public ContentsReviewLog() {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>é¡ºä¾¿è¯´ä¸€å¥æˆ‘åœ¨ <strong>JsonbTypeHandler</strong>ç±»ä¸­ä½¿ç”¨çš„jsonå·¥å…·æ˜¯ä¸€ä¸ªå«<strong>hutool</strong>çš„å¼€æºå·¥å…·ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>fastjson</strong>ä»£æ›¿ä¹Ÿæ²¡é—®é¢˜ã€‚<br>ä½¿ç”¨ä¸Šé¢è¿™ç§æ–¹å¼å¯ä»¥åƒæ­£å¸¸curdä¸€æ ·æ“ä½œæ•°æ®åº“ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ‰‹å†™SQLçš„æ–¹å¼ï¼Œç®€å•å¿«æ·ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PostgreSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å“ªå’çš„é­”ç«¥é™ä¸–è±†ç“£å½±è¯„åˆ†æ</title>
      <link href="/2020/01/27/%E5%93%AA%E5%90%92%E7%9A%84%E9%AD%94%E7%AB%A5%E9%99%8D%E4%B8%96%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E5%88%86%E6%9E%90/"/>
      <url>/2020/01/27/%E5%93%AA%E5%90%92%E7%9A%84%E9%AD%94%E7%AB%A5%E9%99%8D%E4%B8%96%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä»Šå¤©çœ‹è±†ç“£çš„æ—¶å€™ä¸€ä¸å°å¿ƒçœ‹åˆ°äº†<strong>å“ªå’ä¹‹é­”ç«¥é™ä¸–</strong>è¿™éƒ¨åŠ¨æ¼«ï¼Œä¸ç”±è‡ªä¸»çš„æ»šåŠ¨é¼ æ ‡çœ‹ç€å½±è¯„ã€‚çªç„¶èºåŠ¨çš„å°å¿ƒå¿ƒæƒ³çœ‹çœ‹æ‰€æœ‰çš„å½±è¯„è¯´çš„å•¥ï¼ˆè„‘å­ï¼šä¸ï¼Œä½ ä¸æƒ³ï¼‰ã€‚</p><p><a href="https://i.imgur.com/DeVidHH.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/DeVidHH.png" class="lazyload" title></a></p><p>è¾£ä¹ˆå¤šï¼Œæƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œå¿ƒç–¼æˆ‘çš„ç”µè„‘ä¸€ç§’ï¼Œç»§ç»­è®©ä¸‹ç¿»å‘ç°æœ‰ä¸€ä¸ªæ¯”è¾ƒå°‘<strong>å½±è¯„</strong>,åªæœ‰ä¸€ä¸‡å¤šæ¡ï¼Œè¿˜å¸¦æœ‰çŸ­è¯„ï¼Œé‚£è¿˜ç­‰ä»€ä¹ˆï¼ŒæŠ„å®¶ä¼™ã€‚<br><a href="https://i.imgur.com/bfvTzfF.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/bfvTzfF.png" class="lazyload" title></a></p><p>çˆ¬è™«çš„è¿‡ç¨‹å°±ä¸è¯´äº†åŸºæœ¬å°±æ˜¯<strong>F12</strong>æ‰¾æ ‡ç­¾ï¼Œæˆ‘æŠŠä»£ç ä¸Šä¼ åˆ°äº†GitHubï¼Œæœ‰å…´è¶£å¯ä»¥ä¸‹è½½çœ‹çœ‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-douban</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åå°±æ˜¯ç­‰å¾…æ•°æ®å…¨éƒ¨è½åœ°ã€‚</p><p><a href="https://i.imgur.com/xfEErMq.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/xfEErMq.jpg" class="lazyload" title></a></p><h3 id="æˆæœ"><a href="#æˆæœ" class="headerlink" title="æˆæœ"></a>æˆæœ</h3><p>æ¥ä¸‹æ¥å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼Œæˆ‘ä»¬æ¥ç…ç…ä»–ä»¬åœ¨è¯´å•¥ã€‚</p><p><a href="https://i.imgur.com/zXwcq4K.gif" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/zXwcq4K.gif" class="lazyload" title></a></p><p>æˆ‘ä»¬å…ˆä½¿ç”¨è¯é¢‘å›¾è°±æ¥çœ‹ä¸€ä¸‹æœ€ç›´è§‚ï¼Œå”‰ï¼Œå¯æ€œçš„æ•–ä¸™è¢«å“ªå’æŒ¤åœ¨è§’è½ç‘Ÿç‘Ÿå‘æŠ–ã€‚é…è§’å°±æ²¡äººæƒå—ï¼Œä¸çŸ¥é“æˆ‘è‚©è´Ÿç€æ•´ä¸ªé¾™æ—çš„å‘½è¿å—ï¼Ÿä¸‹æ¬¡è§åˆ°å¯¼æ¼”ç”¨å†°å†»ä»–ä¸€å¤©ã€‚å“ˆå“ˆå¼€ç©ç¬‘ï¼Œé™¤æ­¤è¿˜æœ‰ä¸¤ä¸ªæ¯”è¾ƒç›´è§‚çš„å…³é”®è¯ï¼š<strong>å›½æ¼«ã€å¥½çœ‹</strong>ï¼Œçœ‹æ¥å¤§éƒ¨åˆ†äººå¯¹å›½æ¼«è¿˜æ˜¯æ¯”è¾ƒä¹è§‚çš„ï¼Œè™½æœ‰ä¸è¶³ï¼Œä½†èƒ½çœ‹åˆ°åŠªåŠ›ã€‚<br><a href="https://i.imgur.com/sarCRN2.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/sarCRN2.png" class="lazyload" title></a></p><p>çœ‹å®Œè¯é¢‘æˆ‘ä»¬æ ¹æ®ä¸åŒçš„çº¬åº¦æ¥çœ‹çœ‹ï¼Œå…¶ä»–æ•°æ®</p><p><a href="https://i.imgur.com/EIKBGSw.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/EIKBGSw.png" class="lazyload" title></a></p><p>è¿™ä¸ª<strong>ä¸ç”±</strong>æœ€å¼€å§‹ç»Ÿè®¡å‡ºæ¥æˆ‘æ˜¯ä¸€è„¸æ‡µé€¼çš„ï¼Œä¸ç”±æ˜¯ä»€ä¹ˆé¬¼ï¼Œåæ¥æˆ‘åœ¨å½±è¯„æœäº†ä¸€ä¸‹æ‰å‘ç°ï¼Œé‚£æ˜¯å“ªå’çš„åè¨€ï¼š<strong>æˆ‘å‘½ç”±æˆ‘ä¸ç”±å¤©</strong>ï¼Œé™¤äº†<strong>ä¸é”™</strong>å’Œ<strong>ä¼˜ç§€</strong>çš„æ¦‚æ‹¬æ€§è¯æ±‡ä»¥å¤–ï¼Œè¿˜å‡ºç°äº†<strong>ç‰¹æ•ˆ</strong>ï¼Œå—¯ï¼Œè¿™éƒ¨ç”µå½±çš„ç‰¹æ•ˆçš„ç¡®ä¸é”™ã€‚</p><p><a href="https://i.imgur.com/bHjf1j9.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/bHjf1j9.png" class="lazyload" title></a></p><p>ä»è¿™ä¸ªåŠ¨è¯å›¾é™¤äº†<strong>å¥½çœ‹</strong>å’Œ<strong>å–œæ¬¢</strong>ï¼Œè¿˜å‡ºç°äº†é¢‘è°±æŒºé«˜çš„<strong>æˆè§</strong>ï¼Œè¯´å®è¯æŒºæ„å¤–çš„ã€‚ç”±æ­¤ä¹Ÿå¯ä»¥çœ‹å‡ºè§‚ä¼—åœ¨æ€è€ƒæ›´æ·±å±‚æ¬¡çš„ä¸œè¥¿ï¼Œè€Œéæµäºè¡¨é¢ï¼Œå½“åšä¸€åœºçˆ†ç±³èŠ±ç”µå½±ï¼Œå€¼å¾—åº†å¹¸ã€‚</p><h3 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h3><p>æˆ‘å–œæ¬¢<strong>ç™½è›‡ï¼šç¼˜èµ·</strong></p><p><a href="https://i.imgur.com/jW267bP.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/jW267bP.jpg" class="lazyload" title></a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> çˆ¬è™« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è†¨èƒ€çš„æˆ‘çˆ¬äº†ä¸€ä¸‹é“¾å®¶</title>
      <link href="/2020/01/26/%E8%86%A8%E8%83%80%E7%9A%84%E6%88%91%E7%88%AC%E4%BA%86%E4%B8%80%E4%B8%8B%E9%93%BE%E5%AE%B6/"/>
      <url>/2020/01/26/%E8%86%A8%E8%83%80%E7%9A%84%E6%88%91%E7%88%AC%E4%BA%86%E4%B8%80%E4%B8%8B%E9%93%BE%E5%AE%B6/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>åˆ«é—®ä¸ºä»€ä¹ˆçˆ¬çš„æ˜¯äºŒæ‰‹æˆ¿ï¼Œé—®å°±æ˜¯ä¹°ä¸èµ·ï¼Œå—¯ï¼Œæ˜¯çš„ï¼Œæˆ‘è¿ç°åœ¨çˆ¬çš„äºŒæ‰‹æˆ¿ä¹Ÿä¸€æ ·ä¹°ä¸èµ·ã€‚</p><p><a href="https://i.imgur.com/Z2BWQfG.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Z2BWQfG.jpg" class="lazyload" title></a></p><p>æˆ‘ä»¬è¨€å½’æ­£ä¼ ï¼Œæˆ‘åœ¨è¿æ¥ä¸Šæ‰¾ä¸€äº†ä¸€ä¸‹äºŒæ‰‹æˆ¿ï¼ŒæŒºå¤šçš„ï¼Œå…­ä¸‡å¤šå¥—ï¼Œå°±æ˜¯ä¸çŸ¥é“æˆ‘çš„åœ¨å“ªã€‚</p><p><a href="https://i.imgur.com/P7nnT61.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/P7nnT61.png" class="lazyload" title></a></p><p>å¬è¯´ä»Šå¹´æˆ¿åœ°äº§ä¸æ™¯æ°”ï¼Œä»·æ ¼æœ‰æ‰€ä¸‹é™(ä¸€ç‚¹ç‚¹)ï¼Œæ‰€ä»¥æˆ‘é£å¹³æµªé™çš„å¿ƒä¹Ÿå¼€å§‹è ¢è ¢æ¬²åŠ¨ï¼Œå•Šï¼Œæ˜¥å¤©æ¥äº†å—ï¼ï¼ï¼</p><p>çˆ¬è™«éœ€è¦çŸ¥é“å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯åˆ†é¡µï¼Œå¦ä¸€ä¸ªæ˜¯è¯¦æƒ…é¡µï¼Œæˆ‘ä»¬ä»é“¾å®¶çš„åœ°å€å¯ä»¥çœ‹å‡º<strong><a href="https://gz.lianjia.com/ershoufang/pg2/" target="_blank" rel="noopener">https://gz.lianjia.com/ershoufang/pg2/</a></strong>ï¼Œpg2åº”è¯¥å°±æ˜¯å•è¯page2çš„ç¼©å†™ï¼Œèµ¶ç´§ç¿»åˆ°ç¬¬ä¸‰é¡µ,æœä¸èµ·ç„¶æ˜¯pg3ï¼Œåˆ†é¡µæœ‰äº†æˆ‘ä»¬æ¥çœ‹çœ‹è¯¦æƒ…é¡µï¼Œä¸‡èƒ½çš„<strong>F12</strong>,é€šè¿‡æ ‡é¢˜ç›´æ¥æ˜¾ç¤ºå‡ºè¯¦æƒ…é¡µï¼Œè¿æ‹¼æ¥éƒ½çœäº†ï¼Œé“¾å®¶çœŸè´´å¿ƒã€‚</p><p><a href="https://i.imgur.com/MRXYnZI.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/MRXYnZI.png" class="lazyload" title></a></p><p>å†çœ‹çœ‹é‡Œé¢çš„è¯¦æƒ…é¡µæ‰€æœ‰æ•°æ®è¢«å®‰æ’çš„æ•´æ•´é½é½ï¼ŒçœŸé¦™ã€‚</p><p><a href="https://i.imgur.com/88OWL7m.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/88OWL7m.png" class="lazyload" title></a></p><p>ç«Ÿç„¶ä¸‡äº‹ä¿±å¤‡ï¼Œé‚£æˆ‘ä»¬å°±ä¸Šå§ï¼Œä»£ç æ’¸èµ·æ¥ï¼ï¼ï¼</p><p><a href="https://i.imgur.com/TVsyREI.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/TVsyREI.jpg" class="lazyload" title></a></p><h3 id="æ’¸ä»£ç "><a href="#æ’¸ä»£ç " class="headerlink" title="æ’¸ä»£ç "></a>æ’¸ä»£ç </h3><p>çˆ¬è™«æ¡†æ¶ç”¨çš„æ˜¯ <strong>webmagic</strong> é€šè¿‡ä¸€ä¸ªå¾ªç¯ç”Ÿæˆ <strong>pg</strong> é¡µï¼Œå†æŠŠæ€•ä¸‹æ¥çš„æ•°æ®è½åˆ°MySQLæ•°æ®åº“ã€‚<br>åˆ«é—®ä¸ºå•¥ç”¨ <strong>webmagic</strong> ï¼Œé—®å°±æ˜¯å–œæ¬¢(ç®€å•)ã€‚</p><p><a href="https://i.imgur.com/QhgYNCZ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/QhgYNCZ.jpg" class="lazyload" title></a></p><p>å·´æ‹‰å·´æ‹‰å†™å¥½ä»£ç ï¼Œä»£ç ä¸å¤æ‚ï¼Œåªè¦ä¼šxpathï¼Œæ’¸éå¤©ä¸‹éƒ½ä¸æ€•ï¼Œä»£ç åœ°å€ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-lianjia</span><br></pre></td></tr></tbody></table></figure></div><p>æˆ‘ä»¬æ¥çœ‹çœ‹æˆæœï¼Œæˆ‘ä»¬æ¥æ’åºä¸€ä¸‹ï¼Œä»é«˜åˆ°ä½ï¼Œåˆºæ¿€ã€‚<br><a href="https://i.imgur.com/pB20zv7.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/pB20zv7.png" class="lazyload" title></a></p><p>çº¢è‰²æ¡†å·¦è¾¹çš„æ˜¯å•ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰ï¼Œå³è¾¹çš„æ˜¯æ€»ä»·ï¼ˆä¸‡å…ƒï¼‰ï¼Œçœ‹å®Œè¿™ä»·æ ¼æ„Ÿè§‰è¡€å‹æœ‰ç‚¹é«˜ï¼Œæ‰‹é‡Œçš„çªçªå¤´çªç„¶ä¸é¦™äº†ã€‚</p><p><a href="https://i.imgur.com/MWookXS.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/MWookXS.jpg" class="lazyload" title></a></p><p>æˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹ä½ä»·å§ï¼Œæƒ¹ä¸èµ·.jpg</p><p><a href="https://i.imgur.com/s8IoeHF.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/s8IoeHF.png" class="lazyload" title></a></p><p>ä½ä»·çš„å°±æ˜¯å¾ˆé¦™äº†,é™¤äº†ååƒ»ä¸€ç‚¹ã€å°ä¸€ç‚¹ã€‚ã€‚ã€‚</p><h3 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h3><p>çˆ¬å–çš„æ—¶å€™åªèƒ½çˆ¬åˆ°ä¸€ç™¾é¡µï¼Œå¦‚æœå†å¾€ä¸‹å°±æ˜¯é‡å¤æ•°æ®ï¼Œæ­¤æ—¶ä½ éœ€è¦å¢åŠ ç­›é€‰æ¡ä»¶ï¼Œæ•°æ®å°±ä¼šå˜å¾—ä¸ä¸€æ ·ï¼Œ<br>å¯èƒ½å°±æ˜¯ä¸ºäº†é˜²æ­¢æˆ‘è¿™ç§äººå»çˆ¬æ•°æ®åšé™åˆ¶ã€‚ä¸è¿‡æƒ³æƒ³å…¶å®ä¹Ÿæ­£å¸¸ï¼Œæ­£å¸¸çœ‹æˆ¿çš„è°çœŸçš„èƒ½ç¿»åˆ°ä¸€ç™¾é¡µï¼Œ<br>æˆ‘ç¾ŠåŸçš„æˆ¿å­çœ‹çœ‹å°±å¥½ï¼Œä¸è¦ç®¡å‡ æ‰‹çš„ï¼Œåæ­£æˆ‘éƒ½ä¹°ä¸èµ·ã€‚</p><p><a href="https://i.imgur.com/dHOTmhZ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/dHOTmhZ.jpg" class="lazyload" title></a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> çˆ¬è™« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡ç£…ï¼šRedis 5.0 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼Œ19 ä¸ªæ–°ç‰¹æ€§ï¼</title>
      <link href="/2019/11/02/%E9%87%8D%E7%A3%85%EF%BC%9ARedis%205.0%20%E6%AD%A3%E5%BC%8F%E7%89%88%E5%8F%91%E5%B8%83%E4%BA%86%EF%BC%8C19%20%E4%B8%AA%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%81/"/>
      <url>/2019/11/02/%E9%87%8D%E7%A3%85%EF%BC%9ARedis%205.0%20%E6%AD%A3%E5%BC%8F%E7%89%88%E5%8F%91%E5%B8%83%E4%BA%86%EF%BC%8C19%20%E4%B8%AA%E6%96%B0%E7%89%B9%E6%80%A7%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p><a href="https://i.imgur.com/kxrr5OC.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/kxrr5OC.jpg" class="lazyload" title></a></p><h1 id="Redis-5-0-GA-æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼"><a href="#Redis-5-0-GA-æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼" class="headerlink" title="Redis 5.0 GA æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼"></a>Redis 5.0 GA æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹è½½åœ°å€ï¼š</span><br><span class="line">download.redis.io/releases/redis-5.0.0.tar.gz</span><br><span class="line">æºç ä¸‹è½½ï¼š</span><br><span class="line">github.com/antirez/redis/releases/tag/5.0.0</span><br></pre></td></tr></tbody></table></figure></div><p>å…ˆçœ‹ä¸€ä¸‹ Redis 5 å¸¦æ¥çš„æ›´æ–°å†…å®¹ï¼š</p><ul><li><ol><li>æ–°çš„æµæ•°æ®ç±»å‹(Stream data type) <a href="https://redis.io/topics/streams-intro" target="_blank" rel="noopener">https://redis.io/topics/streams-intro</a></li></ol></li><li><p>2.æ–°çš„ Redis æ¨¡å— APIï¼šå®šæ—¶å™¨ã€é›†ç¾¤å’Œå­—å…¸ API(Timers, Cluster and Dictionary APIs)</p></li><li><ol start="3"><li>RDB ç°åœ¨å¯å­˜å‚¨ LFU å’Œ LRU ä¿¡æ¯</li></ol></li><li><p>4.redis-cli ä¸­çš„é›†ç¾¤ç®¡ç†å™¨ä» Ruby (redis-trib.rb) ç§»æ¤åˆ°äº† C è¯­è¨€ä»£ç ã€‚æ‰§è¡Œ <code>redis-cli --- cluster help</code> å‘½ä»¤ä»¥äº†è§£æ›´å¤šä¿¡æ¯</p></li><li><ol start="5"><li>æ–°çš„æœ‰åºé›†åˆ(sorted set)å‘½ä»¤ï¼šZPOPMIN/MAX å’Œé˜»å¡å˜ä½“(blocking variants)</li></ol></li><li><ol start="6"><li>å‡çº§ Active defragmentation è‡³ v2 ç‰ˆæœ¬</li></ol></li><li><ol start="7"><li>å¢å¼º HyperLogLog çš„å®ç°</li></ol></li><li><ol start="8"><li>æ›´å¥½çš„å†…å­˜ç»Ÿè®¡æŠ¥å‘Š</li></ol></li><li><ol start="9"><li>è®¸å¤šåŒ…å«å­å‘½ä»¤çš„å‘½ä»¤ç°åœ¨éƒ½æœ‰ä¸€ä¸ª HELP å­å‘½ä»¤</li></ol></li><li><ol start="10"><li>å®¢æˆ·ç«¯é¢‘ç¹è¿æ¥å’Œæ–­å¼€è¿æ¥æ—¶ï¼Œæ€§èƒ½è¡¨ç°æ›´å¥½</li></ol></li><li><ol start="11"><li>è®¸å¤šé”™è¯¯ä¿®å¤å’Œå…¶ä»–æ–¹é¢çš„æ”¹è¿›</li></ol></li><li><ol start="12"><li>å‡çº§ Jemalloc è‡³ 5.1 ç‰ˆæœ¬</li></ol></li><li><ol start="13"><li>å¼•å…¥ CLIENT UNBLOCK å’Œ CLIENT ID</li></ol></li><li><ol start="14"><li>æ–°å¢ LOLWUT å‘½ä»¤ <a href="http://antirez.com/news/123" target="_blank" rel="noopener">http://antirez.com/news/123</a></li></ol></li><li><ol start="15"><li>åœ¨ä¸å­˜åœ¨éœ€è¦ä¿æŒå‘åå…¼å®¹æ€§çš„åœ°æ–¹ï¼Œå¼ƒç”¨ â€œslaveâ€ æœ¯è¯­</li></ol></li><li><ol start="16"><li>ç½‘ç»œå±‚ä¸­çš„å·®å¼‚ä¼˜åŒ–</li></ol></li><li><ol start="17"><li>Lua ç›¸å…³çš„æ”¹è¿›ï¼š<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°† Lua è„šæœ¬æ›´å¥½åœ°ä¼ æ’­åˆ° replicas / AOF</span><br><span class="line">Lua è„šæœ¬ç°åœ¨å¯ä»¥è¶…æ—¶å¹¶åœ¨å‰¯æœ¬ä¸­è¿›å…¥ -BUSY çŠ¶æ€</span><br></pre></td></tr></tbody></table></figure></div></li></ol></li><li><ol start="18"><li>å¼•å…¥åŠ¨æ€çš„ HZ(Dynamic HZ) ä»¥å¹³è¡¡ç©ºé—² CPU ä½¿ç”¨ç‡å’Œå“åº”æ€§</li></ol></li><li><ol start="19"><li>å¯¹ Redis æ ¸å¿ƒä»£ç è¿›è¡Œäº†é‡æ„å¹¶åœ¨è®¸å¤šæ–¹é¢è¿›è¡Œäº†æ”¹è¿›</li></ol></li></ul><p>Redis 5 æ˜¯ Redis å¼•å…¥æµæ•°æ®ç±»å‹(Stream data type)çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼Œä¸ä½¿ç”¨è¯¥ç‰¹æ€§çš„ç”¨æˆ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Redis 5 ä¼šæœ‰æ›´å¥½çš„ä½“éªŒ â€”â€” è™½ç„¶å¼€å‘å›¢é˜Ÿå°šæœªå‘ç°å…³äºè¿™é¡¹ç‰¹æ€§çš„å…³é”®é”™è¯¯ã€‚</p><p>æ­¤å¤–ï¼Œå› ä¸ºè®¸å¤šå†…éƒ¨ç»“æ„ä¸ Redis 4 å…±äº«ï¼Œå› æ­¤åœ¨å†…éƒ¨å·¥ä½œæ–¹å¼æ–¹é¢ï¼Œå˜åŒ–ä¸ä¼šå¾ˆå¤§ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨RedisTemplateè®¿é—®Redisæ•°æ®ç»“æ„</title>
      <link href="/2019/09/30/%E4%BD%BF%E7%94%A8RedisTemplate%E8%AE%BF%E9%97%AERedis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2019/09/30/%E4%BD%BF%E7%94%A8RedisTemplate%E8%AE%BF%E9%97%AERedis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="Redis-æ•°æ®ç»“æ„ç®€ä»‹"><a href="#Redis-æ•°æ®ç»“æ„ç®€ä»‹" class="headerlink" title="Redis æ•°æ®ç»“æ„ç®€ä»‹"></a>Redis æ•°æ®ç»“æ„ç®€ä»‹</h1><p>Redis å¯ä»¥å­˜å‚¨é”®ä¸5ç§ä¸åŒæ•°æ®ç»“æ„ç±»å‹ä¹‹é—´çš„æ˜ å°„ï¼Œè¿™5ç§æ•°æ®ç»“æ„ç±»å‹åˆ†åˆ«ä¸ºStringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Listï¼ˆåˆ—è¡¨ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€Hashï¼ˆæ•£åˆ—ï¼‰å’Œ Zsetï¼ˆæœ‰åºé›†åˆï¼‰ã€‚</p><p>ä¸‹é¢æ¥å¯¹è¿™5ç§æ•°æ®ç»“æ„ç±»å‹ä½œç®€å•çš„ä»‹ç»ï¼š</p><p><a href="https://i.imgur.com/oHymQgy.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/oHymQgy.jpg" class="lazyload" title></a></p><p>Redis 5ç§æ•°æ®ç»“æ„çš„æ¦‚å¿µå¤§è‡´ä»‹ç»åˆ°è¿™è¾¹ï¼Œä¸‹é¢å°†ç»“åˆSpringå°è£…çš„RedisTemplateæ¥å¯¹è¿™5ç§æ•°æ®ç»“æ„çš„è¿ç”¨è¿›è¡Œæ¼”ç¤º</p><h3 id="RedisTemplateä»‹ç»"><a href="#RedisTemplateä»‹ç»" class="headerlink" title="RedisTemplateä»‹ç»"></a>RedisTemplateä»‹ç»</h3><p>spring å°è£…äº† RedisTemplate å¯¹è±¡æ¥è¿›è¡Œå¯¹redisçš„å„ç§æ“ä½œï¼Œå®ƒæ”¯æŒæ‰€æœ‰çš„ redis åŸç”Ÿçš„ apiã€‚</p><p>RedisTemplateåœ¨springä»£ç ä¸­çš„ç»“æ„å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.data.redis.core</span><br><span class="line">Class RedisTemplate<k,v></k,v></span><br><span class="line">java.lang.Object</span><br><span class="line">    org.springframework.data.redis.core.RedisAccessor</span><br><span class="line">        org.springframework.data.redis.core.RedisTemplate<k,v></k,v></span><br><span class="line">Type Parameters:</span><br><span class="line">K</span><br></pre></td></tr></tbody></table></figure></div><ul><li><p>the Redis key type against which the template works (usually a String)<br>æ¨¡æ¿ä¸­çš„Redis keyçš„ç±»å‹ï¼ˆé€šå¸¸ä¸ºStringï¼‰å¦‚ï¼šRedisTemplate<string, object><br>æ³¨æ„ï¼šå¦‚æœæ²¡ç‰¹æ®Šæƒ…å†µï¼Œåˆ‡å‹¿å®šä¹‰æˆRedisTemplate<object, object>ï¼Œå¦åˆ™æ ¹æ®é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šé€ æˆç±»å‹é”™è¯¯ ã€‚<br>V</object,></string,></p></li><li><p>the Redis value type against which the template works<br>æ¨¡æ¿ä¸­çš„Redis valueçš„ç±»å‹</p><h3 id="RedisTemplateä¸­å®šä¹‰äº†å¯¹5ç§æ•°æ®ç»“æ„æ“ä½œ"><a href="#RedisTemplateä¸­å®šä¹‰äº†å¯¹5ç§æ•°æ®ç»“æ„æ“ä½œ" class="headerlink" title="RedisTemplateä¸­å®šä¹‰äº†å¯¹5ç§æ•°æ®ç»“æ„æ“ä½œ"></a>RedisTemplateä¸­å®šä¹‰äº†å¯¹5ç§æ•°æ®ç»“æ„æ“ä½œ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redisTemplate.opsForValue();//æ“ä½œå­—ç¬¦ä¸²</span><br><span class="line">redisTemplate.opsForHash();//æ“ä½œhash</span><br><span class="line">redisTemplate.opsForList();//æ“ä½œlist</span><br><span class="line">redisTemplate.opsForSet();//æ“ä½œset</span><br><span class="line">redisTemplate.opsForZSet();//æ“ä½œæœ‰åºset</span><br></pre></td></tr></tbody></table></figure></div><h3 id="StringRedisTemplateä¸RedisTemplate"><a href="#StringRedisTemplateä¸RedisTemplate" class="headerlink" title="StringRedisTemplateä¸RedisTemplate"></a>StringRedisTemplateä¸RedisTemplate</h3></li><li><p>ä¸¤è€…çš„å…³ç³»æ˜¯StringRedisTemplateç»§æ‰¿RedisTemplateã€‚</p></li><li><p>ä¸¤è€…çš„æ•°æ®æ˜¯ä¸å…±é€šçš„ï¼›ä¹Ÿå°±æ˜¯è¯´StringRedisTemplateåªèƒ½ç®¡ç†StringRedisTemplateé‡Œé¢çš„æ•°æ®ï¼ŒRedisTemplateåªèƒ½ç®¡ç†RedisTemplateä¸­çš„æ•°æ®ã€‚</p></li><li><p>SDRé»˜è®¤é‡‡ç”¨çš„åºåˆ—åŒ–ç­–ç•¥æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯Stringçš„åºåˆ—åŒ–ç­–ç•¥ï¼Œä¸€ç§æ˜¯JDKçš„åºåˆ—åŒ–ç­–ç•¥ã€‚</p></li><li><p>StringRedisTemplateé»˜è®¤é‡‡ç”¨çš„æ˜¯Stringçš„åºåˆ—åŒ–ç­–ç•¥ï¼Œä¿å­˜çš„keyå’Œvalueéƒ½æ˜¯é‡‡ç”¨æ­¤ç­–ç•¥åºåˆ—åŒ–ä¿å­˜çš„ã€‚</p></li><li><p>RedisTemplateé»˜è®¤é‡‡ç”¨çš„æ˜¯JDKçš„åºåˆ—åŒ–ç­–ç•¥ï¼Œä¿å­˜çš„keyå’Œvalueéƒ½æ˜¯é‡‡ç”¨æ­¤ç­–ç•¥åºåˆ—åŒ–ä¿å­˜çš„ã€‚</p></li></ul><h3 id="RedisTemplateé…ç½®å¦‚ä¸‹ï¼š"><a href="#RedisTemplateé…ç½®å¦‚ä¸‹ï¼š" class="headerlink" title="RedisTemplateé…ç½®å¦‚ä¸‹ï¼š"></a>RedisTemplateé…ç½®å¦‚ä¸‹ï¼š</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Bean</span><br><span class="line">    public RedisTemplate<string, object> redisTemplate(RedisConnectionFactory redisConnectionFactory)</string,></span><br><span class="line">    {</span><br><span class="line">        Jackson2JsonRedisSerializer<object> jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer<object>(Object.class);<br><span class="line">        ObjectMapper om = new ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        RedisTemplate<string, object> template = new RedisTemplate<string, object>();</string,></string,></span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        return template;</span><br><span class="line">    }</span><br></object></object></span></pre></td></tr></tbody></table></figure></div><h3 id="Redisçš„Stringæ•°æ®ç»“æ„-ï¼ˆæ¨èä½¿ç”¨StringRedisTemplateï¼‰"><a href="#Redisçš„Stringæ•°æ®ç»“æ„-ï¼ˆæ¨èä½¿ç”¨StringRedisTemplateï¼‰" class="headerlink" title="Redisçš„Stringæ•°æ®ç»“æ„ ï¼ˆæ¨èä½¿ç”¨StringRedisTemplateï¼‰"></a>Redisçš„Stringæ•°æ®ç»“æ„ ï¼ˆæ¨èä½¿ç”¨StringRedisTemplateï¼‰</h3><p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨RedisTemplateéœ€è¦æ›´æ”¹åºåˆ—åŒ–æ–¹å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RedisSerializer<string> stringSerializer = new StringRedisSerializer();</string></span><br><span class="line">        template.setKeySerializer(stringSerializer );</span><br><span class="line">        template.setValueSerializer(stringSerializer );</span><br><span class="line">        template.setHashKeySerializer(stringSerializer );</span><br><span class="line">        template.setHashValueSerializer(stringSerializer );</span><br></pre></td></tr></tbody></table></figure></div><p>public interface ValueOperations<k,v><br>Redis operations for simple (or in Redis terminology â€˜stringâ€™) values.<br>ValueOperationså¯ä»¥å¯¹Stringæ•°æ®ç»“æ„è¿›è¡Œæ“ä½œï¼š</k,v></p><ul><li><p>set void set(K key, V value);</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šredisTemplate.opsForValue().set("name","tom");</span><br><span class="line">ç»“æœï¼šredisTemplate.opsForValue().get("name")  è¾“å‡ºç»“æœä¸ºtom</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>set void set(K key, V value, long timeout, TimeUnit unit);</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šredisTemplate.opsForValue().set("name","tom",10, TimeUnit.SECONDS);</span><br><span class="line">ç»“æœï¼šredisTemplate.opsForValue().get("name")ç”±äºè®¾ç½®çš„æ˜¯10ç§’å¤±æ•ˆï¼Œåç§’ä¹‹å†…æŸ¥è¯¢æœ‰ç»“æœï¼Œåç§’ä¹‹åè¿”å›ä¸ºnull</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>set void set(K key, V value, long offset);<br>è¯¥æ–¹æ³•æ˜¯ç”¨ value å‚æ•°è¦†å†™(overwrite)ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().set("key","hello world");</span><br><span class="line">        template.opsForValue().set("key","redis", 6);</span><br><span class="line">        System.out.println("***************"+template.opsForValue().get("key"));</span><br><span class="line">ç»“æœï¼š***************hello redis</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>setIfAbsent Boolean setIfAbsent(K key, V value);</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForValue().setIfAbsent("multi1","multi1"));//false  multi1ä¹‹å‰å·²ç»å­˜åœ¨</span><br><span class="line">        System.out.println(template.opsForValue().setIfAbsent("multi111","multi111"));//true  multi111ä¹‹å‰ä¸å­˜åœ¨</span><br><span class="line">ç»“æœï¼šfalse</span><br><span class="line">true</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>multiSet void multiSet(Map<!--? extends K, ? extends V--> m);<br>ä¸ºå¤šä¸ªé”®åˆ†åˆ«è®¾ç½®å®ƒä»¬çš„å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šMap<string,string> maps = new HashMap<string, string>();</string,></string,string></span><br><span class="line">        maps.put("multi1","multi1");</span><br><span class="line">        maps.put("multi2","multi2");</span><br><span class="line">        maps.put("multi3","multi3");</span><br><span class="line">        template.opsForValue().multiSet(maps);</span><br><span class="line">        List<string> keys = new ArrayList<string>();</string></string></span><br><span class="line">        keys.add("multi1");</span><br><span class="line">        keys.add("multi2");</span><br><span class="line">        keys.add("multi3");</span><br><span class="line">        System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line">ç»“æœï¼š[multi1, multi2, multi3]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>multiSetIfAbsent Boolean multiSetIfAbsent(Map<!--? extends K, ? extends V--> m);<br>ä¸ºå¤šä¸ªé”®åˆ†åˆ«è®¾ç½®å®ƒä»¬çš„å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›falseï¼Œä¸å­˜åœ¨è¿”å›true</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šMap<string,string> maps = new HashMap<string, string>();</string,></string,string></span><br><span class="line">        maps.put("multi11","multi11");</span><br><span class="line">        maps.put("multi22","multi22");</span><br><span class="line">        maps.put("multi33","multi33");</span><br><span class="line">        Map<string,string> maps2 = new HashMap<string, string>();</string,></string,string></span><br><span class="line">        maps2.put("multi1","multi1");</span><br><span class="line">        maps2.put("multi2","multi2");</span><br><span class="line">        maps2.put("multi3","multi3");</span><br><span class="line">        System.out.println(template.opsForValue().multiSetIfAbsent(maps));</span><br><span class="line">        System.out.println(template.opsForValue().multiSetIfAbsent(maps2));</span><br><span class="line">ç»“æœï¼štrue</span><br><span class="line">false</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>get V get(Object key);</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().set("key","hello world");</span><br><span class="line">        System.out.println("***************"+template.opsForValue().get("key"));</span><br><span class="line">ç»“æœï¼š***************hello world</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>getAndSet V getAndSet(K key, V value);<br>è®¾ç½®é”®çš„å­—ç¬¦ä¸²å€¼å¹¶è¿”å›å…¶æ—§å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().set("getSetTest","test");</span><br><span class="line">        System.out.println(template.opsForValue().getAndSet("getSetTest","test2"));</span><br><span class="line">ç»“æœï¼štest</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>multiGet List<v> multiGet(Collection<k> keys);<br>ä¸ºå¤šä¸ªé”®åˆ†åˆ«å–å‡ºå®ƒä»¬çš„å€¼</k></v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šMap<string,string> maps = new HashMap<string, string>();</string,></string,string></span><br><span class="line">        maps.put("multi1","multi1");</span><br><span class="line">        maps.put("multi2","multi2");</span><br><span class="line">        maps.put("multi3","multi3");</span><br><span class="line">        template.opsForValue().multiSet(maps);</span><br><span class="line">        List<string> keys = new ArrayList<string>();</string></string></span><br><span class="line">        keys.add("multi1");</span><br><span class="line">        keys.add("multi2");</span><br><span class="line">        keys.add("multi3");</span><br><span class="line">        System.out.println(template.opsForValue().multiGet(keys));</span><br><span class="line">ç»“æœï¼š[multi1, multi2, multi3]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>increment Long increment(K key, long delta);<br>æ”¯æŒæ•´æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().increment("increlong",1);</span><br><span class="line">        System.out.println("***************"+template.opsForValue().get("increlong"));</span><br><span class="line">ç»“æœï¼š***************1</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>increment Double increment(K key, double delta);<br>ä¹Ÿæ”¯æŒæµ®ç‚¹æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().increment("increlong",1.2);</span><br><span class="line">        System.out.println("***************"+template.opsForValue().get("increlong"));</span><br><span class="line">ç»“æœï¼š***************2.2</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>append Integer append(K key, String value);<br>å¦‚æœkeyå·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¯¥å‘½ä»¤å°†è¯¥å€¼è¿½åŠ åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™å®ƒè¢«åˆ›å»ºå¹¶è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå› æ­¤APPENDåœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹å°†ç±»ä¼¼äºSETã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().append("appendTest","Hello");</span><br><span class="line">        System.out.println(template.opsForValue().get("appendTest"));</span><br><span class="line">        template.opsForValue().append("appendTest","world");</span><br><span class="line">        System.out.println(template.opsForValue().get("appendTest"));</span><br><span class="line">ç»“æœï¼šHello</span><br><span class="line">        Helloworld</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>get String get(K key, long start, long end);<br>æˆªå–keyæ‰€å¯¹åº”çš„valueå­—ç¬¦ä¸²</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šappendTestå¯¹åº”çš„valueä¸ºHelloworld</span><br><span class="line">System.out.println("*********"+template.opsForValue().get("appendTest",0,5));</span><br><span class="line">ç»“æœï¼š*********Hellow</span><br><span class="line">ä½¿ç”¨ï¼šSystem.out.println("*********"+template.opsForValue().get("appendTest",0,-1));</span><br><span class="line">ç»“æœï¼š*********Helloworld</span><br><span class="line">ä½¿ç”¨ï¼šSystem.out.println("*********"+template.opsForValue().get("appendTest",-3,-1));</span><br><span class="line">ç»“æœï¼š*********rld</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>size Long size(K key);<br>è¿”å›keyæ‰€å¯¹åº”çš„valueå€¼å¾—é•¿åº¦</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().set("key","hello world");</span><br><span class="line">    System.out.println("***************"+template.opsForValue().size("key"));</span><br><span class="line">ç»“æœï¼š***************11</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>setBit Boolean setBit(K key, long offset, boolean value);<br>å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)<br>keyé”®å¯¹åº”çš„å€¼valueå¯¹åº”çš„asciiç ,åœ¨offsetçš„ä½ç½®(ä»å·¦å‘å³æ•°)å˜ä¸ºvalue</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForValue().set("bitTest","a");</span><br><span class="line">        // 'a' çš„ASCIIç æ˜¯ 97ã€‚è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ˜¯ï¼š01100001</span><br><span class="line">        // 'b' çš„ASCIIç æ˜¯ 98  è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ˜¯ï¼š01100010</span><br><span class="line">        // 'c' çš„ASCIIç æ˜¯ 99  è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ˜¯ï¼š01100011</span><br><span class="line">        //å› ä¸ºäºŒè¿›åˆ¶åªæœ‰0å’Œ1ï¼Œåœ¨setbitä¸­trueä¸º1ï¼Œfalseä¸º0ï¼Œå› æ­¤æˆ‘è¦å˜ä¸º'b'çš„è¯ç¬¬å…­ä½è®¾ç½®ä¸º1ï¼Œç¬¬ä¸ƒä½è®¾ç½®ä¸º0</span><br><span class="line">        template.opsForValue().setBit("bitTest",6, true);</span><br><span class="line">        template.opsForValue().setBit("bitTest",7, false);</span><br><span class="line">        System.out.println(template.opsForValue().get("bitTest"));</span><br><span class="line">ç»“æœï¼šb</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>getBit Boolean getBit(K key, long offset);<br>è·å–é”®å¯¹åº”å€¼çš„asciiç çš„åœ¨offsetå¤„ä½å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForValue().getBit("bitTest",7));</span><br><span class="line">ç»“æœï¼šfalse</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Redisçš„Listæ•°æ®ç»“æ„"><a href="#Redisçš„Listæ•°æ®ç»“æ„" class="headerlink" title="Redisçš„Listæ•°æ®ç»“æ„"></a>Redisçš„Listæ•°æ®ç»“æ„</h3><p>è¿™è¾¹æˆ‘ä»¬æŠŠRedisTemplateåºåˆ—åŒ–æ–¹å¼æ”¹å›ä¹‹å‰çš„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Jackson2JsonRedisSerializer<object> jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer<object>(Object.class);<br><span class="line">        ObjectMapper om = new ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">RedisTemplate<string, object> template = new RedisTemplate<string, object>();</string,></string,></span><br><span class="line">       template.setKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br></object></object></span></pre></td></tr></tbody></table></figure></div><p>public interface ListOperations<k,v><br>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ å¯¼åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰<br>ListOperationsä¸“é—¨æ“ä½œliståˆ—è¡¨ï¼š</k,v></p></li><li><p>List<v> range(K key, long start, long end);<br>è¿”å›å­˜å‚¨åœ¨é”®ä¸­çš„åˆ—è¡¨çš„æŒ‡å®šå…ƒç´ ã€‚åç§»å¼€å§‹å’Œåœæ­¢æ˜¯åŸºäºé›¶çš„ç´¢å¼•ï¼Œå…¶ä¸­0æ˜¯åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆåˆ—è¡¨çš„å¤´éƒ¨ï¼‰ï¼Œ1æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ </v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">ç»“æœ:[c#, c++, python, java, c#, c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>void trim(K key, long start, long end);<br>ä¿®å‰ªç°æœ‰åˆ—è¡¨ï¼Œä½¿å…¶åªåŒ…å«æŒ‡å®šçš„æŒ‡å®šèŒƒå›´çš„å…ƒç´ ï¼Œèµ·å§‹å’Œåœæ­¢éƒ½æ˜¯åŸºäº0çš„ç´¢å¼•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">template.opsForList().trim("list",1,-1);//è£å‰ªç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">System.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">ç»“æœ:[c#, c++, python, java, c#, c#]</span><br><span class="line">[c++, python, java, c#, c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long size(K key);<br>è¿”å›å­˜å‚¨åœ¨é”®ä¸­çš„åˆ—è¡¨çš„é•¿åº¦ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶è§£é‡Šä¸ºç©ºåˆ—è¡¨ï¼Œå¹¶è¿”å›0ã€‚å½“keyå­˜å‚¨çš„å€¼ä¸æ˜¯åˆ—è¡¨æ—¶è¿”å›é”™è¯¯ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().size("list"));</span><br><span class="line">ç»“æœ:6</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long leftPush(K key, V value);<br>å°†æ‰€æœ‰æŒ‡å®šçš„å€¼æ’å…¥å­˜å‚¨åœ¨é”®çš„åˆ—è¡¨çš„å¤´éƒ¨ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™åœ¨æ‰§è¡Œæ¨é€æ“ä½œä¹‹å‰å°†å…¶åˆ›å»ºä¸ºç©ºåˆ—è¡¨ã€‚ï¼ˆä»å·¦è¾¹æ’å…¥ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForList().leftPush("list","java");</span><br><span class="line">        template.opsForList().leftPush("list","python");</span><br><span class="line">        template.opsForList().leftPush("list","c++");</span><br><span class="line">ç»“æœ:è¿”å›çš„ç»“æœä¸ºæ¨é€æ“ä½œåçš„åˆ—è¡¨çš„é•¿åº¦</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long leftPushAll(K key, Vâ€¦ values);<br>æ‰¹é‡æŠŠä¸€ä¸ªæ•°ç»„æ’å…¥åˆ°åˆ—è¡¨ä¸­</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šString[] stringarrays = new String[]{"1","2","3"};</span><br><span class="line">        template.opsForList().leftPushAll("listarray",stringarrays);</span><br><span class="line">        System.out.println(template.opsForList().range("listarray",0,-1));</span><br><span class="line">ç»“æœ:[3, 2, 1]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long leftPushAll(K key, Collection<v> values);<br>æ‰¹é‡æŠŠä¸€ä¸ªé›†åˆæ’å…¥åˆ°åˆ—è¡¨ä¸­</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šList<object> strings = new ArrayList<object>();<br><span class="line">        strings.add("1");</span><br><span class="line">        strings.add("2");</span><br><span class="line">        strings.add("3");</span><br><span class="line">        template.opsForList().leftPushAll("listcollection4", strings);</span><br><span class="line">        System.out.println(template.opsForList().range("listcollection4",0,-1));</span><br><span class="line">ç»“æœ:[3, 2, 1]</span><br></object></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long leftPushIfPresent(K key, V value);<br>åªæœ‰å­˜åœ¨keyå¯¹åº”çš„åˆ—è¡¨æ‰èƒ½å°†è¿™ä¸ªvalueå€¼æ’å…¥åˆ°keyæ‰€å¯¹åº”çš„åˆ—è¡¨ä¸­</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().leftPushIfPresent("leftPushIfPresent","aa"));</span><br><span class="line">        System.out.println(template.opsForList().leftPushIfPresent("leftPushIfPresent","bb"));</span><br><span class="line">==========åˆ†å‰²çº¿===========</span><br><span class="line">System.out.println(template.opsForList().leftPush("leftPushIfPresent","aa"));</span><br><span class="line">        System.out.println(template.opsForList().leftPushIfPresent("leftPushIfPresent","bb"));</span><br><span class="line">ç»“æœ:</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">==========åˆ†å‰²çº¿===========</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long leftPush(K key, V pivot, V value);<br>æŠŠvalueå€¼æ”¾åˆ°keyå¯¹åº”åˆ—è¡¨ä¸­pivotå€¼çš„å·¦é¢ï¼Œå¦‚æœpivotå€¼å­˜åœ¨çš„è¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForList().leftPush("list","java","oc");</span><br><span class="line">        System.out.print(template.opsForList().range("list",0,-1));</span><br><span class="line">ç»“æœï¼š[c++, python, oc, java, c#, c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long rightPush(K key, V value);<br>å°†æ‰€æœ‰æŒ‡å®šçš„å€¼æ’å…¥å­˜å‚¨åœ¨é”®çš„åˆ—è¡¨çš„å¤´éƒ¨ã€‚å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™åœ¨æ‰§è¡Œæ¨é€æ“ä½œä¹‹å‰å°†å…¶åˆ›å»ºä¸ºç©ºåˆ—è¡¨ã€‚ï¼ˆä»å³è¾¹æ’å…¥ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štemplate.opsForList().rightPush("listRight","java");</span><br><span class="line">        template.opsForList().rightPush("listRight","python");</span><br><span class="line">        template.opsForList().rightPush("listRight","c++");</span><br><span class="line">ç»“æœ:</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long rightPushAll(K key, Vâ€¦ values);</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šString[] stringarrays = new String[]{"1","2","3"};</span><br><span class="line">        template.opsForList().rightPushAll("listarrayright",stringarrays);</span><br><span class="line">        System.out.println(template.opsForList().range("listarrayright",0,-1));</span><br><span class="line">ç»“æœ:[1, 2, 3]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long rightPushAll(K key, Collection<v> values);</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šList<object> strings = new ArrayList<object>();<br><span class="line">        strings.add("1");</span><br><span class="line">        strings.add("2");</span><br><span class="line">        strings.add("3");</span><br><span class="line">        template.opsForList().rightPushAll("listcollectionright", strings);</span><br><span class="line">        System.out.println(template.opsForList().range("listcollectionright",0,-1));</span><br><span class="line">ç»“æœ:[1, 2, 3]</span><br></object></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long rightPushIfPresent(K key, V value);<br>åªæœ‰å­˜åœ¨keyå¯¹åº”çš„åˆ—è¡¨æ‰èƒ½å°†è¿™ä¸ªvalueå€¼æ’å…¥åˆ°keyæ‰€å¯¹åº”çš„åˆ—è¡¨ä¸­<br>ä½¿ç”¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(template.opsForList().rightPushIfPresent("rightPushIfPresent","aa"));</span><br><span class="line">        System.out.println(template.opsForList().rightPushIfPresent("rightPushIfPresent","bb"));</span><br><span class="line">        System.out.println("==========åˆ†å‰²çº¿===========");</span><br><span class="line">        System.out.println(template.opsForList().rightPush("rightPushIfPresent","aa"));</span><br><span class="line">        System.out.println(template.opsForList().rightPushIfPresent("rightPushIfPresent","bb"));</span><br><span class="line">ç»“æœ:0</span><br><span class="line">0</span><br><span class="line">==========åˆ†å‰²çº¿===========</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long rightPush(K key, V pivot, V value);<br>æŠŠvalueå€¼æ”¾åˆ°keyå¯¹åº”åˆ—è¡¨ä¸­pivotå€¼çš„å³é¢ï¼Œå¦‚æœpivotå€¼å­˜åœ¨çš„è¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">        template.opsForList().rightPush("listRight","python","oc");</span><br><span class="line">        System.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">ç»“æœ:[java, python, c++]</span><br><span class="line">[java, python, oc, c++]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>void set(K key, long index, V value);<br>åœ¨åˆ—è¡¨ä¸­indexçš„ä½ç½®è®¾ç½®valueå€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">        template.opsForList().set("listRight",1,"setValue");</span><br><span class="line">        System.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">ç»“æœ:[java, python, oc, c++]</span><br><span class="line">[java, setValue, oc, c++]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long remove(K key, long count, Object value);<br>ä»å­˜å‚¨åœ¨é”®ä¸­çš„åˆ—è¡¨ä¸­åˆ é™¤ç­‰äºå€¼çš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªè®¡æ•°äº‹ä»¶ã€‚<br>è®¡æ•°å‚æ•°ä»¥ä¸‹åˆ—æ–¹å¼å½±å“æ“ä½œï¼š<br>count> 0ï¼šåˆ é™¤ç­‰äºä»å¤´åˆ°å°¾ç§»åŠ¨çš„å€¼çš„å…ƒç´ ã€‚<br>count <0ï¼šåˆ é™¤ç­‰äºä»å°¾åˆ°å¤´ç§»åŠ¨çš„å€¼çš„å…ƒç´ ã€‚<br>count = 0ï¼šåˆ é™¤ç­‰äºvalueçš„æ‰€æœ‰å…ƒç´ ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">        template.opsForList().remove("listRight",1,"setValue");//å°†åˆ é™¤åˆ—è¡¨ä¸­å­˜å‚¨çš„åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡æ¬¡å‡ºç°çš„â€œsetValueâ€ã€‚</span><br><span class="line">        System.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">ç»“æœ:[java, setValue, oc, c++]</span><br><span class="line">[java, oc, c++]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V index(K key, long index);<br>æ ¹æ®ä¸‹è¡¨è·å–åˆ—è¡¨ä¸­çš„å€¼ï¼Œä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("listRight",0,-1));</span><br><span class="line">System.out.println(template.opsForList().index("listRight",2));</span><br><span class="line">ç»“æœ:[java, oc, c++]</span><br><span class="line">c++</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V leftPop(K key);<br>å¼¹å‡ºæœ€å·¦è¾¹çš„å…ƒç´ ï¼Œå¼¹å‡ºä¹‹åè¯¥å€¼åœ¨åˆ—è¡¨ä¸­å°†ä¸å¤å­˜åœ¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">        System.out.println(template.opsForList().leftPop("list"));</span><br><span class="line">        System.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">ç»“æœ:</span><br><span class="line">[c++, python, oc, java, c#, c#]</span><br><span class="line">c++</span><br><span class="line">[python, oc, java, c#, c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V leftPop(K key, long timeout, TimeUnit unit);<br>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šç”¨æ³•ä¸ leftPop(K key);ä¸€æ ·</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V rightPop(K key);<br>å¼¹å‡ºæœ€å³è¾¹çš„å…ƒç´ ï¼Œå¼¹å‡ºä¹‹åè¯¥å€¼åœ¨åˆ—è¡¨ä¸­å°†ä¸å¤å­˜åœ¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š System.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">        System.out.println(template.opsForList().rightPop("list"));</span><br><span class="line">        System.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">ç»“æœ:[python, oc, java, c#, c#]</span><br><span class="line">c#</span><br><span class="line">[python, oc, java, c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V rightPop(K key, long timeout, TimeUnit unit);<br>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šç”¨æ³•ä¸ rightPop(K key);ä¸€æ ·</span><br><span class="line">V rightPopAndLeftPush(K sourceKey, K destinationKey);</span><br><span class="line">ç”¨äºç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›ã€‚</span><br><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">template.opsForList().rightPopAndLeftPush("list","rightPopAndLeftPush");</span><br><span class="line">    System.out.println(template.opsForList().range("list",0,-1));</span><br><span class="line">    System.out.println(template.opsForList().range("rightPopAndLeftPush",0,-1));</span><br><span class="line">ç»“æœ:[oc, java,c#]</span><br><span class="line">[oc, java]</span><br><span class="line">[c#]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V rightPopAndLeftPush(K sourceKey, K destinationKey, long timeout, TimeUnit unit);<br>ç”¨äºç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šç”¨æ³•ä¸rightPopAndLeftPush(K sourceKey, K destinationKey)ä¸€æ ·</span><br><span class="line"></span><br><span class="line">### Redisçš„Hashæ•°æ®æœºæ„</span><br><span class="line">Redisçš„æ•£åˆ—å¯ä»¥è®©ç”¨æˆ·å°†å¤šä¸ªé”®å€¼å¯¹å­˜å‚¨åˆ°ä¸€ä¸ªRedisé”®é‡Œé¢ã€‚</span><br><span class="line">public interface HashOperations<h,hk,hv></h,hk,hv></span><br><span class="line">HashOperationsæä¾›ä¸€ç³»åˆ—æ–¹æ³•æ“ä½œhashï¼š</span><br></pre></td></tr></tbody></table></figure></div><p>åˆå§‹æ•°æ®:<br>//template.opsForHash().put(â€œredisHashâ€,â€nameâ€,â€tomâ€);</p><pre><code>//template.opsForHash().put("redisHash","age",26);//template.opsForHash().put("redisHash","class","6");</code></pre></li></ul><p>//Map<string,object> testMap = new HashMap();<br>        //testMap.put(â€œnameâ€,â€jackâ€);<br>        //testMap.put(â€œageâ€,27);<br>        //testMap.put(â€œclassâ€,â€1â€);<br>        //template.opsForHash().putAll(â€œredisHash1â€,testMap);</string,object></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long delete(H key, Object... hashKeys);</span><br><span class="line">åˆ é™¤ç»™å®šçš„å“ˆå¸ŒhashKeys</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().delete(â€œredisHashâ€,â€nameâ€));<br>        System.out.println(template.opsForHash().entries(â€œredisHashâ€));<br>ç»“æœï¼š1<br>{class=6, age=28.1}</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Boolean hasKey(H key, Object hashKey);</span><br><span class="line">ç¡®å®šå“ˆå¸ŒhashKeyæ˜¯å¦å­˜åœ¨</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().hasKey(â€œredisHashâ€,â€ageâ€));<br>        System.out.println(template.opsForHash().hasKey(â€œredisHashâ€,â€tttâ€));<br>ç»“æœï¼štrue<br>false</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- HV get(H key, Object hashKey);</span><br><span class="line">ä»é”®ä¸­çš„å“ˆå¸Œè·å–ç»™å®šhashKeyçš„å€¼</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().get(â€œredisHashâ€,â€ageâ€));<br>ç»“æœï¼š26</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- List<hv> multiGet(H key, Collection<hk> hashKeys);</hk></hv></span><br><span class="line">ä»å“ˆå¸Œä¸­è·å–ç»™å®šhashKeyçš„å€¼</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šList<object> kes = new ArrayList<object>();<br>        kes.add(â€œnameâ€);<br>        kes.add(â€œageâ€);<br>        System.out.println(template.opsForHash().multiGet(â€œredisHashâ€,kes));<br>ç»“æœï¼š[jack, 28.1]<p></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long increment(H key, HK hashKey, long delta);</span><br><span class="line">é€šè¿‡ç»™å®šçš„deltaå¢åŠ æ•£åˆ—hashKeyçš„å€¼ï¼ˆæ•´å‹ï¼‰</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().get(â€œredisHashâ€,â€ageâ€));<br>    System.out.println(template.opsForHash().increment(â€œredisHashâ€,â€ageâ€,1));<br>ç»“æœï¼š26<br>27</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Double increment(H key, HK hashKey, double delta);</span><br><span class="line">é€šè¿‡ç»™å®šçš„deltaå¢åŠ æ•£åˆ—hashKeyçš„å€¼ï¼ˆæµ®ç‚¹æ•°ï¼‰</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().get(â€œredisHashâ€,â€ageâ€));<br>    System.out.println(template.opsForHash().increment(â€œredisHashâ€,â€ageâ€,1.1));<br>ç»“æœï¼š27<br>28.1</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Set<hk> keys(H key);</hk></span><br><span class="line">è·å–keyæ‰€å¯¹åº”çš„æ•£åˆ—è¡¨çš„key</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().keys(â€œredisHash1â€));<br>//redisHash1æ‰€å¯¹åº”çš„æ•£åˆ—è¡¨ä¸º{class=1, name=jack, age=27}<br>ç»“æœï¼š[name, class, age]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long size(H key);</span><br><span class="line">è·å–keyæ‰€å¯¹åº”çš„æ•£åˆ—è¡¨çš„å¤§å°ä¸ªæ•°</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().size(â€œredisHash1â€));<br>//redisHash1æ‰€å¯¹åº”çš„æ•£åˆ—è¡¨ä¸º{class=1, name=jack, age=27}<br>ç»“æœï¼š3</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- void putAll(H key, Map<!--? extends HK, ? extends HV--> m);</span><br><span class="line">ä½¿ç”¨mä¸­æä¾›çš„å¤šä¸ªæ•£åˆ—å­—æ®µè®¾ç½®åˆ°keyå¯¹åº”çš„æ•£åˆ—è¡¨ä¸­</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šMap<string,object> testMap = new HashMap();<br>        testMap.put(â€œnameâ€,â€jackâ€);<br>        testMap.put(â€œageâ€,27);<br>        testMap.put(â€œclassâ€,â€1â€);<br>        template.opsForHash().putAll(â€œredisHash1â€,testMap);<br>        System.out.println(template.opsForHash().entries(â€œredisHash1â€));<br>ç»“æœï¼š{class=1, name=jack, age=27}</string,object></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- void put(H key, HK hashKey, HV value);</span><br><span class="line">è®¾ç½®æ•£åˆ—hashKeyçš„å€¼</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼štemplate.opsForHash().put(â€œredisHashâ€,â€nameâ€,â€tomâ€);<br>        template.opsForHash().put(â€œredisHashâ€,â€ageâ€,26);<br>        template.opsForHash().put(â€œredisHashâ€,â€classâ€,â€6â€);<br>System.out.println(template.opsForHash().entries(â€œredisHashâ€));<br>ç»“æœï¼š{age=26, class=6, name=tom}</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Boolean putIfAbsent(H key, HK hashKey, HV value);</span><br><span class="line">ä»…å½“hashKeyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®æ•£åˆ—hashKeyçš„å€¼ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().putIfAbsent(â€œredisHashâ€,â€ageâ€,30));<br>System.out.println(template.opsForHash().putIfAbsent(â€œredisHashâ€,â€kkkâ€,â€kkkâ€));<br>ç»“æœï¼šfalse<br>true</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- List<hv> values(H key);</hv></span><br><span class="line">è·å–æ•´ä¸ªå“ˆå¸Œå­˜å‚¨çš„å€¼æ ¹æ®å¯†é’¥</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().values(â€œredisHashâ€));<br>ç»“æœï¼š[tom, 26, 6]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Map<hk, hv> entries(H key);</hk,></span><br><span class="line">è·å–æ•´ä¸ªå“ˆå¸Œå­˜å‚¨æ ¹æ®å¯†é’¥</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForHash().entries(â€œredisHashâ€));<br>ç»“æœï¼š{age=26, class=6, name=tom}</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Cursor<map.entry<hk, hv>> scan(H key, ScanOptions options);</map.entry<hk,></span><br><span class="line">ä½¿ç”¨Cursoråœ¨keyçš„hashä¸­è¿­ä»£ï¼Œç›¸å½“äºè¿­ä»£å™¨ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šCursor<map.entry<object, object>> curosr = template.opsForHash().scan(â€œredisHashâ€, ScanOptions.ScanOptions.NONE);<br>        while(curosr.hasNext()){<br>            Map.Entry<object, object> entry = curosr.next();<br>            System.out.println(entry.getKey()+â€:â€+entry.getValue());<br>        }<br>ç»“æœï¼šage:28.1<br>class:6<br>kkk:kkk</object,></map.entry<object,></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">### Redisçš„Setæ•°æ®ç»“æ„</span><br><span class="line">Redisçš„Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚</span><br><span class="line">Redis ä¸­ é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</span><br><span class="line">public interface SetOperations<k,v></k,v></span><br><span class="line">SetOperationsæä¾›äº†å¯¹æ— åºé›†åˆçš„ä¸€ç³»åˆ—æ“ä½œï¼š</span><br><span class="line"></span><br><span class="line">- Long add(K key, V... values);</span><br><span class="line">æ— åºé›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Œè¿”å›æ·»åŠ ä¸ªæ•°</span><br><span class="line">ä¹Ÿå¯ä»¥ç›´æ¥åœ¨addé‡Œé¢æ·»åŠ å¤šä¸ªå€¼ å¦‚ï¼štemplate.opsForSet().add("setTest","aaa","bbb")</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šString[] strarrays = new String[]{â€œstrarr1â€,â€sgtarr2â€};<br>        System.out.println(template.opsForSet().add(â€œsetTestâ€, strarrays));<br>ç»“æœï¼š2</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long remove(K key, Object... values);</span><br><span class="line">ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šString[] strarrays = new String[]{â€œstrarr1â€,â€sgtarr2â€};<br>System.out.println(template.opsForSet().remove(â€œsetTestâ€,strarrays));<br>ç»“æœï¼š2</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- V pop(K key);</span><br><span class="line">ç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ </span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().pop(â€œsetTestâ€));<br>System.out.println(template.opsForSet().members(â€œsetTestâ€));<br>ç»“æœï¼šbbb<br>[aaa, ccc]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Boolean move(K key, V value, K destKey);</span><br><span class="line">å°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆ</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼štemplate.opsForSet().move(â€œsetTestâ€,â€aaaâ€,â€setTest2â€);<br>        System.out.println(template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(template.opsForSet().members(â€œsetTest2â€));<br>ç»“æœï¼š[ccc]<br>[aaa]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long size(K key);</span><br><span class="line">æ— åºé›†åˆçš„å¤§å°é•¿åº¦</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().size(â€œsetTestâ€));<br>ç»“æœï¼š1</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Boolean isMember(K key, Object o);</span><br><span class="line">åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().isMember(â€œsetTestâ€,â€cccâ€));<br>        System.out.println(template.opsForSet().isMember(â€œsetTestâ€,â€asdâ€));<br>ç»“æœï¼štrue<br>false</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Set<v> intersect(K key, K otherKey);</v></span><br><span class="line">keyå¯¹åº”çš„æ— åºé›†åˆä¸otherKeyå¯¹åº”çš„æ— åºé›†åˆæ±‚äº¤é›†</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(template.opsForSet().intersect(â€œsetTestâ€,â€setTest2â€));<br>ç»“æœï¼š[aaa, ccc]<br>[aaa]<br>[aaa]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Set<v> intersect(K key, Collection<k> otherKeys);</k></v></span><br><span class="line">keyå¯¹åº”çš„æ— åºé›†åˆä¸å¤šä¸ªotherKeyå¯¹åº”çš„æ— åºé›†åˆæ±‚äº¤é›†</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(template.opsForSet().members(â€œsetTest3â€));<br>        List<string> strlist = new ArrayList<string>();<br>        strlist.add(â€œsetTest2â€);<br>        strlist.add(â€œsetTest3â€);<br>        System.out.println(template.opsForSet().intersect(â€œsetTestâ€,strlist));<br>ç»“æœï¼š[aaa, ccc]<br>[aaa]<br>[ccc, aaa]<br>[aaa]</string></string></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long intersectAndStore(K key, K otherKey, K destKey);</span><br><span class="line">keyæ— åºé›†åˆä¸otherkeyæ— åºé›†åˆçš„äº¤é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(â€œsetTest:â€ + template.opsForSet().members(â€œsetTestâ€));<br>System.out.println(â€œsetTest2:â€ + template.opsForSet().members(â€œsetTest2â€));<br>System.out.println(template.opsForSet().intersectAndStore(â€œsetTestâ€,â€setTest2â€,â€destKey1â€));<br>System.out.println(template.opsForSet().members(â€œdestKey1â€));<br>ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]<br>setTest2:[ccc, aaa]<br>2<br>[aaa, ccc]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long intersectAndStore(K key, Collection<k> otherKeys, K destKey);</k></span><br><span class="line">keyå¯¹åº”çš„æ— åºé›†åˆä¸å¤šä¸ªotherKeyå¯¹åº”çš„æ— åºé›†åˆæ±‚äº¤é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(â€œsetTest:â€ + template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(â€œsetTest2:â€ + template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(â€œsetTest3:â€ + template.opsForSet().members(â€œsetTest3â€));<br>        List<string> strlist = new ArrayList<string>();<br>        strlist.add(â€œsetTest2â€);<br>        strlist.add(â€œsetTest3â€);<br>        System.out.println(template.opsForSet().intersectAndStore(â€œsetTestâ€,strlist,â€destKey2â€));<br>        System.out.println(template.opsForSet().members(â€œdestKey2â€));<br>ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]<br>setTest2:[ccc, aaa]<br>setTest3:[ccc, aaa]<br>2<br>[aaa, ccc]</string></string></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Set<v> union(K key, K otherKey);</v></span><br><span class="line">keyæ— åºé›†åˆä¸otherKeyæ— åºé›†åˆçš„å¹¶é›†</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(â€œsetTest:â€ + template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(â€œsetTest2:â€ + template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(template.opsForSet().union(â€œsetTestâ€,â€setTest2â€));<br>ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]<br>setTest2:[ccc, aaa]<br>[ccc, aaa, ddd, bbb]</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Set<v> union(K key, Collection<k> otherKeys);</k></v></span><br><span class="line">keyæ— åºé›†åˆä¸å¤šä¸ªotherKeyæ— åºé›†åˆçš„å¹¶é›†</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(â€œsetTest:â€ + template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(â€œsetTest2:â€ + template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(â€œsetTest3:â€ + template.opsForSet().members(â€œsetTest3â€));<br>        List<string> strlist = new ArrayList<string>();<br>        strlist.add(â€œsetTest2â€);<br>        strlist.add(â€œsetTest3â€);<br>        System.out.println(template.opsForSet().union(â€œsetTestâ€,strlist));<br>ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]<br>setTest2:[ccc, aaa]<br>setTest3:[xxx, ccc, aaa]<br>[ddd, xxx, bbb, aaa, ccc]</string></string></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- Long unionAndStore(K key, K otherKey, K destKey);</span><br><span class="line">keyæ— åºé›†åˆä¸otherkeyæ— åºé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ï¼šSystem.out.println(â€œsetTest:â€ + template.opsForSet().members(â€œsetTestâ€));<br>        System.out.println(â€œsetTest2:â€ + template.opsForSet().members(â€œsetTest2â€));<br>        System.out.println(template.opsForSet().unionAndStore(â€œsetTestâ€,â€setTest2â€,â€unionAndStoreTest1â€));<br>        System.out.println(â€œunionAndStoreTest1:â€ + template.opsForSet().members(â€œunionAndStoreTest1â€));<br>ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]<br>setTest2:[ccc, aaa]<br>4<br>unionAndStoreTest1:[ccc, aaa, ddd, bbb]</p><ul><li><p>Long unionAndStore(K key, Collection<k> otherKeys, K destKey);<br>keyæ— åºé›†åˆä¸å¤šä¸ªotherkeyæ— åºé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</k></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTest2:" + template.opsForSet().members("setTest2"));</span><br><span class="line">        System.out.println("setTest3:" + template.opsForSet().members("setTest3"));</span><br><span class="line">        List<string> strlist = new ArrayList<string>();</string></string></span><br><span class="line">        strlist.add("setTest2");</span><br><span class="line">        strlist.add("setTest3");</span><br><span class="line">        System.out.println(template.opsForSet().unionAndStore("setTest",strlist,"unionAndStoreTest2"));</span><br><span class="line">        System.out.println("unionAndStoreTest2:" + template.opsForSet().members("unionAndStoreTest2"));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">5</span><br><span class="line">unionAndStoreTest2:[ddd, xxx, bbb, aaa, ccc]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> difference(K key, K otherKey);<br>keyæ— åºé›†åˆä¸otherKeyæ— åºé›†åˆçš„å·®é›†</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTest2:" + template.opsForSet().members("setTest2"));</span><br><span class="line">        System.out.println(template.opsForSet().difference("setTest","setTest2"));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">[bbb, ddd]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> difference(K key, Collection<k> otherKeys);<br>keyæ— åºé›†åˆä¸å¤šä¸ªotherKeyæ— åºé›†åˆçš„å·®é›†</k></v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTest2:" + template.opsForSet().members("setTest2"));</span><br><span class="line">        System.out.println("setTest3:" + template.opsForSet().members("setTest3"));</span><br><span class="line">        List<string> strlist = new ArrayList<string>();</string></string></span><br><span class="line">        strlist.add("setTest2");</span><br><span class="line">        strlist.add("setTest3");</span><br><span class="line">        System.out.println(template.opsForSet().difference("setTest",strlist));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">[bbb, ddd]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long differenceAndStore(K key, K otherKey, K destKey);<br>keyæ— åºé›†åˆä¸otherkeyæ— åºé›†åˆçš„å·®é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTest2:" + template.opsForSet().members("setTest2"));</span><br><span class="line">        System.out.println(template.opsForSet().differenceAndStore("setTest","setTest2","differenceAndStore1"));</span><br><span class="line">        System.out.println("differenceAndStore1:" + template.opsForSet().members("differenceAndStore1"));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">2</span><br><span class="line">differenceAndStore1:[bbb, ddd]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long differenceAndStore(K key, Collection<k> otherKeys, K destKey);<br>keyæ— åºé›†åˆä¸å¤šä¸ªotherkeyæ— åºé›†åˆçš„å·®é›†å­˜å‚¨åˆ°destKeyæ— åºé›†åˆä¸­</k></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTest2:" + template.opsForSet().members("setTest2"));</span><br><span class="line">        System.out.println("setTest3:" + template.opsForSet().members("setTest3"));</span><br><span class="line">        List<string> strlist = new ArrayList<string>();</string></string></span><br><span class="line">        strlist.add("setTest2");</span><br><span class="line">        strlist.add("setTest3");</span><br><span class="line">        System.out.println(template.opsForSet().differenceAndStore("setTest",strlist,"differenceAndStore2"));</span><br><span class="line">        System.out.println("differenceAndStore2:" + template.opsForSet().members("differenceAndStore2"));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTest2:[ccc, aaa]</span><br><span class="line">setTest3:[xxx, ccc, aaa]</span><br><span class="line">2</span><br><span class="line">differenceAndStore2:[bbb, ddd]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> members(K key);<br>è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForSet().members("setTest"));</span><br><span class="line">ç»“æœï¼š[ddd, bbb, aaa, ccc]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>V randomMember(K key);<br>éšæœºè·å–keyæ— åºé›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("setTest:" + template.opsForSet().members("setTest"));</span><br><span class="line">        System.out.println("setTestrandomMember:" + template.opsForSet().randomMember("setTest"));</span><br><span class="line">        System.out.println("setTestrandomMember:" + template.opsForSet().randomMember("setTest"));</span><br><span class="line">        System.out.println("setTestrandomMember:" + template.opsForSet().randomMember("setTest"));</span><br><span class="line">        System.out.println("setTestrandomMember:" + template.opsForSet().randomMember("setTest"));</span><br><span class="line">ç»“æœï¼šsetTest:[ddd, bbb, aaa, ccc]</span><br><span class="line">setTestrandomMember:aaa</span><br><span class="line">setTestrandomMember:bbb</span><br><span class="line">setTestrandomMember:aaa</span><br><span class="line">setTestrandomMember:ddd</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> distinctRandomMembers(K key, long count);<br>è·å–å¤šä¸ªkeyæ— åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆå»é‡ï¼‰ï¼Œcountè¡¨ç¤ºä¸ªæ•°</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("randomMembers:" + template.opsForSet().distinctRandomMembers("setTest",5));</span><br><span class="line">ç»“æœï¼šrandomMembers:[aaa, bbb, ddd, ccc]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>List<v> randomMembers(K key, long count);<br>è·å–å¤šä¸ªkeyæ— åºé›†åˆä¸­çš„å…ƒç´ ï¼Œcountè¡¨ç¤ºä¸ªæ•°</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println("randomMembers:" + template.opsForSet().randomMembers("setTest",5));</span><br><span class="line">ç»“æœï¼šrandomMembers:[ccc, ddd, ddd, ddd, aaa]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Cursor<v> scan(K key, ScanOptions options);<br>éå†set</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š Cursor<object> curosr = template.opsForSet().scan("setTest", ScanOptions.NONE);<br><span class="line">        while(curosr.hasNext()){</span><br><span class="line">            System.out.println(curosr.next());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼šddd</span><br><span class="line">bbb</span><br><span class="line">aaa</span><br><span class="line">ccc</span><br></object></span></pre></td></tr></tbody></table></figure></div><h3 id="Redisçš„ZSetæ•°æ®ç»“æ„"><a href="#Redisçš„ZSetæ•°æ®ç»“æ„" class="headerlink" title="Redisçš„ZSetæ•°æ®ç»“æ„"></a>Redisçš„ZSetæ•°æ®ç»“æ„</h3><p>Redis æœ‰åºé›†åˆå’Œæ— åºé›†åˆä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚<br>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚<br>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚<br>public interface ZSetOperations<k,v><br>ZSetOperationsæä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•å¯¹æœ‰åºé›†åˆè¿›è¡Œæ“ä½œï¼š</k,v></p></li><li><p>Boolean add(K key, V value, double score);<br>æ–°å¢ä¸€ä¸ªæœ‰åºé›†åˆï¼Œå­˜åœ¨çš„è¯ä¸ºfalseï¼Œä¸å­˜åœ¨çš„è¯ä¸ºtrue</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().add("zset1","zset-1",1.0));</span><br><span class="line">ç»“æœï¼štrue</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long add(K key, Set<typedtuple<v>> tuples);<br>æ–°å¢ä¸€ä¸ªæœ‰åºé›†åˆ</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šZSetOperations.TypedTuple<object> objectTypedTuple1 = new DefaultTypedTuple<object>("zset-5",9.6);<br><span class="line">        ZSetOperations.TypedTuple<object> objectTypedTuple2 = new DefaultTypedTuple<object>("zset-6",9.9);<br><span class="line">        Set<zsetoperations.typedtuple<object>> tuples = new HashSet<zsetoperations.typedtuple<object>>();</zsetoperations.typedtuple<object></zsetoperations.typedtuple<object></span><br><span class="line">        tuples.add(objectTypedTuple1);</span><br><span class="line">        tuples.add(objectTypedTuple2);</span><br><span class="line">        System.out.println(template.opsForZSet().add("zset1",tuples));</span><br><span class="line">        System.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</span><br></object></object></span></object></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long remove(K key, Objectâ€¦ values);<br>ä»æœ‰åºé›†åˆä¸­ç§»é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">        System.out.println(template.opsForZSet().remove("zset1","zset-6"));</span><br><span class="line">        System.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-1, zset-2, zset-3, zset-4, zset-5, zset-6]</span><br><span class="line">1</span><br><span class="line">[zset-1, zset-2, zset-3, zset-4, zset-5]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Double incrementScore(K key, V value, double delta);<br>å¢åŠ å…ƒç´ çš„scoreå€¼ï¼Œå¹¶è¿”å›å¢åŠ åçš„å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().incrementScore("zset1","zset-1",1.1));  //åŸä¸º1.1</span><br><span class="line">ç»“æœï¼š2.2</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long rank(K key, Object o);<br>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">        System.out.println(template.opsForZSet().rank("zset1","zset-2"));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br><span class="line">0   //è¡¨æ˜æ’åç¬¬ä¸€</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long reverseRank(K key, Object o);<br>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">        System.out.println(template.opsForZSet().reverseRank("zset1","zset-2"));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br><span class="line">4 //é€’å‡ä¹‹åæ’åˆ°ç¬¬äº”ä½å»äº†</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> range(K key, long start, long end);<br>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().range("zset1",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3, zset-4, zset-5]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<typedtuple<v>> rangeWithScores(K key, long start, long end);<br>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜å¯¹è±¡ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSet<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeWithScores("zset1",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-2score:1.2</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br><span class="line">value:zset-4score:6.6</span><br><span class="line">value:zset-5score:9.6</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> rangeByScore(K key, double min, double max);<br>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().rangeByScore("zset1",0,5));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<typedtuple<v>> rangeByScoreWithScores(K key, double min, double max);<br>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜å¯¹è±¡ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSet<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeByScoreWithScores("zset1",0,5);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-2score:1.2</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> rangeByScore(K key, double min, double max, long offset, long count);<br>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œå¹¶åœ¨ç´¢å¼•èŒƒå›´å†…ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š System.out.println(template.opsForZSet().rangeByScore("zset1",0,5));</span><br><span class="line">    System.out.println(template.opsForZSet().rangeByScore("zset1",0,5,1,2));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3]</span><br><span class="line">[zset-1, zset-3]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<typedtuple<v>> rangeByScoreWithScores(K key, double min, double max, long offset, long count);<br>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜å¯¹è±¡ï¼Œå¹¶åœ¨ç´¢å¼•èŒƒå›´å†…ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSet<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeByScoreWithScores("zset1",0,5,1,2);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-1score:2.2</span><br><span class="line">value:zset-3score:2.3</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> reverseRange(K key, long start, long end);<br>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().reverseRange("zset1",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-5, zset-4, zset-3, zset-1, zset-2]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<typedtuple<v>> reverseRangeWithScores(K key, long start, long end);<br>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜å¯¹è±¡ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSet<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().reverseRangeWithScores("zset1",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-5score:9.6</span><br><span class="line">value:zset-4score:6.6</span><br><span class="line">value:zset-3score:2.3</span><br><span class="line">value:zset-1score:2.2</span><br><span class="line">value:zset-2score:1.2</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> reverseRangeByScore(K key, double min, double max);</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šä¸rangeByScoreè°ƒç”¨æ–¹æ³•ä¸€æ ·ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</span><br><span class="line">Set<typedtuple<v>> reverseRangeByScoreWithScores(K key, double min, double max);</typedtuple<v></span><br><span class="line">ä½¿ç”¨ï¼šä¸rangeByScoreWithScoresè°ƒç”¨æ–¹æ³•ä¸€æ ·ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<v> reverseRangeByScore(K key, double min, double max, long offset, long count);</v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šä¸rangeByScoreè°ƒç”¨æ–¹æ³•ä¸€æ ·ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Set<typedtuple<v>> reverseRangeByScoreWithScores(K key, double min, double max, long offset, long count);</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šä¸rangeByScoreWithScoresè°ƒç”¨æ–¹æ³•ä¸€æ ·ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long count(K key, double min, double max);<br>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ä¸ªæ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().rangeByScore("zset1",0,5));</span><br><span class="line">        System.out.println(template.opsForZSet().count("zset1",0,5));</span><br><span class="line">ç»“æœï¼š[zset-2, zset-1, zset-3]</span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long size(K key);<br>è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°ï¼Œå†…éƒ¨è°ƒç”¨çš„å°±æ˜¯zCardæ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().size("zset1"));</span><br><span class="line">ç»“æœï¼š6</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long zCard(K key);<br>è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().zCard("zset1"));</span><br><span class="line">ç»“æœï¼š6</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Double score(K key, Object o);<br>è·å–æŒ‡å®šæˆå‘˜çš„scoreå€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().score("zset1","zset-1"));</span><br><span class="line">ç»“æœï¼š2.2</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long removeRange(K key, long start, long end);<br>ç§»é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„æˆå‘˜ï¼Œå…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().range("zset2",0,-1));</span><br><span class="line">        System.out.println(template.opsForZSet().removeRange("zset2",1,2));</span><br><span class="line">        System.out.println(template.opsForZSet().range("zset2",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-1, zset-2, zset-3, zset-4]</span><br><span class="line">2</span><br><span class="line">[zset-1, zset-4]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long removeRangeByScore(K key, double min, double max);<br>æ ¹æ®æŒ‡å®šçš„scoreå€¼å¾—èŒƒå›´æ¥ç§»é™¤æˆå‘˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š//System.out.println(template.opsForZSet().add("zset2","zset-1",1.1));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zset2","zset-2",1.2));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zset2","zset-3",2.3));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zset2","zset-4",6.6));</span><br><span class="line">System.out.println(template.opsForZSet().range("zset2",0,-1));</span><br><span class="line">System.out.println(template.opsForZSet().removeRangeByScore("zset2",2,3));</span><br><span class="line">    System.out.println(template.opsForZSet().range("zset2",0,-1));</span><br><span class="line">ç»“æœï¼š[zset-1, zset-2, zset-3,zset-4]</span><br><span class="line">1</span><br><span class="line">[zset-1, zset-2, zset-4]</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>Long unionAndStore(K key, K otherKey, K destKey);<br>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„ destKeyä¸­ï¼Œkeyç›¸åŒçš„è¯ä¼šæŠŠscoreå€¼ç›¸åŠ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().add("zzset1","zset-1",1.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset1","zset-2",2.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset1","zset-3",3.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset1","zset-4",6.0));</span><br><span class="line"></span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset2","zset-1",1.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset2","zset-2",2.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset2","zset-3",3.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset2","zset-4",6.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset2","zset-5",7.0));</span><br><span class="line">        System.out.println(template.opsForZSet().unionAndStore("zzset1","zzset2","destZset11"));</span><br><span class="line"></span><br><span class="line">        Set<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeWithScores("destZset11",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-1score:2.0</span><br><span class="line">value:zset-2score:4.0</span><br><span class="line">value:zset-3score:6.0</span><br><span class="line">value:zset-5score:7.0</span><br><span class="line">value:zset-4score:12.0</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long unionAndStore(K key, Collection<k> otherKeys, K destKey);<br>è®¡ç®—ç»™å®šçš„å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„ destKeyä¸­</k></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š//System.out.println(template.opsForZSet().add("zzset1","zset-1",1.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset1","zset-2",2.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset1","zset-3",3.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset1","zset-4",6.0));</span><br><span class="line">        //</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset2","zset-1",1.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset2","zset-2",2.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset2","zset-3",3.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset2","zset-4",6.0));</span><br><span class="line">        //System.out.println(template.opsForZSet().add("zzset2","zset-5",7.0));</span><br><span class="line"></span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset3","zset-1",1.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset3","zset-2",2.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset3","zset-3",3.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset3","zset-4",6.0));</span><br><span class="line">        System.out.println(template.opsForZSet().add("zzset3","zset-5",7.0));</span><br><span class="line"></span><br><span class="line">        List<string> stringList = new ArrayList<string>();</string></string></span><br><span class="line">        stringList.add("zzset2");</span><br><span class="line">        stringList.add("zzset3");</span><br><span class="line">        System.out.println(template.opsForZSet().unionAndStore("zzset1",stringList,"destZset22"));</span><br><span class="line"></span><br><span class="line">        Set<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeWithScores("destZset22",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-1score:3.0</span><br><span class="line">value:zset-2score:6.0</span><br><span class="line">value:zset-3score:9.0</span><br><span class="line">value:zset-5score:14.0</span><br><span class="line">value:zset-4score:18.0</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long intersectAndStore(K key, K otherKey, K destKey);<br>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šSystem.out.println(template.opsForZSet().intersectAndStore("zzset1","zzset2","destZset33"));</span><br><span class="line"></span><br><span class="line">        Set<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeWithScores("destZset33",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-1score:2.0</span><br><span class="line">value:zset-2score:4.0</span><br><span class="line">value:zset-3score:6.0</span><br><span class="line">value:zset-4score:12.0</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Long intersectAndStore(K key, Collection<k> otherKeys, K destKey);<br>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</k></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼šList<string> stringList = new ArrayList<string>();</string></string></span><br><span class="line">        stringList.add("zzset2");</span><br><span class="line">        stringList.add("zzset3");</span><br><span class="line">        System.out.println(template.opsForZSet().intersectAndStore("zzset1",stringList,"destZset44"));</span><br><span class="line"></span><br><span class="line">        Set<zsetoperations.typedtuple<object>> tuples = template.opsForZSet().rangeWithScores("destZset44",0,-1);</zsetoperations.typedtuple<object></span><br><span class="line">        Iterator<zsetoperations.typedtuple<object>> iterator = tuples.iterator();</zsetoperations.typedtuple<object></span><br><span class="line">        while (iterator.hasNext())</span><br><span class="line">        {</span><br><span class="line">            ZSetOperations.TypedTuple<object> typedTuple = iterator.next();<br><span class="line">            System.out.println("value:" + typedTuple.getValue() + "score:" + typedTuple.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼švalue:zset-1score:3.0</span><br><span class="line">value:zset-2score:6.0</span><br><span class="line">value:zset-3score:9.0</span><br><span class="line">value:zset-4score:18.0</span><br></object></span></pre></td></tr></tbody></table></figure></div></li><li><p>Cursor<typedtuple<v>> scan(K key, ScanOptions options);<br>éå†zset</typedtuple<v></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼š Cursor<zsetoperations.typedtuple<object>> cursor = template.opsForZSet().scan("zzset1", ScanOptions.NONE);</zsetoperations.typedtuple<object></span><br><span class="line">        while (cursor.hasNext()){</span><br><span class="line">            ZSetOperations.TypedTuple<object> item = cursor.next();<br><span class="line">            System.out.println(item.getValue() + ":" + item.getScore());</span><br><span class="line">        }</span><br><span class="line">ç»“æœï¼šzset-1:1.0</span><br><span class="line">zset-2:2.0</span><br><span class="line">zset-3:3.0</span><br><span class="line">zset-4:6.0</span><br></object></span></pre></td></tr></tbody></table></figure></div><p>æ³¨ï¼šTimeUnitæ˜¯java.util.concurrentåŒ…ä¸‹é¢çš„ä¸€ä¸ªç±»ï¼Œè¡¨ç¤ºç»™å®šå•å…ƒç²’åº¦çš„æ—¶é—´æ®µ<br>å¸¸ç”¨çš„é¢—ç²’åº¦<br>TimeUnit.DAYS //å¤©<br>TimeUnit.HOURS //å°æ—¶<br>TimeUnit.MINUTES //åˆ†é’Ÿ<br>TimeUnit.SECONDS //ç§’<br>TimeUnit.MILLISECONDS //æ¯«ç§’</p></li></ul><p>ä½œè€…ï¼šDreamerRzc<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/7bf5dc61ca06/" target="_blank" rel="noopener">https://www.jianshu.com/p/7bf5dc61ca06/</a><br>ä¾†æºï¼šç®€ä¹¦<br>ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒå¹¶æ³¨æ˜å‡ºå¤„ã€‚</p></object></object></p></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisä½¿ç”¨åœºæ™¯æ€»ç»“</title>
      <link href="/2019/09/28/Redis%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%80%BB%E7%BB%93/"/>
      <url>/2019/09/28/Redis%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p><a href="https://camo.githubusercontent.com/bbd053bdea116e0a9495082e4dfc7c5787a9775b/68747470733a2f2f747661312e73696e61696d672e636e2f6c617267652f30303679386d4e366c7931673934727534356a72666a3330753031686f6232392e6a7067" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://camo.githubusercontent.com/bbd053bdea116e0a9495082e4dfc7c5787a9775b/68747470733a2f2f747661312e73696e61696d672e636e2f6c617267652f30303679386d4e366c7931673934727534356a72666a3330753031686f6232392e6a7067" class="lazyload" title="image"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisTemplateè®¾ç½®è¿‡æœŸæ—¶é—´</title>
      <link href="/2019/09/28/RedisTemplate%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4/"/>
      <url>/2019/09/28/RedisTemplate%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="é€šè¿‡spring-boot-ä¸­çš„Redisæ¨¡æ¿è®¾ç½®æ•°æ®çš„è¿‡æœŸæ—¶é—´"><a href="#é€šè¿‡spring-boot-ä¸­çš„Redisæ¨¡æ¿è®¾ç½®æ•°æ®çš„è¿‡æœŸæ—¶é—´" class="headerlink" title="é€šè¿‡spring boot ä¸­çš„Redisæ¨¡æ¿è®¾ç½®æ•°æ®çš„è¿‡æœŸæ—¶é—´"></a>é€šè¿‡spring boot ä¸­çš„Redisæ¨¡æ¿è®¾ç½®æ•°æ®çš„è¿‡æœŸæ—¶é—´</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">//å‘redisé‡Œå­˜å…¥æ•°æ®å’Œè®¾ç½®ç¼“å­˜æ—¶é—´  </span><br><span class="line">stringRedisTemplate.opsForValue().set("baike", "100", 60 * 10, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">//valåš-1æ“ä½œ  </span><br><span class="line">stringRedisTemplate.boundValueOps("baike").increment(-1);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyè·å–ç¼“å­˜ä¸­çš„val  </span><br><span class="line">stringRedisTemplate.opsForValue().get("baike")</span><br><span class="line"></span><br><span class="line">//val +1  </span><br><span class="line">stringRedisTemplate.boundValueOps("baike").increment(1);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyè·å–è¿‡æœŸæ—¶é—´  </span><br><span class="line">stringRedisTemplate.getExpire("baike");</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyè·å–è¿‡æœŸæ—¶é—´å¹¶æ¢ç®—æˆæŒ‡å®šå•ä½  </span><br><span class="line">stringRedisTemplate.getExpire("baike",TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyåˆ é™¤ç¼“å­˜  </span><br><span class="line">stringRedisTemplate.delete("baike");</span><br><span class="line"></span><br><span class="line">//æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ï¼Œè¿”å›booleanå€¼  </span><br><span class="line">stringRedisTemplate.hasKey("baike");</span><br><span class="line"></span><br><span class="line">//å‘æŒ‡å®škeyä¸­å­˜æ”¾seté›†åˆ  </span><br><span class="line">stringRedisTemplate.opsForSet().add("baike", "1","2","3");</span><br><span class="line"></span><br><span class="line">//è®¾ç½®è¿‡æœŸæ—¶é—´  </span><br><span class="line">stringRedisTemplate.expire("baike",1000 , TimeUnit.MILLISECONDS);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyæŸ¥çœ‹é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šæ•°æ®  </span><br><span class="line">stringRedisTemplate.opsForSet().isMember("baike", "1");</span><br><span class="line"></span><br><span class="line">//æ ¹æ®keyè·å–seté›†åˆ  </span><br><span class="line">stringRedisTemplate.opsForSet().members("baike");</span><br><span class="line"></span><br><span class="line">//éªŒè¯æœ‰æ•ˆæ—¶é—´</span><br><span class="line">Long expire = redisTemplate.boundHashOps("baike").getExpire();</span><br><span class="line">System.out.println("redisæœ‰æ•ˆæ—¶é—´ï¼š"+expire+"S");</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹å¯¹è±¡</title>
      <link href="/2019/09/27/Scala%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%AF%B9%E8%B1%A1/"/>
      <url>/2019/09/27/Scala%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><h3 id="Scalaä¸­çš„object"><a href="#Scalaä¸­çš„object" class="headerlink" title="Scalaä¸­çš„object"></a>Scalaä¸­çš„object</h3><p>object ç›¸å½“äº class çš„å•ä¸ªå®ä¾‹ï¼Œé€šå¸¸åœ¨é‡Œé¢æ”¾ä¸€äº›é™æ€çš„ field æˆ–è€… methodï¼›</p><p>åœ¨Scalaä¸­æ²¡æœ‰é™æ€æ–¹æ³•å’Œé™æ€å­—æ®µï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨objectè¿™ä¸ªè¯­æ³•ç»“æ„æ¥è¾¾åˆ°åŒæ ·çš„ç›®çš„ã€‚</p><p>objectä½œç”¨ï¼š</p><ul><li>å­˜æ”¾å·¥å…·æ–¹æ³•å’Œå¸¸é‡</li><li>é«˜æ•ˆå…±äº«å•ä¸ªä¸å¯å˜çš„å®ä¾‹</li><li>å•ä¾‹æ¨¡å¼</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.clasz</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Session</span> </span>{}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SessionFactory</span></span>{</span><br><span class="line">  <span class="comment">//è¯¥éƒ¨åˆ†ç›¸å½“äºjavaä¸­çš„é™æ€å—</span></span><br><span class="line">  <span class="keyword">val</span> session = <span class="keyword">new</span> <span class="type">Session</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åœ¨objectä¸­çš„æ–¹æ³•ç›¸å½“äºjavaä¸­çš„é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getSession</span></span>(): <span class="type">Session</span> ={</span><br><span class="line">    session</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SessionDemo</span></span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="comment">//å•ä¾‹å¯¹è±¡ï¼Œä¸éœ€è¦newï¼Œç”¨ã€å•ä¾‹å¯¹è±¡åç§°.æ–¹æ³•ã€‘è°ƒç”¨å¯¹è±¡ä¸­çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">val</span> session1 = <span class="type">SessionFactory</span>.getSession()</span><br><span class="line">    <span class="keyword">val</span> session2 = <span class="type">SessionFactory</span>.getSession()</span><br><span class="line">    </span><br><span class="line">    println(session1)</span><br><span class="line">    println(session2)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">com.yi.clasz.Session@2be94b0f</span><br><span class="line">com.yi.clasz.Session@2be94b0f</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­çš„ä¼´ç”Ÿå¯¹è±¡"><a href="#Scalaä¸­çš„ä¼´ç”Ÿå¯¹è±¡" class="headerlink" title="Scalaä¸­çš„ä¼´ç”Ÿå¯¹è±¡"></a>Scalaä¸­çš„ä¼´ç”Ÿå¯¹è±¡</h3><p>å¦‚æœæœ‰ä¸€ä¸ªclassæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸classåŒåçš„objectæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªobjectæ˜¯classçš„ä¼´ç”Ÿå¯¹è±¡ï¼Œclassæ˜¯objectçš„ä¼´ç”Ÿç±»ã€‚</p><ul><li>ä¼´ç”Ÿç±»å’Œä¼´ç”Ÿå¯¹è±¡å¿…é¡»å­˜æ”¾åœ¨ä¸€ä¸ª.scalaæ–‡ä»¶ä¸­ï¼›</li><li>ä¼´ç”Ÿç±»å’Œä¼´ç”Ÿå¯¹è±¡çš„æœ€å¤§ç‰¹ç‚¹æ˜¯ï¼Œå¯ä»¥ç›¸äº’è®¿é—®ï¼›</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.clasz</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼´ç”Ÿç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dao</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> id = <span class="number">1</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> name = <span class="string">"æ—ºè´¢"</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>(): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="comment">// åœ¨Daoç±»ä¸­å¯ä»¥è®¿é—®ä¼´ç”Ÿç±»å¯¹è±¡çš„çš„ç§æœ‰å±æ€§</span></span><br><span class="line">    println(<span class="type">Dao</span>.<span class="type">COUSTANT</span> + name)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼´ç”Ÿå¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Dao</span> </span>{</span><br><span class="line">  <span class="comment">// ä¼´ç”Ÿå¯¹è±¡ä¸­çš„ç§æœ‰å±æ€§</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> <span class="type">COUSTANT</span> = <span class="string">"æ±ªæ±ªæ±ªã€‚ã€‚ã€‚"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Dao</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¿é—®ä¼´ç”Ÿç±»çš„ç§æœ‰å±æ€§</span></span><br><span class="line">    p.name = <span class="string">"å¤§æ—ºè´¢"</span></span><br><span class="line">    p.printName()</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ±ªæ±ªæ±ªã€‚ã€‚ã€‚å¤§æ—ºè´¢</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­çš„applyæ–¹æ³•"><a href="#Scalaä¸­çš„applyæ–¹æ³•" class="headerlink" title="Scalaä¸­çš„applyæ–¹æ³•"></a>Scalaä¸­çš„applyæ–¹æ³•</h3><ul><li>object ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œå°±æ˜¯applyæ–¹æ³•ï¼›</li><li>applyæ–¹æ³•é€šå¸¸æ˜¯åœ¨ä¼´ç”Ÿå¯¹è±¡ä¸­å®ç°çš„ï¼Œå…¶ç›®çš„æ˜¯ï¼Œé€šè¿‡ä¼´ç”Ÿç±»çš„æ„é€ å‡½æ•°åŠŸèƒ½ï¼Œæ¥å®ç°ä¼´ç”Ÿå¯¹è±¡çš„æ„é€ å‡½æ•°åŠŸèƒ½ï¼›</li><li>é€šå¸¸æˆ‘ä»¬ä¼šåœ¨ç±»çš„ä¼´ç”Ÿå¯¹è±¡ä¸­å®šä¹‰applyæ–¹æ³•ï¼Œå½“é‡åˆ°ç±»å(å‚æ•°1,â€¦å‚æ•°n)æ—¶applyæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼›//ctrl+n</li><li>åœ¨åˆ›å»ºä¼´ç”Ÿå¯¹è±¡æˆ–ä¼´ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œé€šå¸¸ä¸ä¼šä½¿ç”¨new class/class() çš„æ–¹å¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ class()ï¼Œéšå¼çš„è°ƒç”¨ä¼´ç”Ÿå¯¹è±¡çš„ apply æ–¹æ³•ï¼Œè¿™æ ·ä¼šè®©å¯¹è±¡åˆ›å»ºçš„æ›´åŠ ç®€æ´ï¼›</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ä¼´ç”Ÿç±»çš„æ„é€ å‡½æ•°åŠŸèƒ½ï¼Œæ¥å®ç°ä¼´ç”Ÿå¯¹è±¡çš„æ„é€ å‡½æ•°åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ApplyApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> ap = <span class="keyword">new</span> <span class="type">ApplyTest</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (_ <- <span class="number">1.</span>to(<span class="number">10</span>)){</span><br><span class="line">      <span class="type">ApplyTest</span>.incr1()</span><br><span class="line">      ap.incr2()</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    println(<span class="type">ApplyTest</span>.count1)</span><br><span class="line">    println(ap.count2)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * classæ˜¯objectçš„ä¼´ç”Ÿç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ApplyTest</span> </span>{</span><br><span class="line">  <span class="keyword">var</span> count1 = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">incr1</span></span>(): <span class="type">Unit</span> ={</span><br><span class="line">    count1 += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * objectæ˜¯classçš„ä¼´ç”Ÿå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApplyTest</span></span>{</span><br><span class="line">  <span class="keyword">var</span> count2 = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">incr2</span></span>(): <span class="type">Unit</span> ={</span><br><span class="line">    count2 += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">10</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹ç»§æ‰¿</title>
      <link href="/2019/09/27/Scala%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BB%A7%E6%89%BF/"/>
      <url>/2019/09/27/Scala%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹ç»§æ‰¿"><a href="#Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹ç»§æ‰¿" class="headerlink" title="Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹ç»§æ‰¿"></a>Scalaé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹ç»§æ‰¿</h2><h2 id="Scalaä¸­ç»§æ‰¿-extends-çš„æ¦‚å¿µ"><a href="#Scalaä¸­ç»§æ‰¿-extends-çš„æ¦‚å¿µ" class="headerlink" title="Scalaä¸­ç»§æ‰¿(extends)çš„æ¦‚å¿µ"></a>Scalaä¸­ç»§æ‰¿(extends)çš„æ¦‚å¿µ</h2><ul><li>Scala ä¸­ï¼Œè®©å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œä¸ Java ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ extends å…³é”®å­—ï¼›</li><li>ç»§æ‰¿å°±ä»£è¡¨ï¼Œå­ç±»å¯ç»§æ‰¿çˆ¶ç±»çš„ field å’Œ methodï¼Œç„¶åå­ç±»è¿˜å¯ä»¥åœ¨è‡ªå·±çš„å†…éƒ¨å®ç°çˆ¶ç±»æ²¡æœ‰çš„ï¼Œå­ç±»ç‰¹æœ‰çš„ field å’Œmethodï¼Œä½¿ç”¨ç»§æ‰¿å¯ä»¥æœ‰æ•ˆå¤ç”¨ä»£ç ï¼›</li><li>å­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„ field å’Œ methodï¼Œä½†æ˜¯å¦‚æœçˆ¶ç±»ç”¨ final ä¿®é¥°ï¼Œæˆ–è€… field å’Œ method ç”¨ final ä¿®é¥°ï¼Œåˆ™è¯¥ç±»æ˜¯æ— æ³•è¢«ç»§æ‰¿çš„ï¼Œæˆ–è€… field å’Œ method æ˜¯æ— æ³•è¢«è¦†ç›–çš„ã€‚</li><li>rivate ä¿®é¥°çš„ field å’Œ method ä¸å¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨ï¼›</li><li>field å¿…é¡»è¦è¢«å®šä¹‰æˆ val çš„å½¢å¼æ‰èƒ½è¢«ç»§æ‰¿ï¼Œå¹¶ä¸”è¿˜è¦ä½¿ç”¨ override å…³é”®å­—ã€‚ å› ä¸º var ä¿®é¥°çš„ field æ˜¯å¯å˜çš„ï¼Œåœ¨å­ç±»ä¸­å¯ç›´æ¥å¼•ç”¨è¢«èµ‹å€¼ï¼Œä¸éœ€è¦è¢«ç»§æ‰¿ï¼›å³ val ä¿®é¥°çš„æ‰å…è®¸è¢«ç»§æ‰¿ï¼Œvar ä¿®é¥°çš„åªå…è®¸è¢«å¼•ç”¨ã€‚ç»§æ‰¿å°±æ˜¯æ”¹å˜ã€è¦†ç›–çš„æ„æ€ã€‚</li><li>Java ä¸­çš„è®¿é—®æ§åˆ¶æƒé™ï¼ŒåŒæ ·é€‚ç”¨äº Scala</li></ul><table><thead><tr><th>header 1</th><th>header 2</th></tr></thead><tbody><tr><td>row 1 col 1</td><td>row 1 col 2</td></tr><tr><td>row 2 col 1</td><td>row 2 col 2</td></tr></tbody></table><table><thead><tr><th>å…³é”®å­—</th><th>ç±»å†…éƒ¨</th><th>æœ¬åŒ…</th><th>å­ç±»</th><th>å¤–éƒ¨åŒ…</th></tr></thead><tbody><tr><td>public</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>protected</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>Ã—</td></tr><tr><td>default</td><td>âˆš</td><td>âˆš</td><td>Ã—</td><td>Ã—</td></tr><tr><td>private</td><td>âˆš</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.clasz</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> name=<span class="string">"super"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getName=this</span>.<span class="title">name</span></span></span><br><span class="line"><span class="function">}</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">class</span> <span class="title">Student</span> <span class="title">extends</span> <span class="title">Person</span> </span>{</span><br><span class="line">  <span class="comment">//ç»§æ‰¿åŠ ä¸Šå…³é”®å­—</span></span><br><span class="line">  <span class="keyword">override</span></span><br><span class="line">  <span class="keyword">val</span> name=<span class="string">"sub"</span></span><br><span class="line">  <span class="comment">//å­ç±»å¯ä»¥å®šä¹‰è‡ªå·±çš„fieldå’Œmethod</span></span><br><span class="line">  <span class="keyword">val</span> score=<span class="string">"A"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getScore=this</span>.<span class="title">score</span></span></span><br><span class="line"><span class="function">}</span></span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­override-å’Œ-super-å…³é”®å­—"><a href="#Scalaä¸­override-å’Œ-super-å…³é”®å­—" class="headerlink" title="Scalaä¸­override å’Œ super å…³é”®å­—"></a>Scalaä¸­override å’Œ super å…³é”®å­—</h3><ul><li>Scalaä¸­ï¼Œå¦‚æœå­ç±»è¦è¦†ç›–çˆ¶ç±»ä¸­çš„ä¸€ä¸ªéæŠ½è±¡æ–¹æ³•ï¼Œå¿…é¡»è¦ä½¿ç”¨ override å…³é”®å­—ï¼›å­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„ val ä¿®é¥°çš„fieldï¼Œåªè¦åœ¨å­ç±»ä¸­ä½¿ç”¨ override å…³é”®å­—å³å¯ã€‚</li><li>override å…³é”®å­—å¯ä»¥å¸®åŠ©å¼€å‘è€…å°½æ—©çš„å‘ç°ä»£ç ä¸­çš„é”™è¯¯ï¼Œæ¯”å¦‚ï¼Œ override ä¿®é¥°çš„çˆ¶ç±»æ–¹æ³•çš„æ–¹æ³•åæ‹¼å†™é”™è¯¯ã€‚</li><li>æ­¤å¤–ï¼Œåœ¨å­ç±»è¦†ç›–çˆ¶ç±»æ–¹æ³•åï¼Œå¦‚æœåœ¨å­ç±»ä¸­è¦è°ƒç”¨çˆ¶ç±»ä¸­è¢«è¦†ç›–çš„æ–¹æ³•ï¼Œåˆ™å¿…é¡»è¦ä½¿ç”¨ super å…³é”®å­—ï¼Œæ˜¾ç¤ºçš„æŒ‡å‡ºè¦è°ƒç”¨çš„çˆ¶ç±»æ–¹æ³•ã€‚</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> name=<span class="string">"æ ¡èŠ±"</span></span><br><span class="line">  <span class="keyword">val</span> age = <span class="number">18</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getName=this</span>.<span class="title">name</span></span></span><br><span class="line"><span class="function">}</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">class</span> <span class="title">Student</span> <span class="title">extends</span> <span class="title">Person</span> </span>{</span><br><span class="line">  <span class="comment">// å­ç±»å¯ä»¥å®šä¹‰è‡ªå·±çš„fieldå’Œmethod</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> score = <span class="string">"A"</span></span><br><span class="line">  <span class="comment">//ç»§æ‰¿åŠ ä¸Šå…³é”®å­—,è¦†ç›–çˆ¶ç±»</span></span><br><span class="line">  <span class="keyword">override</span></span><br><span class="line">  <span class="keyword">val</span> age=<span class="number">19</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getScore=this</span>.<span class="title">score</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="title">//</span> <span class="title">è¦†ç›–çˆ¶ç±»éæŠ½è±¡æ–¹æ³•ï¼Œå¿…é¡»è¦ä½¿ç”¨overrideå…³é”®å­—</span></span></span><br><span class="line"><span class="function">  <span class="title">//</span> <span class="title">åŒæ—¶è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½¿ç”¨superå…³é”®å­—</span></span></span><br><span class="line"><span class="function">  <span class="title">override</span> <span class="title">def</span> <span class="title">getName</span></span>: <span class="type">String</span> = <span class="string">"ä½ çš„åå­—ï¼š"</span> + <span class="keyword">super</span>.getName</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­isInstanceOf-å’Œ-asInstanceOf"><a href="#Scalaä¸­isInstanceOf-å’Œ-asInstanceOf" class="headerlink" title="Scalaä¸­isInstanceOf å’Œ asInstanceOf"></a>Scalaä¸­isInstanceOf å’Œ asInstanceOf</h3><p>å¦‚æœå®ä¾‹åŒ–äº†å­ç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯å°†å…¶èµ‹äºˆäº†çˆ¶ç±»ç±»å‹çš„å˜é‡ï¼Œåœ¨åç»­çš„è¿‡ç¨‹ä¸­ï¼Œåˆéœ€è¦å°†çˆ¶ç±»ç±»å‹çš„å˜é‡è½¬æ¢ä¸ºå­ç±»ç±»å‹çš„å˜é‡ï¼Œåº”è¯¥å¦‚ä½•åšï¼Ÿ</p><ul><li>é¦–å…ˆï¼Œéœ€è¦ä½¿ç”¨ isInstanceOf åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ asInstanceOf å°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ï¼›</li><li>æ³¨æ„ï¼š p.isInstanceOf[XX] åˆ¤æ–­ p æ˜¯å¦ä¸º XX å¯¹è±¡çš„å®ä¾‹ï¼›p.asInstanceOf[XX] æŠŠ p è½¬æ¢æˆ XX å¯¹è±¡çš„å®ä¾‹</li><li>æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰ç”¨ isInstanceOf å…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»çš„å®ä¾‹ï¼Œå°±ç›´æ¥ç”¨ asInstanceOf è½¬æ¢ï¼Œåˆ™å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼›</li><li>æ³¨æ„ï¼šå¦‚æœå¯¹è±¡æ˜¯ nullï¼Œåˆ™ isInstanceOf ä¸€å®šè¿”å› falseï¼Œ asInstanceOf ä¸€å®šè¿”å› nullï¼›</li><li>Scalaä¸Javaç±»å‹æ£€æŸ¥å’Œè½¬æ¢</li></ul><table><thead><tr><th>Scala</th><th>Java</th></tr></thead><tbody><tr><td>obj.isInstanceOf[C]</td><td>obj instanceof C</td></tr><tr><td>obj.asInstanceOf[C]</td><td>(C)obj</td></tr><tr><td>classOf[C]</td><td>C.class</td></tr></tbody></table><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.clasz</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Persion3</span> </span>{}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student3</span> <span class="keyword">extends</span> <span class="title">Persion3</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">object</span> <span class="title">Student3</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> p: <span class="type">Persion3</span> = <span class="keyword">new</span> <span class="type">Student3</span></span><br><span class="line">    <span class="keyword">var</span> s: <span class="type">Persion3</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå¯¹è±¡æ˜¯nullï¼Œåˆ™isInstanceOfä¸€å®šè¿”å›false</span></span><br><span class="line">    println(s.isInstanceOf[<span class="type">Student3</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ p æ˜¯å¦ä¸ºStudent3å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    <span class="keyword">if</span> (p.isInstanceOf[<span class="type">Student3</span>]) {</span><br><span class="line">      <span class="comment">// æŠŠpè½¬æ¢ä¸ºStudent3å¯¹è±¡å®ä¾‹</span></span><br><span class="line">      s = p.asInstanceOf[<span class="type">Student3</span>]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    println(s.isInstanceOf[<span class="type">Student3</span>])</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­getClass-å’Œ-classOf"><a href="#Scalaä¸­getClass-å’Œ-classOf" class="headerlink" title="Scalaä¸­getClass å’Œ classOf"></a>Scalaä¸­getClass å’Œ classOf</h3><ul><li>sInstanceOf åªèƒ½åˆ¤æ–­å‡ºå¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»ä»¥åŠå…¶å­ç±»çš„å¯¹è±¡ï¼Œè€Œä¸èƒ½ç²¾ç¡®çš„åˆ¤æ–­å‡ºï¼Œå¯¹è±¡å°±æ˜¯æŒ‡å®šç±»çš„å¯¹è±¡ï¼›</li><li>å¦‚æœè¦æ±‚ç²¾ç¡®åœ°åˆ¤æ–­å‡ºå¯¹è±¡å°±æ˜¯æŒ‡å®šç±»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±åªèƒ½ä½¿ç”¨ getClass å’Œ classOf äº†ï¼›</li><li>p.getClass å¯ä»¥ç²¾ç¡®åœ°è·å–å¯¹è±¡çš„ç±»ï¼ŒclassOf[XX] å¯ä»¥ç²¾ç¡®çš„è·å–ç±»ï¼Œç„¶åä½¿ç”¨ == æ“ä½œç¬¦å³å¯åˆ¤æ–­ï¼›</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.clasz</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person4</span> </span>{}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student4</span> <span class="keyword">extends</span> <span class="title">Person4</span> </span>{}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Student4</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> p: <span class="type">Person4</span> = <span class="keyword">new</span> <span class="type">Student4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­pæ˜¯å¦ä¸ºStudent4ç±»çš„å®ä¾‹</span></span><br><span class="line">    println(p.isInstanceOf[<span class="type">Person4</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­pçš„ç±»å‹æ˜¯å¦ä¸ºPersion4ç±»</span></span><br><span class="line">    println(p.getClass == classOf[<span class="type">Person4</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­pçš„ç±»å‹æ˜¯å¦ä¸ºStudent4ç±»</span></span><br><span class="line">    println(p.getClass == classOf[<span class="type">Student4</span>])</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">true</span><br><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…è¿›è¡Œç±»å‹åˆ¤æ–­"><a href="#Scalaä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…è¿›è¡Œç±»å‹åˆ¤æ–­" class="headerlink" title="Scalaä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…è¿›è¡Œç±»å‹åˆ¤æ–­"></a>Scalaä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…è¿›è¡Œç±»å‹åˆ¤æ–­</h3><ul><li>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæ¯”å¦‚ spark æºç ä¸­ï¼Œå¤§é‡çš„åœ°æ–¹ä½¿ç”¨äº†æ¨¡å¼åŒ¹é…çš„è¯­æ³•è¿›è¡Œç±»å‹çš„åˆ¤æ–­ï¼Œè¿™ç§æ–¹å¼æ›´åŠ åœ°ç®€æ´æ˜äº†ï¼Œè€Œä¸”ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ä¹Ÿéå¸¸é«˜ï¼›</li><li>ä½¿ç”¨æ¨¡å¼åŒ¹é…ï¼ŒåŠŸèƒ½æ€§ä¸Šæ¥è¯´ï¼Œä¸ isInstanceOf çš„ä½œç”¨ä¸€æ ·ï¼Œä¸»è¦åˆ¤æ–­æ˜¯å¦ä¸ºè¯¥ç±»æˆ–å…¶å­ç±»çš„å¯¹è±¡å³å¯ï¼Œä¸æ˜¯ç²¾å‡†åˆ¤æ–­ã€‚å¦‚æœæƒ³è¦ç²¾å‡†çš„åˆ¤æ–­ä½¿ç”¨getClass å’Œ classOfæ¥åˆ¤æ–­</li><li>ç­‰åŒäº Java ä¸­çš„ switch case è¯­æ³•ï¼›</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.clasz</span><br><span class="line"></span><br><span class="line">class Persion5 {}</span><br><span class="line"></span><br><span class="line">class Student5 extends Persion5</span><br><span class="line"></span><br><span class="line">object Student5 {</span><br><span class="line">  def main(args: Array[String]): Unit = {</span><br><span class="line">    val p: Student5 = new Student5</span><br><span class="line"></span><br><span class="line">    p match {</span><br><span class="line">      // åŒ¹é…æ˜¯å¦ä¸ºPerson5ç±»æˆ–å…¶å­ç±»å¯¹è±¡</span><br><span class="line">      case _: Persion5 => println("This id a Person5")</span><br><span class="line">      // åŒ¹é…å‰©ä½™æƒ…å†µ</span><br><span class="line">      case _ => println("Unknown type!")</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This id a Person5</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­protected"><a href="#Scalaä¸­protected" class="headerlink" title="Scalaä¸­protected"></a>Scalaä¸­protected</h3><ul><li>è·Ÿ Java ä¸€æ ·ï¼ŒScala ä¸­åŒæ ·å¯ä½¿ç”¨ protected å…³é”®å­—æ¥ä¿®é¥° field å’Œ methodã€‚åœ¨å­ç±»ä¸­ï¼Œå¯ç›´æ¥è®¿é—®çˆ¶ç±»çš„ field å’Œ methodï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ super å…³é”®å­—ï¼›</li><li>è¿˜å¯ä»¥ä½¿ç”¨ protected[this] å…³é”®å­—ï¼Œ è®¿é—®æƒé™çš„ä¿æŠ¤èŒƒå›´ï¼šåªå…è®¸åœ¨å½“å‰å­ç±»ä¸­è®¿é—®çˆ¶ç±»çš„ field å’Œ methodï¼Œä¸å…è®¸é€šè¿‡å…¶ä»–å­ç±»å¯¹è±¡è®¿é—®çˆ¶ç±»çš„ field å’Œ methodã€‚</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.clasz</span><br><span class="line"></span><br><span class="line">class Person6 {</span><br><span class="line">  protected var name:String = "ç¾å¥³"</span><br><span class="line"></span><br><span class="line">  protected[this] var hobby:String = "game"</span><br><span class="line"></span><br><span class="line">  protected def sayBye = println("å˜¿å˜¿å˜¿ã€‚ã€‚ã€‚")</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class Student6 extends Person6{</span><br><span class="line">  // çˆ¶ç±»ä½¿ç”¨protectedå…³é”®å­—æ¥ä¿®é¥° fieldå¯ä»¥ç›´æ¥è®¿é—®</span><br><span class="line">  def satHello = println("å˜¿å˜¿å˜¿ " + name)</span><br><span class="line"></span><br><span class="line">  // çˆ¶ç±»ä½¿ç”¨protectedå…³é”®å­—æ¥ä¿®é¥°methodå¯ä»¥ç›´æ¥è®¿é—®</span><br><span class="line">  def sayByeBye = sayBye</span><br><span class="line"></span><br><span class="line">  def makeFiends(s:Student6)={</span><br><span class="line">    println("My hobby is" + hobby)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">object Student6{</span><br><span class="line">  def main(args: Array[String]): Unit = {</span><br><span class="line">    val s:Student6 = new Student6</span><br><span class="line"></span><br><span class="line">    s.satHello</span><br><span class="line">    s.sayByeBye</span><br><span class="line">    s.makeFiends(s)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å˜¿å˜¿å˜¿ ç¾å¥³</span><br><span class="line">å˜¿å˜¿å˜¿ã€‚ã€‚ã€‚</span><br><span class="line">My hobby is ä½ æ‡‚å¾—</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Scalaä¸­è°ƒç”¨çˆ¶ç±»çš„constructor"><a href="#Scalaä¸­è°ƒç”¨çˆ¶ç±»çš„constructor" class="headerlink" title="Scalaä¸­è°ƒç”¨çˆ¶ç±»çš„constructor"></a>Scalaä¸­è°ƒç”¨çˆ¶ç±»çš„constructor</h3><ul><li>calaä¸­ï¼Œæ¯ä¸ªç±»éƒ½å¯ä»¥æœ‰ä¸€ä¸ªä¸»constructorå’Œä»»æ„å¤šä¸ªè¾…åŠ©constructorï¼Œè€Œä¸”æ¯ä¸ªè¾…åŠ©constructorçš„ç¬¬ä¸€è¡Œéƒ½å¿…é¡»è°ƒç”¨å…¶ä»–è¾…åŠ©constructoræˆ–è€…ä¸»constructorä»£ç ï¼›å› æ­¤å­ç±»çš„è¾…åŠ©constructoræ˜¯ä¸€å®šä¸å¯èƒ½ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„constructorçš„ï¼›</li><li>åªèƒ½åœ¨å­ç±»çš„ä¸»constructorä¸­è°ƒç”¨çˆ¶ç±»çš„constructorã€‚</li><li>å¦‚æœçˆ¶ç±»çš„æ„é€ å‡½æ•°å·²ç»å®šä¹‰è¿‡çš„ fieldï¼Œæ¯”å¦‚nameå’Œageï¼Œå­ç±»å†ä½¿ç”¨æ—¶ï¼Œå°±ä¸è¦ç”¨ val æˆ– var æ¥ä¿®é¥°äº†ï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºï¼Œå­ç±»è¦è¦†ç›–çˆ¶ç±»çš„fieldï¼Œä¸”è¦æ±‚ä¸€å®šè¦ä½¿ç”¨ override å…³é”®å­—ã€‚</li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.clasz</span><br><span class="line"></span><br><span class="line">class Person7(val name:String, val age:Int) {</span><br><span class="line">  var score: Double = 3.0</span><br><span class="line">  var address:String = "åŒ—äº¬"</span><br><span class="line">  </span><br><span class="line">  def this(name:String, score:Double)={</span><br><span class="line">    // æ¯ä¸ªè¾…åŠ©çš„constructorçš„ç¬¬ä¸€è¡Œéƒ½å¿…é¡»è°ƒç”¨å…¶ä»–çš„è¾…åŠ©constructoræˆ–è€…ä¸»constructorä»£ç </span><br><span class="line">    </span><br><span class="line">    // ä¸»constructorä»£ç </span><br><span class="line">    this(name, 18)</span><br><span class="line">    this.score = score</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  // è¾…åŠ©constructor</span><br><span class="line">  def this(name:String, address:String)={</span><br><span class="line">    this(name, 100.0)</span><br><span class="line">    this.address = address</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class Student7(name:String,score:Double) extends Person7(name, score)</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç±»</title>
      <link href="/2019/09/26/%E7%B1%BB/"/>
      <url>/2019/09/26/%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åœ¨Scalaä¸­ï¼Œç±»å¹¶ä¸ç”¨å£°æ˜ä¸ºpublicç±»å‹çš„ã€‚</span></span><br><span class="line"><span class="comment">* Scalaæºæ–‡ä»¶ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼Œæ‰€æœ‰è¿™äº›ç±»éƒ½å…·æœ‰å…±æœ‰å¯è§æ€§ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{</span><br><span class="line">  <span class="comment">//ç”¨valä¿®é¥°çš„å˜é‡æ˜¯å¯è¯»å±æ€§ï¼Œæœ‰getterä½†æ²¡æœ‰setterï¼ˆç›¸å½“ä¸Javaä¸­ç”¨finalä¿®é¥°çš„å˜é‡ï¼‰</span></span><br><span class="line">  <span class="keyword">val</span> id=<span class="string">"9527"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç”¨varä¿®é¥°çš„å˜é‡éƒ½æ—¢æœ‰getterï¼Œåˆæœ‰setter</span></span><br><span class="line">  <span class="keyword">var</span> age:<span class="type">Int</span>=<span class="number">18</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç±»ç§æœ‰å­—æ®µï¼Œåªèƒ½åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨æˆ–è€…ä¼´ç”Ÿå¯¹è±¡ä¸­è®¿é—®</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">"å”ä¼¯è™"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç±»ç§æœ‰å­—æ®µï¼Œè®¿é—®æƒé™æ›´åŠ ä¸¥æ ¼çš„ï¼Œè¯¥å­—æ®µåœ¨å½“å‰ç±»ä¸­è¢«è®¿é—®</span></span><br><span class="line">  <span class="comment">//åœ¨ä¼´ç”Ÿå¯¹è±¡é‡Œé¢ä¹Ÿä¸å¯ä»¥è®¿é—®</span></span><br><span class="line">  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">var</span> pet = <span class="string">"å°å¼º"</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼´ç”Ÿå¯¹è±¡ï¼ˆè¿™ä¸ªåå­—å’Œç±»åç›¸åŒï¼Œå«ä¼´ç”Ÿå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span></span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> p=<span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯ä¸‹é¢çš„ä¿®æ”¹ï¼Œå‘ç°ä¸‹é¢æœ‰çº¢çº¿ï¼Œè¯´æ˜valç±»å‹çš„ä¸æ”¯æŒé‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯å¯ä»¥è·å–åˆ°å€¼</span></span><br><span class="line">    <span class="comment">//p.id = "123"</span></span><br><span class="line">    println(p.id)</span><br><span class="line">    <span class="comment">//æ‰“å°age</span></span><br><span class="line">    println(p.age)</span><br><span class="line">    <span class="comment">//æ‰“å°name,ä¼´ç”Ÿå¯¹è±¡ä¸­å¯ä»¥åœ¨è®¿é—®privateå˜é‡</span></span><br><span class="line">    println(p.name)</span><br><span class="line">    <span class="comment">//ç”±äºpetå­—æ®µç”¨private[this]ä¿®é¥°ï¼Œä¼´ç”Ÿå¯¹è±¡ä¸­è®¿é—®ä¸åˆ°petå˜é‡</span></span><br><span class="line">    <span class="comment">//p.pet(è®¿é—®ä¸åˆ°)</span></span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="headerlink" title="æ„é€ å™¨"></a>æ„é€ å™¨</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class People() {</span><br><span class="line">  // å®šä¹‰å±æ€§ _ æ˜¯å ä½ç¬¦</span><br><span class="line">  var name: String = _</span><br><span class="line">  var age: Int = _</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // é™„å±æ„é€ å™¨</span><br><span class="line">  def this(name: String, age: Int){</span><br><span class="line">    // ç¬¬ä¸€æ­¥å¿…é¡»è°ƒç”¨ä¸»æ„é€ å™¨</span><br><span class="line">    this()</span><br><span class="line"></span><br><span class="line">    // æ‰§è¡Œé™„å±æ„é€ å™¨</span><br><span class="line">    this.age = age</span><br><span class="line">    this.name = name</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // å®šä¹‰æ–¹æ³•</span><br><span class="line"></span><br><span class="line">  def eat(): Unit ={</span><br><span class="line">    println(age + " å²çš„ " + name + " åœ¨åƒé¥­ï¼ï¼ï¼")</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">object People{</span><br><span class="line">  def main(args: Array[String]): Unit = {</span><br><span class="line">    val people = new People("å¼ ä¸‰", 18)</span><br><span class="line">    people.eat()</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">18 å²çš„ å¼ ä¸‰ åœ¨åƒé¥­ï¼ï¼ï¼</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›†åˆ Listã€Setã€Map</title>
      <link href="/2019/09/26/%E9%9B%86%E5%90%88%20List%E3%80%81Set%E3%80%81Map/"/>
      <url>/2019/09/26/%E9%9B%86%E5%90%88%20List%E3%80%81Set%E3%80%81Map/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>åœ¨Scalaä¸­åˆ—è¡¨è¦ä¹ˆä¸ºç©ºï¼ˆNilè¡¨ç¤ºç©ºåˆ—è¡¨ï¼‰ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªheadå…ƒç´ åŠ ä¸Šä¸€ä¸ªtailåˆ—è¡¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ListApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">val</span> list1 = <span class="type">List</span>(<span class="string">"Hello"</span>, <span class="string">"Scala"</span>, <span class="string">"Hadoop"</span>)</span><br><span class="line">    println(list1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="string">"Spark"</span> :: <span class="string">"Storm"</span> :: <span class="string">"Kylin"</span> :: <span class="string">"Scala"</span> :: <span class="type">Nil</span></span><br><span class="line">    println(list2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> list3 = scala.collection.mutable.<span class="type">ListBuffer</span>[<span class="type">String</span>]()</span><br><span class="line">    <span class="comment">// åˆ¤æ–­listæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (list3.isEmpty){</span><br><span class="line">      println(<span class="string">"æˆ‘æ˜¯ç©º"</span>)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    list3 ++= list1</span><br><span class="line">    list3 += <span class="string">"Hadoop"</span></span><br><span class="line">    println(list3 + <span class="string">" é•¿åº¦ï¼š"</span> + list3.size)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List(Hello, Scala, Hadoop)</span><br><span class="line">List(Spark, Storm, Kylin, Scala)</span><br><span class="line">æˆ‘æ˜¯ç©º</span><br><span class="line">ListBuffer(Hello, Scala, Hadoop, Hadoop) é•¿åº¦ï¼š4</span><br></pre></td></tr></tbody></table></figure></div><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Setä»£è¡¨ä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆï¼›å°†é‡å¤å…ƒç´ åŠ å…¥Setæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œè€Œä¸” Set æ˜¯ä¸ä¿è¯æ’å…¥é¡ºåºçš„ï¼Œå³ Set ä¸­çš„å…ƒç´ æ˜¯ä¹±åºçš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SetApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="keyword">var</span> set1 = <span class="type">Set</span>(<span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>)</span><br><span class="line">    set1 += <span class="number">9</span></span><br><span class="line"></span><br><span class="line">    println(set1)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashSet(0, 5, 1, 9, 2, -1)</span><br></pre></td></tr></tbody></table></figure></div><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MapApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºæ˜ å°„</span></span><br><span class="line">    <span class="keyword">var</span> scores1 = <span class="type">Map</span>(<span class="string">"NO1"</span> -> <span class="string">"æ ¡èŠ±"</span>, <span class="string">"NO2"</span> -> <span class="string">"ç¾å¥³"</span>, <span class="string">"NO3"</span> -> <span class="string">"å¥³ç¥"</span>)</span><br><span class="line">    <span class="keyword">val</span> scores2 = <span class="type">Map</span>((<span class="string">"NO1"</span> -> <span class="string">"æ ¡èŠ±"</span>), (<span class="string">"NO2"</span> -> <span class="string">"ç¾å¥³"</span>), (<span class="string">"NO3"</span> -> <span class="string">"å¥³ç¥"</span>))</span><br><span class="line">    scores1 +=(<span class="string">"NO4"</span> -> <span class="string">"èè‰"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ˜ å°„çš„æŒ‡</span></span><br><span class="line">    println(scores1(<span class="string">"NO2"</span>))</span><br><span class="line">    println(scores2.getOrElse(<span class="string">"NO3"</span>, <span class="string">"ä¸åœ¨æ¦œå•ä¸­"</span>))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¾å¥³</span><br><span class="line">å¥³ç¥</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…ƒç»„</title>
      <link href="/2019/09/26/%E5%85%83%E7%BB%84/"/>
      <url>/2019/09/26/%E5%85%83%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h2><p>æ˜ å°„æ˜¯K/Vå¯¹å¶çš„é›†åˆï¼Œå¯¹å¶æ˜¯å…ƒç»„çš„æœ€ç®€å•å½¢å¼ï¼Œå…ƒç»„å¯ä»¥è£…ç€å¤šä¸ªä¸åŒç±»å‹çš„å€¼ã€‚</p><h3 id="åˆ›å»ºå…ƒç»„"><a href="#åˆ›å»ºå…ƒç»„" class="headerlink" title="åˆ›å»ºå…ƒç»„"></a>åˆ›å»ºå…ƒç»„</h3><ol><li>å…ƒç»„æ˜¯ä¸åŒç±»å‹çš„å€¼çš„èšé›†ï¼›å¯¹å¶æ˜¯æœ€ç®€å•çš„å…ƒç»„ã€‚</li><li>å…ƒç»„è¡¨ç¤ºé€šè¿‡å°†ä¸åŒçš„å€¼ç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œå³è¡¨ç¤ºå…ƒç»„ã€‚</li></ol><p><strong>åˆ›å»ºå…ƒç»„æ ¼å¼ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val tuple=(å…ƒç´ ,å…ƒç´ ...)</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ä¾‹ç¨‹ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å…ƒç»„</span><br><span class="line"> */</span><br><span class="line">object TupleApp {</span><br><span class="line">  def main(args: Array[String]): Unit = {</span><br><span class="line">    val tup = ("Hadoop", 3.1415, 12, Map("NO1" -> "ç¾å¥³"), Array("Hello", "Scala", "Hadoop", "Spark", "Storm"))</span><br><span class="line"></span><br><span class="line">    println(tup._1)</span><br><span class="line">    println(tup._4.getOrElse("NO2", "ä¸åœ¨æ˜ å°„ä¸­"))</span><br><span class="line">    println(tup._5.mkString(","))</span><br><span class="line"></span><br><span class="line">    // æ‹‰é“¾æ“ä½œ</span><br><span class="line">    val names = Array("æ ¡èŠ±", "ç¾å¥³", "å¥³ç¥")</span><br><span class="line">    val scores1 = Array(18, 19, 17)</span><br><span class="line">    val scores2 = Array(18, 19)</span><br><span class="line"></span><br><span class="line">    var map1 = names.zip(scores1)</span><br><span class="line"></span><br><span class="line">    // å¯¹â€œæ ¡èŠ±â€æ•°ç»„åé¢çš„å…ƒç´ è¿›è¡Œå¡«å……ï¼Œå¡«å……æ•°æ®ä¸å¤Ÿä½¿ç”¨ 18 å¡«å……</span><br><span class="line">    var map2 = names.zipAll(scores2, "æ ¡èŠ±", 18)</span><br><span class="line"></span><br><span class="line">    println(map1.mkString)</span><br><span class="line">    println(map2.mkString)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Hadoop</span><br><span class="line">ä¸åœ¨æ˜ å°„ä¸­</span><br><span class="line">Hello,Scala,Hadoop,Spark,Storm</span><br><span class="line">(æ ¡èŠ±,18)(ç¾å¥³,19)(å¥³ç¥,17)</span><br><span class="line">(æ ¡èŠ±,18)(ç¾å¥³,19)(å¥³ç¥,18)</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜ å°„</title>
      <link href="/2019/09/26/%E6%98%A0%E5%B0%84/"/>
      <url>/2019/09/26/%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h2><p>åœ¨Scalaä¸­ï¼ŒæŠŠå“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„å«åšæ˜ å°„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„å»ºæ˜ å°„</span></span><br><span class="line"><span class="keyword">var</span> scores1 = <span class="type">Map</span>(<span class="string">"NO1"</span> -> <span class="string">"æ ¡èŠ±"</span>, <span class="string">"NO2"</span> -> <span class="string">"ç¾å¥³"</span>, <span class="string">"NO3"</span> -> <span class="string">"å¥³ç¥"</span>)</span><br><span class="line"><span class="keyword">val</span> scores2 = <span class="type">Map</span>((<span class="string">"NO1"</span> -> <span class="string">"æ ¡èŠ±"</span>), (<span class="string">"NO2"</span> -> <span class="string">"ç¾å¥³"</span>), (<span class="string">"NO3"</span> -> <span class="string">"å¥³ç¥"</span>))</span><br><span class="line">scores1 +=(<span class="string">"NO4"</span> -> <span class="string">"èè‰"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ˜ å°„çš„æŒ‡</span></span><br><span class="line">println(scores1(<span class="string">"NO2"</span>))</span><br><span class="line">println(scores2.getOrElse(<span class="string">"NO4"</span>, <span class="string">"ä¸åœ¨æ¦œå•ä¸­"</span>))</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¾å¥³</span><br><span class="line">ä¸åœ¨æ¦œå•ä¸­</span><br></pre></td></tr></tbody></table></figure></div><p><strong>æ³¨æ„</strong>ï¼šé€šå¸¸æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªé›†åˆæ˜¯ä¼šç”¨valè¿™ä¸ªå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡ï¼ˆç›¸å½“äºjavaä¸­çš„finalï¼‰ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€è¯¥å˜é‡çš„å¼•ç”¨ä¸å¯å˜ï¼Œè¯¥å¼•ç”¨ä¸­çš„å†…å®¹æ˜¯ä¸æ˜¯å¯å˜ï¼Œå–å†³äºè¿™ä¸ªå¼•ç”¨æŒ‡å‘çš„é›†åˆçš„ç±»å‹</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„</title>
      <link href="/2019/09/26/%E6%95%B0%E7%BB%84/"/>
      <url>/2019/09/26/%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰å®šé•¿æ•°ç»„å®šä¹‰æ ¼å¼ï¼š</span><br><span class="line"> val arr=new Array[T](æ•°ç»„é•¿åº¦)</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰å˜é•¿æ•°ç»„å®šä¹‰æ ¼å¼ï¼š</span><br><span class="line"> val arr = ArrayBuffer[T]()</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„éœ€è¦å¯¼åŒ…ï¼šimport scala.collection.mutable.ArrayBuffer</p><h3 id="ä¾‹ç¨‹"><a href="#ä¾‹ç¨‹" class="headerlink" title="ä¾‹ç¨‹"></a>ä¾‹ç¨‹</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ArrayApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="comment">// æ•°ç»„å£°æ˜</span></span><br><span class="line">    <span class="keyword">val</span> arr = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">String</span>](<span class="number">5</span>)</span><br><span class="line">    arr(<span class="number">1</span>) = <span class="string">"HAHA"</span></span><br><span class="line">    println(arr.mkString(<span class="string">","</span>))</span><br><span class="line">    println(<span class="string">"**********************************************************"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–èµ‹å€¼</span></span><br><span class="line">    <span class="keyword">val</span> arr2 = <span class="type">Array</span>(<span class="string">"Hello"</span>, <span class="string">"Scala"</span>, <span class="string">"Hadoop"</span>, <span class="string">"Spark"</span>, <span class="string">"Storm"</span>)</span><br><span class="line">    <span class="keyword">for</span> (elem <- arr2) {</span><br><span class="line">      println(elem)</span><br><span class="line">    }</span><br><span class="line">    println(<span class="string">"**********************************************************"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ååºè¾“å‡ºï¼ˆå¢å¼ºforï¼‰</span></span><br><span class="line">    <span class="keyword">for</span> (elem <- arr2.reverse) {</span><br><span class="line">      println(elem)</span><br><span class="line">    }</span><br><span class="line">    println(<span class="string">"**********************************************************"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯å˜é•¿åº¦æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> arr3 = scala.collection.mutable.<span class="type">ArrayBuffer</span>[<span class="type">String</span>]()</span><br><span class="line">    arr3.++=(arr2)</span><br><span class="line">    arr3 += <span class="string">"ä½ å¥½"</span></span><br><span class="line">    println(arr3.mkString(<span class="string">","</span>))</span><br><span class="line">    println(<span class="string">"**********************************************************"</span>)</span><br><span class="line">    arr3.remove(<span class="number">2</span>)</span><br><span class="line">    println(arr3.mkString(<span class="string">","</span>))</span><br><span class="line">    println(<span class="string">"**********************************************************"</span>)</span><br><span class="line">    arr3.trimEnd(<span class="number">4</span>)</span><br><span class="line">    println(arr3.mkString(<span class="string">","</span>))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">null,HAHA,null,null,null</span><br><span class="line">**********************************************************</span><br><span class="line">Hello</span><br><span class="line">Scala</span><br><span class="line">Hadoop</span><br><span class="line">Spark</span><br><span class="line">Storm</span><br><span class="line">**********************************************************</span><br><span class="line">Storm</span><br><span class="line">Spark</span><br><span class="line">Hadoop</span><br><span class="line">Scala</span><br><span class="line">Hello</span><br><span class="line">**********************************************************</span><br><span class="line">Hello,Scala,Hadoop,Spark,Storm,ä½ å¥½</span><br><span class="line">**********************************************************</span><br><span class="line">Hello,Scala,Spark,Storm,ä½ å¥½</span><br><span class="line">**********************************************************</span><br><span class="line">Hello</span><br></pre></td></tr></tbody></table></figure></div><p>yieldå…³é”®å­—å°†åŸå§‹çš„æ•°ç»„è¿›è¡Œè½¬æ¢ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ŒåŸå§‹çš„æ•°ç»„ä¸å˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// yieldå…³é”®å­—å°†åŸå§‹çš„æ•°ç»„è¿›è¡Œè½¬æ¢ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ŒåŸå§‹çš„æ•°ç»„ä¸å˜</span></span><br><span class="line"><span class="keyword">val</span> arr4 = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å¶æ•°å–å‡ºä¹˜ä»¥10ï¼Œå†ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">val</span>  res = <span class="keyword">for</span>(e <- arr4 <span class="keyword">if</span> e % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">yield</span> e * <span class="number">10</span></span><br><span class="line">println(res.mkString(<span class="string">","</span>))</span><br><span class="line">println(<span class="string">"**********************************************************"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// filterè¿‡æ»¤å™¨ï¼Œæ¥æ”¶è¿”å›å€¼ä¸ºboobleançš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// map ç›¸å½“äºå°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å–å‡ºæ¥ï¼Œåº”ç”¨ä¼ è¿›æ¥çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">val</span> resPlus = arr4.filter(_ % <span class="number">2</span> == <span class="number">0</span>).map(_ * <span class="number">10</span>)</span><br><span class="line">println(resPlus.mkString(<span class="string">","</span>))</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">20,40,60,80</span><br><span class="line">**********************************************************</span><br><span class="line">20,40,60,80</span><br></pre></td></tr></tbody></table></figure></div><h3 id="æ•°ç»„å¸¸ç”¨ç®—æ³•"><a href="#æ•°ç»„å¸¸ç”¨ç®—æ³•" class="headerlink" title="æ•°ç»„å¸¸ç”¨ç®—æ³•"></a>æ•°ç»„å¸¸ç”¨ç®—æ³•</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr5 = <span class="type">Array</span>(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">-5</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚å’Œ</span></span><br><span class="line">println(arr5.sum)</span><br><span class="line"><span class="comment">// æ±‚æœ€å¤§å€¼</span></span><br><span class="line">println(arr5.max)</span><br><span class="line"><span class="comment">// æ±‚æœ€å°å€¼</span></span><br><span class="line">println(arr5.min)</span><br><span class="line"><span class="comment">// æ’åº</span></span><br><span class="line">println(arr5.sorted.mkString(<span class="string">","</span>))</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç»“æœ</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">35</span><br><span class="line">9</span><br><span class="line">-5</span><br><span class="line">-5,1,2,3,4,6,7,8,9</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®šä¹‰æ–¹æ³•å’Œå‡½æ•°</title>
      <link href="/2019/09/26/%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/"/>
      <url>/2019/09/26/%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%92%8C%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Scalaä¸­çš„+ - * / %ç­‰æ“ä½œç¬¦çš„ä½œç”¨ä¸Javaä¸€æ ·ï¼Œä½æ“ä½œç¬¦ & | ^ >> <<ä¹Ÿä¸€æ ·ã€‚åªæ˜¯æœ‰ä¸€ç‚¹ç‰¹åˆ«çš„ï¼šè¿™äº›æ“ä½œç¬¦å®é™…ä¸Šæ˜¯æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a + b</span><br><span class="line">æ˜¯å¦‚ä¸‹æ–¹æ³•è°ƒç”¨çš„ç®€å†™ï¼š</span><br><span class="line">a.+(b)</span><br><span class="line">a æ–¹æ³• bå¯ä»¥å†™æˆ a.æ–¹æ³•(b)</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å®šä¹‰æ–¹æ³•"><a href="#å®šä¹‰æ–¹æ³•" class="headerlink" title="å®šä¹‰æ–¹æ³•"></a>å®šä¹‰æ–¹æ³•</h3><p><a href="A974B5609AC14D67A000F519938B556E" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A974B5609AC14D67A000F519938B556E" class="lazyload" title="image"></a></p><p><a href="948BF87436B04567B6832256D13BC8B0" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="948BF87436B04567B6832256D13BC8B0" class="lazyload" title="image"></a></p><p>æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥ä¸å†™ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºæ¥ï¼Œä½†æ˜¯<strong>å¯¹äºé€’å½’å‡½æ•°ï¼Œå¿…é¡»æŒ‡å®šè¿”å›ç±»å‹ã€‚</strong></p><p><a href="65171CF7C46B4035B6ABEF2B5C1D8C05" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="65171CF7C46B4035B6ABEF2B5C1D8C05" class="lazyload" title="image"></a></p><h3 id="å®šä¹‰å‡½æ•°"><a href="#å®šä¹‰å‡½æ•°" class="headerlink" title="å®šä¹‰å‡½æ•°"></a>å®šä¹‰å‡½æ•°</h3><p><a href="90C23650CC79424AAF6AB9A969A547D2" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="90C23650CC79424AAF6AB9A969A547D2" class="lazyload" title="image"></a></p><h3 id="æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«"><a href="#æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«"></a>æ–¹æ³•å’Œå‡½æ•°çš„åŒºåˆ«</h3><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡½æ•°æ˜¯â€œå¤´ç­‰å…¬æ°‘â€ï¼Œå®ƒå¯ä»¥åƒä»»ä½•å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·è¢«ä¼ é€’å’Œæ“ä½œï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç»§æ‰¿è‡ªFuctionNã€‚Nä»£è¡¨å‡½æ•°åˆ›å»ºæ˜¯æœ‰å¤šå°‘ä¸ªå‚æ•°ã€‚</p><p>å‡½æ•°å¯¹è±¡æœ‰applyã€curried(æŸ¯é‡ŒåŒ–)ã€toStringã€tupled(å…ƒç»„)è¿™äº›æ–¹æ³•ã€‚è€Œæ–¹æ³•ä¸å…·æœ‰è¿™äº›ç‰¹æ€§ã€‚</p><p>å¦‚æœæƒ³æŠŠæ–¹æ³•è½¬æ¢æˆä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç”¨æ–¹æ³•åè·Ÿä¸Šä¸‹åˆ’çº¿çš„æ–¹å¼ã€‚</p><p>æ¡ˆä¾‹ï¼šé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°†å‡½æ•°ä¼ é€’åˆ°æ–¹æ³•é‡Œé¢<br><a href="F3F7FAAED87E4FC8B5AB441D335E70EE" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="F3F7FAAED87E4FC8B5AB441D335E70EE" class="lazyload" title="image"></a></p><h3 id="æ–¹æ³•ä»£ç "><a href="#æ–¹æ³•ä»£ç " class="headerlink" title="æ–¹æ³•ä»£ç "></a>æ–¹æ³•ä»£ç </h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">FunctionApp</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    sayHello(<span class="string">"å°æ˜"</span>)</span><br><span class="line"></span><br><span class="line">    println(add(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    defaultValue(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">    variableParameter(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ— è¿”å›å€¼</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param name</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(name: <span class="type">String</span>): <span class="type">Unit</span> = {</span><br><span class="line">    println(<span class="string">"Hello "</span> + name)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æœ€åä¸€ä¸ªæ‰§è¡Œçš„ç»“æœå°±æ˜¯è¿”å›å€¼ï¼Œä¸éœ€è¦return</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param x å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment">   * @param y å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment">   * @return ç›¸åŠ ç»“æœ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>): <span class="type">Int</span> = {</span><br><span class="line">    x + y</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param name å‚æ•°ï¼Œæœ‰ä¸€ä¸ªé»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">defaultValue</span></span>(name: <span class="type">String</span> = <span class="string">"æå››"</span>): <span class="type">Unit</span> = {</span><br><span class="line">    println(<span class="string">"ä½ å¥½ "</span> + name)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¯å˜å‚æ•°å‡½æ•°</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param num å¯å˜å‚æ•°(ç±»å‹å¿…é¡»ç›¸åŒ)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">variableParameter</span></span>(num: <span class="type">Int</span>*) {</span><br><span class="line">    <span class="keyword">var</span> count: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    num.foreach(e => {</span><br><span class="line">      count += e</span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    println(<span class="string">"æ€»å’Œï¼š"</span> + count)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ScalaåŸºç¡€</title>
      <link href="/2019/09/25/Scala%E5%9F%BA%E7%A1%80/"/>
      <url>/2019/09/25/Scala%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="å£°æ˜å˜é‡"><a href="#å£°æ˜å˜é‡" class="headerlink" title="å£°æ˜å˜é‡"></a>å£°æ˜å˜é‡</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Hello</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = {</span><br><span class="line">    println(<span class="string">"Hello Scala"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨valå®šä¹‰çš„å˜é‡å€¼æ˜¯ä¸å¯å˜çš„ï¼Œç›¸å½“äºJavaé‡Œé¢finalä¿®é¥°çš„å˜é‡</span></span><br><span class="line">    <span class="keyword">val</span> i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨varå®šä¹‰çš„å˜é‡æ˜¯å¯å˜çš„ï¼Œåœ¨Scalaä¸­é¼“åŠ±ä½¿ç”¨val</span></span><br><span class="line">    <span class="keyword">var</span> s = <span class="string">"Hello Scala"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Scalaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­å˜é‡çš„ç±»å‹ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥æŒ‡å®šç±»å‹</span></span><br><span class="line">    <span class="keyword">val</span> str: <span class="type">String</span> = <span class="string">"Hello Spark"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å¸¸ç”¨ç±»å‹"><a href="#å¸¸ç”¨ç±»å‹" class="headerlink" title="å¸¸ç”¨ç±»å‹"></a>å¸¸ç”¨ç±»å‹</h3><p>Scalaå’ŒJavaä¸€æ ·ï¼Œæœ‰7ç§æ•°å€¼ç±»å‹Byteã€Charã€Shortã€Intã€Longã€Floatã€Doubleç±»å‹å’Œ1ä¸ªBooleanç±»å‹ã€‚</p><h3 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h3><p>Scalaçš„æ¡ä»¶è¡¨è¾¾å¼æ¯”è¾ƒç®€æ´ï¼Œå®šä¹‰å˜é‡æ—¶åŠ ä¸Šif elseåˆ¤æ–­æ¡ä»¶ã€‚ä¾‹å¦‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ¡ä»¶è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment">* @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conditionalExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">    <span class="comment">// æ¡ä»¶è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">if</span> (num1 > num2) {</span><br><span class="line">      println(num1 + <span class="string">" > "</span> + num2)</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (num1 == num2) {</span><br><span class="line">      println(num1 + <span class="string">" = "</span> + num2)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      println(num1 + <span class="string">" < "</span> + num2)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å—è¡¨è¾¾å¼"><a href="#å—è¡¨è¾¾å¼" class="headerlink" title="å—è¡¨è¾¾å¼"></a>å—è¡¨è¾¾å¼</h3><p>å®šä¹‰å˜é‡æ—¶ç”¨ {} åŒ…å«ä¸€ç³»åˆ—è¡¨è¾¾å¼ï¼Œå…¶ä¸­å—çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼å°±æ˜¯å—çš„å€¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lump</span> </span>(): <span class="type">Unit</span> ={</span><br><span class="line">    <span class="keyword">val</span> a = <span class="number">10</span></span><br><span class="line">    <span class="keyword">val</span> b = <span class="number">20</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å—è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">val</span> result = {</span><br><span class="line">    <span class="comment">// å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼,æ—¢æ˜¯å¿«è¡¨è¾¾å¼çš„è¿”å›å€¼</span></span><br><span class="line">      a + b</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    println(result)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h3><p>åœ¨scalaä¸­æœ‰å¥½å‡ ç§å¾ªç¯ï¼Œå…¶ä¸­forå¾ªç¯å’Œwhileå¾ªç¯ç”¨çš„æ¯”è¾ƒå¤š</p><p><strong>forå¾ªç¯ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * foreachå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment"> * @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Range</span> = num1.until(num2)</span><br><span class="line">  arr.foreach(e => {</span><br><span class="line">    print(e + <span class="string">" "</span>)</span><br><span class="line">  })</span><br><span class="line">  println()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * forå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment"> * @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Range</span> = num1.until(num2)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (a <- arr <span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>) {</span><br><span class="line">    println(<span class="string">"è´¨æ•°: "</span> + a)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>whileå¾ªç¯ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * whileå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">whileExpression</span></span>(): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (count > <span class="number">0</span>) {</span><br><span class="line">    print(count + <span class="string">" "</span>)</span><br><span class="line">    count -= <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  println()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * do-whileå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dowhileExpression</span></span>(): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">  do {</span><br><span class="line">    print(count + <span class="string">" "</span>)</span><br><span class="line">    count -= <span class="number">1</span></span><br><span class="line">  } <span class="keyword">while</span> (count > <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  println()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>å…¶ä»–å¾ªç¯ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * toå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment"> * @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Inclusive</span> = num1.to(num2)</span><br><span class="line">  println(arr.toList)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * rangeå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment"> * @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rangeExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Range</span> = <span class="type">Range</span>(num1, num2)</span><br><span class="line">  println(arr.toList)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * untilå¾ªç¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param num1 å‚æ•°ä¸€</span></span><br><span class="line"><span class="comment"> * @param num2 å‚æ•°äºŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">untilExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Range</span> = num1.until(num2)</span><br><span class="line">  println(arr.toList)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>break ç»ˆæ­¢å¾ªç¯</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">scala</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * break ç»ˆæ­¢å¾ªç¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">breakExpression</span></span>(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>): <span class="type">Unit</span> = {</span><br><span class="line">  <span class="keyword">val</span> arr: <span class="type">Inclusive</span> = num1.to(num2)</span><br><span class="line">  <span class="keyword">val</span> loop = <span class="keyword">new</span> <span class="type">Breaks</span>;</span><br><span class="line"></span><br><span class="line">  loop.breakable {</span><br><span class="line">    <span class="keyword">for</span> (a <- arr) {</span><br><span class="line">      print(a + <span class="string">" "</span>)</span><br><span class="line">      <span class="keyword">if</span> (a == <span class="number">5</span>) {</span><br><span class="line">        <span class="comment">// ç»ˆæ­¢å¾ªç¯</span></span><br><span class="line">        loop.<span class="keyword">break</span>()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  println()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå®‰è£…Scalaç¼–è¯‘å™¨</title>
      <link href="/2019/09/25/Linux%E5%AE%89%E8%A3%85Scala%E7%BC%96%E8%AF%91%E5%99%A8/"/>
      <url>/2019/09/25/Linux%E5%AE%89%E8%A3%85Scala%E7%BC%96%E8%AF%91%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><ul><li>ä¸‹è½½Scalaåœ°å€<a href="https://www.scala-lang.org/download/2.11.8.html" target="_blank" rel="noopener">https://www.scala-lang.org/download/2.11.8.html</a></li><li>è§£å‹Scalaåˆ°æŒ‡å®šç›®å½•<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf scala-2.11.8.tgz -C /usr/java</span><br></pre></td></tr></tbody></table></figure></div></li><li>é…ç½®ç¯å¢ƒå˜é‡ï¼Œå°†scalaåŠ å…¥åˆ°PATHä¸­<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:/usr/java/scala-2.11.8/bin</span><br></pre></td></tr></tbody></table></figure></div></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Scala </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Scala </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker éƒ¨ç½²SpringBooté¡¹ç›®æ•´åˆ Redis é•œåƒåšè®¿é—®è®¡æ•°Demo</title>
      <link href="/2019/09/03/Docker%20%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%20Redis%20%E9%95%9C%E5%83%8F%E5%81%9A%E8%AE%BF%E9%97%AE%E8%AE%A1%E6%95%B0Demo/"/>
      <url>/2019/09/03/Docker%20%E9%83%A8%E7%BD%B2SpringBoot%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%20Redis%20%E9%95%9C%E5%83%8F%E5%81%9A%E8%AE%BF%E9%97%AE%E8%AE%A1%E6%95%B0Demo/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="Docker-éƒ¨ç½²SpringBooté¡¹ç›®æ•´åˆ-Redis-é•œåƒåšè®¿é—®è®¡æ•°Demo"><a href="#Docker-éƒ¨ç½²SpringBooté¡¹ç›®æ•´åˆ-Redis-é•œåƒåšè®¿é—®è®¡æ•°Demo" class="headerlink" title="Docker éƒ¨ç½²SpringBooté¡¹ç›®æ•´åˆ Redis é•œåƒåšè®¿é—®è®¡æ•°Demo"></a>Docker éƒ¨ç½²SpringBooté¡¹ç›®æ•´åˆ Redis é•œåƒåšè®¿é—®è®¡æ•°Demo</h1><h3 id="æœ€ç»ˆæ•ˆæœå¦‚ä¸‹"><a href="#æœ€ç»ˆæ•ˆæœå¦‚ä¸‹" class="headerlink" title="æœ€ç»ˆæ•ˆæœå¦‚ä¸‹"></a>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹</h3><p><a href="https://i.imgur.com/Ao8GSyX.gif" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Ao8GSyX.gif" class="lazyload" title></a></p><p>å¤§æ¦‚å°±å‡ ä¸ªæ­¥éª¤</p><ul><li>1.å®‰è£… Docker CE</li><li>2.è¿è¡Œ Redis é•œåƒ</li><li>3.Java ç¯å¢ƒå‡†å¤‡</li><li>4.é¡¹ç›®å‡†å¤‡</li><li>5.ç¼–å†™ Dockerfile</li><li>6.å‘å¸ƒé¡¹ç›®</li><li>7.æµ‹è¯•æœåŠ¡</li></ul><h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><ul><li>ç³»ç»Ÿï¼šUbuntu 17.04 x64</li><li>Docker 17.12.0-ce</li><li>IP:45.32.31.101</li></ul><h1 id="ä¸€ã€å®‰è£…-Docker-CE"><a href="#ä¸€ã€å®‰è£…-Docker-CE" class="headerlink" title="ä¸€ã€å®‰è£… Docker CE"></a>ä¸€ã€å®‰è£… Docker CE</h1><p>å›½å†…<strong>ä¸å»ºè®®ä½¿ç”¨:â€œè„šæœ¬è¿›è¡Œå®‰è£…â€</strong>,ä¼šä¸‹è½½å®‰è£…å¾ˆæ…¢,ä½¿ç”¨æ­¥éª¤ 1 å®‰è£…ï¼Œçœ‹ä¸‹é¢çš„é“¾æ¥ï¼šå¸¸è§„å®‰è£…æ–¹å¼</p><h3 id="1-å¸¸è§„å®‰è£…æ–¹å¼"><a href="#1-å¸¸è§„å®‰è£…æ–¹å¼" class="headerlink" title="1.å¸¸è§„å®‰è£…æ–¹å¼"></a>1.å¸¸è§„å®‰è£…æ–¹å¼</h3><p><a href="http://www.ymq.io/2018/01/11/Docker-Install-docker-ce" target="_blank" rel="noopener">Ubuntu 17.04 x64 å®‰è£… Docker CE</a></p><h3 id="2-è„šæœ¬è¿›è¡Œå®‰è£…"><a href="#2-è„šæœ¬è¿›è¡Œå®‰è£…" class="headerlink" title="2.è„šæœ¬è¿›è¡Œå®‰è£…"></a>2.è„šæœ¬è¿›è¡Œå®‰è£…</h3><p>å›½å†…å®‰è£…ä¸å»ºè®®ä½¿ç”¨è„šæœ¬ï¼š</p><p>å®‰è£…Docker CE</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">$ sudo sh get-docker.sh</span><br><span class="line"></span><br><span class="line"><output truncated></output></span><br><span class="line"></span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the "docker" group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker your-user</span><br><span class="line"></span><br><span class="line">Remember that you will have to log out and back in for this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the "docker" group will grant the ability to run</span><br><span class="line">         containers which can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><br><span class="line">         for more information.</span><br></pre></td></tr></tbody></table></figure></div><p>éªŒè¯Docker CE</p><p>é€šè¿‡è¿è¡Œhello-world é•œåƒ éªŒè¯æ˜¯å¦æ­£ç¡®å®‰è£…äº†Docker CE</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# sudo docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              f2a91732366c        7 weeks ago         1.85kB</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äºŒã€è¿è¡Œ-Redis-é•œåƒ"><a href="#äºŒã€è¿è¡Œ-Redis-é•œåƒ" class="headerlink" title="äºŒã€è¿è¡Œ Redis é•œåƒ"></a>äºŒã€è¿è¡Œ Redis é•œåƒ</h1><h3 id="1-è¿è¡Œé•œåƒ"><a href="#1-è¿è¡Œé•œåƒ" class="headerlink" title="1.è¿è¡Œé•œåƒ"></a>1.è¿è¡Œé•œåƒ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --name redis-6379 -p 6379:6379 -d redis</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Unable to find image 'redis:latest' locally</span><br><span class="line">latest: Pulling from library/redis</span><br><span class="line">c4bb02b17bb4: Pull complete </span><br><span class="line">58638acf67c5: Pull complete </span><br><span class="line">f98d108cc38b: Pull complete </span><br><span class="line">83be14fccb07: Pull complete </span><br><span class="line">5d5f41793421: Pull complete </span><br><span class="line">ed89ff0d9eb2: Pull complete </span><br><span class="line">Digest: sha256:0e773022cd6572a5153e5013afced0f7191652d3cdf9b1c6785eb13f6b2974b1</span><br><span class="line">Status: Downloaded newer image for redis:latest</span><br><span class="line">2f1f20f672e386a61644e1c08232ea34bdfd6a0c244b55fa833fcfd6dd207288</span><br></pre></td></tr></tbody></table></figure></div><h3 id="2-æ£€æŸ¥é•œåƒ"><a href="#2-æ£€æŸ¥é•œåƒ" class="headerlink" title="2.æ£€æŸ¥é•œåƒ"></a>2.æ£€æŸ¥é•œåƒ</h3><p>æŸ¥çœ‹é•œåƒ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# docker images redis</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis               latest              1e70071f4af4        4 weeks ago         107MB</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥çœ‹é•œåƒè¿›ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">2f1f20f672e3        redis               "docker-entrypoint.sâ€¦"   14 seconds ago      Up 14 seconds       0.0.0.0:6379->6379/tcp   redis-6379</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥çœ‹å®¹å™¨è¿›ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# docker container ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">2f1f20f672e3        redis               "docker-entrypoint.sâ€¦"   7 minutes ago       Up 7 minutes        0.0.0.0:6379->6379/tcp   redis-6379</span><br></pre></td></tr></tbody></table></figure></div><h3 id="3-æµ‹è¯•RedisæœåŠ¡"><a href="#3-æµ‹è¯•RedisæœåŠ¡" class="headerlink" title="3.æµ‹è¯•RedisæœåŠ¡"></a>3.æµ‹è¯•RedisæœåŠ¡</h3><p>é€šè¿‡ redis-cli è¿æ¥Redis æœåŠ¡ï¼Œæµ‹è¯•å­˜å‚¨æ•°æ®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# docker run -it --link redis-6379:redis --rm redis redis-cli -h redis -p 6379</span><br><span class="line">redis:6379> set count 1</span><br><span class="line">OK</span><br><span class="line">redis:6379> get count</span><br><span class="line">"1"</span><br><span class="line">redis:6379> exit</span><br><span class="line">root@souyunku:~#</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸‰ã€Java-ç¯å¢ƒå‡†å¤‡"><a href="#ä¸‰ã€Java-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸‰ã€Java ç¯å¢ƒå‡†å¤‡"></a>ä¸‰ã€Java ç¯å¢ƒå‡†å¤‡</h1><p><strong>æ³¨æ„:é˜…è¯»ä»¥ä¸‹æ­¥éª¤ï¼ï¼ï¼</strong></p><ul><li><p>1.Java ç¯å¢ƒæ˜¯ä¸ºäº†ï¼Œç¼–è¯‘Github Maven SpringBoot ç¤ºä¾‹é¡¹ç›®ï¼Œå‡†å¤‡</p></li><li><p>2.æˆ–è€…è‡ªå·±åœ¨æœ¬åœ°ç¼–è¯‘å¥½ä¸Šä¼ ä¹Ÿè¡Œï¼Œé‚£ä¹ˆä»¥ä¸‹Java ç¯å¢ƒï¼Œå®‰è£…:Jdk,Maven,Git,å°±å¯ä»¥ä¸ç”¨é…ç½®</p></li></ul><h3 id="1-å®‰è£…-Jdk"><a href="#1-å®‰è£…-Jdk" class="headerlink" title="1.å®‰è£… Jdk"></a>1.å®‰è£… Jdk</h3><p>ä¸‹è½½JDK æ–¹å¼ï¼š1</p><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">ä¸‹è½½Linuxç¯å¢ƒä¸‹çš„jdk1.8</a></p><p>ä¸‹è½½JDK æ–¹å¼ï¼š2</p><p>æˆ‘åœ¨ç™¾åº¦äº‘ç›˜åˆ†ä¸‹çš„é“¾æ¥ï¼šYPSuperKey Broken<a href="http://pan.baidu.com/s/1jIFZF9s" target="_blank" rel="noopener">http://pan.baidu.com/s/1jIFZF9s</a> å¯†ç ï¼šu4n4</p><p>ä¸‹è½½JDK æ–¹å¼ï¼š3</p><p>ä½¿ç”¨wgetä¸‹è½½ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget --no-cookies --no-check-certificate --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie" "http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-x64.tar.gz"</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ï¼šä¸‹è½½JDK æ–¹å¼ï¼š3</p><p>é‚£ä¹ˆä»¥ä¸‹æ­¥éª¤çš„ï¼Œjdk1.8.0_144æ›¿æ¢æˆjdk1.8.0_141</p><p>å¼€å§‹å®‰è£…</p><p>ä¸Šä¼ åœ¨ /opt ç›®å½•</p><p>è§£å‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt</span><br><span class="line">$ tar zxvf jdk-8u144-linux-x64.tar.gz</span><br><span class="line">$ mv jdk1.8.0_144/ /lib/jvm</span><br></pre></td></tr></tbody></table></figure></div><p>é…ç½®ç¯å¢ƒå˜é‡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/profile</span><br><span class="line">#jdk</span><br><span class="line">export JAVA_HOME=/lib/jvm</span><br><span class="line">export JRE_HOME=${JAVA_HOME}/jre   </span><br><span class="line">export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib   </span><br><span class="line">export PATH=${JAVA_HOME}/bin:$PATH</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ source /etc/profile</span><br></pre></td></tr></tbody></table></figure></div><p>éªŒè¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# java -version</span><br><span class="line">java version "1.8.0_141"</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_141-b15)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.141-b15, mixed mode)</span><br></pre></td></tr></tbody></table></figure></div><p>2.å®‰è£… Maven</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install maven</span><br></pre></td></tr></tbody></table></figure></div><p>éªŒè¯Maven</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# mvn -v</span><br><span class="line">Apache Maven 3.3.9</span><br><span class="line">Maven home: /usr/share/maven</span><br><span class="line">Java version: 1.8.0_141, vendor: Oracle Corporation</span><br><span class="line">Java home: /lib/jvm/jre</span><br><span class="line">Default locale: en_US, platform encoding: UTF-8</span><br><span class="line">OS name: "linux", version: "4.10.0-35-generic", arch: "amd64", family: "unix"</span><br></pre></td></tr></tbody></table></figure></div><p>3.å®‰è£… Git</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install git</span><br></pre></td></tr></tbody></table></figure></div><p>éªŒè¯Git</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:~# git --version</span><br><span class="line">git version 2.11.0</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å››ã€é¡¹ç›®å‡†å¤‡"><a href="#å››ã€é¡¹ç›®å‡†å¤‡" class="headerlink" title="å››ã€é¡¹ç›®å‡†å¤‡"></a>å››ã€é¡¹ç›®å‡†å¤‡</h1><h3 id="1-ç¼–è¯‘é¡¹ç›®"><a href="#1-ç¼–è¯‘é¡¹ç›®" class="headerlink" title="1.ç¼–è¯‘é¡¹ç›®"></a>1.ç¼–è¯‘é¡¹ç›®</h3><p>1.è‡ªå·±åœ¨æœåŠ¡å™¨Mavenç¼–è¯‘é¡¹ç›®</p><p>ä½¿ç”¨ git å…‹éš†é¡¹ç›®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/souyunku/other-projects.git</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ maven ç¼–è¯‘é¡¹ç›®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd other-projects/docker-spring-boot-demo/</span><br></pre></td></tr></tbody></table></figure></div><h3 id="2-ä¿®æ”¹é¡¹ç›®"><a href="#2-ä¿®æ”¹é¡¹ç›®" class="headerlink" title="2.ä¿®æ”¹é¡¹ç›®"></a>2.ä¿®æ”¹é¡¹ç›®</h3><p>ä¿®æ”¹ Redis æœåŠ¡å™¨åœ°å€spring.redis.host=45.32.44.217,ä¸ºæœ¬åœ°IP, åœ¨è¿è¡Œ Redis é•œåƒæ—¶å€™ å·²ç»æŠŠ Redis åšæˆå¤–ç½‘æœåŠ¡äº†0.0.0.0:6379->6379/tcp</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi src/main/resources/application.properties</span><br></pre></td></tr></tbody></table></figure></div><h1 id="RedisæœåŠ¡å™¨åœ°å€"><a href="#RedisæœåŠ¡å™¨åœ°å€" class="headerlink" title="RedisæœåŠ¡å™¨åœ°å€"></a>RedisæœåŠ¡å™¨åœ°å€</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.host=45.32.44.217</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn package</span><br></pre></td></tr></tbody></table></figure></div><p>å¤åˆ¶target/ ç›®å½•ä¸‹çš„docker-spring-boot-demo-0.0.1-SNAPSHOT.jaré¡¹ç›®åˆ°/opt ç›®å½•ç¨åä¼šç”¨åˆ°</p><p>$ cp target/docker-spring-boot-demo-0.0.1-SNAPSHOT.jar /opt/</p><h3 id="2-è‡ªå·±åœ¨æœ¬åœ°Mavenç¼–è¯‘é¡¹ç›®ï¼Œç„¶åä¸Šä¼ åˆ°-opt-ç›®å½•ç¨åä¼šç”¨åˆ°"><a href="#2-è‡ªå·±åœ¨æœ¬åœ°Mavenç¼–è¯‘é¡¹ç›®ï¼Œç„¶åä¸Šä¼ åˆ°-opt-ç›®å½•ç¨åä¼šç”¨åˆ°" class="headerlink" title="2.è‡ªå·±åœ¨æœ¬åœ°Mavenç¼–è¯‘é¡¹ç›®ï¼Œç„¶åä¸Šä¼ åˆ°/opt ç›®å½•ç¨åä¼šç”¨åˆ°"></a>2.è‡ªå·±åœ¨æœ¬åœ°Mavenç¼–è¯‘é¡¹ç›®ï¼Œç„¶åä¸Šä¼ åˆ°/opt ç›®å½•ç¨åä¼šç”¨åˆ°</h3><p>ä¿®æ”¹application.properties çš„ Redis æœåŠ¡å™¨åœ°å€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">other-projects/docker-spring-boot-demo/src/main/resources/application.properties</span><br></pre></td></tr></tbody></table></figure></div><h1 id="RedisæœåŠ¡å™¨åœ°å€-1"><a href="#RedisæœåŠ¡å™¨åœ°å€-1" class="headerlink" title="RedisæœåŠ¡å™¨åœ°å€"></a>RedisæœåŠ¡å™¨åœ°å€</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.host=45.32.44.217</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äº”ã€ç¼–å†™-Dockerfile"><a href="#äº”ã€ç¼–å†™-Dockerfile" class="headerlink" title="äº”ã€ç¼–å†™ Dockerfile"></a>äº”ã€ç¼–å†™ Dockerfile</h1><p>ç¼–å†™ Dockerfile åŸºäºjava:8é•œåƒä¸ºåŸºç¡€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/</span><br><span class="line">$ touch Dockerfile</span><br><span class="line">$ vi Dockerfile</span><br></pre></td></tr></tbody></table></figure></div><p>ç¼–è¾‘å†…å®¹ä¸ªå¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># åŸºäºå“ªä¸ªé•œåƒ</span><br><span class="line">FROM java:8</span><br><span class="line"></span><br><span class="line"># å°†æœ¬åœ°æ–‡ä»¶å¤¹æŒ‚è½½åˆ°å½“å‰å®¹å™¨</span><br><span class="line">VOLUME /tmp</span><br><span class="line"></span><br><span class="line"># æ‹·è´æ–‡ä»¶åˆ°å®¹å™¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™æˆADD docker-spring-boot-demo-0.0.1-SNAPSHOT.jar /souyunku-app.jar</span><br><span class="line">ADD docker-spring-boot-demo-0.0.1-SNAPSHOT.jar souyunku-app.jar</span><br><span class="line">RUN bash -c 'touch /souyunku-app.jar'</span><br><span class="line"></span><br><span class="line"># å¼€æ”¾80ç«¯å£</span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"># é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/souyunku-app.jar"]</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å…­ã€å‘å¸ƒé¡¹ç›®"><a href="#å…­ã€å‘å¸ƒé¡¹ç›®" class="headerlink" title="å…­ã€å‘å¸ƒé¡¹ç›®"></a>å…­ã€å‘å¸ƒé¡¹ç›®</h1><h3 id="1-ç¼–è¯‘é•œåƒ"><a href="#1-ç¼–è¯‘é•œåƒ" class="headerlink" title="1.ç¼–è¯‘é•œåƒ"></a>1.ç¼–è¯‘é•œåƒ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /opt/</span><br><span class="line">$ docker build -t souyunku-app:v1 .</span><br></pre></td></tr></tbody></table></figure></div><p>çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼Œå°±è¯æ˜ä½ çš„Dockerfileå†™çš„æ²¡æ¯›ç—…ï¼Œè€Œä¸”é•œåƒä¹Ÿç¼–è¯‘æˆåŠŸäº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Sending build context to Docker daemon  18.72MB</span><br><span class="line">Step 1/6 : FROM java:8</span><br><span class="line">8: Pulling from library/java</span><br><span class="line">5040bd298390: Pull complete </span><br><span class="line">fce5728aad85: Pull complete </span><br><span class="line">76610ec20bf5: Pull complete </span><br><span class="line">60170fec2151: Pull complete </span><br><span class="line">e98f73de8f0d: Pull complete </span><br><span class="line">11f7af24ed9c: Pull complete </span><br><span class="line">49e2d6393f32: Pull complete </span><br><span class="line">bb9cdec9c7f3: Pull complete </span><br><span class="line">Digest: sha256:c1ff613e8ba25833d2e1940da0940c3824f03f802c449f3d1815a66b7f8c0e9d</span><br><span class="line">Status: Downloaded newer image for java:8</span><br><span class="line"> ---> d23bdf5b1b1b</span><br><span class="line">Step 2/6 : VOLUME /tmp</span><br><span class="line"> ---> Running in 0559a62b0cd5</span><br><span class="line">Removing intermediate container 0559a62b0cd5</span><br><span class="line"> ---> b1f3846913a4</span><br><span class="line">Step 3/6 : ADD docker-spring-boot-demo-0.0.1-SNAPSHOT.jar souyunku-app.jar</span><br><span class="line"> ---> 9f60dad5d2ac</span><br><span class="line">Step 4/6 : RUN bash -c 'touch /souyunku-app.jar'</span><br><span class="line"> ---> Running in 39d5c09ab614</span><br><span class="line">Removing intermediate container 39d5c09ab614</span><br><span class="line"> ---> 2b691adf7922</span><br><span class="line">Step 5/6 : EXPOSE 80</span><br><span class="line"> ---> Running in 11a577437a23</span><br><span class="line">Removing intermediate container 11a577437a23</span><br><span class="line"> ---> 78815d6fe6b2</span><br><span class="line">Step 6/6 : ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/souyunku-app.jar"]</span><br><span class="line"> ---> Running in eca10fed3d02</span><br><span class="line">Removing intermediate container eca10fed3d02</span><br><span class="line"> ---> 8ec4e85a0f05</span><br><span class="line">Successfully built 8ec4e85a0f05</span><br><span class="line">Successfully tagged souyunku-app:v1</span><br></pre></td></tr></tbody></table></figure></div><h3 id="2-æŸ¥çœ‹é•œåƒ"><a href="#2-æŸ¥çœ‹é•œåƒ" class="headerlink" title="2.æŸ¥çœ‹é•œåƒ"></a>2.æŸ¥çœ‹é•œåƒ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:/opt# docker images souyunku-app</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">souyunku-app        v1                  8ec4e85a0f05        2 minutes ago       681MB</span><br></pre></td></tr></tbody></table></figure></div><h3 id="3-è¿è¡Œé•œåƒ"><a href="#3-è¿è¡Œé•œåƒ" class="headerlink" title="3.è¿è¡Œé•œåƒ"></a>3.è¿è¡Œé•œåƒ</h3><p>åå°å®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œç„¶åæŠŠå®¹å™¨ç«¯å£æ˜ å°„åˆ°ï¼Œå¤–ç½‘ç«¯å£80</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:/opt# docker run --name MySpringBoot -d -p 80:80 souyunku-app:v1</span><br><span class="line">e68d438603619e363883d4eae65d3918e1c3e00f867731207bccf06f5690dc64</span><br></pre></td></tr></tbody></table></figure></div><h3 id="4-æŸ¥çœ‹è¿›ç¨‹"><a href="#4-æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="4.æŸ¥çœ‹è¿›ç¨‹"></a>4.æŸ¥çœ‹è¿›ç¨‹</h3><p>æŸ¥çœ‹å®¹å™¨è¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°redis åœ¨ 6379ç«¯å£ï¼ŒMySpringBoot é¡¹ç›®åœ¨ 80ç«¯å£</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@souyunku:/opt# docker container ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                    NAMES</span><br><span class="line">e68d43860361        souyunku-app:v1     "java -Djava.securitâ€¦"   About a minute ago   Up About a minute   0.0.0.0:80->80/tcp       MySpringBoot</span><br><span class="line">0f9646171edd        redis               "docker-entrypoint.sâ€¦"   39 minutes ago       Up 39 minutes       0.0.0.0:6379->6379/tcp   redis-6379</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸ƒã€æµ‹è¯•æœåŠ¡"><a href="#ä¸ƒã€æµ‹è¯•æœåŠ¡" class="headerlink" title="ä¸ƒã€æµ‹è¯•æœåŠ¡"></a>ä¸ƒã€æµ‹è¯•æœåŠ¡</h1><p>æµè§ˆå™¨è®¿é—®ï¼š<a href="http://127.0.0.1/,å½“ç„¶æˆ‘æ²¡æœ‰è¾“å…¥127.0.0.1" target="_blank" rel="noopener">http://127.0.0.1/,å½“ç„¶æˆ‘æ²¡æœ‰è¾“å…¥127.0.0.1</a> æˆ‘æ˜¯åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥åšçš„ï¼Œç”¨çš„å…¬ç½‘IP</p><p><a href="https://i.imgur.com/YEk6gyD.gif" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/YEk6gyD.gif" class="lazyload" title></a></p><p>Docker Compose<br>Docker Compose æ˜¯ Docker å®˜æ–¹ç¼–æ’ï¼ˆOrchestrationï¼‰é¡¹ç›®ä¹‹ä¸€ï¼Œè´Ÿè´£å¿«é€Ÿåœ¨é›†ç¾¤ä¸­éƒ¨ç½²åˆ†å¸ƒå¼åº”ç”¨ã€‚</p><p>ä¸€ä¸ªä½¿ç”¨Dockerå®¹å™¨çš„åº”ç”¨ï¼Œé€šå¸¸ç”±å¤šä¸ªå®¹å™¨ç»„æˆã€‚ä½¿ç”¨Docker Composeï¼Œä¸å†éœ€è¦ä½¿ç”¨shellè„šæœ¬æ¥å¯åŠ¨å®¹å™¨ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰çš„å®¹å™¨é€šè¿‡servicesæ¥å®šä¹‰ï¼Œç„¶åä½¿ç”¨docker-composeè„šæœ¬æ¥å¯åŠ¨ï¼Œåœæ­¢å’Œé‡å¯åº”ç”¨ï¼Œå’Œåº”ç”¨ä¸­çš„æœåŠ¡ä»¥åŠæ‰€æœ‰ä¾èµ–æœåŠ¡çš„å®¹å™¨ã€‚</p><p>GitHub :<a href="https://github.com/souyunku/other-projects/tree/master/docker-spring-boot-demo" target="_blank" rel="noopener">docker-spring-boot-demo</a></p><p>Contact<br>ä½œè€…ï¼šé¹ç£Š<br>å‡ºå¤„ï¼š<a href="http://www.ymq.io/2018/01/11/Docker-deploy-spring-boot-Integrate-redis" target="_blank" rel="noopener">http://www.ymq.io/2018/01/11/Docker-deploy-spring-boot-Integrate-redis</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Spring Boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Spring Boot </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockerå®‰è£…kafka</title>
      <link href="/2019/08/30/kafkaManager%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/08/30/kafkaManager%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="ä¸‹è½½kafkaManager"><a href="#ä¸‹è½½kafkaManager" class="headerlink" title="ä¸‹è½½kafkaManager"></a>ä¸‹è½½kafkaManager</h3><p>æºç ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/yahoo/kafka-manager/" target="_blank" rel="noopener">https://github.com/yahoo/kafka-manager/</a><br>ä¸‹è½½æºç ï¼Œç„¶åä¸Šä¼ è§£å‹å‡†å¤‡ç¼–è¯‘</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/servers/kafka-manager-1.3.3.15</span><br><span class="line">unzip kafka-manager-1.3.3.15.zip -d  ../servers/</span><br><span class="line">./sbt clean dist</span><br></pre></td></tr></tbody></table></figure></div><p>ç¼–è¯‘å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦çš„å®‰è£…åŒ…å°±åœ¨è¿™ä¸ªè·¯å¾„ä¹‹ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/export/servers/kafka-manager-1.3.3.15/target/universal</span><br></pre></td></tr></tbody></table></figure></div><p>å°†æˆ‘ä»¬ç¼–è¯‘å¥½çš„kafkamanagerçš„å‹ç¼©åŒ…è§£å‹åˆ°æŒ‡å®šç›®å½•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd  /export/servers/kafka-manager-1.3.3.15/target/universal</span><br><span class="line">unzip kafka-manager-1.3.3.15.zip -d /export/servers/</span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/servers/kafka-manager-1.3.3.15/</span><br><span class="line">vim  conf/application.conf</span><br></pre></td></tr></tbody></table></figure></div><p>é…ç½®ä¿®æ”¹ä¸ºå¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-manager.zkhosts="node01:2181,node02:2181,node03:2181"</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸ºkafkamanagerçš„å¯åŠ¨è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/servers/kafka-manager-1.3.3.15/bin</span><br><span class="line">chmod u+x ./*</span><br></pre></td></tr></tbody></table></figure></div><p>å¯åŠ¨kafkamanagerè¿›ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/servers/kafka-manager-1.3.3.15</span><br><span class="line">nohup bin/kafka-manager  -Dconfig.file=/export/servers/kafka-manager-1.3.3.15/conf/application.conf -Dhttp.port=8070   2>&1 &</span><br></pre></td></tr></tbody></table></figure></div><p>æµè§ˆå™¨é¡µé¢è®¿é—®<br><a href="http://node01:8070/" target="_blank" rel="noopener">http://node01:8070/</a></p><p>åœ¨é¡µé¢ä¸­çš„Clusteré…ç½®å¥½æŒ‡å®šçš„kafkaå°±å¯ä»¥ç›‘æ§äº†</p><p><a href="https://s2.ax1x.com/2020/02/26/3Ufphq.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://s2.ax1x.com/2020/02/26/3Ufphq.png" class="lazyload" title></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ¶ˆæ¯é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€åˆ†é’Ÿå®ç°å†…ç½‘ç©¿é€ï¼ˆngrokæœåŠ¡å™¨æ­å»ºï¼‰</title>
      <link href="/2019/08/28/%E4%B8%80%E5%88%86%E9%92%9F%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%EF%BC%88ngrok%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%EF%BC%89/"/>
      <url>/2019/08/28/%E4%B8%80%E5%88%86%E9%92%9F%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%EF%BC%88ngrok%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>ç®€å•æ¥è¯´å†…ç½‘ç©¿é€çš„ç›®çš„æ˜¯ï¼šè®©å¤–ç½‘èƒ½è®¿é—®ä½ æœ¬åœ°çš„åº”ç”¨ï¼Œä¾‹å¦‚åœ¨å¤–ç½‘æ‰“å¼€ä½ æœ¬åœ°<a href="http://127.0.0.1æŒ‡å‘çš„Webç«™ç‚¹ã€‚" target="_blank" rel="noopener">http://127.0.0.1æŒ‡å‘çš„Webç«™ç‚¹ã€‚</a></p><p>æœ€è¿‘å…¬å¸çš„èŠ±ç”Ÿå£³åˆ°æœŸäº†ï¼Œè¦ç»­è´¹ï¼Œå‘ç°ä»·æ ¼ä¸€ç›´åœ¨æ¶¨ï¼Œéƒ½æ˜¯5å¹´ä»¥ä¸Šçš„è€ç”¨æˆ·ï¼Œæ——èˆ°ç‰ˆéƒ½æ²¡æœ‰å®ç°å†…ç½‘å®Œå…¨ç©¿é€ï¼Œæ‰“ç®—è‡ªå·±åŠ¨æ‰‹æ›¿æ¢è¿™ä¸ªæœåŠ¡ï¼Œä¸­é—´èµ°äº†ä¸å°‘çš„å¼¯è·¯ï¼Œè¿™é‡Œè®°å½•ä¸€äº›æ–‡å­—ä¸ºå¤§å®¶æä¾›å‚è€ƒã€‚</p><p>éšç€å¼€å‘ä¸è¿è¡Œç§»åŠ¨äº’è”ç½‘çš„åº”ç”¨è¶Šæ¥è¶Šå¤šå¯¹æ‰“é€šå†…å¤–ç½‘çš„éœ€è¦ä¹Ÿæ›´åŠ è¿«åˆ‡ï¼Œå¦‚å¾®ä¿¡å¼€å‘ã€IOSä¸Androidå¼€å‘ç­‰ã€‚</p><p>è™½ç„¶ç§Ÿç”¨VPSã€ECSç­‰æœåŠ¡å™¨å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜ä½†é«˜æ€§èƒ½çš„å¤–ç½‘æœåŠ¡å™¨ä»·æ ¼éå¸¸è´µè¿˜æœ‰æ•°æ®å®‰å…¨é—®é¢˜ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯å…¬ç½‘æœåŠ¡å™¨ä»…åšä»£ç†ä¸è½»é‡åº”ç”¨ï¼Œå¤æ‚çš„åº”ç”¨éƒ¨ç½²åˆ°å†…ç½‘æœåŠ¡å™¨å†ç©¿é€è®¿é—®ã€‚</p><h1 id="ä¸€ã€å†…ç½‘ç©¿é€æ¦‚è¦"><a href="#ä¸€ã€å†…ç½‘ç©¿é€æ¦‚è¦" class="headerlink" title="ä¸€ã€å†…ç½‘ç©¿é€æ¦‚è¦"></a>ä¸€ã€å†…ç½‘ç©¿é€æ¦‚è¦</h1><p>ä¸ºäº†ç†è§£å†…ç½‘ç©¿é€æˆ‘ä»¬å…ˆæ¥äº†è§£å‡ ä¸ªæ¦‚å¿µï¼š</p><h3 id="1-1ã€IPåœ°å€"><a href="#1-1ã€IPåœ°å€" class="headerlink" title="1.1ã€IPåœ°å€"></a>1.1ã€IPåœ°å€</h3><p><strong>ç½‘ç»œä¸­å”¯ä¸€å®šä½ä¸€å°è®¾å¤‡çš„é€»è¾‘åœ°å€</strong>ï¼Œç±»ä¼¼æˆ‘ä»¬çš„ç”µè¯å·ç </p><p>åœ¨äº’è”ç½‘ä¸­æˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘ç«™æˆ–ä½¿ç”¨ä¸€ä¸ªç½‘ç»œæœåŠ¡æœ€ç»ˆéƒ½éœ€è¦é€šè¿‡IPå®šä½åˆ°æ¯ä¸€å°ä¸»æœºï¼Œå¦‚è®¿é—®baiduç½‘ç«™ï¼š<br><a href="8664A94F41774DC99906C452E415CCB2" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="8664A94F41774DC99906C452E415CCB2" class="lazyload" title="image"></a></p><p>å…¶ä¸­119.75.213.61å°±æ˜¯ä¸€ä¸ªå…¬ç½‘çš„IPåœ°å€ï¼Œä»–æœ€ç»ˆæŒ‡å‘äº†ä¸€å°æœåŠ¡å™¨ã€‚</p><p>IPåœ°å€æ˜¯IPåè®®æä¾›çš„ä¸€ç§ç»Ÿä¸€çš„åœ°å€æ ¼å¼ï¼Œå®ƒä¸ºäº’è”ç½‘ä¸Šçš„æ¯ä¸€ä¸ªç½‘ç»œå’Œæ¯ä¸€å°ä¸»æœºåˆ†é…ä¸€ä¸ªé€»è¾‘åœ°å€ï¼Œä»¥æ­¤æ¥å±è”½ç‰©ç†åœ°å€çš„å·®å¼‚ã€‚</p><p>å†…ç½‘IPå¯ä»¥åŒæ—¶å‡ºç°åœ¨å¤šä¸ªä¸åŒçš„å±€åŸŸç½‘ç»œä¸­ï¼Œå¦‚Aå…¬å¸çš„U1ç”¨æˆ·è·å¾—äº†192.168.0.5ï¼ŒBå…¬å¸çš„U3ç”¨æˆ·ä¹Ÿå¯ä»¥è·å¾—192.168.0.5ï¼›ä½†å…¬ç½‘IPæ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªInternetã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å±€åŸŸç½‘å¯ä½¿ç”¨çš„ç½‘æ®µï¼ˆç§ç½‘åœ°å€æ®µï¼‰æœ‰ä¸‰å¤§æ®µï¼š</span><br><span class="line">10.0.0.0~10.255.255.255ï¼ˆAç±»ï¼‰</span><br><span class="line">172.16.0.0~172.31.255.255ï¼ˆBç±»ï¼‰</span><br><span class="line">192.168.0.0~192.168.255.255ï¼ˆCç±»ï¼‰</span><br></pre></td></tr></tbody></table></figure></div><h3 id="1-2ã€åŸŸå"><a href="#1-2ã€åŸŸå" class="headerlink" title="1.2ã€åŸŸå"></a>1.2ã€åŸŸå</h3><p><strong>åŸŸåæ˜¯IPçš„åˆ«åï¼Œä¾¿äºè®°å¿†ï¼ŒåŸŸåæœ€ç»ˆé€šè¿‡DNSè§£ææˆIPåœ°å€ã€‚</strong><br><a href="3E6ACF5E2C4D41F4940ACED7AFB22B47" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="3E6ACF5E2C4D41F4940ACED7AFB22B47" class="lazyload" title="image"></a></p><p>IP V4æ˜¯ä¸€ä¸ª32ä½çš„æ•°å­—ï¼ŒIP V6æœ‰128ä½ï¼Œè¦è®°ä½ä¸€ä¸²æ¯«æ— æ„ä¹‰çš„æ•°å­—éå¸¸å›°éš¾ï¼ŒåŸŸåè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>å¦‚<a href="http://www.zhangguo.com.cnå°±æ˜¯ä¸€ä¸ªåŸŸåï¼Œcnè¡¨ç¤ºåœ°åŒºï¼Œcomè¡¨ç¤ºå•†ä¸šæœºæ„ï¼Œzhangguoæ˜¯å…¬å¸åç§°ï¼Œwwwæ˜¯ä¸»æœºå" target="_blank" rel="noopener">www.zhangguo.com.cnå°±æ˜¯ä¸€ä¸ªåŸŸåï¼Œcnè¡¨ç¤ºåœ°åŒºï¼Œcomè¡¨ç¤ºå•†ä¸šæœºæ„ï¼Œzhangguoæ˜¯å…¬å¸åç§°ï¼Œwwwæ˜¯ä¸»æœºå</a></p><p><a href="9D1A55DD04844185AC7E5452B5D33E06" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9D1A55DD04844185AC7E5452B5D33E06" class="lazyload" title="image"></a></p><p>DNSæŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼Œæœ€ç»ˆå°†åŸŸåå˜æˆIPåœ°å€</p><p><a href="A6376FD5CBA5458DA96E89B782C3A46B" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A6376FD5CBA5458DA96E89B782C3A46B" class="lazyload" title="image"></a></p><h3 id="1-3ã€NAT"><a href="#1-3ã€NAT" class="headerlink" title="1.3ã€NAT"></a>1.3ã€NAT</h3><p><strong>NATï¼ˆNetwork Address Translationï¼‰å³ç½‘ç»œåœ°å€è½¬æ¢ï¼ŒNATèƒ½å°†å…¶æœ¬åœ°åœ°å€è½¬æ¢æˆå…¨çƒIPåœ°å€ã€‚</strong></p><p>å†…ç½‘çš„ä¸€äº›ä¸»æœºæœ¬æ¥å·²ç»åˆ†é…åˆ°äº†æœ¬åœ°IPåœ°å€ï¼ˆå¦‚å±€åŸŸç½‘DHCPåˆ†é…çš„IPï¼‰ï¼Œä½†ç°åœ¨åˆæƒ³å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡ï¼ˆå¹¶ä¸éœ€è¦åŠ å¯†ï¼‰æ—¶ï¼Œå¯ä½¿ç”¨NATæ–¹æ³•ã€‚</p><p>é€šè¿‡ä½¿ç”¨å°‘é‡çš„å…¬æœ‰IP åœ°å€ä»£è¡¨è¾ƒå¤šçš„ç§æœ‰IP åœ°å€çš„æ–¹å¼ï¼Œå°†æœ‰åŠ©äºå‡ç¼“å¯ç”¨çš„IPåœ°å€ç©ºé—´çš„æ¯ç«­ã€‚</p><p>NATä¸ä»…èƒ½è§£å†³äº†lPåœ°å€ä¸è¶³ä¸å…±äº«ä¸Šç½‘çš„é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…æ¥è‡ªç½‘ç»œå¤–éƒ¨çš„æ”»å‡»ï¼Œéšè—å¹¶ä¿æŠ¤ç½‘ç»œå†…éƒ¨çš„è®¡ç®—æœºã€‚</p><p>å¤šè·¯ç”±å™¨å¯å®ŒæˆNATåŠŸèƒ½ã€‚</p><p>NATçš„å®ç°æ–¹å¼ï¼š</p><p><strong>é™æ€è½¬æ¢</strong>ï¼šæ˜¯æŒ‡å°†å†…éƒ¨ç½‘ç»œçš„ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå…¬æœ‰IPåœ°å€ï¼ŒIPåœ°å€å¯¹æ˜¯ä¸€å¯¹ä¸€ã€‚</p><p><strong>åŠ¨æ€è½¬æ¢</strong>ï¼šæ˜¯æŒ‡å°†å†…éƒ¨ç½‘ç»œçš„ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå…¬ç”¨IPåœ°å€æ—¶ï¼ŒIPåœ°å€æ˜¯ä¸ç¡®å®šçš„ï¼Œæ˜¯éšæœºçš„ã€‚</p><p><strong>ç«¯å£å¤šè·¯å¤ç”¨ï¼ˆPort address Translation,PAT)</strong>ï¼šå†…éƒ¨ç½‘ç»œçš„æ‰€æœ‰ä¸»æœºå‡å¯å…±äº«ä¸€ä¸ªåˆæ³•å¤–éƒ¨IPåœ°å€å®ç°å¯¹Internetçš„è®¿é—®ï¼Œä»è€Œå¯ä»¥æœ€å¤§é™åº¦åœ°èŠ‚çº¦IPåœ°å€èµ„æºã€‚åŒæ—¶åˆå¯éšè—ç½‘ç»œå†…éƒ¨çš„æ‰€æœ‰ä¸»æœºï¼Œæœ‰æ•ˆé¿å…æ¥è‡ªinternetçš„æ”»å‡»ã€‚å› æ­¤ï¼Œç›®å‰ç½‘ç»œä¸­åº”ç”¨æœ€å¤šçš„å°±æ˜¯ç«¯å£å¤šè·¯å¤ç”¨æ–¹å¼ã€‚</p><p><strong>åº”ç”¨ç¨‹åºçº§ç½‘å…³æŠ€æœ¯ï¼ˆApplication Level Gatewayï¼‰ALG</strong>ï¼šä¼ ç»Ÿçš„NATæŠ€æœ¯åªå¯¹IPå±‚å’Œä¼ è¾“å±‚å¤´éƒ¨è¿›è¡Œè½¬æ¢å¤„ç†ï¼ŒALGå®ƒèƒ½å¯¹è¿™äº›åº”ç”¨ç¨‹åºåœ¨é€šä¿¡æ—¶æ‰€åŒ…å«çš„åœ°å€ä¿¡æ¯ä¹Ÿè¿›è¡Œç›¸åº”çš„NATè½¬æ¢ã€‚</p><p><a href="2900DB8519DA4E409ACFE364F0A978FA" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="2900DB8519DA4E409ACFE364F0A978FA" class="lazyload" title="image"></a></p><p><a href="2732EDAFFCA54EEF9BCFC61277E051F5" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="2732EDAFFCA54EEF9BCFC61277E051F5" class="lazyload" title="image"></a></p><h3 id="1-4ã€Proxy"><a href="#1-4ã€Proxy" class="headerlink" title="1.4ã€Proxy"></a>1.4ã€Proxy</h3><p>Proxyå³ä»£ç†ï¼Œè¢«å¹¿æ³›åº”ç”¨äºè®¡ç®—æœºé¢†åŸŸï¼Œä¸»è¦åˆ†ä¸ºæ­£å‘ä»£ç†ä¸åå‘ä»£ç†ï¼š</p><h3 id="1-4-1ã€æ­£å‘ä»£ç†"><a href="#1-4-1ã€æ­£å‘ä»£ç†" class="headerlink" title="1.4.1ã€æ­£å‘ä»£ç†"></a>1.4.1ã€æ­£å‘ä»£ç†</h3><p>æ¯”å¦‚XèŠ±åº—ä»£A,B,C,D,Eäº”ä½ç”·ç”Ÿå‘Candyå¥³ç”Ÿé€åŒ¿åçš„ç”Ÿæ—¥é²œèŠ±ï¼Œè¿™é‡Œçš„XèŠ±åº—å°±æ˜¯5ä½é¡¾å®¢çš„ä»£ç†ï¼ŒèŠ±åº—ä»£ç†çš„æ˜¯å®¢æˆ·ï¼Œéšè—çš„æ˜¯å®¢æˆ·ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä»£ç†ã€‚</p><p><strong>æ­£å‘ä»£ç†éšè—äº†çœŸå®çš„è¯·æ±‚å®¢æˆ·ç«¯</strong>ã€‚æœåŠ¡ç«¯ä¸çŸ¥é“çœŸå®çš„å®¢æˆ·ç«¯æ˜¯è°ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æœåŠ¡éƒ½è¢«ä»£ç†æœåŠ¡å™¨ä»£æ›¿æ¥è¯·æ±‚ï¼ŒæŸäº›ç§‘å­¦ä¸Šç½‘å·¥å…·æ‰®æ¼”çš„å°±æ˜¯å…¸å‹çš„æ­£å‘ä»£ç†è§’è‰²ã€‚ç”¨æµè§ˆå™¨è®¿é—®<a href="http://www.google.comæ—¶è¢«å¢™äº†ï¼Œäºæ˜¯ä½ å¯ä»¥åœ¨å›½å¤–æ­å»ºä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œè®©ä»£ç†å¸®æˆ‘å»è¯·æ±‚google.comï¼Œä»£ç†æŠŠè¯·æ±‚è¿”å›çš„ç›¸åº”ç»“æ„å†è¿”å›ç»™æˆ‘ã€‚" target="_blank" rel="noopener">http://www.google.comæ—¶è¢«å¢™äº†ï¼Œäºæ˜¯ä½ å¯ä»¥åœ¨å›½å¤–æ­å»ºä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œè®©ä»£ç†å¸®æˆ‘å»è¯·æ±‚google.comï¼Œä»£ç†æŠŠè¯·æ±‚è¿”å›çš„ç›¸åº”ç»“æ„å†è¿”å›ç»™æˆ‘ã€‚</a></p><p><a href="68B6D7FE9B274D80921C7818B07A6368" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="68B6D7FE9B274D80921C7818B07A6368" class="lazyload" title="image"></a></p><p>å½“å¤šä¸ªå®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶æœåŠ¡å™¨ä¸çŸ¥é“çœŸæ­£è®¿é—®è‡ªå·±çš„å®¢æˆ·ç«¯æ˜¯é‚£ä¸€å°ã€‚æ­£å‘ä»£ç†ä¸­,proxyå’ŒclientåŒå±ä¸€ä¸ªLAN,å¯¹serveré€æ˜;</p><p><a href="EA650A1BACF649A99ACCE08E979B031C" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="EA650A1BACF649A99ACCE08E979B031C" class="lazyload" title="image"></a></p><h3 id="1-4-2ã€åå‘ä»£ç†"><a href="#1-4-2ã€åå‘ä»£ç†" class="headerlink" title="1.4.2ã€åå‘ä»£ç†"></a>1.4.2ã€åå‘ä»£ç†</h3><p>æ‹¨æ‰“10086å®¢æœç”µè¯ï¼Œæ¥çº¿å‘˜å¯èƒ½æœ‰å¾ˆå¤šä¸ªï¼Œè°ƒåº¦å™¨ä¼šæ™ºèƒ½çš„åˆ†é…ä¸€ä¸ªæ¥çº¿å‘˜ä¸ä½ é€šè¯ã€‚è¿™é‡Œçš„è°ƒåº¦å™¨å°±æ˜¯ä¸€ä¸ªä»£ç†ï¼Œåªä¸è¿‡ä»–ä»£ç†çš„æ˜¯æ¥çº¿å‘˜ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç¡®å®šçœŸæ­£ä¸è‡ªå·±é€šè¯çš„äººï¼Œéšè—ä¸ä¿æŠ¤çš„æ˜¯ç›®æ ‡å¯¹è±¡ã€‚</p><p><strong>åå‘ä»£ç†éšè—äº†çœŸå®çš„æœåŠ¡ç«¯</strong>ï¼Œå½“æˆ‘ä»¬è¯·æ±‚ ww.baidu.com çš„æ—¶å€™ï¼Œå°±åƒæ‹¨æ‰“10086ä¸€æ ·ï¼ŒèƒŒåå¯èƒ½æœ‰æˆåƒä¸Šä¸‡å°æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œä½†å…·ä½“æ˜¯å“ªä¸€å°ï¼Œä½ ä¸çŸ¥é“ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“ï¼Œä½ åªéœ€è¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œww.baidu.com å°±æ˜¯æˆ‘ä»¬çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚è½¬å‘åˆ°çœŸå®çš„æœåŠ¡å™¨é‚£é‡Œå»ã€‚Nginxå°±æ˜¯æ€§èƒ½éå¸¸å¥½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥åšè´Ÿè½½å‡è¡¡ã€‚</p><p><a href="42F044A8FCFF4F958D1360040B858017" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="42F044A8FCFF4F958D1360040B858017" class="lazyload" title="image"></a></p><p>åå‘ä»£ç†ä¸­,proxyå’ŒserveråŒå±ä¸€ä¸ªLAN,å¯¹clienté€æ˜ã€‚</p><p><a href="9EB94628908B4E058157079856FF19D4" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9EB94628908B4E058157079856FF19D4" class="lazyload" title="image"></a></p><p><a href="https://www.zhihu.com/question/24723688" target="_blank" rel="noopener">äº†è§£æ›´å¤šå…³äºä»£ç†å†…å®¹è¯·ç‚¹å‡»è¿™é‡Œã€‚</a></p><h3 id="1-5ã€DDNS"><a href="#1-5ã€DDNS" class="headerlink" title="1.5ã€DDNS"></a>1.5ã€DDNS</h3><p>DDNSå³åŠ¨æ€åŸŸåè§£æï¼Œæ˜¯<strong>å°†ç”¨æˆ·çš„åŠ¨æ€IPåœ°å€æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„åŸŸåè§£ææœåŠ¡ä¸Š</strong>ï¼Œç”¨æˆ·æ¯æ¬¡è¿æ¥ç½‘ç»œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ç¨‹åºå°±ä¼šé€šè¿‡ä¿¡æ¯ä¼ é€’æŠŠè¯¥ä¸»æœºçš„åŠ¨æ€IPåœ°å€ä¼ é€ç»™ä½äºæœåŠ¡å•†ä¸»æœºä¸Šçš„æœåŠ¡å™¨ç¨‹åºï¼ŒæœåŠ¡ç¨‹åºè´Ÿè´£æä¾›DNSæœåŠ¡å¹¶å®ç°åŠ¨æ€åŸŸåè§£æã€‚å°±æ˜¯è¯´DDNSæ•è·ç”¨æˆ·æ¯æ¬¡å˜åŒ–çš„IPåœ°å€ï¼Œç„¶åå°†å…¶ä¸åŸŸåç›¸å¯¹åº”ï¼Œè¿™æ ·åŸŸåå°±å¯ä»¥å§‹ç»ˆè§£æåˆ°éå›ºå®šIPçš„æœåŠ¡å™¨ä¸Šï¼Œäº’è”ç½‘ç”¨æˆ·é€šè¿‡æœ¬åœ°çš„åŸŸåæœåŠ¡å™¨è·å¾—ç½‘ç«™åŸŸåçš„IPåœ°å€ï¼Œä»è€Œå¯ä»¥è®¿é—®ç½‘ç«™çš„æœåŠ¡ã€‚</p><h3 id="1-6ã€ä¸ºä»€ä¹ˆéœ€è¦å†…ç½‘ç©¿é€"><a href="#1-6ã€ä¸ºä»€ä¹ˆéœ€è¦å†…ç½‘ç©¿é€" class="headerlink" title="1.6ã€ä¸ºä»€ä¹ˆéœ€è¦å†…ç½‘ç©¿é€"></a>1.6ã€ä¸ºä»€ä¹ˆéœ€è¦å†…ç½‘ç©¿é€</h3><p><strong>å½“å†…ç½‘ä¸­çš„ä¸»æœºæ²¡æœ‰é™æ€IPåœ°å€è¦è¢«å¤–ç½‘ç¨³å®šè®¿é—®æ—¶å¯ä»¥ä½¿ç”¨å†…ç½‘ç©¿é€</strong></p><p>åœ¨äº’è”ç½‘ä¸­å”¯ä¸€å®šä½ä¸€å°ä¸»æœºçš„æ–¹æ³•æ˜¯é€šè¿‡å…¬ç½‘çš„IPåœ°å€ï¼Œä½†å›ºå®šIPæ˜¯ä¸€ç§éå¸¸ç¨€ç¼ºçš„èµ„æºï¼Œä¸å¯èƒ½ç»™æ¯ä¸ªå…¬å¸éƒ½åˆ†é…ä¸€ä¸ªï¼Œä¸”è®¸å¤šä¸­å°å…¬å¸ä¸æ„¿æ„ä¸ºé«˜æ˜‚çš„è´¹ç”¨ä¹°å•ï¼Œå¤šæ•°å…¬å¸ç›´æ¥æˆ–é—´æ¥çš„æ‹¨å·ä¸Šç½‘ï¼Œç”µä¿¡éƒ¨é—¨ä¼šç»™æ¥å…¥ç½‘ç»œçš„ç”¨æˆ·åˆ†é…IPåœ°å€ï¼Œä»¥å‰ä¸Šç½‘ç”¨æˆ·å°‘çš„æ—¶å€™åŸºæœ¬åˆ†é…çš„éƒ½æ˜¯ä¸´æ—¶çš„é™æ€IPåœ°å€ï¼Œç§Ÿçº¦è¿‡äº†ä¹‹åå¯èƒ½ä¼šæ›´æ¢æˆå¦ä¸€ä¸ªIPåœ°å€ï¼Œè¿™æ ·å¤–ç½‘è®¿é—®å°±ä¸ç¨³å®šï¼Œå› ä¸ºå†…ç½‘çš„é™æ€IPåœ°å€ä¸€ç›´å˜åŒ–ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨åŠ¨æ€åŸŸåè§£æçš„åŠæ³•å˜æ¢åŸŸåæŒ‡å‘çš„é™æ€IPåœ°å€ã€‚ä½†æ˜¯ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ä¸Šç½‘ç”¨æˆ·ä½¿å¾—ä¸´æ—¶åˆ†é…çš„é™æ€IPåœ°å€ä¹Ÿä¸å¤Ÿç”¨äº†ï¼Œç”µä¿¡éƒ¨é—¨å¼€å§‹åˆ†é…ä¸€äº›è™šæ‹Ÿçš„é™æ€IPåœ°å€ï¼Œè¿™äº›IPæ˜¯å…¬ç½‘ä¸èƒ½ç›´æ¥è®¿é—®çš„ï¼Œå¦‚ä»¥125å¼€å¤´çš„ä¸€äº›IPåœ°å€ï¼Œä»¥å‰å•çº¯çš„åŠ¨æ€åŸŸåè§£æå°±ä¸å¥½ç”¨äº†ã€‚</p><h3 id="1-7ã€å†…ç½‘ç©¿é€çš„å®šä¹‰ä¸éšœç¢"><a href="#1-7ã€å†…ç½‘ç©¿é€çš„å®šä¹‰ä¸éšœç¢" class="headerlink" title="1.7ã€å†…ç½‘ç©¿é€çš„å®šä¹‰ä¸éšœç¢"></a>1.7ã€å†…ç½‘ç©¿é€çš„å®šä¹‰ä¸éšœç¢</h3><p><strong>ç®€å•æ¥è¯´å®ç°ä¸åŒå±€åŸŸç½‘å†…çš„ä¸»æœºä¹‹é—´é€šè¿‡äº’è”ç½‘è¿›è¡Œé€šä¿¡çš„æŠ€æœ¯å«å†…ç½‘ç©¿é€ã€‚</strong></p><p><strong>éšœç¢ä¸€</strong>ï¼šä½äºå±€åŸŸç½‘å†…çš„ä¸»æœºæœ‰ä¸¤å¥— IP åœ°å€ï¼Œä¸€å¥—æ˜¯å±€åŸŸç½‘å†…çš„ IP åœ°å€ï¼Œé€šå¸¸æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œä»…ä¾›å±€åŸŸç½‘å†…çš„ä¸»æœºé—´é€šä¿¡ä½¿ç”¨ï¼›ä¸€å¥—æ˜¯ç»è¿‡ç½‘å…³è½¬æ¢åçš„å¤–ç½‘ IP åœ°å€ï¼Œç”¨äºä¸å¤–ç½‘ç¨‹åºè¿›è¡Œé€šä¿¡ã€‚</p><p><a href="69A07B79D4664CD6855F990F0C909E06" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="69A07B79D4664CD6855F990F0C909E06" class="lazyload" title="image"></a></p><p><strong>éšœç¢äºŒ</strong>ï¼šä½äºä¸åŒå±€åŸŸç½‘å†…çš„ä¸¤å°ä¸»æœºï¼Œå³ä½¿æ˜¯çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€å’Œç«¯å£å·ï¼Œâ€œä¸€å¢æƒ…æ„¿â€åœ°å°†æ•°æ®åŒ…å‘é€è¿‡å»ï¼Œå¯¹æ–¹ä¹Ÿæ˜¯æ¥æ”¶ä¸åˆ°çš„ã€‚</p><p>å› ä¸ºå‡ºäºå®‰å…¨èµ·è§ï¼Œé™¤éæ˜¯ä¸»æœºä¸»åŠ¨å‘å¯¹æ–¹å‘å‡ºäº†è¿æ¥è¯·æ±‚ï¼ˆè¿™æ—¶ä¼šåœ¨è¯¥ä¸»æœºçš„æ•°æ®ç»“æ„ä¸­ç•™ä¸‹ä¸€æ¡è®°å½•ï¼‰ï¼Œå¦åˆ™ï¼Œå½“ä¸»æœºæ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå¦‚æœåœ¨å…¶æ•°æ®ç»“æ„ä¸­æŸ¥è¯¢ä¸åˆ°å¯¹åº”çš„è®°å½•ï¼Œé‚£äº›ä¸è¯·è‡ªæ¥çš„æ•°æ®åŒ…å°†ä¼šè¢«ä¸¢å¼ƒã€‚</p><p><a href="827A49D0A8554955AD7545F87F9C00C5" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="827A49D0A8554955AD7545F87F9C00C5" class="lazyload" title="image"></a></p><p><strong>è§£å†³åŠæ³•ï¼šè¦æƒ³è§£å†³ä»¥ä¸Šä¸¤å¤§éšœç¢ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€å°å…·æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨è¿›è¡Œæ¡¥æ¥ã€‚</strong></p><h1 id="äºŒã€å¸¸è§çš„å†…ç½‘ç©¿é€äº§å“"><a href="#äºŒã€å¸¸è§çš„å†…ç½‘ç©¿é€äº§å“" class="headerlink" title="äºŒã€å¸¸è§çš„å†…ç½‘ç©¿é€äº§å“"></a>äºŒã€å¸¸è§çš„å†…ç½‘ç©¿é€äº§å“</h1><h3 id="2-1ã€èŠ±ç”Ÿå£³"><a href="#2-1ã€èŠ±ç”Ÿå£³" class="headerlink" title="2.1ã€èŠ±ç”Ÿå£³"></a>2.1ã€èŠ±ç”Ÿå£³</h3><p>èŠ±ç”Ÿå£³æ—¢æ˜¯å†…ç½‘ç©¿é€è½¯ä»¶ã€å†…ç½‘æ˜ å°„è½¯ä»¶,ä¹Ÿæ˜¯ç«¯å£æ˜ å°„è½¯ä»¶ã€‚è§„æ¨¡æœ€å¤§ï¼Œè¾ƒæ­£è§„ï¼Œå®Œå–„ã€‚</p><p>æ”¶è´¹é«˜ï¼Œä½¿ç”¨ç®€å•</p><p>å®˜ç½‘ï¼š<a href="http://www.oray.com/" target="_blank" rel="noopener">http://www.oray.com/</a></p><p><a href="5B96B046290A43D8863388092F3372FF" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="5B96B046290A43D8863388092F3372FF" class="lazyload" title="image"></a></p><h3 id="2-2ã€Nat123"><a href="#2-2ã€Nat123" class="headerlink" title="2.2ã€Nat123"></a>2.2ã€Nat123</h3><p>nat123æ˜¯å†…ç½‘ç«¯å£æ˜ å°„ä¸åŠ¨æ€åŸŸåè§£æè½¯ä»¶ï¼Œåœ¨å†…ç½‘å¯åŠ¨æ˜ å°„åï¼Œå¯åœ¨å¤–ç½‘è®¿é—®è¿æ¥å†…ç½‘ç½‘ç«™ç­‰åº”ç”¨ã€‚æ•´ä¸ªç½‘ç«™æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°å®¢æœç”µè¯ï¼Œç½‘å‹å‘äº†ä¸€äº›åé¢çš„è¯„ä»·</p><p>æ”¶è´¹ï¼Œä½¿ç”¨ç®€å•</p><p>å®˜ç½‘ï¼š<a href="http://www.nat123.com" target="_blank" rel="noopener">http://www.nat123.com</a></p><p><a href="4B0F818B2E3F4E62972B350D4314602F" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="4B0F818B2E3F4E62972B350D4314602F" class="lazyload" title="image"></a></p><p>###2.3ã€NATAPP<br>NATAPPåŸºäºngrokçš„å›½å†…å†…ç½‘ç©¿é€æœåŠ¡ï¼Œå…è´¹ç‰ˆä¼šå¼ºåˆ¶æ›´æ¢åŸŸåï¼Œä¸´æ—¶ç”¨ä¸€ä¸‹å¯ä»¥</p><p>æ”¶è´¹ï¼Œä½¿ç”¨ç®€å•</p><p>å®˜ç½‘ï¼š<a href="https://natapp.cn/" target="_blank" rel="noopener">https://natapp.cn/</a></p><p><a href="44E177A4213040C694C0D0A1B2BC8457" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="44E177A4213040C694C0D0A1B2BC8457" class="lazyload" title="image"></a></p><h3 id="2-4ã€frpä¸å…¶å®ƒ"><a href="#2-4ã€frpä¸å…¶å®ƒ" class="headerlink" title="2.4ã€frpä¸å…¶å®ƒ"></a>2.4ã€frpä¸å…¶å®ƒ</h3><p>frp æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è½»æ¾åœ°è¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå¯¹å¤–ç½‘æä¾›æœåŠ¡ï¼Œæ”¯æŒ tcp, http, https ç­‰åè®®ç±»å‹ï¼Œå¹¶ä¸” web æœåŠ¡æ”¯æŒæ ¹æ®åŸŸåè¿›è¡Œè·¯ç”±è½¬å‘ã€‚</p><p>å¼€æºå…è´¹</p><p>ä½¿ç”¨ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ä»£ç†æœåŠ¡å™¨æ”¯æŒ</p><p>å®˜ç½‘ï¼š<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">https://github.com/fatedier/frp</a></p><p>æ–‡æ¡£ï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼Œç®€ä¹¦ç¤ºä¾‹</p><p>åˆ©ç”¨å¤„äºå†…ç½‘æˆ–é˜²ç«å¢™åçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘ç¯å¢ƒæä¾› http æˆ– https æœåŠ¡ã€‚</p><p>å¯¹äº http, https æœåŠ¡æ”¯æŒåŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœºï¼Œæ”¯æŒè‡ªå®šä¹‰åŸŸåç»‘å®šï¼Œä½¿å¤šä¸ªåŸŸåå¯ä»¥å…±ç”¨ä¸€ä¸ª80ç«¯å£ã€‚</p><p>åˆ©ç”¨å¤„äºå†…ç½‘æˆ–é˜²ç«å¢™åçš„æœºå™¨ï¼Œå¯¹å¤–ç½‘ç¯å¢ƒæä¾› tcp å’Œ udp æœåŠ¡ï¼Œä¾‹å¦‚åœ¨å®¶é‡Œé€šè¿‡ ssh è®¿é—®å¤„äºå…¬å¸å†…ç½‘ç¯å¢ƒå†…çš„ä¸»æœºã€‚</p><p><a href="0B56DA9B6F234F9994895B56DCA3731B" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0B56DA9B6F234F9994895B56DCA3731B" class="lazyload" title="image"></a></p><p>å› ä¸ºfrp ä»ç„¶å¤„äºå‰æœŸå¼€å‘é˜¶æ®µï¼Œæœªç»å……åˆ†æµ‹è¯•ä¸éªŒè¯ï¼Œä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ‰€æœ‰æˆ‘é€‰æ‹©äº†ngrokï¼Œèµ„æ–™æ¯”è¾ƒå¤šã€‚</p><p>è¿˜æœ‰å¦‚åœ£å‰‘å†…ç½‘é€šã€ngrokï¼ˆå¼€æºå…è´¹ï¼‰ã€<a href="https://post.smzdm.com/p/564494/" target="_blank" rel="noopener">æ›´å¤šåŠæ³•</a></p><h1 id="ä¸‰ã€ngrok"><a href="#ä¸‰ã€ngrok" class="headerlink" title="ä¸‰ã€ngrok"></a>ä¸‰ã€ngrok</h1><p>ngrokæ˜¯ä¸€ä¸ªåå‘ä»£ç†ï¼Œé€šè¿‡åœ¨å…¬å…±çš„ç«¯ç‚¹å’Œæœ¬åœ°è¿è¡Œçš„WebæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ã€‚ngrokå¯æ•è·å’Œåˆ†ææ‰€æœ‰é€šé“ä¸Šçš„æµé‡ï¼Œä¾¿äºåæœŸåˆ†æä¸å“åº”ã€‚</p><p>å¼€æºå…è´¹</p><p>å®˜ç½‘ï¼š<a href="https://ngrok.com/" target="_blank" rel="noopener">https://ngrok.com/</a></p><p>æºç ï¼š<a href="https://github.com/inconshreveable/ngrok" target="_blank" rel="noopener">https://github.com/inconshreveable/ngrok</a></p><p><a href="E968976674174F4FA0CFB4B00BFDF2C3" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="E968976674174F4FA0CFB4B00BFDF2C3" class="lazyload" title="image"></a></p><p>ngrok1.xå¼€æºï¼Œngrok2.xä¸å¼€æº</p><p>ngrokä½¿ç”¨goè¯­è¨€å¼€å‘ï¼Œæºä»£ç åˆ†ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ã€‚</p><p>å›½å†…å…è´¹æœåŠ¡å™¨ï¼š<a href="http://ngrok.ciqiuwl.cn/ï¼Œæ›´å¤šå…è´¹æœåŠ¡å™¨è¯·å¤§å®¶æŒ–æ˜ï¼Œèµ„æºå…±äº«ï¼Œæˆ‘éšæ—¶æ›´æ–°ï¼šï¼‰" target="_blank" rel="noopener">http://ngrok.ciqiuwl.cn/ï¼Œæ›´å¤šå…è´¹æœåŠ¡å™¨è¯·å¤§å®¶æŒ–æ˜ï¼Œèµ„æºå…±äº«ï¼Œæˆ‘éšæ—¶æ›´æ–°ï¼šï¼‰</a></p><p>å¦‚æœæœ‰æœåŠ¡å™¨ï¼Œä»…å®¢æˆ·ç«¯çš„ä½¿ç”¨æ˜¯ä¸å¤æ‚çš„ï¼Œä»¥ä¸Šé¢çš„å…è´¹æœåŠ¡å™¨ä¸ºç¤ºä¾‹å®Œæˆå†…ç½‘ç©¿é€</p><p>ç°åœ¨å‡å®šæˆ‘çš„æœ¬åœ°å·²æˆåŠŸéƒ¨ç½²äº†ä¸€ä¸ªç½‘ç«™ï¼Œè®¿é—®åœ°å€ä¸º127.0.0.1ï¼Œæƒ³å†…ç½‘ç©¿é€åè¢«å…¬ç½‘ä¸Šçš„ç”¨æˆ·è®¿é—®ï¼Œä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>æ­¥éª¤1ã€ä¸‹è½½windowsç‰ˆæœ¬çš„å®¢æˆ·ç«¯ï¼Œè§£å‹ã€‚ä¸€èˆ¬åœ¨ä¸ºä½ æä¾›ä»£ç†æœåŠ¡å™¨çš„ç½‘ç«™ä¸Šæ‰¾ä½ è¦ä¸‹è½½çš„å®¢æˆ·ç«¯</strong>ï¼š</p><p><a href="3A2C462626574DBAB583D9E268EB75B7" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="3A2C462626574DBAB583D9E268EB75B7" class="lazyload" title="image"></a></p><p><strong>æ­¥éª¤2ã€åœ¨å‘½ä»¤ï¼ˆcmdï¼‰è¡Œä¸‹è¿›å…¥åˆ°ngrokå®¢æˆ·ç«¯ç›®å½•ä¸‹</strong></p><p><a href="7E69F7DFF2D24E01B550D4DD87E4CEDA" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="7E69F7DFF2D24E01B550D4DD87E4CEDA" class="lazyload" title="image"></a></p><p><strong>æ­¥éª¤3ã€æ‰§è¡Œ ngrok -config=ngrok.cfg -subdomain xxx 80 //(xxx æ˜¯ä½ è‡ªå®šä¹‰çš„åŸŸåå‰ç¼€)ï¼Œå»ºè®®æ‰¹å¤„ç†</strong></p><p><a href="9685F6FB19094A9BA68AEC600E271C6F" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9685F6FB19094A9BA68AEC600E271C6F" class="lazyload" title="image"></a></p><p>å¦‚æœè¿æ¥æˆåŠŸï¼Œä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p><p><a href="07351B0A640041CA91D262D0753AF557" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="07351B0A640041CA91D262D0753AF557" class="lazyload" title="image"></a></p><p><strong>è¿™ä¸€æ­¥å¦‚æœä½ è®¤ä¸ºå¤ªéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œç›®å½•ä¸‹çš„start.batæ‰¹å¤„ç†æ–‡ä»¶å°±ä¸ç”¨è¿›DOSç¯å¢ƒäº†ã€‚è¿è¡Œstart.batç›´æ¥è·³è¿‡2ï¼Œ3æ­¥</strong></p><p><strong>æ­¥éª¤4ã€å¦‚æœå¼€å¯æˆåŠŸ ä½ å°±å¯ä»¥ä½¿ç”¨ xxx.ngrok.xiaomiqiu.cn æ¥è®¿é—®ä½ æœ¬æœºçš„ 127.0.0.1:80 çš„æœåŠ¡äº†ï¼Œå½“ç„¶ä½ å¿…é¡»ç¡®å®šçš„æ˜¯ä½ æœ¬æœºçš„Webæ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ã€‚</strong></p><p><a href="655B1027C1C64EA69D7084952CB263A0" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="655B1027C1C64EA69D7084952CB263A0" class="lazyload" title="image"></a></p><p>æ³¨æ„ï¼š</p><p>å¦‚æœä½ è‡ªå·±æœ‰é¡¶çº§åŸŸåï¼Œæƒ³é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®æœ¬æœºçš„é¡¹ç›®ï¼Œé‚£ä¹ˆå…ˆå°†è‡ªå·±çš„é¡¶çº§åŸŸåè§£æåˆ°120.25.161.137(åŸŸåéœ€è¦å·²å¤‡æ¡ˆå“¦ï¼Œ80ç«¯å£å¿…é¡»å¤‡æ¡ˆ)ï¼Œç„¶åæ‰§è¡Œ ngrok -config=ngrok.cfg -hostname xxx.xxx.xxx 80 //(xxx.xxx.xxxæ˜¯ä½ è‡ªå®šä¹‰çš„é¡¶çº§åŸŸå)</p><h1 id="å››ã€ubuntuä¸‹ç”ŸæˆngrokæœåŠ¡å™¨ä¸»ç¨‹åº"><a href="#å››ã€ubuntuä¸‹ç”ŸæˆngrokæœåŠ¡å™¨ä¸»ç¨‹åº" class="headerlink" title="å››ã€ubuntuä¸‹ç”ŸæˆngrokæœåŠ¡å™¨ä¸»ç¨‹åº"></a>å››ã€ubuntuä¸‹ç”ŸæˆngrokæœåŠ¡å™¨ä¸»ç¨‹åº</h1><h3 id="4-1ã€æ­¥éª¤ä¸å…ˆå†³æ¡ä»¶"><a href="#4-1ã€æ­¥éª¤ä¸å…ˆå†³æ¡ä»¶" class="headerlink" title="4.1ã€æ­¥éª¤ä¸å…ˆå†³æ¡ä»¶"></a>4.1ã€æ­¥éª¤ä¸å…ˆå†³æ¡ä»¶</h3><p>å¦‚æœä½ åªæ˜¯ä¸´æ—¶ç©¿é€æˆ–è°ƒè¯•ç”¨ï¼Œåˆ°ç¬¬ä¸‰æ­¥åŸºæœ¬å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœæƒ³ä½œä¸ºç¨³å®šçš„å•†ä¸šæœåŠ¡ï¼Œç”¨åˆ«äººçš„æœåŠ¡å™¨è¿˜æ˜¯å—åˆ¶äºäººï¼Œè¿™é‡Œæˆ‘ä»¬å‡†å¤‡æ­å»ºè‡ªå·±çš„ngrokæœåŠ¡å™¨ã€‚å¤§è‡´çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><a href="962FF6F12F72406884DD234CB2A7BC46" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="962FF6F12F72406884DD234CB2A7BC46" class="lazyload" title="image"></a></p><p>ngrokæœåŠ¡å™¨å¯ä»¥æ˜¯å¤šç§å¹³å°ï¼Œå¦‚windowsã€Linuxï¼ˆCentOSã€Debianã€Ubuntuç­‰ï¼‰ã€Mac OSç­‰ã€‚</p><p><strong>ç¼–è¯‘æºä»£ç ç”Ÿæˆåº”ç”¨å¼ºçƒˆå»ºè®®å¤§å®¶ä½¿ç”¨linuxç¯å¢ƒï¼Œwindowsè‚¯å®šå¯ä»¥æˆåŠŸï¼Œä½†éå¸¸éº»çƒ¦ï¼Œæˆ‘åœ¨windowsæ“ä½œç³»ç»Ÿä¸Šå…œäº†ä¸€ä¸ªå¤§åœˆåœˆã€‚</strong></p><p><strong>å…ˆå†³æ¡ä»¶</strong>ï¼š</p><p>a)ã€æ‚¨æœ‰ä¸€å°å…¬ç½‘ä¸Šçš„æœåŠ¡å™¨ï¼Œå¦‚é˜¿é‡Œäº‘çš„ECS</p><p>b)ã€æ‚¨æœ‰ä¸€ä¸ªåŸŸåï¼Œæœ€å¥½ICPå¤‡æ¡ˆæˆåŠŸï¼Œä¸ç„¶80ç«¯å£æ²¡æœ‰åŠæ³•ä½¿ç”¨ï¼Œä¸è¿‡åƒå¾®ä¿¡å¼€å‘æ˜¯ä¸ä½¿ç”¨80ç«¯å£çš„ï¼Œå¯ä»¥ç”¨nginxä»£ç†è½¬æ¢ã€‚</p><h3 id="4-2ã€å®‰è£…ubuntuæ“ä½œç³»ç»Ÿ"><a href="#4-2ã€å®‰è£…ubuntuæ“ä½œç³»ç»Ÿ" class="headerlink" title="4.2ã€å®‰è£…ubuntuæ“ä½œç³»ç»Ÿ"></a>4.2ã€å®‰è£…ubuntuæ“ä½œç³»ç»Ÿ</h3><p>åœ¨linuxç¯å¢ƒä¸‹ç¼–è¯‘ngrokçš„æºä»£ç æ¯”windowsä¸‹ æ–¹ä¾¿å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ubuntuï¼Œè·å¾—ubuntuçš„æ–¹æ³•æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><p>1ï¼‰ã€å…¨æ–°å®‰è£…ubuntuç³»ç»Ÿ</p><p>2ï¼‰ã€ç”³è¯·VPSæœåŠ¡å™¨ï¼Œ é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ã€ç™¾åº¦äº‘ã€æ–°æµªäº‘ç­‰ï¼Œä»…ç¼–è¯‘ä¸€ä¸‹è¿™ç§æ–¹æ³•ä¸é”™</p><p>3ï¼‰ã€åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ubuntuç³»ç»Ÿ</p><p>ç»¼åˆè€ƒè™‘æˆ‘é€‰æ‹©äº†åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ubuntuæ“ä½œç³»ç»Ÿ</p><p><a href="E2AB70E76091449BAE331FE9C37392CF" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="E2AB70E76091449BAE331FE9C37392CF" class="lazyload" title="image"></a></p><h3 id="4-2-1ã€å®‰è£…VMwareè™šæ‹Ÿæœº"><a href="#4-2-1ã€å®‰è£…VMwareè™šæ‹Ÿæœº" class="headerlink" title="4.2.1ã€å®‰è£…VMwareè™šæ‹Ÿæœº"></a>4.2.1ã€å®‰è£…VMwareè™šæ‹Ÿæœº</h3><p>VMware Workstationæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è™šæ‹Ÿæœºè½¯ä»¶ï¼Œåœ¨ä¸å½±å“æœ¬æœºæ“ä½œç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥åœ¨è™šæ‹Ÿæœºä¸­åŒæ—¶è¿è¡Œä¸åŒç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿï¼Œç”¨äºå¼€å‘ã€æµ‹è¯•ä»¥åŠéƒ¨ç½²å·¥ä½œã€‚</p><p>VMware Workstation 12 proä¸‹è½½ï¼šVMware-workstation-full-12.1.0-3272444.exe</p><p>åºåˆ—å·ï¼š5A02H-AU243-TZJ49-GTC7K-3C61Nï¼ˆå•†ä¸šåº”ç”¨è¯·è´­ä¹°æ­£å¼ç‰ˆæƒï¼Œè¿™é‡Œä»…ä¸ºå­¦ä¹ ä½¿ç”¨ï¼‰</p><p>1ï¼‰ã€åŒå‡»VMware Workstation 12å®‰è£…æ–‡ä»¶ï¼Œæˆ–è€…å³é”®ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ï¼Œæç¤ºæ˜¯å¦å…è®¸æ›´æ”¹ï¼Œç‚¹å‡»æ˜¯ï¼›</p><p>2ï¼‰ã€æ‰“å¼€VMwareå®‰è£…å‘å¯¼ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼›</p><p><a href="5D1DDC4380914E949ED507F3F975746E" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="5D1DDC4380914E949ED507F3F975746E" class="lazyload" title="image"></a></p><p>3ï¼‰ã€VMware Workstation 12æ¿€æ´»æ­¥éª¤ï¼š</p><ul><li>ã€€ã€€æ–¹æ³•ä¸€ã€é¦–æ¬¡å¼€å¯ç›´æ¥è¾“å…¥ä¸Šæ–‡å¯†é’¥ï¼Œå³å¯æ¿€æ´»ï¼›</li><li>ã€€ã€€æ–¹æ³•äºŒã€é¦–æ¬¡å¼€å¯é€‰æ‹©è¯•ç”¨ï¼Œè¿›å…¥è¯•ç”¨åæŒ‰ä¸€ä¸‹æ­¥éª¤æ¿€æ´»ï¼š</li></ul><p>ã€€ã€€aã€æ‰“å¼€è™šæ‹Ÿæœºä¸»ç•Œé¢ï¼Œç‚¹å‡»â€œå¸®åŠ©â€â€”â€œè¾“å…¥è®¸å¯è¯å¯†é’¥â€ï¼›<br>ã€€ã€€<br><a href="0DBAE0E80B3A44B3BEA056A3E912E893" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0DBAE0E80B3A44B3BEA056A3E912E893" class="lazyload" title="image"></a></p><p>bã€åœ¨å¯†é’¥è¾“å…¥æ¡†è¾“å…¥æ°¸ä¹…è®¸å¯è¯å¯†é’¥5A02H-AU243-TZJ49-GTC7K-3C61Nï¼Œç¡®å®šï¼›<a href="http://www.mamicode.com/info-detail-1509515.html" target="_blank" rel="noopener">æ›´å¤š</a></p><h3 id="4-2-2ã€å®‰è£…ubuntuåˆ°è™šæ‹Ÿæœº"><a href="#4-2-2ã€å®‰è£…ubuntuåˆ°è™šæ‹Ÿæœº" class="headerlink" title="4.2.2ã€å®‰è£…ubuntuåˆ°è™šæ‹Ÿæœº"></a>4.2.2ã€å®‰è£…ubuntuåˆ°è™šæ‹Ÿæœº</h3><p>1)ã€ä¸‹è½½ubuntuæ“ä½œç³»ç»Ÿé•œåƒ</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.ubuntu.com/download/desktop" target="_blank" rel="noopener">https://www.ubuntu.com/download/desktop</a></p><p>è¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯ubuntu-16.04.3-desktop-amd64.iso</p><p><a href="752C59929F2F4478A49D794CDDD0F85F" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="752C59929F2F4478A49D794CDDD0F85F" class="lazyload" title="image"></a></p><p>2)ã€åœ¨VMwareä¸­å®‰è£…ubuntu</p><p>æ‰“å¼€VMwareç‚¹å‡»â€œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºâ€</p><p><a href="4EEFA54B30624B5A8A0E7DA78615CC33" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="4EEFA54B30624B5A8A0E7DA78615CC33" class="lazyload" title="image"></a></p><p>å‘å¯¼é€‰æ‹©è‡ªå®šä¹‰</p><p><a href="D6A423A2F49A48EC800E5208F289171B" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="D6A423A2F49A48EC800E5208F289171B" class="lazyload" title="image"></a></p><p>ç„¶åä¸‹ä¸€æ­¥å†ä¸‹ä¸€æ­¥ï¼Œç›´åˆ°è¿™é‡Œï¼Œç¨åå†å®‰è£…ç³»ç»Ÿ</p><p><a href="B18AED600BC74E7EA71A0FFEDD7A7C2C" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="B18AED600BC74E7EA71A0FFEDD7A7C2C" class="lazyload" title="image"></a></p><p>åé¢è®¾ç½®å¤„ç†å™¨å’Œå†…å­˜çš„ï¼Œç”µè„‘é…ç½®å¥½çš„å¯ä»¥è¯•è¯•ï¼Œå¦åˆ™é‡‡ç”¨é»˜è®¤çš„ï¼Œåšä¸»è¿™é‡Œæ˜¯é‡‡ç”¨é»˜è®¤çš„ï¼Œç„¶åä¸‹ä¸€ï¼Œç›´åˆ°è¿™é‡Œï¼Œé€‰æ‹©å°†è™šæ‹Ÿæœºå­˜å‚¨ä¸ºå•ä¸ªç£ç›˜ï¼š</p><p><a href="5C6A9F1634C74BFBA75C5505D8606B22" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="5C6A9F1634C74BFBA75C5505D8606B22" class="lazyload" title="image"></a></p><p>ä¸ªäººå»ºè®®è‡³å°‘20Gç¡¬ç›˜ç©ºé—´ï¼Œå†…å­˜å»ºè®®ç»™1.5Gï¼Œå½“ç„¶ä¹Ÿè¦çœ‹ç”µè„‘æœ¬èº«çš„é…ç½®ï¼Œ1Gçš„å†…å­˜è·‘èµ·æ¥æ¯”è¾ƒå¡ã€‚</p><p>å…¶å®ƒçš„æ­¥éª¤æ¯”è¾ƒç®€å•ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒè¿™é‡Œï¼Œã€Š<a href="http://blog.csdn.net/u013142781/article/details/50529030" target="_blank" rel="noopener">VMware Ubuntuå®‰è£…è¯¦ç»†è¿‡ç¨‹</a>ã€‹ã€‚</p><h3 id="4-2-3ã€é…ç½®ubuntuç³»ç»Ÿ"><a href="#4-2-3ã€é…ç½®ubuntuç³»ç»Ÿ" class="headerlink" title="4.2.3ã€é…ç½®ubuntuç³»ç»Ÿ"></a>4.2.3ã€é…ç½®ubuntuç³»ç»Ÿ</h3><p>å½“ubuntuç³»ç»Ÿå®‰è£…æˆåŠŸåï¼Œåœ¨è™šæ‹Ÿæœºä¸­å¯ä»¥å¯åŠ¨ubuntuç³»ç»Ÿï¼Œå¯åŠ¨åçš„ç³»ç»Ÿå¦‚ä¸‹ï¼š</p><p><a href="5255A726ABB64A549CFAB8762302F3A8" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="5255A726ABB64A549CFAB8762302F3A8" class="lazyload" title="image"></a></p><p>ubuntuç³»ç»Ÿçš„ä½¿ç”¨è¿˜æ˜¯æœ‰è®¸å¤šå†…å®¹çš„ï¼Œè¿™é‡Œéœ€è¦è®¾ç½®çš„å†…å®¹å¦‚ä¸‹ï¼š</p><p>a)ã€è®¾ç½®ä¸Šç½‘</p><p>å°±æ˜¯åœ¨ubuntuä¸­å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§å½¢å¼</p><p><a href="DBA023A822174FB0A6FA077452F7A904" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="DBA023A822174FB0A6FA077452F7A904" class="lazyload" title="image"></a></p><p>b)ã€è®¾ç½®è¯­è¨€</p><p>å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸­æ–‡ç‰ˆçš„ubuntuè¯­è¨€ç¯å¢ƒ</p><p><a href="B45A03098DF24217AEF6F47D535AC43A" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="B45A03098DF24217AEF6F47D535AC43A" class="lazyload" title="image"></a></p><p>c)ã€è®¾ç½®å±å¹•åˆ†è¾¨ç‡</p><p>å¦‚æœä¸è®¾ç½®é»˜è®¤çš„å±å¹•æ¯”è¾ƒå°</p><p><a href="9316E79558094B0DBCCC7AF5C7AFD4C6" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9316E79558094B0DBCCC7AF5C7AFD4C6" class="lazyload" title="image"></a></p><p>d)ã€è®¾ç½®ä»¥rootè¶…çº§ç®¡ç†å‘˜çš„èº«ä»½ç™»å½•</p><p>è®¸å¤šæ“ä½œè¦æ±‚ç®¡ç†èº«ä»½</p><p><a href="1F474D045AD5422C89E31D64FBB04ECE" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="1F474D045AD5422C89E31D64FBB04ECE" class="lazyload" title="image"></a></p><p>e)ã€å®‰è£…VMware Toolså·¥å…·</p><p>åªæœ‰åœ¨VMwareè™šæ‹Ÿæœºä¸­å®‰è£…å¥½äº†VMware Toolsï¼Œæ‰èƒ½å®ç°ä¸»æœºä¸è™šæ‹Ÿæœºä¹‹é—´çš„æ–‡ä»¶å…±äº«ï¼ŒåŒæ—¶å¯æ”¯æŒè‡ªç”±æ‹–æ‹½çš„åŠŸèƒ½ï¼Œé¼ æ ‡ä¹Ÿå¯åœ¨è™šæ‹Ÿæœºä¸ä¸»æœºä¹‹é—´è‡ªç”±ç§»åŠ¨ï¼ˆä¸ç”¨å†æŒ‰ctrl+altï¼‰ï¼Œä¸”è™šæ‹Ÿæœºå±å¹•ä¹Ÿå¯å®ç°å…¨å±åŒ–ã€‚<br>VMware Toolsæ˜¯VMwareè™šæ‹Ÿæœºä¸­è‡ªå¸¦çš„ä¸€ç§å¢å¼ºå·¥å…·ï¼Œç›¸å½“äºVirtualBoxä¸­çš„å¢å¼ºåŠŸèƒ½ï¼ˆSun VirtualBox Guest Additionsï¼‰ï¼Œæ˜¯VMwareæä¾›çš„å¢å¼ºè™šæ‹Ÿæ˜¾å¡å’Œç¡¬ç›˜æ€§èƒ½ã€ä»¥åŠåŒæ­¥è™šæ‹Ÿæœºä¸ä¸»æœºæ—¶é’Ÿçš„é©±åŠ¨ç¨‹åºã€‚</p><p><a href="A9292B0AAFC545A8BF228E7D427D925A" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A9292B0AAFC545A8BF228E7D427D925A" class="lazyload" title="image"></a></p><p>æ³¨æ„å¦‚æœè¿™é‡Œæ˜¯ç°è‰²çš„éœ€è¦æ‚¨å°†linux.isoé•œåƒåŠ è½½åˆ°è™šæ‹Ÿå…‰é©±ä¸­ï¼Œä¸€èˆ¬åœ¨VMçš„å®‰è£…ç›®å½•ä¸‹æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ‚¨éœ€è¦è‡ªè¡Œä¸‹è½½ã€‚</p><p>è¯´æ˜ï¼šubuntuçš„ä½¿ç”¨ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œç›¸å…³æ“ä½œè¯·å¤§å®¶è‡ªè¡ŒæŸ¥æ‰¾ã€‚</p><h3 id="4-3ã€ç”ŸæˆngrokæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº"><a href="#4-3ã€ç”ŸæˆngrokæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº" class="headerlink" title="4.3ã€ç”ŸæˆngrokæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº"></a>4.3ã€ç”ŸæˆngrokæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº</h3><p><strong>4.3.1. å¯¼å‡ºæºä»£ç </strong><br>ngrokçš„æºä»£ç æ‰˜ç®¡åœ¨githubä¸Šï¼Œå¯ä»¥å…ˆåœ¨ubuntuä¸‹å®‰è£…gitå†å°†ngrokçš„æºä»£ç å…‹éš†åˆ°æœ¬åœ°ã€‚</p><p><a href="F46F4B31CEDC4F9E856A0E3001EF335C" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="F46F4B31CEDC4F9E856A0E3001EF335C" class="lazyload" title="image"></a></p><p>å…¶å®ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°åè§£å‹ï¼Œè¿™é‡Œä½¿ç”¨å‘½ä»¤è¡Œå®Œæˆã€‚</p><p>å¯åŠ¨ubuntuï¼Œå¼€æ‰“å‘½ä»¤è¡Œï¼ˆç»ˆç«¯ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><a href="043040F649504CD3833B7C37E6B28A15" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="043040F649504CD3833B7C37E6B28A15" class="lazyload" title="image"></a></p><p>ä»¥rootèº«ä»½æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir ngrok #åˆ›å»ºåç§°ä¸ºngrokçš„ç›®å½•</span><br><span class="line"></span><br><span class="line">apt-get update #æ›´æ–°åŒ…ç®¡ç†å™¨</span><br><span class="line"></span><br><span class="line">apt-get install git  #å®‰è£…git</span><br><span class="line"></span><br><span class="line">git clone https://github.com/inconshreveable/ngrok.git ngrok2 #å°†ngrokæºä»£ç å…‹éš†å›æœ¬åœ°</span><br></pre></td></tr></tbody></table></figure></div><p>æˆåŠŸæ‰§è¡Œåå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><a href="80A794FED4194D09983E837F856EB4A1" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="80A794FED4194D09983E837F856EB4A1" class="lazyload" title="image"></a></p><p>å¯¼å‡ºæˆåŠŸåçš„æºä»£ç ï¼š</p><p><a href="7290BDE28DF946168DF88D47F93DA344" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="7290BDE28DF946168DF88D47F93DA344" class="lazyload" title="image"></a></p><p>PS. ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½çš„è¯å®åœ¨å¤ªæ…¢ï¼Œå¯ä»¥å…ˆåœ¨æœ¬åœ°ä¸‹è½½å¥½ï¼Œç„¶åç”¨ftpæ”¾åˆ°æœåŠ¡å™¨ä¸Šå»ç›´æ¥ç”¨ï¼Œå¦‚æœå®‰è£…äº†VMware toolsç›´æ¥æ‹–è¿›å»å°±å¯ä»¥äº†ã€‚</p><h3 id="4-3-2-å®‰è£…Goè¯­è¨€å¼€å‘ç¯å¢ƒ"><a href="#4-3-2-å®‰è£…Goè¯­è¨€å¼€å‘ç¯å¢ƒ" class="headerlink" title="4.3.2. å®‰è£…Goè¯­è¨€å¼€å‘ç¯å¢ƒ"></a>4.3.2. å®‰è£…Goè¯­è¨€å¼€å‘ç¯å¢ƒ</h3><p>ç›´æ¥åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install golang #å®‰è£…goè¯­è¨€</span><br></pre></td></tr></tbody></table></figure></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><a href="76E39DDD873F45C6A03421E8681F5EC1" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="76E39DDD873F45C6A03421E8681F5EC1" class="lazyload" title="image"></a></p><h3 id="4-3-3-æ›´æ”¹ngrokåŸŸå"><a href="#4-3-3-æ›´æ”¹ngrokåŸŸå" class="headerlink" title="4.3.3. æ›´æ”¹ngrokåŸŸå"></a>4.3.3. æ›´æ”¹ngrokåŸŸå</h3><p>åœ¨è‡ªå·±çš„åŸŸåç®¡ç†ä¸­æ·»åŠ è§£æAè®°å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><a href="A79F311B536C48EDB3153E1462DC1743" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A79F311B536C48EDB3153E1462DC1743" class="lazyload" title="image"></a></p><p>å°†*.ngrokä¸ngrokéƒ½æŒ‡å‘æ‚¨çš„ä¸»æœºIPã€‚</p><p>é»˜è®¤çš„åŸŸåæ˜¯ngrokè‡ªå·±çš„ï¼Œè¦æ›¿æ¢æˆæ‚¨è‡ªå·±çš„åŸŸå</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GOPATH=/usr/local/ngrok/  #è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒGoè¯­è¨€çš„å®‰è£…ä½ç½®</span><br><span class="line">export NGROK_DOMAIN="ngrok.yourdomain.com"  #è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒngrokåŸŸå</span><br></pre></td></tr></tbody></table></figure></div><p>PS. ngrokåç§°å¯ä»¥ä»»æ„ï¼Œæ¨èåç§°ä¸ºngrokæˆ–è€…tunnel </p><h3 id="4-3-4-ä¸ºåŸŸåç”Ÿæˆè¯ä¹¦"><a href="#4-3-4-ä¸ºåŸŸåç”Ÿæˆè¯ä¹¦" class="headerlink" title="4.3.4. ä¸ºåŸŸåç”Ÿæˆè¯ä¹¦"></a>4.3.4. ä¸ºåŸŸåç”Ÿæˆè¯ä¹¦</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out rootCA.key 2048</span><br><span class="line">openssl req -x509 -new -nodes -key rootCA.key -subj "/CN=$NGROK_DOMAIN" -days 5000 -out rootCA.pem</span><br><span class="line">openssl genrsa -out server.key 2048</span><br><span class="line">openssl req -new -key server.key -subj "/CN=$NGROK_DOMAIN" -out server.csr</span><br><span class="line">openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 5000</span><br></pre></td></tr></tbody></table></figure></div><p>ç”Ÿæˆåçš„ç»“æœå¦‚ä¸‹ï¼š</p><p><a href="A927F6A6069F4EF486F1B7B623FA87C8" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A927F6A6069F4EF486F1B7B623FA87C8" class="lazyload" title="image"></a></p><p>è¯ä¹¦å¦‚ä¸‹ï¼š</p><p><a href="CD9D906ADA7F472788EC35C10E58D13C" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="CD9D906ADA7F472788EC35C10E58D13C" class="lazyload" title="image"></a></p><h3 id="4-3-5-æ‹·è´è¯ä¹¦åˆ°æŒ‡å®šä½ç½®"><a href="#4-3-5-æ‹·è´è¯ä¹¦åˆ°æŒ‡å®šä½ç½®" class="headerlink" title="4.3.5. æ‹·è´è¯ä¹¦åˆ°æŒ‡å®šä½ç½®"></a>4.3.5. æ‹·è´è¯ä¹¦åˆ°æŒ‡å®šä½ç½®</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp rootCA.pem assets/client/tls/ngrokroot.crt  #å¤åˆ¶rootCA.pemåˆ°assets/client/tls/å¹¶æ›´åä¸ºngrokroot.crt</span><br><span class="line">cp server.crt assets/server/tls/snakeoil.crt #å¤åˆ¶server.crtåˆ°assets/server/tls/å¹¶æ›´åä¸ºsnakeoil.crt</span><br><span class="line">cp server.key assets/server/tls/snakeoil.key #å¤åˆ¶server.keyåˆ°assets/server/tls/å¹¶æ›´åä¸ºsnakeoil.key</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="7DB5BD0F5DC7441A8758163E2BEAE9D4" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="7DB5BD0F5DC7441A8758163E2BEAE9D4" class="lazyload" title="image"></a></p><h3 id="4-3-6-ç¼–è¯‘"><a href="#4-3-6-ç¼–è¯‘" class="headerlink" title="4.3.6. ç¼–è¯‘"></a>4.3.6. ç¼–è¯‘</h3><p> ç”±äºgoè¯­è¨€çš„ç‰¹æ€§ï¼Œåœ¨ç¼–è¯‘æ—¶ç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼Œæ‰€ä»¥åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¹¶ä¸éœ€è¦goçš„ç¯å¢ƒï¼ˆéæ‰˜ç®¡åº”ç”¨ï¼‰ã€‚åœ¨ngrokç›®å½•ä¸‹ï¼Œè¿è¡Œä¸€ä¸‹å‘½ä»¤åˆ†åˆ«ç”Ÿæˆå¯¹åº”çš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#winæœåŠ¡ç«¯</span><br><span class="line">GOOS=windows GOARCH=386 make release-server </span><br><span class="line">#winå®¢æˆ·ç«¯</span><br><span class="line">GOOS=windows GOARCH=386 make release-client</span><br><span class="line">#linuxæœåŠ¡ç«¯</span><br><span class="line">GOOS=linux GOARCH=386 make release-server</span><br><span class="line">#linuxå®¢æˆ·ç«¯</span><br><span class="line">GOOS=linux GOARCH=386 make release-client</span><br></pre></td></tr></tbody></table></figure></div><p>ç”Ÿæˆå®Œæˆåï¼Œåœ¨å·¥ä½œç›®å½•çš„binæ–‡ä»¶å¤¹ä¸‹ï¼Œäº§ç”Ÿå¯¹åº”çš„æ–‡ä»¶ã€‚ä»¥ç¼–è¯‘windowså¹³å°ä¸ºä¾‹ï¼Œä¼šäº§ç”Ÿâ€œngrok.exeâ€ä¸â€œngrokd.exeâ€è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå‰è€…å®¢æˆ·ç«¯ï¼Œåè€…éœ€è¦è¿è¡Œåœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šã€‚</p><p>å› ä¸ºé¡¹ç›®ä¸­å¼•ç”¨äº†ä¸€äº›å¤–éƒ¨èµ„æºï¼Œç”Ÿæˆä¼šè€—è´¹ä¸€äº›æ—¶é—´ï¼Œå¯¹ç½‘ç»œä¹Ÿæœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå¤ªæ…¢ä¼šä¸­çŸ­ï¼Œå‘½ä»¤æ‰§è¡Œä¸‹å¦‚ï¼š</p><p><a href="852E47DFAED64958918332181FF8BD32" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="852E47DFAED64958918332181FF8BD32" class="lazyload" title="image"></a></p><p>ç”Ÿæˆç»“æœï¼š</p><p><a href="9625496141394A5CBE2CB7C7352793DB" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9625496141394A5CBE2CB7C7352793DB" class="lazyload" title="image"></a></p><p>è¿™é‡Œæˆ‘è¿˜ç”Ÿæˆäº†ä¸¤ä¸ªè¿è¡Œåœ¨windowsæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯çš„åº”ç”¨ï¼š</p><p><a href="0CDDE2E58BE14672958D63057DB36AFC" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0CDDE2E58BE14672958D63057DB36AFC" class="lazyload" title="image"></a></p><p>ngrok.exeæ˜¯å®¢æˆ·ç«¯ï¼Œngrokd.exeæ˜¯æœåŠ¡ç«¯ï¼Œä¸‹é¢æ˜¯æ¯”è¾ƒè¿ç»­çš„æ“ä½œç»“æœã€‚</p><p><a href="0768FC08675D42D1BF3F5ACDC572DB18" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0768FC08675D42D1BF3F5ACDC572DB18" class="lazyload" title="image"></a></p><p><a href="E3C2971EA9C645F791F77F82AD75023F" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="E3C2971EA9C645F791F77F82AD75023F" class="lazyload" title="image"></a></p><h1 id="äº”ã€éƒ¨ç½²æœåŠ¡å™¨ç«¯ä¸»ç¨‹åº"><a href="#äº”ã€éƒ¨ç½²æœåŠ¡å™¨ç«¯ä¸»ç¨‹åº" class="headerlink" title="äº”ã€éƒ¨ç½²æœåŠ¡å™¨ç«¯ä¸»ç¨‹åº"></a>äº”ã€éƒ¨ç½²æœåŠ¡å™¨ç«¯ä¸»ç¨‹åº</h1><h3 id="5-1ã€éƒ¨ç½²åˆ°Windows-ServeræœåŠ¡å™¨"><a href="#5-1ã€éƒ¨ç½²åˆ°Windows-ServeræœåŠ¡å™¨" class="headerlink" title="5.1ã€éƒ¨ç½²åˆ°Windows ServeræœåŠ¡å™¨"></a>5.1ã€éƒ¨ç½²åˆ°Windows ServeræœåŠ¡å™¨</h3><p>å°†ç”Ÿæˆçš„ngrokd.exeæ–‡ä»¶å¤åˆ¶åˆ°windowsæœåŠ¡å™¨ä¸­ï¼Œå½“ç„¶å¦‚æœè¦éƒ¨ç½²åˆ°linuxä¸­ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><p>è¿™é‡Œæˆ‘å°†ngrokd.exeæ”¾åœ¨c:\grokeServerç›®å½•ä¸‹ï¼š</p><p><a href="D6AF149E6E96414B99EBBBB0809DBDF6" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="D6AF149E6E96414B99EBBBB0809DBDF6" class="lazyload" title="image"></a></p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ï¼šngrokserver2.bat</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrokd.exe -tlsKey="snakeoil.key" -tlsCrt="snakeoil.crt" -domain="ngrok.ä½ çš„åŸŸå.com" -httpAddr=":801" -httpsAddr=":802"</span><br></pre></td></tr></tbody></table></figure></div><p>ç‚¹å‡»æ‰¹å¤„ç†è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><a href="E511D596E9BA4C55BD999E63EBE01BF2" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="E511D596E9BA4C55BD999E63EBE01BF2" class="lazyload" title="image"></a></p><p>ç»‘å®šçš„åŸŸåæ¢æˆè‡ªå·±çš„åŸŸåï¼Œhttpä½¿ç”¨801ç«¯å£ï¼Œhttpsä½¿ç”¨802ç«¯å£ï¼Œä¾›å®¢æˆ·ç«¯è¿æ¥çš„ç®¡é“ç«¯å£è®¾ç½®ä¸º4443ç«¯å£ï¼Œå¿…é¡»å‰é¢çš„åŸŸåç›¸åŒã€‚</p><p>ä¸ºäº†å®‰å…¨è®¸å¤šæœåŠ¡å™¨ä¼šå°†ç«¯å£å±è”½ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ECSæœåŠ¡å™¨ï¼Œé»˜è®¤801ï¼Œ802éƒ½æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œåœ¨é˜¿é‡Œäº‘çš„åå°æ·»åŠ å¼€æ”¾çš„ç«¯å£å°±å¯äº†ï¼š</p><p><a href="0E85CEFC8ABB4AAC9DCC0FBC7D687BB7" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0E85CEFC8ABB4AAC9DCC0FBC7D687BB7" class="lazyload" title="image"></a></p><h3 id="5-2ã€ä¸€é”®éƒ¨ç½²ngrokæœåŠ¡å™¨ï¼ˆCentOSã€Debianã€Ubuntuï¼‰"><a href="#5-2ã€ä¸€é”®éƒ¨ç½²ngrokæœåŠ¡å™¨ï¼ˆCentOSã€Debianã€Ubuntuï¼‰" class="headerlink" title="5.2ã€ä¸€é”®éƒ¨ç½²ngrokæœåŠ¡å™¨ï¼ˆCentOSã€Debianã€Ubuntuï¼‰"></a>5.2ã€ä¸€é”®éƒ¨ç½²ngrokæœåŠ¡å™¨ï¼ˆCentOSã€Debianã€Ubuntuï¼‰</h3><p>å¦‚æœç¼–è¯‘ç”Ÿæˆngrokçš„æºä»£ç ç”Ÿæˆåº”ç”¨å¤ªéº»çƒ¦ï¼Œä½ å¯ä»¥é€‰æ‹©ç½‘å‹å†™çš„å·¥å…·ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²åˆ°å®‰è£…å¹³å°ï¼šCentOSã€Debianã€Ubuntuã€‚</p><p><a href="https://github.com/clangcn/ngrok-one-key-install" target="_blank" rel="noopener">https://github.com/clangcn/ngrok-one-key-install</a></p><h3 id="å…­ã€éƒ¨ç½²ngrokå®¢æˆ·ç«¯"><a href="#å…­ã€éƒ¨ç½²ngrokå®¢æˆ·ç«¯" class="headerlink" title="å…­ã€éƒ¨ç½²ngrokå®¢æˆ·ç«¯"></a>å…­ã€éƒ¨ç½²ngrokå®¢æˆ·ç«¯</h3><p>è¿™é‡Œçš„å®¢æˆ·ç«¯å°±æ˜¯æ‚¨çš„webåº”ç”¨ç¨‹åºæ‰€è¿è¡Œçš„ä¸»æœºï¼Œå°†ubuntuç”Ÿæˆçš„ngrok.exeå®¢æˆ·ç«¯åº”ç”¨å¤åˆ¶åˆ°æ‚¨çš„ç³»ç»Ÿä¸­ï¼š</p><p><a href="34E8DA7BF67A4AA0B329B39F379A86C9" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="34E8DA7BF67A4AA0B329B39F379A86C9" class="lazyload" title="image"></a></p><p>æ·»åŠ é…ç½®æ–‡ä»¶ngrok.cfg:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server_addr: "ngrok.ä½ çš„åŸŸå.com:4443"</span><br><span class="line">trust_host_root_certs: false</span><br></pre></td></tr></tbody></table></figure></div><p> æ·»åŠ æ‰¹å¤„ç†start.batï¼Œå¦‚æœåªè¿è¡Œä¸€æ¬¡ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥å‘½ä»¤ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrok.exe -subdomain kyt -config=ngrok.cfg 8987</span><br></pre></td></tr></tbody></table></figure></div><p>å…¶ä¸­8987ä¸ºç«¯å£å·ï¼Œè¿è¡ŒæˆåŠŸçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š </p><p><a href="A4489CA0156C4DF7A64510A39BE3EF59" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A4489CA0156C4DF7A64510A39BE3EF59" class="lazyload" title="image"></a></p><p>çœ‹åˆ°è¿™ä¸ªç•Œé¢æ—¶è¯´æ˜å·²æˆåŠŸäº†ã€‚</p><h1 id="ä¸ƒã€å¯åŠ¨å®¢æˆ·ç«¯å¹¶æµ‹è¯•"><a href="#ä¸ƒã€å¯åŠ¨å®¢æˆ·ç«¯å¹¶æµ‹è¯•" class="headerlink" title="ä¸ƒã€å¯åŠ¨å®¢æˆ·ç«¯å¹¶æµ‹è¯•"></a>ä¸ƒã€å¯åŠ¨å®¢æˆ·ç«¯å¹¶æµ‹è¯•</h1><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥æ‚¨æ˜ å°„åçš„åŸŸåå°±å¯ä»¥ç©¿é€å†…ç½‘è®¿é—®æ‚¨çš„webæœåŠ¡å™¨äº†ã€‚</p><p><a href="4EA074CBDAE0428FA977F246F098EDDB" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="4EA074CBDAE0428FA977F246F098EDDB" class="lazyload" title="image"></a></p><h1 id="å…«ã€æ€»ç»“"><a href="#å…«ã€æ€»ç»“" class="headerlink" title="å…«ã€æ€»ç»“"></a>å…«ã€æ€»ç»“</h1><p>ä¸€å¼€å§‹é€‰æ‹©é”™äº†å¹³å°ï¼Œåœ¨windowsèŠ±äº†ä¸å°‘æ—¶é—´ï¼Œåœ¨ubuntuä¸‹é¡ºåˆ©å®Œæˆã€‚</p><p>æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯æœ€å¥½éƒ½åšæˆæœåŠ¡ï¼Œæ›´æ–¹ä¾¿ä¸ç¨³å®šã€‚</p><p>ç”±äºæœåŠ¡å™¨ä¸ŠåŒæ—¶è¿è¡Œç€IISï¼Œæ•…æœåŠ¡ç«¯Ngrokå¯åŠ¨æ—¶æ— æ³•ä½¿ç”¨80ç«¯å£ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢ï¼Œæˆ‘ä½¿ç”¨äº†801ä½œä¸ºNgrokæœåŠ¡å™¨çš„httpç«¯å£ï¼Œä½¿ç”¨IISçš„ä»£ç†åŠŸèƒ½å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç‚¹å‡»è¿™é‡Œã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨nginxå°†80è½¬æ¢æˆå…¶å®ƒç«¯å£ã€‚</p><p>è®¸å¤šå†…å®¹éƒ½å‚è€ƒäº†ç½‘å‹çš„æ–‡ç« ã€‚</p><p><strong>å¦‚æœæœåŠ¡å™¨æ­å»ºå¥½äº†ï¼Œåªè¿è¡Œå®¢æˆ·ç«¯ç©¿é€å†…ç½‘ä¸€åˆ†é’Ÿå¤Ÿäº†(æ‰‹åŠ¨ç‹—å¤´)ã€‚</strong></p><p>æ¬¢è¿æ‚¨æä¾›æ›´åŠ å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿æ‚¨æä¾›æ›´å¤šçš„å…è´¹ä»£ç†æœåŠ¡å™¨ï¼Œæˆ‘éšæ—¶æ›´æ–°ï¼Œè°¢è°¢ï¼</p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ–‡ä»¶ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºRedisè§£å†³å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜</title>
      <link href="/2019/08/28/%E5%9F%BA%E4%BA%8ERedis%E8%A7%A3%E5%86%B3%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/"/>
      <url>/2019/08/28/%E5%9F%BA%E4%BA%8ERedis%E8%A7%A3%E5%86%B3%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-redisson-lock"><a href="#spring-boot-redisson-lock" class="headerlink" title="spring-boot-redisson-lock"></a>spring-boot-redisson-lock</h1><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>JDK 1.8</li><li>Spring boot 2.1.0.RELEASE</li><li>redisson-spring-boot-starter 3.9.1</li><li>spring-data-redis 2.1.2.RELEASE</li></ul><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>æˆ‘ä»¬åœ¨åšä¸šåŠ¡çš„æ—¶å€™è¿›ç¨‹ä¼šç¢°åˆ°å¹¶å‘çš„é—®é¢˜ï¼Œæ¯”å¦‚ç§’æ€ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡Redisè§£å†³è¿™ç±»é—®é¢˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹åŒ–æ¥å£ï¼šhttp://192.168.1.145:8080/kill/initBaiKe</span><br><span class="line">ç”¨æˆ·ç§’æ€æŠ¢åˆ°çš„å•†å“æ•°é‡æ¥å£ï¼šhttp://192.168.1.145:8080/kill/successNum</span><br><span class="line">Redissoné”ç§’æ€æ¥å£ï¼šhttp://192.168.1.145:8080/kill/redis</span><br><span class="line">äº‹åŠ¡ç§’æ€æ¥å£ï¼šhttp://192.168.1.145:8080/kill/affair</span><br></pre></td></tr></tbody></table></figure></div><p>åˆå§‹åŒ–æ•°æ®</p><p><a href="https://i.imgur.com/Ir7fjKo.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Ir7fjKo.jpg" class="lazyload" title></a></p><h3 id="é€šè¿‡é”æ–¹å¼ç§’æ€"><a href="#é€šè¿‡é”æ–¹å¼ç§’æ€" class="headerlink" title="é€šè¿‡é”æ–¹å¼ç§’æ€"></a>é€šè¿‡é”æ–¹å¼ç§’æ€</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨Redisä¸­å®˜æ–¹æä¾›äº†ä¸€ä¸ªåä¸ºRedissonçš„å·¥å…·ï¼Œå®ƒçš„åŠŸèƒ½éå¸¸å¼ºå¤§åœ¨å¥¹çš„æ–‡æ¡£ä¸­æœ‰å……åˆ†çš„ä»‹ç»ï¼š<a href="https://github.com/redisson/redisson/wiki/Redisson%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>æˆ‘ä»¬ä½¿ç”¨å®ƒçš„<strong>lock</strong>åŠŸèƒ½ï¼Œå¥½å§åºŸè¯ä¸å¤šè¯´ä¸Šä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç§’æ€åŸºäºRedissonçš„é”</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/redis"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> MessageResult <span class="title">secKillRedis</span><span class="params">()</span> </span>{</span><br><span class="line">    MessageResult result = MessageResult.ok();</span><br><span class="line">    RLock rLock = redissonClient.getLock(<span class="string">"baike_lock"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        rLock.lock();</span><br><span class="line">        String baikeJson = redisTemplate.opsForValue().get(<span class="string">"baike"</span>);</span><br><span class="line">        Baike baike = JSONUtil.toBean(baikeJson, Baike<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Integer amount = baike.getAmount();</span><br><span class="line">        amount = amount - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (amount < <span class="number">0</span>) {</span><br><span class="line">            result.setMsg(<span class="string">"åº“å­˜ä¸è¶³"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        baike.setAmount(amount);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">"baike"</span>, JSONUtil.toJsonStr(baike));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·æŠ¢åˆ°å•†å“ç´¯è®¡</span></span><br><span class="line">        String msg = <span class="string">"å‡å°‘åº“å­˜æˆåŠŸ,å…±å‡å°‘"</span> + successNum.incrementAndGet();</span><br><span class="line">        result.setMsg(msg);</span><br><span class="line">        log.info(msg);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    } <span class="keyword">finally</span> {</span><br><span class="line">        rLock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æˆ‘ä½¿ç”¨jmeterè¿›è¡Œæµ‹è¯•</p><p><a href="https://i.imgur.com/VB3QINV.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/VB3QINV.jpg" class="lazyload" title></a></p><p><a href="https://i.imgur.com/AWsx9Z9.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/AWsx9Z9.jpg" class="lazyload" title></a></p><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå•†å“å¹¶æ²¡æœ‰å‡ºç°è¶…å–çš„é—®é¢˜<br><a href="https://i.imgur.com/rUaXApp.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/rUaXApp.jpg" class="lazyload" title></a></p><p>æˆ‘ä»¬æ¥çœ‹çœ‹å–å‡ºçš„æ¥å£ç»Ÿè®¡çš„æ•°æ®ï¼Œä»æ•°æ®çœ‹ä¸€åˆ‡æ­£å¸¸ï¼Œè§£å†³è¶…å–é—®é¢˜</p><p><a href="https://i.imgur.com/tZolJkR.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/tZolJkR.jpg" class="lazyload" title></a></p><h3 id="Redisäº‹åŠ¡æ–¹å¼ç§’æ€"><a href="#Redisäº‹åŠ¡æ–¹å¼ç§’æ€" class="headerlink" title="Redisäº‹åŠ¡æ–¹å¼ç§’æ€"></a>Redisäº‹åŠ¡æ–¹å¼ç§’æ€</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * é€šè¿‡äº‹åŠ¡è§£å†³ç§’æ€</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@RequestMapping(value = "/affair", method = RequestMethod.POST)</span><br><span class="line">public MessageResult affair() {</span><br><span class="line">    MessageResult result = MessageResult.ok();</span><br><span class="line">    redisTemplate.setEnableTransactionSupport(true);</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡äº‹åŠ¡è§£å†³è¶…å–é—®é¢˜</span><br><span class="line">    List results = redisTemplate.execute(new SessionCallback<list>() {</list></span><br><span class="line">        @Override</span><br><span class="line">        public List execute(RedisOperations operations) throws DataAccessException {</span><br><span class="line">            operations.watch("baike");</span><br><span class="line">            String baikeJson = redisTemplate.opsForValue().get("baike");</span><br><span class="line">            Baike baike = JSONUtil.toBean(baikeJson, Baike.class);</span><br><span class="line">            operations.multi();</span><br><span class="line">            //ä¸€å®šè¦æœ‰ç©ºæŸ¥è¯¢</span><br><span class="line">            operations.opsForValue().get("baike");</span><br><span class="line">            Integer amount = baike.getAmount();</span><br><span class="line">            amount = amount - 1;</span><br><span class="line">            if (amount < 0) {</span><br><span class="line">                return null;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            baike.setAmount(amount);</span><br><span class="line">            redisTemplate.opsForValue().set("baike", JSONUtil.toJsonStr(baike));</span><br><span class="line"></span><br><span class="line">            return operations.exec();</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    if (results != null && !results.isEmpty()) {</span><br><span class="line">        // ç”¨æˆ·æŠ¢åˆ°å•†å“ç´¯è®¡</span><br><span class="line">        String msg = "å‡å°‘åº“å­˜æˆåŠŸ,å…±å‡å°‘" + successNum.incrementAndGet();</span><br><span class="line">        result.setMsg(msg);</span><br><span class="line">        log.info(msg);</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    result.setMsg("åº“å­˜ä¸è¶³");</span><br><span class="line">    return result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>é€šè¿‡äº‹åŠ¡çš„æ–¹å¼æ¯”è¾ƒå¤æ‚ï¼Œä½†æ•ˆæœå’Œé”çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œå›¾æˆ‘å°±ä¸è´´äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ä»£ç ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-redisson-lock" target="_blank" rel="noopener">ä»£ç </a></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æˆ‘ä»¬æ¨èç”¨é”çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼Œæ¯”è¾ƒæ¯”è¾ƒç®€å•ï¼Œä¸è¿‡åˆæœŸçš„é…ç½®ä¹ŸæŒºéº»çƒ¦ï¼Œ<br>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„æ–‡æ¡£è¿›è¡Œé…ç½®ï¼š<a href="https://github.com/redisson/redisson/wiki/2.-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95" target="_blank" rel="noopener">é…ç½®æ–‡æ¡£</a></p><p>ä»–å¯ä»¥é…ç½®çš„æ¨¡å¼å¦‚ä¸‹ï¼š</p><ul><li>é›†ç¾¤æ¨¡å¼</li><li>äº‘æ‰˜ç®¡æ¨¡å¼</li><li>å•RedisèŠ‚ç‚¹æ¨¡å¼</li><li>å“¨å…µæ¨¡å¼</li><li>ä¸»ä»æ¨¡å¼</li></ul><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>æºç ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-redisson-lock" target="_blank" rel="noopener">spring-boot-redisson-lock</a></li><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»ŸMemcachedå­¦ä¹ å¿ƒå¾—</title>
      <link href="/2019/08/18/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9FMemcached%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/"/>
      <url>/2019/08/18/%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9FMemcached%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">package com.danga.MemCached.test;    </span><br><span class="line">   </span><br><span class="line">import java.util.Date;    </span><br><span class="line">   </span><br><span class="line">import com.danga.MemCached.MemCachedClient;    </span><br><span class="line">import com.danga.MemCached.SockIOPool;    </span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">public class Test {        </span><br><span class="line">    protected static MemCachedClient mcc = new MemCachedClient();       </span><br><span class="line">       </span><br><span class="line">    static {       </span><br><span class="line">        String[] servers ={"192.168.40.4:12000"};       </span><br><span class="line">       </span><br><span class="line">        Integer[] weights = { 3 };       </span><br><span class="line">       </span><br><span class="line">        //åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡SockIOPool     </span><br><span class="line">        SockIOPool pool = SockIOPool.getInstance();       </span><br><span class="line">       </span><br><span class="line">        // set the servers and the weights    </span><br><span class="line">        //è®¾ç½®Memcached Server    </span><br><span class="line">        pool.setServers( servers );       </span><br><span class="line">        pool.setWeights( weights );       </span><br><span class="line">       </span><br><span class="line">        // set some basic pool settings       </span><br><span class="line">        // 5 initial, 5 min, and 250 max conns       </span><br><span class="line">        // and set the max idle time for a conn       </span><br><span class="line">        // to 6 hours       </span><br><span class="line">        pool.setInitConn( 5 );       </span><br><span class="line">        pool.setMinConn( 5 );       </span><br><span class="line">        pool.setMaxConn( 250 );       </span><br><span class="line">        pool.setMaxIdle( 1000 * 60 * 60 * 6 );       </span><br><span class="line">       </span><br><span class="line">        // set the sleep for the maint thread       </span><br><span class="line">        // it will wake up every x seconds and       </span><br><span class="line">        // maintain the pool size       </span><br><span class="line">        pool.setMaintSleep( 30 );       </span><br><span class="line">       </span><br><span class="line">        // Tcpçš„è§„åˆ™å°±æ˜¯åœ¨å‘é€ä¸€ä¸ªåŒ…ä¹‹å‰ï¼Œæœ¬åœ°æœºå™¨ä¼šç­‰å¾…è¿œç¨‹ä¸»æœº    </span><br><span class="line">                  // å¯¹ä¸Šä¸€æ¬¡å‘é€çš„åŒ…çš„ç¡®è®¤ä¿¡æ¯åˆ°æ¥ï¼›è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥å…³é—­å¥—æ¥å­—çš„ç¼“å­˜ï¼Œ    </span><br><span class="line">                  // ä»¥è‡³è¿™ä¸ªåŒ…å‡†å¤‡å¥½äº†å°±å‘ï¼›    </span><br><span class="line">                  pool.setNagle( false );       </span><br><span class="line">        //è¿æ¥å»ºç«‹åå¯¹è¶…æ—¶çš„æ§åˆ¶    </span><br><span class="line">                  pool.setSocketTO( 3000 );    </span><br><span class="line">        //è¿æ¥å»ºç«‹æ—¶å¯¹è¶…æ—¶çš„æ§åˆ¶    </span><br><span class="line">                  pool.setSocketConnectTO( 0 );       </span><br><span class="line">       </span><br><span class="line">        // initialize the connection pool       </span><br><span class="line">        //åˆå§‹åŒ–ä¸€äº›å€¼å¹¶ä¸MemcachedServeræ®µå»ºç«‹è¿æ¥    </span><br><span class="line">                  pool.initialize();    </span><br><span class="line">               </span><br><span class="line">       </span><br><span class="line">        // lets set some compression on for the client       </span><br><span class="line">        // compress anything larger than 64k       </span><br><span class="line">        mcc.setCompressEnable( true );       </span><br><span class="line">        mcc.setCompressThreshold( 64 * 1024 );       </span><br><span class="line">    }       </span><br><span class="line">           </span><br><span class="line">    public static void bulidCache(){       </span><br><span class="line">        //set(key,value,Date) ,Dateæ˜¯ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœæƒ³è®©è¿™ä¸ªè¿‡æœŸæ—¶é—´ç”Ÿæ•ˆçš„è¯ï¼Œè¿™é‡Œä¼ é€’çš„new Date(long date) ä¸­å‚æ•°dateï¼Œéœ€è¦æ˜¯ä¸ªå¤§äºæˆ–ç­‰äº1000çš„å€¼ã€‚    </span><br><span class="line">        //å› ä¸ºjava clientçš„å®ç°æºç é‡Œæ˜¯è¿™æ ·å®ç°çš„ expiry.getTime() / 1000 ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ å°äº1000çš„å€¼ï¼Œé™¤ä»¥1000ä»¥åéƒ½æ˜¯0ï¼Œå³æ°¸ä¸è¿‡æœŸ    </span><br><span class="line">        mcc.set( "test", "This is a test String" ,new Date(11211));   </span><br><span class="line">    //åç§’åè¿‡æœŸ    </span><br><span class="line">              </span><br><span class="line">    }       </span><br><span class="line">      </span><br><span class="line">    public static void output() {       </span><br><span class="line">        //ä»cacheé‡Œå–å€¼    </span><br><span class="line">        String value = (String) mcc.get( "test" );       </span><br><span class="line">        System.out.println(value);        </span><br><span class="line">    }       </span><br><span class="line">           </span><br><span class="line">    public static void main(String[] args){       </span><br><span class="line">        bulidCache();      </span><br><span class="line">        output();           </span><br><span class="line">    }     </span><br><span class="line">       </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> ç¼“å­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼“å­˜ </tag>
            
            <tag> Memcached </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•çš„mybatiså¤šæ•°æ®æºé…ç½®</title>
      <link href="/2019/07/15/%E7%AE%80%E5%8D%95%E7%9A%84mybatis%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/07/15/%E7%AE%80%E5%8D%95%E7%9A%84mybatis%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-mybatis-mutiple-datasource"><a href="#spring-boot-mybatis-mutiple-datasource" class="headerlink" title="spring-boot-mybatis-mutiple-datasource"></a>spring-boot-mybatis-mutiple-datasource</h1><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>å¼€å‘å·¥å…·ï¼šIDEA</li><li>åŸºç¡€å·¥å…·ï¼šMaven+JDK8</li><li>æ‰€ç”¨æŠ€æœ¯ï¼šSpringBoot 2.1.1.RELEASEã€Mybatis </li><li>æ•°æ®åº“ï¼šMySQL 5.7</li></ul><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>æºç ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-mybatis-mutiple-datasource" target="_blank" rel="noopener">spring-boot-mybatis-mutiple-datasource</a><br>åŸºäºmybatisçš„å¤šæ•°æ®æºæ“ä½œï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç›®å½•ç»“æ„</p><p><a href="https://i.imgur.com/F5lf0Vp.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/F5lf0Vp.jpg" class="lazyload" title></a></p><p>åœ¨sqlç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæ•°æ®æºçš„æµ‹è¯•SQLå¯ä»¥åœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­æ‰§è¡Œæ–¹ä¾¿åç»­çš„æµ‹è¯•ã€‚</p><p>ç„¶åå†æˆ‘ä»¬<strong>application.properties</strong>é…ç½®æ–‡ä»¶ä¸­é…ç½®æˆ‘ä»¬æ•°æ®çš„æ•°æ®æº</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server.port=8081</span><br><span class="line"></span><br><span class="line"># é…ç½®ç¬¬ä¸€ä¸ªæ•°æ®æº</span><br><span class="line">spring.datasource.hikari.db1.jdbc-url=jdbc:mysql://127.0.0.1:3306/baike?useUnicode=true&characterEncoding=utf8&useSSL=true&serverTimezone=GMT%2B8</span><br><span class="line">spring.datasource.hikari.db1.username=root</span><br><span class="line">spring.datasource.hikari.db1.password=</span><br><span class="line">spring.datasource.hikari.db1.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line"></span><br><span class="line"># é…ç½®ç¬¬äºŒä¸ªæ•°æ®æº</span><br><span class="line">spring.datasource.hikari.db2.jdbc-url=jdbc:mysql://127.0.0.1:3306/script?useUnicode=true&characterEncoding=utf8&useSSL=true&serverTimezone=GMT%2B8</span><br><span class="line">spring.datasource.hikari.db2.username=root</span><br><span class="line">spring.datasource.hikari.db2.password=</span><br><span class="line">spring.datasource.hikari.db2.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></tbody></table></figure></div><p>å› ä¸ºä¸¤ä¸ªä¸åŒæ•°æ®åº“æ•°æ®æºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨ä½¿ç”¨é»˜è®¤çš„mybatisé…ç½®ï¼Œéœ€è¦è‡ªå®šä¹‰ï¼Œæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªé…ç½®ç±»é…ç½®è¿™ä¸¤ä¸ªæ•°æ®æº<br><strong>DataSource1Config</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®æº1é…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-12-6 09:35:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(basePackages = <span class="string">"com.yi.mutiple.datasource.dao.db1"</span>, sqlSessionTemplateRef = <span class="string">"db1SqlSessionTemplate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSource1Config</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆæ•°æ®æº.  <span class="doctag">@Primary</span> æ³¨è§£å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db1DataSource"</span>)</span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource.hikari.db1"</span>)</span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">testDataSource</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> DataSourceBuilder.create().build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»º SqlSessionFactory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db1SqlSessionFactory"</span>)</span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">testSqlSessionFactory</span><span class="params">(@Qualifier(<span class="string">"db1DataSource"</span>)</span> DataSource dataSource) <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        SqlSessionFactoryBean bean = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">        bean.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">// å¦‚æœä½¿ç”¨xmlè¯·æ”¾å¼€ä¸‹é¢é…ç½®</span></span><br><span class="line">        <span class="comment">// bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources("classpath:mybatis/mapper/db1/*.xml"));</span></span><br><span class="line">        <span class="keyword">return</span> bean.getObject();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®äº‹åŠ¡ç®¡ç†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db1TransactionManager"</span>)</span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSourceTransactionManager <span class="title">testTransactionManager</span><span class="params">(@Qualifier(<span class="string">"db1DataSource"</span>)</span> DataSource dataSource) </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ•°æ®åº“æ“ä½œæ¨¡æ¿</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSessionFactory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db1SqlSessionTemplate"</span>)</span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionTemplate <span class="title">testSqlSessionTemplate</span><span class="params">(@Qualifier(<span class="string">"db1SqlSessionFactory"</span>)</span> SqlSessionFactory sqlSessionFactory) <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SqlSessionTemplate(sqlSessionFactory);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>DataSource2Config</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°æ®æº2é…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-12-6 09:35:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan</span>(basePackages = <span class="string">"com.yi.mutiple.datasource.dao.db2"</span>, sqlSessionTemplateRef = <span class="string">"db2SqlSessionTemplate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSource2Config</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆæ•°æ®æº.  <span class="doctag">@Primary</span> æ³¨è§£å£°æ˜ä¸ºé»˜è®¤æ•°æ®æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db2DataSource"</span>)</span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource.hikari.db2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">testDataSource</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> DataSourceBuilder.create().build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»º SqlSessionFactory</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db2SqlSessionFactory"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">testSqlSessionFactory</span><span class="params">(@Qualifier(<span class="string">"db2DataSource"</span>)</span> DataSource dataSource) <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        SqlSessionFactoryBean bean = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">        bean.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">// å¦‚æœä½¿ç”¨xmlè¯·æ”¾å¼€ä¸‹é¢é…ç½®</span></span><br><span class="line">        <span class="comment">//bean.setMapperLocations(new PathMatchingResourcePatternResolver().getResources("classpath:mybatis/mapper/db2/*.xml"));</span></span><br><span class="line">        <span class="keyword">return</span> bean.getObject();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®äº‹åŠ¡ç®¡ç†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db2TransactionManager"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSourceTransactionManager <span class="title">testTransactionManager</span><span class="params">(@Qualifier(<span class="string">"db2DataSource"</span>)</span> DataSource dataSource) </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ•°æ®åº“æ“ä½œæ¨¡æ¿</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSessionFactory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"db2SqlSessionTemplate"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionTemplate <span class="title">testSqlSessionTemplate</span><span class="params">(@Qualifier(<span class="string">"db2SqlSessionFactory"</span>)</span> SqlSessionFactory sqlSessionFactory) <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SqlSessionTemplate(sqlSessionFactory);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ä»é…ç½®ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿˜å¯ä»¥xmlæ–¹å¼è®¿é—®ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œä½¿ç”¨æ³¨è§£ï¼Œå¦‚æœæœ‰éœ€è¦çš„å¯ä»¥æ‰“å¼€æ³¨é‡Šå³å¯ä½¿ç”¨xmlã€‚</p><p>æ¥ä¸‹æ¥è¿˜æœ‰ä¸€ä¸ªå…³é”®çš„ç‚¹å°±æ˜¯æˆ‘ä»¬daoä¸­æ¯ä¸ªdaoè¦å¯¹åº”æ“ä½œçš„æ•°æ®æºï¼Œå¯ä»¥ä½¿ç”¨<strong>@Qualifier</strong>æ³¨è§£<br><strong>BaiKeDao</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ“ä½œbaikeå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-12-6 09:40:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"db1SqlSessionTemplate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BaiKeDao</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id ä¸»é”®id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM baike WHERE id = #{id}"</span>)</span><br><span class="line">    <span class="function">Baike <span class="title">findBaikeById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ScriptDao</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ“ä½œScriptå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-12-6 09:40:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"db2SqlSessionTemplate"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ScriptDao</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è„šæœ¬ç±»å‹æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type è„šæœ¬ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM script_info WHERE type = #{type}"</span>)</span><br><span class="line">    <span class="function">List<scriptinfo> <span class="title">findScriptByType</span><span class="params">(Byte type)</span></scriptinfo></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æˆ‘ä»¬ä½¿ç”¨æ¥å£è¯·æ±‚çœ‹çœ‹æˆ‘ä»¬çš„æ•°æ®ï¼š<br><strong>BaiKeController</strong><br><a href="https://i.imgur.com/aqeqwcQ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/aqeqwcQ.jpg" class="lazyload" title></a></p><p><strong>ScriptController</strong><br><a href="https://i.imgur.com/zWYMMKa.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/zWYMMKa.jpg" class="lazyload" title></a></p><p>ä¸»è¦çš„å·²ç»è®²è§£å®Œæ¯•ï¼Œå‰©ä¸‹çš„ç»†èŠ‚è¯·é˜…è¯»ä»£ç ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-mybatis-mutiple-datasource" target="_blank" rel="noopener">spring-boot-mybatis-mutiple-datasource</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> ORM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ORM </tag>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flinkå…¥é—¨</title>
      <link href="/2019/07/15/Flink%E5%85%A5%E9%97%A8/"/>
      <url>/2019/07/15/Flink%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>è¿™ç¯‡æ–‡ç« åªæ˜¯è®©ä½ å…¥é—¨æ¥è§¦åˆ°æµè®¡ç®—çš„å¼ºå¤§ã€‚</p><h3 id="ä¸‹è½½å®‰è£…Apache-Flink"><a href="#ä¸‹è½½å®‰è£…Apache-Flink" class="headerlink" title="ä¸‹è½½å®‰è£…Apache Flink"></a>ä¸‹è½½å®‰è£…Apache Flink</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.mirrorservice.org/sites/ftp.apache.org/flink/flink-1.8.0/flink-1.8.0-bin-scala_2.12.tgz</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™é‡Œä»¥windowsä¸ºä¾‹å­ï¼Œè§£å‹ååŒå‡»start-cluster.batå¯åŠ¨é›†ç¾¤æ¨¡å¼</p><p><a href="https://i.loli.net/2019/05/14/5cda90be4116957755.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda90be4116957755.png" class="lazyload" title="alt"></a></p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç°åœ¨è®¿é—®<strong><a href="http://localhost:8081" target="_blank" rel="noopener">http://localhost:8081</a></strong>å°±èƒ½è¿›å…¥ç®¡ç†ç•Œé¢<br><a href="https://i.loli.net/2019/05/14/5cda911a6bd4919200.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda911a6bd4919200.png" class="lazyload" title="alt"></a></p><p>å¥½ï¼Œå†™ä¸‹æ¥æˆ‘ä»¬ç¼–å†™æˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®˜æ–¹çš„å·¥ç¨‹å¼€å§‹ï¼Œ<br>ç”ŸæˆJavaé¡¹ç›®çš„å·¥ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯mavenç”Ÿæˆ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate\</span><br><span class="line">  -DarchetypeGroupId=org.apache.flink\</span><br><span class="line">  -DarchetypeArtifactId=flink-quickstart-java\</span><br><span class="line">  -DarchetypeVersion=${1:-1.8.0}\</span><br><span class="line">  -DgroupId=org.myorg.quickstart\</span><br><span class="line">  -DartifactId=$PACKAGE\</span><br><span class="line">  -Dversion=0.1\</span><br><span class="line">  -Dpackage=org.myorg.quickstart\</span><br><span class="line">  -DinteractiveMode=false</span><br></pre></td></tr></tbody></table></figure></div><p>è¿˜æœ‰ä¸€ç§æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„è„šæœ¬ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://flink.apache.org/q/quickstart.sh | bash</span><br></pre></td></tr></tbody></table></figure></div><p>æ¨èä½¿ç”¨ç¬¬äºŒç§ï¼Œæ–¹é¢å¿«æ·ï¼Œå®˜æ–¹è´Ÿè´£ç»´æŠ¤ï¼Œå½“ç„¶ä½ æ‰§è¡Œçš„æ—¶å€™è¦çœ‹çœ‹è‡ªå·±flinkçš„ç‰ˆæœ¬ï¼Œå› ä¸ºè„šæœ¬ç”Ÿæˆçš„å·¥ç¨‹pom.xmlä¸­flinkçš„ä¾èµ–ä¼šæ˜¯æœ€æ–°çš„ï¼Œå¯èƒ½ä¸å…¼å®¹ä½ ä¸‹è½½çš„flinkç‰ˆæœ¬ã€‚</p><p>æˆ‘ä»¬æŠŠç”Ÿæˆçš„å·¥ç¨‹å¯¼å…¥IDEAï¼Œå¥¹çš„å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š<br><a href="https://i.loli.net/2019/05/14/5cda92aa36bab37458.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda92aa36bab37458.png" class="lazyload" title="alt"></a></p><p>å¥½äº†æˆ‘ä»¬é€‰æ‹©StreamingJobæ¥ç¼–å†™æˆ‘ä»¬çš„ä»£ç ï¼Œå®ç°ç›‘æ§ç»´åŸºç™¾ç§‘è¯æ¡çš„æ›´æ–°ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦å¼•å…¥ç»´åŸºç™¾ç§‘çš„è¯¦æƒ…èµ„æºã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><dependency></dependency></span><br><span class="line">    <groupid>org.apache.flink</groupid></span><br><span class="line">    <artifactid>flink-connector-wikiedits_2.11</artifactid></span><br><span class="line">    <version>${flink.version}</version></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶ä¸€é¡¿éªšæ“ä½œä¹‹åç¼–å†™å¥½æˆ‘ä»¬çš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamingJob</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">// ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">final</span> StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">        DataStreamSource<wikipediaeditevent> edits = env.addSource(<span class="keyword">new</span> WikipediaEditsSource());</wikipediaeditevent></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»¥ç”¨æˆ·åä¸ºkeyåˆ†ç»„</span></span><br><span class="line">        KeyedStream<wikipediaeditevent, string> keyedStream = edits.keyBy((KeySelector<wikipediaeditevent, string>) WikipediaEditEvent::getUser);</wikipediaeditevent,></wikipediaeditevent,></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ—¶é—´çª—å£ä¸º5ç§’</span></span><br><span class="line">        SingleOutputStreamOperator<tuple3<string, integer, stringbuilder>> operator = keyedStream.timeWindow(Time.seconds(<span class="number">15</span>)).aggregate(<span class="keyword">new</span> AggregateFunction<wikipediaeditevent, tuple3<string, integer, stringbuilder>, Tuple3<string, integer, stringbuilder>>() {</string,></wikipediaeditevent,></tuple3<string,></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple3<string, integer, stringbuilder> <span class="title">createAccumulator</span><span class="params">()</span> </string,></span>{</span><br><span class="line">                <span class="comment">//åˆ›å»ºACC</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple3<>(<span class="string">""</span>, <span class="number">0</span>, <span class="keyword">new</span> StringBuilder());</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple3<string, integer, stringbuilder> <span class="title">add</span><span class="params">(WikipediaEditEvent wikipediaEditEvent, Tuple3<string, integer, stringbuilder> stringIntegerStringBuilderTuple3)</string,></span> </string,></span>{</span><br><span class="line">                StringBuilder sb = stringIntegerStringBuilderTuple3.f2;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€æ¡è®°å½•ï¼Œå°±åŠ ä¸ª"ä¿®æ”¹å­—ç¬¦æ•°é‡ ï¼š"ä½œä¸ºå‰ç¼€ï¼Œ</span></span><br><span class="line">                <span class="comment">//å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¡è®°å½•ï¼Œå°±ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦</span></span><br><span class="line">                <span class="keyword">if</span>(StringUtils.isBlank(sb.toString())){</span><br><span class="line">                    sb.append(<span class="string">"ä¿®æ”¹å­—ç¬¦æ•°é‡ : "</span>);</span><br><span class="line">                }<span class="keyword">else</span> {</span><br><span class="line">                    sb.append(<span class="string">" "</span>);</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple3<>(wikipediaEditEvent.getUser(),</span><br><span class="line">                        wikipediaEditEvent.getByteDiff() + stringIntegerStringBuilderTuple3.f1,</span><br><span class="line">                        sb.append(wikipediaEditEvent.getByteDiff()));</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple3<string, integer, stringbuilder> <span class="title">getResult</span><span class="params">(Tuple3<string, integer, stringbuilder> stringIntegerStringBuilderTuple3)</string,></span> </string,></span>{</span><br><span class="line">                <span class="keyword">return</span> stringIntegerStringBuilderTuple3;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Tuple3<string, integer, stringbuilder> <span class="title">merge</span><span class="params">(Tuple3<string, integer, stringbuilder> stringIntegerStringBuilderTuple3, Tuple3<string, integer, stringbuilder> acc1)</string,></string,></span> </string,></span>{</span><br><span class="line">                <span class="comment">//åˆå¹¶çª—å£çš„åœºæ™¯æ‰ä¼šç”¨åˆ°</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Tuple3<>(stringIntegerStringBuilderTuple3.f0,</span><br><span class="line">                        stringIntegerStringBuilderTuple3.f1 + acc1.f1, stringIntegerStringBuilderTuple3.f2.append(acc1.f2));</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ¯ä¸ªkeyçš„èšåˆç»“æœå•ç‹¬è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå®é™…åº”ç”¨ä¸­è¿™é‡Œå¯ä»¥å‘é€åˆ°kafkaã€mysqlæˆ–è€…redisä¸­</span></span><br><span class="line">        operator.map((MapFunction<tuple3<string, integer, stringbuilder>, String>) Tuple3::toString).print();</tuple3<string,></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">        env.execute(<span class="string">"Flink Streaming Java API Skeleton Start"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åæˆ‘ä»¬ä½¿ç”¨mavençš„å‘½ä»¤æ‰“åŒ…</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -U</span><br></pre></td></tr></tbody></table></figure></div><p>æ‰“åŒ…å¥½ä¹‹åå›åˆ°æˆ‘ä»¬Flinkçš„ç®¡ç†ç•Œé¢ä¸Šä¼ jaråŒ…</p><p><a href="https://i.loli.net/2019/05/14/5cda942cb5d0e74644.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda942cb5d0e74644.png" class="lazyload" title="alt"></a></p><p>å¡«å†™ç±»è·¯å¾„ï¼Œç„¶åæäº¤<br><a href="https://i.loli.net/2019/05/14/5cda945ae8a1b20114.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda945ae8a1b20114.png" class="lazyload" title="alt"></a></p><p>åˆ°è¿™æˆ‘ä»¬å·²ç»çœ‹åˆ°ç¨‹åºå·²ç»å¼€å§‹æ‰§è¡Œäº†<br><a href="https://i.loli.net/2019/05/14/5cda947adf63983987.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda947adf63983987.png" class="lazyload" title="alt"></a></p><p>ç„¶åæ‰“å¼€æˆ‘ä»¬å¯åŠ¨start-cluster.batæ˜¯å¼¹å‡ºçš„æ§åˆ¶å°çª—å£ï¼Œæ˜¯ä¸æ˜¯å‘ç°ç¨‹åºå·²ç»å®Œç¾è¿è¡Œäº†å‘¢<br><a href="https://i.loli.net/2019/05/14/5cda95010b83d12061.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/14/5cda95010b83d12061.png" class="lazyload" title="alt"></a></p><p>å…·ä½“çš„APIä½¿ç”¨è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ•°æ® </tag>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£æ³¨è§£ä¸­çš„@Inherited</title>
      <link href="/2019/07/03/%E7%90%86%E8%A7%A3%E6%B3%A8%E8%A7%A3%E4%B8%AD%E7%9A%84@Inherited/"/>
      <url>/2019/07/03/%E7%90%86%E8%A7%A3%E6%B3%A8%E8%A7%A3%E4%B8%AD%E7%9A%84@Inherited/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="Inheritedï¼š"><a href="#Inheritedï¼š" class="headerlink" title="@Inheritedï¼š"></a>@Inheritedï¼š</h2><p>   @Inherited å…ƒæ³¨è§£æ˜¯ä¸€ä¸ªæ ‡è®°æ³¨è§£ï¼Œ@Inheritedé˜è¿°äº†æŸä¸ªè¢«æ ‡æ³¨çš„ç±»å‹æ˜¯è¢«ç»§æ‰¿çš„ã€‚<br>å¦‚æœä¸€ä¸ªä½¿ç”¨äº†@Inheritedä¿®é¥°çš„annotationç±»å‹è¢«ç”¨äºä¸€ä¸ªclassï¼Œåˆ™è¿™ä¸ªannotationå°†è¢«ç”¨äºè¯¥classçš„å­ç±»ã€‚ </p><p><strong>æ³¨æ„</strong>ï¼š@Inherited annotationç±»å‹æ˜¯è¢«æ ‡æ³¨è¿‡çš„classçš„å­ç±»æ‰€ç»§æ‰¿ã€‚ç±»å¹¶ä¸ä»å®ƒæ‰€å®ç°çš„æ¥å£ç»§æ‰¿annotationï¼Œ æ–¹æ³•å¹¶ä¸ä»å®ƒæ‰€é‡è½½çš„æ–¹æ³•ç»§æ‰¿annotationã€‚ </p><p>ã€€ã€€å½“@Inherited annotationç±»å‹æ ‡æ³¨çš„annotationçš„Retentionæ˜¯RetentionPolicy.RUNTIMEï¼Œåˆ™åå°„APIå¢å¼ºäº†è¿™ç§ç»§æ‰¿æ€§ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨java.lang.reflectå»æŸ¥è¯¢ä¸€ä¸ª@Inherited annotationç±»å‹çš„annotationæ—¶ï¼Œåå°„ä»£ç æ£€æŸ¥å°†å±•å¼€å·¥ä½œï¼š æ£€æŸ¥classå’Œå…¶çˆ¶ç±»ï¼Œç›´åˆ°å‘ç°æŒ‡å®šçš„annotationç±»å‹è¢«å‘ç°ï¼Œæˆ–è€…åˆ°è¾¾ç±»ç»§æ‰¿ç»“æ„çš„é¡¶å±‚ã€‚ </p><p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ATable {</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> BTable {</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ATable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Super</span> </span>{</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> superx;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> supery;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Super</span><span class="params">()</span> </span>{</span><br><span class="line">}</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">superX</span><span class="params">()</span></span>{  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">superY</span><span class="params">()</span></span>{  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">    }  </span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@BTable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Super</span></span>{</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> subx;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> suby;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Sub</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{  </span><br><span class="line">}  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Sub</span><span class="params">(<span class="keyword">int</span> i)</span></span>{  </span><br><span class="line">    }  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">subX</span><span class="params">()</span></span>{  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subY</span><span class="params">()</span></span>{  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">    }  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMain</span> </span>{</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">Class<sub> clazz = Sub<span class="class">.<span class="keyword">class</span></span>;</sub></span><br><span class="line">    </span><br><span class="line">System.out.println(<span class="string">"============================Field==========================="</span>);  </span><br><span class="line">System.out.println(Arrays.toString(clazz.getFields()));</span><br><span class="line">        System.out.println(Arrays.toString(clazz.getDeclaredFields()));  <span class="comment">//all + è‡ªèº«  </span></span><br><span class="line">        System.out.println(<span class="string">"============================Method==========================="</span>);</span><br><span class="line">        System.out.println(Arrays.toString(clazz.getMethods()));   <span class="comment">//public + ç»§æ‰¿  </span></span><br><span class="line">        <span class="comment">//all + è‡ªèº«  </span></span><br><span class="line">        System.out.println(Arrays.toString(clazz.getDeclaredMethods()));</span><br><span class="line">        System.out.println(<span class="string">"============================Constructor==========================="</span>);  </span><br><span class="line">        System.out.println(Arrays.toString(clazz.getConstructors()));  </span><br><span class="line">                System.out.println(Arrays.toString(clazz.getDeclaredConstructors()));  </span><br><span class="line">        System.out.println(<span class="string">"============================AnnotatedElement==========================="</span>);  </span><br><span class="line">        <span class="comment">//æ³¨è§£DBTable2æ˜¯å¦å­˜åœ¨äºå…ƒç´ ä¸Š  </span></span><br><span class="line">        System.out.println(clazz.isAnnotationPresent(BTable<span class="class">.<span class="keyword">class</span>))</span>;  </span><br><span class="line">        <span class="comment">//å¦‚æœå­˜åœ¨è¯¥å…ƒç´ çš„æŒ‡å®šç±»å‹çš„æ³¨é‡ŠDBTable2ï¼Œåˆ™è¿”å›è¿™äº›æ³¨é‡Šï¼Œå¦åˆ™è¿”å› nullã€‚  </span></span><br><span class="line">        System.out.println(clazz.getAnnotation(BTable<span class="class">.<span class="keyword">class</span>))</span>;  </span><br><span class="line">        <span class="comment">//ç»§æ‰¿  </span></span><br><span class="line">        System.out.println(Arrays.toString(clazz.getAnnotations()));  </span><br><span class="line">        System.out.println(Arrays.toString(clazz.getDeclaredAnnotations()));  <span class="comment">////è‡ªèº«  </span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ†æä¸‹è¿™æ®µä»£ç ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸¤ä¸ªannotionï¼Œå…¶ä¸­ATableä½¿ç”¨äº†@Inherited, BTableæ²¡æœ‰ä½¿ç”¨  @Inherited,ç±»Superå’Œç±»Subåˆ†åˆ«ä½¿ç”¨äº†ATableå’ŒBTableè¿™ä¸¤ä¸ªæ³¨è§£ï¼Œå¹¶ä¸”Subç±» ç»§æ‰¿Superç±»ã€‚ </p><p>è¿™æ®µç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">============================Field===========================</span><br><span class="line">[<span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Sub.suby, <span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Super.supery]</span><br><span class="line">[<span class="keyword">private</span> <span class="keyword">int</span> annotion.inherit.Sub.subx, <span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Sub.suby]</span><br><span class="line">============================Method===========================</span><br><span class="line">[<span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Sub.subY(), <span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Super.superY(), <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait() <span class="keyword">throws</span> java.lang.InterruptedException, <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="keyword">long</span>,<span class="keyword">int</span>) <span class="keyword">throws</span> java.lang.InterruptedException, <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="keyword">long</span>) <span class="keyword">throws</span> java.lang.InterruptedException, <span class="keyword">public</span> <span class="keyword">boolean</span> java.lang.Object.equals(java.lang.Object), <span class="keyword">public</span> java.lang.String java.lang.Object.toString(), <span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">int</span> java.lang.Object.hashCode(), <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> java.lang.Class java.lang.Object.getClass(), <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notify(), <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notifyAll()]</span><br><span class="line">[<span class="keyword">private</span> <span class="keyword">int</span> annotion.inherit.Sub.subX(), <span class="keyword">public</span> <span class="keyword">int</span> annotion.inherit.Sub.subY()]</span><br><span class="line">============================Constructor===========================</span><br><span class="line">[<span class="keyword">public</span> annotion.inherit.Sub(<span class="keyword">int</span>)]</span><br><span class="line">[<span class="keyword">private</span> annotion.inherit.Sub(), <span class="keyword">public</span> annotion.inherit.Sub(<span class="keyword">int</span>)]</span><br><span class="line">============================AnnotatedElement===========================</span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="meta">@annotion</span>.inherit.BTable(name=)</span><br><span class="line">[<span class="meta">@annotion</span>.inherit.ATable(name=), <span class="meta">@annotion</span>.inherit.BTable(name=)]</span><br><span class="line">[<span class="meta">@annotion</span>.inherit.BTable(name=)]</span><br></pre></td></tr></tbody></table></figure></div><p>getFields()è·å¾—æŸä¸ªç±»çš„æ‰€æœ‰çš„å…¬å…±ï¼ˆpublicï¼‰çš„å­—æ®µï¼ŒåŒ…æ‹¬çˆ¶ç±»ã€‚ </p><p>getDeclaredFields()è·å¾—æŸä¸ªç±»çš„æ‰€æœ‰ç”³æ˜çš„å­—æ®µï¼Œå³åŒ…æ‹¬publicã€privateå’Œprotecedï¼Œ<br>ä½†æ˜¯ä¸åŒ…æ‹¬çˆ¶ç±»çš„ç”³æ˜å­—æ®µã€‚ åŒæ ·ç±»ä¼¼çš„è¿˜æœ‰getConstructors()å’ŒgetDeclaredConstructors()ï¼Œ getMethods()å’ŒgetDeclaredMethods()ã€‚ </p><p>å› æ­¤ï¼šFieldçš„æ‰“å°å¥½ç†è§£ï¼Œå› ä¸ºsubæ˜¯superç±»çš„å­ç±»ï¼Œä¼šç»§æ‰¿superçš„ç±»<br>åŒæ ·methodå’Œconstructorçš„æ‰“å°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ </p><p>clazz.getAnnotations()å¯ä»¥æ‰“å°å‡ºå½“å‰ç±»çš„æ³¨è§£å’Œçˆ¶ç±»çš„æ³¨è§£<br>clazz.getDeclaredAnnotations()åªä¼šæ‰“å°å‡ºå½“å‰ç±»çš„æ³¨è§£ </p><p>å¦‚æœæ³¨è§£ATableæŠŠ@Inheritå»æ‰ã€‚é‚£ä¹ˆåé¢å››è¡Œçš„è¾“å‡ºç»“æœä¸ºï¼š </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="meta">@annotion</span>.inherit.BTable(name=)</span><br><span class="line">[<span class="meta">@annotion</span>.inherit.BTable(name=)]</span><br><span class="line">[<span class="meta">@annotion</span>.inherit.BTable(name=)]</span><br></pre></td></tr></tbody></table></figure></div><p>*<em>æ— æ³•è·å–åˆ°@ATableçš„æ³¨è§£ï¼Œ ä¹Ÿå°±æ˜¯è¯´æ³¨è§£å’Œæ™®é€šç±»çš„åŒºåˆ«æ˜¯å¦‚æœä¸€ä¸ªå­ç±»æƒ³è·å–åˆ°çˆ¶ç±»ä¸Šçš„æ³¨è§£ä¿¡æ¯ï¼Œ é‚£ä¹ˆå¿…é¡»åœ¨çˆ¶ç±»ä¸Šä½¿ç”¨çš„æ³¨è§£ä¸Šé¢ åŠ ä¸Š@Inheritå…³é”®å­— *</em></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¥çº§ä»£ç æ³¨é‡Šé‰´èµ</title>
      <link href="/2019/05/21/%E7%A5%9E%E7%BA%A7%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A%E9%89%B4%E8%B5%8F/"/>
      <url>/2019/05/21/%E7%A5%9E%E7%BA%A7%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A%E9%89%B4%E8%B5%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/***ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç“¦ç“¦ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åé½±é¾ å·±ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…ç“¦è»Šå·±ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¹™é¾é¾ æ¯‹æ—¥ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶ä¹™å·±æ¯‹æ¯‹ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åé¾ é¦¬é¬¼è»Šç“¦ã€€ã€€ã€€ã€€ã€€ã€€å·±åç“¦æ¯‹æ¯‹ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€é¬¼é¦¬é¾ é¦¬é¾ åã€€ã€€ã€€ã€€å·±å·±æ¯‹è»Šæ¯‹ç“¦ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ¯‹é¾ é¾ é¾é¾ é¬¼ä¹™ä¸¶ä¸¶ä¹™è»Šä¹™æ¯‹é¬¼è»Šå·±ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¹™é¾ é¾é¾é¬¼é¾ç“¦ã€€åç“¦æ¯‹ä¹™ç“¦é¾ ç“¦äº…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€é¦¬é½±é¾é¦¬é¬¼åä¸¶æ—¥å·±å·±å·±æ¯‹è»Šä¹™ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å·±é½±é¦¬é¬¼è»Šååæ¯‹æ—¥ä¹™å·±å·±ä¹™ä¹™ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€è»Šé¦¬é½±é½±æ—¥ä¹™æ¯‹ç“¦å·±ä¹™ç“¦æ—¥äº…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…è»Šé½ºé¾–ç“¦ä¹™è»Šé¾–é¾ä¹™ä¹™åã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ—¥é¾ é¾ åäº…è»Šé¾æ¯‹ååã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ—¥æ¯‹å·±äº…ã€€å·±å·±åäº…äº…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶å·±ååä¹™ã€€ã€€ä¸¶ä¸¶ä¸¶ä¸¶ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…å·±åé¾é¾–ç“¦ã€€ã€€ä¸¶ã€€ä¸¶ã€€ä¹™åã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…å·±åé¾ é¾–æ¯‹ã€€ä¸¶ä¸¶ã€€ã€€ä¸¶å·±é¬¼é¬¼ç“¦äº…ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åæ—¥ååæ—¥äº…ä¸¶äº…ä¸¶ã€€ä¸¶åæ—¥æ¯‹é¬¼é¦¬é¦¬è»Šä¹™ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åæ—¥ä¹™åäº…äº…äº…ä¸¶ã€€ã€€åä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½ºé¦¬ä¹™ã€€ã€€ã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶ç“¦å·±ä¹™ååäº…ä¸¶äº…ä¹™ä¹™ä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½±é½ºé½ºé¬¼åã€€ã€€ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¹™ä¹™åååäº…ä¹™ç“¦ç“¦å·±æ—¥ç“¦æ¯‹é¬¼é¬¼é¾ é½±é½±é¾é¾é½±é½±æ¯‹ä¸¶ã€€</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…ååååä¹™ç“¦è»Šæ¯‹ç“¦ç“¦æ—¥è»Šé¦¬é¾ é¾é¾é¾é¾é¾é¾ é¾ é¾ é¦¬äº…</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ååååå·±æ¯‹è»Šç“¦ç“¦ç“¦ç“¦é¬¼é¦¬é¾ é¾é¾ é¾ é¾é¾ é¾ é¾ é¦¬é¾ è»Š</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…ååæ—¥æ¯‹ç“¦æ—¥æ—¥ç“¦é¬¼é¬¼é¬¼é¾ é¾ é¦¬é¦¬é¾ é¾é¾é¾ é¦¬é¦¬è»Š</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…äº…äº…ä¹™ç“¦ç“¦æ¯‹è»Šè»Šè»Šé¦¬é¾é¾ é¬¼é¬¼é¦¬é¾ é¾é¾é¾ é¦¬é¦¬é¬¼</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶ä¸¶ä¹™äº…äº…ä¹™è»Šé¬¼é¬¼é¬¼æ¯‹è»Šé¾é¾é¾ é¬¼é¦¬é¦¬é¾ é¾é½±é½±é¾é¦¬é¬¼</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…å·±ååå·±åæ—¥é¬¼é¬¼è»Šç“¦æ¯‹é¾ é¾é¾ é¦¬é¦¬é¾ é¾ é¾ é½±é½ºé½ºé½±é¾ é¬¼</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…ä¹™ä¹™ä¹™åè»Šé¦¬è»Šæ¯‹é¦¬é½±é½±é¾é¾ é¾ é¾ é¦¬é¾ é¾é½±é¾é¾ é¾ é¬¼ç“¦</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶æ¯‹é¾ é¬¼è»Šç“¦è»Šé¦¬é¾ é¾é¾ é¾ é¾é½±é½±é¾ é¦¬é¦¬é¬¼æ¯‹æ—¥</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åä¹™å·±æ—¥åã€€ã€€ä¸¶å·±é¬¼é¾é½±é½ºé½±é¾é¦¬é¦¬é¦¬è»Šæ¯‹å·±</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶åå·±ä¹™äº…ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€äº…ç“¦é¦¬é¾ é¾é¾ é¾ é¦¬æ¯‹ç“¦ä¹™</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶ååä¹™äº…åã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…å·±ç“¦è»Šé¦¬é¾ é¬¼è»Šç“¦ä¹™</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶åä¹™ååä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶ä¸¶äº…åç“¦é¬¼è»Šç“¦å·±</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶äº…äº…ä¸¶ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº…æ—¥ç“¦æ—¥</span><br><span class="line"> *ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¶</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”</span><br><span class="line"> * â”‚Escâ”‚   â”‚ F1â”‚ F2â”‚ F3â”‚ F4â”‚ â”‚ F5â”‚ F6â”‚ F7â”‚ F8â”‚ â”‚ F9â”‚F10â”‚F11â”‚F12â”‚ â”‚P/Sâ”‚S Lâ”‚P/Bâ”‚  â”Œâ”    â”Œâ”    â”Œâ”</span><br><span class="line"> * â””â”€â”€â”€â”˜   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜  â””â”˜    â””â”˜    â””â”˜</span><br><span class="line"> * â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”</span><br><span class="line"> * â”‚~ `â”‚! 1â”‚@ 2â”‚# 3â”‚$ 4â”‚% 5â”‚^ 6â”‚& 7â”‚* 8â”‚( 9â”‚) 0â”‚_ -â”‚+ =â”‚ BacSp â”‚ â”‚Insâ”‚Homâ”‚PUpâ”‚ â”‚N Lâ”‚ / â”‚ * â”‚ - â”‚</span><br><span class="line"> * â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤</span><br><span class="line"> * â”‚ Tab â”‚ Q â”‚ W â”‚ E â”‚ R â”‚ T â”‚ Y â”‚ U â”‚ I â”‚ O â”‚ P â”‚{ [â”‚} ]â”‚ | \ â”‚ â”‚Delâ”‚Endâ”‚PDnâ”‚ â”‚ 7 â”‚ 8 â”‚ 9 â”‚   â”‚</span><br><span class="line"> * â”œâ”€â”€â”€â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”€â”€â”€â”€â”€â”¤ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ + â”‚</span><br><span class="line"> * â”‚ Caps â”‚ A â”‚ S â”‚ D â”‚ F â”‚ G â”‚ H â”‚ J â”‚ K â”‚ L â”‚: ;â”‚" 'â”‚ Enter  â”‚               â”‚ 4 â”‚ 5 â”‚ 6 â”‚   â”‚</span><br><span class="line"> * â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”Œâ”€â”€â”€â”     â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤</span><br><span class="line"> * â”‚ Shift  â”‚ Z â”‚ X â”‚ C â”‚ V â”‚ B â”‚ N â”‚ M â”‚< ,â”‚> .â”‚? /â”‚  Shift   â”‚     â”‚ â†‘ â”‚     â”‚ 1 â”‚ 2 â”‚ 3 â”‚   â”‚</span><br><span class="line"> * â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â” â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”¤ Eâ”‚â”‚</span><br><span class="line"> * â”‚ Ctrlâ”‚    â”‚Alt â”‚         Space         â”‚ Altâ”‚    â”‚    â”‚Ctrlâ”‚ â”‚ â† â”‚ â†“ â”‚ â†’ â”‚ â”‚   0   â”‚ . â”‚â†â”€â”˜â”‚</span><br><span class="line"> * â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *                    _ooOoo_</span><br><span class="line"> *                   o8888888o</span><br><span class="line"> *                   88" . "88</span><br><span class="line"> *                   (| -_- |)</span><br><span class="line"> *                    O\ = /O</span><br><span class="line"> *                ____/`---'\____</span><br><span class="line"> *              .   ' \\| |// `.</span><br><span class="line"> *               / \\||| : |||// \</span><br><span class="line"> *             / _||||| -:- |||||- \</span><br><span class="line"> *               | | \\\ - /// | |</span><br><span class="line"> *             | \_| ''\---/'' | |</span><br><span class="line"> *              \ .-\__ `-` ___/-. /</span><br><span class="line"> *           ___`. .' /--.--\ `. . __</span><br><span class="line"> *        ."" '< `.___\_<|>_/___.' >'"".</span><br><span class="line"> *       | | : `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line"> *         \ \ `-. \_ __\ /__ _/ .-` / /</span><br><span class="line"> * ======`-.____`-.___\_____/___.-`____.-'======</span><br><span class="line"> *                    `=---='</span><br><span class="line"> *</span><br><span class="line"> * .............................................</span><br><span class="line"> *          ä½›ç¥–ä¿ä½‘             æ°¸æ— BUG</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *  ä½›æ›°:</span><br><span class="line"> *          å†™å­—æ¥¼é‡Œå†™å­—é—´ï¼Œå†™å­—é—´é‡Œç¨‹åºå‘˜ï¼›</span><br><span class="line"> *          ç¨‹åºäººå‘˜å†™ç¨‹åºï¼Œåˆæ‹¿ç¨‹åºæ¢é…’é’±ã€‚</span><br><span class="line"> *          é…’é†’åªåœ¨ç½‘ä¸Šåï¼Œé…’é†‰è¿˜æ¥ç½‘ä¸‹çœ ï¼›</span><br><span class="line"> *          é…’é†‰é…’é†’æ—¥å¤æ—¥ï¼Œç½‘ä¸Šç½‘ä¸‹å¹´å¤å¹´ã€‚</span><br><span class="line"> *          ä½†æ„¿è€æ­»ç”µè„‘é—´ï¼Œä¸æ„¿é èº¬è€æ¿å‰ï¼›</span><br><span class="line"> *          å¥”é©°å®é©¬è´µè€…è¶£ï¼Œå…¬äº¤è‡ªè¡Œç¨‹åºå‘˜ã€‚</span><br><span class="line"> *          åˆ«äººç¬‘æˆ‘å¿’ç–¯ç™«ï¼Œæˆ‘ç¬‘è‡ªå·±å‘½å¤ªè´±ï¼›</span><br><span class="line"> *          ä¸è§æ»¡è¡—æ¼‚äº®å¦¹ï¼Œå“ªä¸ªå½’å¾—ç¨‹åºå‘˜ï¼Ÿ</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * _ooOoo_</span><br><span class="line"> * o8888888o</span><br><span class="line"> * 88" . "88</span><br><span class="line"> * (| -_- |)</span><br><span class="line"> *  O\ = /O</span><br><span class="line"> * ___/`---'\____</span><br><span class="line"> * .   ' \\| |// `.</span><br><span class="line"> * / \\||| : |||// \</span><br><span class="line"> * / _||||| -:- |||||- \</span><br><span class="line"> * | | \\\ - /// | |</span><br><span class="line"> * | \_| ''\---/'' | |</span><br><span class="line"> * \ .-\__ `-` ___/-. /</span><br><span class="line"> * ___`. .' /--.--\ `. . __</span><br><span class="line"> * ."" '< `.___\_<|>_/___.' >'"".</span><br><span class="line"> * | | : `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line"> * \ \ `-. \_ __\ /__ _/ .-` / /</span><br><span class="line"> * ======`-.____`-.___\_____/___.-`____.-'======</span><br><span class="line"> * `=---='</span><br><span class="line"> *          .............................................</span><br><span class="line"> *           ä½›æ›°ï¼šbugæ³›æ»¥ï¼Œæˆ‘å·²ç˜«ç—ªï¼</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *</span><br><span class="line"> *   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–ˆ    â–ˆâ–ˆ  â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„   â–ˆâ–ˆ â–„â–ˆâ–€       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—</span><br><span class="line"> * â–“â–ˆâ–ˆ   â–’ â–ˆâ–ˆ  â–“â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–€ â–€â–ˆ   â–ˆâ–ˆâ–„â–ˆâ–’        â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•</span><br><span class="line"> * â–’â–ˆâ–ˆâ–ˆâ–ˆ â–‘â–“â–ˆâ–ˆ  â–’â–ˆâ–ˆâ–‘â–’â–“â–ˆ    â–„ â–“â–ˆâ–ˆâ–ˆâ–„â–‘        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—</span><br><span class="line"> * â–‘â–“â–ˆâ–’  â–‘â–“â–“â–ˆ  â–‘â–ˆâ–ˆâ–‘â–’â–“â–“â–„ â–„â–ˆâ–ˆâ–’â–“â–ˆâ–ˆ â–ˆâ–„        â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘</span><br><span class="line"> * â–‘â–’â–ˆâ–‘   â–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’ â–“â–ˆâ–ˆâ–ˆâ–€ â–‘â–’â–ˆâ–ˆâ–’ â–ˆâ–„       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•</span><br><span class="line"> *  â–’ â–‘   â–‘â–’â–“â–’ â–’ â–’ â–‘ â–‘â–’ â–’  â–‘â–’ â–’â–’ â–“â–’       â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•</span><br><span class="line"> *  â–‘     â–‘â–‘â–’â–‘ â–‘ â–‘   â–‘  â–’   â–‘ â–‘â–’ â–’â–‘</span><br><span class="line"> *  â–‘ â–‘    â–‘â–‘â–‘ â–‘ â–‘ â–‘        â–‘ â–‘â–‘ â–‘</span><br><span class="line"> *           â–‘     â–‘ â–‘      â–‘  â–‘</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                    .::::.</span><br><span class="line"> *                  .::::::::.</span><br><span class="line"> *                 :::::::::::  FUCK YOU</span><br><span class="line"> *             ..:::::::::::'</span><br><span class="line"> *           '::::::::::::'</span><br><span class="line"> *             .::::::::::</span><br><span class="line"> *        '::::::::::::::..</span><br><span class="line"> *             ..::::::::::::.</span><br><span class="line"> *           ``::::::::::::::::</span><br><span class="line"> *            ::::``:::::::::'        .:::.</span><br><span class="line"> *           ::::'   ':::::'       .::::::::.</span><br><span class="line"> *         .::::'      ::::     .:::::::'::::.</span><br><span class="line"> *        .:::'       :::::  .:::::::::' ':::::.</span><br><span class="line"> *       .::'        :::::.:::::::::'      ':::::.</span><br><span class="line"> *      .::'         ::::::::::::::'         ``::::.</span><br><span class="line"> *  ...:::           ::::::::::::'              ``::.</span><br><span class="line"> * ```` ':.          ':::::::::'                  ::::..</span><br><span class="line"> *                    '.:::::'                    ':'````..</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *      â”Œâ”€â”       â”Œâ”€â”</span><br><span class="line"> *   â”Œâ”€â”€â”˜ â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”´â”€â”€â”</span><br><span class="line"> *   â”‚                 â”‚</span><br><span class="line"> *   â”‚       â”€â”€â”€       â”‚</span><br><span class="line"> *   â”‚  â”€â”¬â”˜       â””â”¬â”€  â”‚</span><br><span class="line"> *   â”‚                 â”‚</span><br><span class="line"> *   â”‚       â”€â”´â”€       â”‚</span><br><span class="line"> *   â”‚                 â”‚</span><br><span class="line"> *   â””â”€â”€â”€â”         â”Œâ”€â”€â”€â”˜</span><br><span class="line"> *       â”‚         â”‚</span><br><span class="line"> *       â”‚         â”‚</span><br><span class="line"> *       â”‚         â”‚</span><br><span class="line"> *       â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line"> *       â”‚                        â”‚</span><br><span class="line"> *       â”‚                        â”œâ”€â”</span><br><span class="line"> *       â”‚                        â”Œâ”€â”˜</span><br><span class="line"> *       â”‚                        â”‚</span><br><span class="line"> *       â””â”€â”  â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”  â”Œâ”€â”€â”˜</span><br><span class="line"> *         â”‚ â”€â”¤ â”€â”¤       â”‚ â”€â”¤ â”€â”¤</span><br><span class="line"> *         â””â”€â”€â”´â”€â”€â”˜       â””â”€â”€â”´â”€â”€â”˜</span><br><span class="line"> *                ç¥å…½ä¿ä½‘</span><br><span class="line"> *               ä»£ç æ— BUG!</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                  ___====-_  _-====___</span><br><span class="line"> *            _--^^^#####//      \\#####^^^--_</span><br><span class="line"> *         _-^##########// (    ) \\##########^-_</span><br><span class="line"> *        -############//  |\^^/|  \\############-</span><br><span class="line"> *      _/############//   (@::@)   \\############\_</span><br><span class="line"> *     /#############((     \\//     ))#############\</span><br><span class="line"> *    -###############\\    (oo)    //###############-</span><br><span class="line"> *   -#################\\  / VV \  //#################-</span><br><span class="line"> *  -###################\\/      \//###################-</span><br><span class="line"> * _#/|##########/\######(   /\   )######/\##########|\#_</span><br><span class="line"> * |/ |#/\#/\#/\/  \#/\##\  |  |  /##/\#/  \/\#/\#/\#| \|</span><br><span class="line"> * `  |/  V  V  `   V  \#\| |  | |/#/  V   '  V  V  \|  '</span><br><span class="line"> *    `   `  `      `   / | |  | | \   '      '  '   '</span><br><span class="line"> *                     (  | |  | |  )</span><br><span class="line"> *                    __\ | |  | | /__</span><br><span class="line"> *                   (vvv(VVV)(VVV)vvv)                </span><br><span class="line"> *                        ç¥å…½ä¿ä½‘</span><br><span class="line"> *                       ä»£ç æ— BUG!</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *</span><br><span class="line"> *</span><br><span class="line"> *                                                    __----~~~~~~~~~~~------___</span><br><span class="line"> *                                   .  .   ~~//====......          __--~ ~~</span><br><span class="line"> *                   -.            \_|//     |||\\  ~~~~~~::::... /~</span><br><span class="line"> *                ___-==_       _-~o~  \/    |||  \\            _/~~-</span><br><span class="line"> *        __---~~~.==~||\=_    -_--~/_-~|-   |\\   \\        _/~</span><br><span class="line"> *    _-~~     .=~    |  \\-_    '-~7  /-   /  ||    \      /</span><br><span class="line"> *  .~       .~       |   \\ -_    /  /-   /   ||      \   /</span><br><span class="line"> * /  ____  /         |     \\ ~-_/  /|- _/   .||       \ /</span><br><span class="line"> * |~~    ~~|--~~~~--_ \     ~==-/   | \~--===~~        .\</span><br><span class="line"> *          '         ~-|      /|    |-~\~~       __--~~</span><br><span class="line"> *                      |-~~-_/ |    |   ~\_   _-~            /\</span><br><span class="line"> *                           /  \     \__   \/~                \__</span><br><span class="line"> *                       _--~ _/ | .-~~____--~-/                  ~~==.</span><br><span class="line"> *                      ((->/~   '.|||' -_|    ~~-/ ,              . _||</span><br><span class="line"> *                                 -_     ~\      ~~---l__i__i__i--~~_/</span><br><span class="line"> *                                 _-~-__   ~)  \--______________--~~</span><br><span class="line"> *                               //.-~~~-~_--~- |-------~~~~~~~~</span><br><span class="line"> *                                      //.-~~~--\</span><br><span class="line"> *                               ç¥å…½ä¿ä½‘</span><br><span class="line"> *                              ä»£ç æ— BUG!</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/***                              _</span><br><span class="line"> *  _._ _..._ .-',     _.._(`))</span><br><span class="line"> * '-. `     '  /-._.-'    ',/</span><br><span class="line"> *    )         \            '.</span><br><span class="line"> *   / _    _    |             \</span><br><span class="line"> *  |  a    a    /              |</span><br><span class="line"> *  \   .-.                     ;</span><br><span class="line"> *   '-('' ).-'       ,'       ;</span><br><span class="line"> *      '-;           |      .'</span><br><span class="line"> *         \           \    /</span><br><span class="line"> *         | 7  .__  _.-\   \</span><br><span class="line"> *         | |  |  ``/  /`  /</span><br><span class="line"> *        /,_|  |   /,_/   /</span><br><span class="line"> *           /,_/      '`-'</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> **************************************************************</span><br><span class="line"> *                                                            *</span><br><span class="line"> *   .=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-.       *</span><br><span class="line"> *    |                     ______                     |      *</span><br><span class="line"> *    |                  .-"      "-.                  |      *</span><br><span class="line"> *    |                 /            \                 |      *</span><br><span class="line"> *    |     _          |              |          _     |      *</span><br><span class="line"> *    |    ( \         |,  .-.  .-.  ,|         / )    |      *</span><br><span class="line"> *    |     > "=._     | )(__/  \__)( |     _.=" <     |      *</span><br><span class="line"> *    |    (_/"=._"=._ |/     /\     \| _.="_.="\_)    |      *</span><br><span class="line"> *    |           "=._"(_     ^^     _)"_.="           |      *</span><br><span class="line"> *    |               "=\__|IIIIII|__/="               |      *</span><br><span class="line"> *    |              _.="| \IIIIII/ |"=._              |      *</span><br><span class="line"> *    |    _     _.="_.="\          /"=._"=._     _    |      *</span><br><span class="line"> *    |   ( \_.="_.="     `--------`     "=._"=._/ )   |      *</span><br><span class="line"> *    |    > _.="                            "=._ <    |      *</span><br><span class="line"> *    |   (_/                                    \_)   |      *</span><br><span class="line"> *    |                                                |      *</span><br><span class="line"> *    '-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-='      *</span><br><span class="line"> *                                                            *</span><br><span class="line"> *           LASCIATE OGNI SPERANZA, VOI CH'ENTRATE           *</span><br><span class="line"> **************************************************************</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *                                         ,s555SB@@&                          </span><br><span class="line"> *                                      :9H####@@@@@Xi                        </span><br><span class="line"> *                                     1@@@@@@@@@@@@@@8                       </span><br><span class="line"> *                                   ,8@@@@@@@@@B@@@@@@8                      </span><br><span class="line"> *                                  :B@@@@X3hi8Bs;B@@@@@Ah,                   </span><br><span class="line"> *             ,8i                  r@@@B:     1S ,M@@@@@@#8;                 </span><br><span class="line"> *            1AB35.i:               X@@8 .   SGhr ,A@@@@@@@@S                </span><br><span class="line"> *            1@h31MX8                18Hhh3i .i3r ,A@@@@@@@@@5               </span><br><span class="line"> *            ;@&i,58r5                 rGSS:     :B@@@@@@@@@@A               </span><br><span class="line"> *             1#i  . 9i                 hX.  .: .5@@@@@@@@@@@1               </span><br><span class="line"> *              sG1,  ,G53s.              9#Xi;hS5 3B@@@@@@@B1                </span><br><span class="line"> *               .h8h.,A@@@MXSs,           #@H1:    3ssSSX@1                  </span><br><span class="line"> *               s ,@@@@@@@@@@@@Xhi,       r#@@X1s9M8    .GA981               </span><br><span class="line"> *               ,. rS8H#@@@@@@@@@@#HG51;.  .h31i;9@r    .8@@@@BS;i;          </span><br><span class="line"> *                .19AXXXAB@@@@@@@@@@@@@@#MHXG893hrX#XGGXM@@@@@@@@@@MS        </span><br><span class="line"> *                s@@MM@@@hsX#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&,      </span><br><span class="line"> *              :GB@#3G@@Brs ,1GM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B,     </span><br><span class="line"> *            .hM@@@#@@#MX 51  r;iSGAM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8     </span><br><span class="line"> *          :3B@@@@@@@@@@@&9@h :Gs   .;sSXH@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:    </span><br><span class="line"> *      s&HA#@@@@@@@@@@@@@@M89A;.8S.       ,r3@@@@@@@@@@@@@@@@@@@@@@@@@@@r    </span><br><span class="line"> *   ,13B@@@@@@@@@@@@@@@@@@@5 5B3 ;.         ;@@@@@@@@@@@@@@@@@@@@@@@@@@@i    </span><br><span class="line"> *  5#@@#&@@@@@@@@@@@@@@@@@@9  .39:          ;@@@@@@@@@@@@@@@@@@@@@@@@@@@;    </span><br><span class="line"> *  9@@@X:MM@@@@@@@@@@@@@@@#;    ;31.         H@@@@@@@@@@@@@@@@@@@@@@@@@@:    </span><br><span class="line"> *   SH#@B9.rM@@@@@@@@@@@@@B       :.         3@@@@@@@@@@@@@@@@@@@@@@@@@@5    </span><br><span class="line"> *     ,:.   9@@@@@@@@@@@#HB5                 .M@@@@@@@@@@@@@@@@@@@@@@@@@B    </span><br><span class="line"> *           ,ssirhSM@&1;i19911i,.             s@@@@@@@@@@@@@@@@@@@@@@@@@@S   </span><br><span class="line"> *              ,,,rHAri1h1rh&@#353Sh:          8@@@@@@@@@@@@@@@@@@@@@@@@@#:  </span><br><span class="line"> *            .A3hH@#5S553&@@#h   i:i9S          #@@@@@@@@@@@@@@@@@@@@@@@@@A.</span><br><span class="line"> *</span><br><span class="line"> *</span><br><span class="line"> *    åˆçœ‹æºç ï¼Œçœ‹ä½ å¦¹å¦¹å‘€ï¼</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *_______________#########_______________________</span><br><span class="line"> *______________############_____________________</span><br><span class="line"> *______________#############____________________</span><br><span class="line"> *_____________##__###########___________________</span><br><span class="line"> *____________###__######_#####__________________</span><br><span class="line"> *____________###_#######___####_________________</span><br><span class="line"> *___________###__##########_####________________</span><br><span class="line"> *__________####__###########_####_______________</span><br><span class="line"> *________#####___###########__#####_____________</span><br><span class="line"> *_______######___###_########___#####___________</span><br><span class="line"> *_______#####___###___########___######_________</span><br><span class="line"> *______######___###__###########___######_______</span><br><span class="line"> *_____######___####_##############__######______</span><br><span class="line"> *____#######__#####################_#######_____</span><br><span class="line"> *____#######__##############################____</span><br><span class="line"> *___#######__######_#################_#######___</span><br><span class="line"> *___#######__######_######_#########___######___</span><br><span class="line"> *___#######____##__######___######_____######___</span><br><span class="line"> *___#######________######____#####_____#####____</span><br><span class="line"> *____######________#####_____#####_____####_____</span><br><span class="line"> *_____#####________####______#####_____###______</span><br><span class="line"> *______#####______;###________###______#________</span><br><span class="line"> *________##_______####________####______________</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> *           _.._        ,------------.</span><br><span class="line"> *        ,'      `.    ( We want you! )</span><br><span class="line"> *       /  __) __` \    `-,----------'</span><br><span class="line"> *      (  (`-`(-')  ) _.-'</span><br><span class="line"> *      /)  \  = /  (</span><br><span class="line"> *     /'    |--' .  \</span><br><span class="line"> *    (  ,---|  `-.)__`</span><br><span class="line"> *     )(  `-.,--'   _`-.</span><br><span class="line"> *    '/,'          (  Uu",</span><br><span class="line"> *     (_       ,    `/,-' )</span><br><span class="line"> *     `.__,  : `-'/  /`--'</span><br><span class="line"> *       |     `--'  |</span><br><span class="line"> *       `   `-._   /</span><br><span class="line"> *        \        (</span><br><span class="line"> *        /\ .      \.  freebuf</span><br><span class="line"> *       / |` \     ,-\</span><br><span class="line"> *      /  \| .)   /   \</span><br><span class="line"> *     ( ,'|\    ,'     :</span><br><span class="line"> *     | \,`.`--"/      }</span><br><span class="line"> *     `,'    \  |,'    /</span><br><span class="line"> *    / "-._   `-/      |</span><br><span class="line"> *    "-.   "-.,'|     ;</span><br><span class="line"> *   /        _/["---'""]</span><br><span class="line"> *  :        /  |"-     '</span><br><span class="line"> *  '           |      /</span><br><span class="line"> *              `      |</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * http://www.flvcd.com/</span><br><span class="line"> *  .--,       .--,</span><br><span class="line"> * ( (  \.---./  ) )</span><br><span class="line"> *  '.__/o   o\__.'</span><br><span class="line"> *     {=  ^  =}</span><br><span class="line"> *      >  -  <</span><br><span class="line"> *     /       \</span><br><span class="line"> *    //       \\</span><br><span class="line"> *   //|   .   |\\</span><br><span class="line"> *   "'\       /'"_.-~^`'-.</span><br><span class="line"> *      \  _  /--'         `</span><br><span class="line"> *    ___)( )(___</span><br><span class="line"> *   (((__) (__)))    é«˜å±±ä»°æ­¢,æ™¯è¡Œè¡Œæ­¢.è™½ä¸èƒ½è‡³,å¿ƒå‘å¾€ä¹‹ã€‚</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * è¿™ä¸ªå…¬å¸æ²¡æœ‰å¹´ç»ˆå¥–çš„,å…„å¼Ÿåˆ«æŒ‡æœ›äº†,ä¹Ÿåˆ«æ¥äº†,æˆ‘å‡†å¤‡è¾èŒäº†</span><br><span class="line"> * å¦å¤–è¿™ä¸ªé¡¹ç›®æœ‰å¾ˆå¤š*Bug* ä½ åšæŒä¸äº†å¤šä¹…çš„,æ‹œæ‹œ!</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * 1åªç¾Š == one sheep</span><br><span class="line"> * 2åªç¾Š == two sheeps</span><br><span class="line"> * 3åªç¾Š == three sheeps</span><br><span class="line"> * 4åªç¾Š == four sheeps</span><br><span class="line"> * 5åªç¾Š == five sheeps</span><br><span class="line"> * 6åªç¾Š == six sheeps</span><br><span class="line"> * 7åªç¾Š == seven sheeps</span><br><span class="line"> * 8åªç¾Š == eight sheeps</span><br><span class="line"> * 9åªç¾Š == nine sheeps</span><br><span class="line"> * 10åªç¾Š == ten sheeps</span><br><span class="line"> * 11åªç¾Š == eleven sheeps</span><br><span class="line"> * 12åªç¾Š == twelve sheeps</span><br><span class="line"> * 13åªç¾Š == thirteen sheeps</span><br><span class="line"> * 14åªç¾Š == fourteen sheeps</span><br><span class="line"> * 15åªç¾Š == fifteen sheeps</span><br><span class="line"> * 16åªç¾Š == sixteen sheeps</span><br><span class="line"> * 17åªç¾Š == seventeen sheeps</span><br><span class="line"> * 18åªç¾Š == eighteen sheeps</span><br><span class="line"> * 19åªç¾Š == nineteen sheeps</span><br><span class="line"> * 20åªç¾Š == twenty sheeps</span><br><span class="line"> * 21åªç¾Š == twenty one sheeps</span><br><span class="line"> * 22åªç¾Š == twenty two sheeps</span><br><span class="line"> * 23åªç¾Š == twenty three sheeps</span><br><span class="line"> * 24åªç¾Š == twenty four sheeps</span><br><span class="line"> * 25åªç¾Š == twenty five sheeps</span><br><span class="line"> * 26åªç¾Š == twenty six sheeps</span><br><span class="line"> * 27åªç¾Š == twenty seven sheeps</span><br><span class="line"> * 28åªç¾Š == twenty eight sheeps</span><br><span class="line"> * 29åªç¾Š == twenty nine sheeps</span><br><span class="line"> * 30åªç¾Š == thirty sheeps</span><br><span class="line"> * ç°åœ¨çŒç¡äº†å§ï¼Œå¥½äº†ï¼Œä¸è¦å†æ”¹ä¸‹é¢çš„ä»£ç äº†ï¼Œç¡è§‰å’¯~~</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * ç¨‹åºå‘˜1ï¼ˆäº2010å¹´6æœˆ7æ—¥ï¼‰ï¼šåœ¨è¿™ä¸ªå‘ä¸´æ—¶åŠ å…¥ä¸€äº›è°ƒæ–™</span><br><span class="line"> * ç¨‹åºå‘˜2ï¼ˆäº2011å¹´5æœˆ22æ—¥ï¼‰ï¼šä¸´ä½ ä¸ªå±å•Š</span><br><span class="line"> * ç¨‹åºå‘˜3ï¼ˆäº2012å¹´7æœˆ23æ—¥ï¼‰ï¼šæ¥¼ä¸Šéƒ½æ˜¯ç‹—å±ï¼Œé‰´å®šå®Œæ¯•</span><br><span class="line"> * ç¨‹åºå‘˜4ï¼ˆäº2013å¹´8æœˆ2æ—¥ï¼‰ï¼šfuck æ¥¼ä¸Šï¼Œä¸‰å¹´äº†ï¼Œè¿™å‘è¿˜åœ¨ï¼ï¼ï¼</span><br><span class="line"> * ç¨‹åºå‘˜5ï¼ˆäº2014å¹´8æœˆ21æ—¥ï¼‰ï¼šå“ˆå“ˆå“ˆï¼Œè¿™å‘å±…ç„¶å‘äº†è¿™ä¹ˆå¤šäººï¼Œå¹¸å¥½æˆ‘ä¹Ÿä¸ç”¨å¡«äº†ï¼Œç³»ç»Ÿç»ˆæ­¢è¿è¡Œäº†ï¼Œyou're died</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * Dear maintainer:</span><br><span class="line"> *</span><br><span class="line"> * Once you are done trying to 'optimize' this routine,</span><br><span class="line"> * and have realized what a terrible mistake that was,</span><br><span class="line"> * please increment the following counter as a warning</span><br><span class="line"> * to the next guy:</span><br><span class="line"> *</span><br><span class="line"> * total_hours_wasted_here = 42</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line"> * äº²çˆ±çš„ç»´æŠ¤è€…ï¼š</span><br><span class="line"> *</span><br><span class="line"> * å¦‚æœä½ å°è¯•äº†å¯¹è¿™æ®µç¨‹åºè¿›è¡Œ'ä¼˜åŒ–'</span><br><span class="line"> * ä¸‹é¢è¿™ä¸ªè®¡æ•°å™¨çš„ä¸ªæ•°ç”¨æ¥å¯¹åæ¥äººè¿›è¡Œè­¦å‘Š</span><br><span class="line"> *</span><br><span class="line"> * æµªè´¹åœ¨è¿™é‡Œçš„æ€»æ—¶é—´ = 42h</span><br><span class="line"> */</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * When I wrote this, only God and I understood what I was doing</span><br><span class="line"> * Now, God only knows</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line">* å†™è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œåªæœ‰ä¸Šå¸å’Œæˆ‘çŸ¥é“å®ƒæ˜¯å¹²å˜›çš„</span><br><span class="line">* ç°åœ¨ï¼Œåªæœ‰ä¸Šå¸çŸ¥é“</span><br><span class="line">*/</span><br></pre></td></tr></tbody></table></figure></div><p>æœ€åé™„ä¸Šä¸€ä¸ªç½‘ç«™ï¼Œä½ æƒ³è¦çš„ä»–éƒ½è¦ï¼š<a href="http://www.asciiworld.com/" target="_blank" rel="noopener">http://www.asciiworld.com/</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx+Center OS 7.2 å¼€æœºå¯åŠ¨è®¾ç½®</title>
      <link href="/2019/05/16/Nginx+Center%20OS%207.2%20%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/"/>
      <url>/2019/05/16/Nginx+Center%20OS%207.2%20%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>centos 7ä»¥ä¸Šæ˜¯ç”¨Systemdè¿›è¡Œç³»ç»Ÿåˆå§‹åŒ–çš„ï¼ŒSystemd æ˜¯ Linux ç³»ç»Ÿä¸­æœ€æ–°çš„åˆå§‹åŒ–ç³»ç»Ÿï¼ˆinitï¼‰ï¼Œå®ƒä¸»è¦çš„è®¾è®¡ç›®æ ‡æ˜¯å…‹æœ sysvinit å›ºæœ‰çš„ç¼ºç‚¹ï¼Œæé«˜ç³»ç»Ÿçš„å¯åŠ¨é€Ÿåº¦ã€‚å…³äºSystemdçš„è¯¦æƒ…ä»‹ç»åœ¨<a href="www.yourlink.com">è¿™é‡Œ</a>ã€‚</p><p>SystemdæœåŠ¡æ–‡ä»¶ä»¥.serviceç»“å°¾ï¼Œæ¯”å¦‚ç°åœ¨è¦å»ºç«‹nginxä¸ºå¼€æœºå¯åŠ¨ï¼Œå¦‚æœç”¨yum installå‘½ä»¤å®‰è£…çš„ï¼Œyumå‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºnginx.serviceæ–‡ä»¶ï¼Œç›´æ¥ç”¨å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemcel enable nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>è®¾ç½®å¼€æœºå¯åŠ¨å³å¯ã€‚</p><p>åœ¨è¿™é‡Œæˆ‘æ˜¯ç”¨æºç ç¼–è¯‘å®‰è£…çš„ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨åˆ›å»ºnginx.serviceæœåŠ¡æ–‡ä»¶ã€‚<br>å¼€æœºæ²¡æœ‰ç™»é™†æƒ…å†µä¸‹å°±èƒ½è¿è¡Œçš„ç¨‹åºï¼Œå­˜åœ¨ç³»ç»ŸæœåŠ¡ï¼ˆsystemï¼‰é‡Œï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/lib/systemd/system/</span><br></pre></td></tr></tbody></table></figure></div><h3 id="åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx-serviceæ–‡ä»¶"><a href="#åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx-serviceæ–‡ä»¶" class="headerlink" title="åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx.serviceæ–‡ä»¶"></a>åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx.serviceæ–‡ä»¶</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>å†…å®¹å¦‚ä¸‹:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nginx</span><br><span class="line">After=network.target</span><br><span class="line">  </span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/nginx/sbin/nginx</span><br><span class="line">ExecReload=/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line">ExecStop=/usr/local/nginx/sbin/nginx -s quit</span><br><span class="line">PrivateTmp=true</span><br><span class="line">  </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></tbody></table></figure></div><ul><li>[Unit]:æœåŠ¡çš„è¯´æ˜</li><li>Description:æè¿°æœåŠ¡</li><li>After:æè¿°æœåŠ¡ç±»åˆ«</li><li>[Service]æœåŠ¡è¿è¡Œå‚æ•°çš„è®¾ç½®</li><li>Type=forkingæ˜¯åå°è¿è¡Œçš„å½¢å¼</li><li>ExecStartä¸ºæœåŠ¡çš„å…·ä½“è¿è¡Œå‘½ä»¤</li><li>ExecReloadä¸ºé‡å¯å‘½ä»¤</li><li>ExecStopä¸ºåœæ­¢å‘½ä»¤</li><li>PrivateTmp=Trueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´</li></ul><p>æ³¨æ„ï¼š[Service]çš„å¯åŠ¨ã€é‡å¯ã€åœæ­¢å‘½ä»¤å…¨éƒ¨è¦æ±‚ä½¿ç”¨ç»å¯¹è·¯å¾„<br>[Install]è¿è¡Œçº§åˆ«ä¸‹æœåŠ¡å®‰è£…çš„ç›¸å…³è®¾ç½®ï¼Œå¯è®¾ç½®ä¸ºå¤šç”¨æˆ·ï¼Œå³ç³»ç»Ÿè¿è¡Œçº§åˆ«ä¸º3</p><p>ä¿å­˜é€€å‡ºã€‚</p><h3 id="è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºå¯åŠ¨"></a>è®¾ç½®å¼€æœºå¯åŠ¨</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx.service</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><p>å¯åŠ¨nginxæœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>åœæ­¢å¼€æœºè‡ªå¯åŠ¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>é‡æ–°å¯åŠ¨æœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx.service</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --type=service</span><br></pre></td></tr></tbody></table></figure></div><h3 id="Systemd-å‘½ä»¤å’Œ-sysvinit-å‘½ä»¤çš„å¯¹ç…§è¡¨"><a href="#Systemd-å‘½ä»¤å’Œ-sysvinit-å‘½ä»¤çš„å¯¹ç…§è¡¨" class="headerlink" title="Systemd å‘½ä»¤å’Œ sysvinit å‘½ä»¤çš„å¯¹ç…§è¡¨"></a>Systemd å‘½ä»¤å’Œ sysvinit å‘½ä»¤çš„å¯¹ç…§è¡¨</h3><p><a href="https://i.loli.net/2019/05/16/5cdd17a24c56278117.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/16/5cdd17a24c56278117.png" class="lazyload" title="alt"></a></p><h3 id="Sysvinit-è¿è¡Œçº§åˆ«å’Œ-systemd-ç›®æ ‡çš„å¯¹åº”è¡¨"><a href="#Sysvinit-è¿è¡Œçº§åˆ«å’Œ-systemd-ç›®æ ‡çš„å¯¹åº”è¡¨" class="headerlink" title="Sysvinit è¿è¡Œçº§åˆ«å’Œ systemd ç›®æ ‡çš„å¯¹åº”è¡¨"></a>Sysvinit è¿è¡Œçº§åˆ«å’Œ systemd ç›®æ ‡çš„å¯¹åº”è¡¨</h3><p><a href="https://i.loli.net/2019/05/16/5cdd17b62eaf678001.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/05/16/5cdd17b62eaf678001.png" class="lazyload" title="alt"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§ç™½è¯è§£è¯´ï¼ŒåŠåˆ†é’Ÿå°±æ‡‚ --- åˆ†å¸ƒå¼ä¸é›†ç¾¤æ˜¯ä»€ä¹ˆ ï¼Ÿ åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/2019/04/06/%E5%A4%A7%E7%99%BD%E8%AF%9D%E8%A7%A3%E8%AF%B4%EF%BC%8C%E5%8D%8A%E5%88%86%E9%92%9F%E5%B0%B1%E6%87%82%20---%20%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%9B%86%E7%BE%A4%E6%98%AF%E4%BB%80%E4%B9%88%20%EF%BC%9F%20%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/"/>
      <url>/2019/04/06/%E5%A4%A7%E7%99%BD%E8%AF%9D%E8%A7%A3%E8%AF%B4%EF%BC%8C%E5%8D%8A%E5%88%86%E9%92%9F%E5%B0%B1%E6%87%82%20---%20%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%9B%86%E7%BE%A4%E6%98%AF%E4%BB%80%E4%B9%88%20%EF%BC%9F%20%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>PSï¼šè¿™ç¯‡æ–‡ç« ç®—æ˜¯ç¬”è®°ï¼Œä»…éƒ¨åˆ†æ–‡å­—æ˜¯åŸåˆ›ï¼Œç›¸å½“å†…å®¹åªæ˜¯æ”¶é›†ã€æ•´ç†ã€æç‚¼ã€æ€»ç»“åˆ«äººå†™çš„ã€‚</p><p>æ²¡æœ‰æ ‡ä¸ºåŸåˆ› æ˜¯å‡ºäºå¯¹éƒ¨åˆ†å†…å®¹åŸä½œè€…çš„å°Šé‡å’Œæ„Ÿè°¢</p><h2 id="ä¸€ã€å¤§ç™½è¯è§£è¯´ï¼ŒåŠåˆ†é’Ÿå°±æ‡‚ï¼Œç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼š"><a href="#ä¸€ã€å¤§ç™½è¯è§£è¯´ï¼ŒåŠåˆ†é’Ÿå°±æ‡‚ï¼Œç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼š" class="headerlink" title="ä¸€ã€å¤§ç™½è¯è§£è¯´ï¼ŒåŠåˆ†é’Ÿå°±æ‡‚ï¼Œç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼š"></a>ä¸€ã€å¤§ç™½è¯è§£è¯´ï¼ŒåŠåˆ†é’Ÿå°±æ‡‚ï¼Œç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼š</h2><p>å°é¥­åº—åŸæ¥åªæœ‰ä¸€ä¸ªå¨å¸ˆï¼Œåˆ‡èœæ´—èœå¤‡æ–™ç‚’èœå…¨å¹²ã€‚</p><p>åæ¥å®¢äººå¤šäº†ï¼Œå¨æˆ¿ä¸€ä¸ªå¨å¸ˆå¿™ä¸è¿‡æ¥ï¼Œåˆè¯·äº†ä¸ªå¨å¸ˆï¼Œä¸¤ä¸ªå¨å¸ˆéƒ½èƒ½ç‚’ä¸€æ ·çš„èœï¼Œä¸¤ä¸ªå¨å¸ˆçš„å…³ç³»æ˜¯é›†ç¾¤ã€‚</p><p>ä¸ºäº†è®©å¨å¸ˆä¸“å¿ƒç‚’èœï¼ŒæŠŠèœåšåˆ°æè‡´ï¼Œå†è¯·äº†ä¸ªé…èœå¸ˆè´Ÿè´£åˆ‡èœï¼Œå¤‡èœï¼Œå¤‡æ–™ â€¦  å¨å¸ˆå’Œé…èœå¸ˆçš„å…³ç³»æ˜¯åˆ†å¸ƒå¼ã€‚</p><p>ä¸€ä¸ªé…èœå¸ˆä¹Ÿå¿™ä¸è¿‡æ¥äº†ï¼Œåˆè¯·äº†ä¸ªé…èœå¸ˆï¼Œä¸¤ä¸ªé…èœå¸ˆå…³ç³»æ˜¯é›†ç¾¤ã€‚</p><p>ä¸€ä¸ªé…èœå¸ˆå› æ•…è¯·å‡äº†ï¼Œä½†æ˜¯å…¶ä½™çš„é…èœå¸ˆè¿˜æ˜¯è¯¥å•¥å°±å¹²å•¥ï¼Œåªæ˜¯æ²¡è¯·å‡çš„é…èœå¸ˆä»»åŠ¡å‡åŒ€çš„åŠ é‡äº†ï¼Œä½†ä»–ä»¬çš„ä»»åŠ¡å’ŒèŒè´£æ˜¯ä¸å˜çš„ï¼Œè¿™æ˜¯é›†ç¾¤ã€‚</p><p><strong>é›†ç¾¤ï¼šå¤šä¸ªäººåœ¨ä¸€èµ·ä½œåŒæ ·çš„äº‹ ã€‚</strong></p><p><strong>åˆ†å¸ƒå¼ ï¼šå¤šä¸ªäººåœ¨ä¸€èµ·ä½œä¸åŒçš„äº‹ ã€‚</strong></p><h2 id="äºŒã€å›¾è§£ï¼š"><a href="#äºŒã€å›¾è§£ï¼š" class="headerlink" title="äºŒã€å›¾è§£ï¼š"></a>äºŒã€å›¾è§£ï¼š</h2><p><a href="https://i.loli.net/2019/04/16/5cb54e9244f5b.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/04/16/5cb54e9244f5b.png" class="lazyload" title="alt"></a></p><h2 id="ä¸‰ã€åŒºåˆ«è”ç³»-ï¼ˆå…¶å®ä¸Šé¢çš„å†…å®¹åº”è¯¥å·²ç»è®©ä½ ç†è§£2è€…äº†ï¼‰"><a href="#ä¸‰ã€åŒºåˆ«è”ç³»-ï¼ˆå…¶å®ä¸Šé¢çš„å†…å®¹åº”è¯¥å·²ç»è®©ä½ ç†è§£2è€…äº†ï¼‰" class="headerlink" title="ä¸‰ã€åŒºåˆ«è”ç³» ï¼ˆå…¶å®ä¸Šé¢çš„å†…å®¹åº”è¯¥å·²ç»è®©ä½ ç†è§£2è€…äº†ï¼‰"></a>ä¸‰ã€åŒºåˆ«è”ç³» ï¼ˆå…¶å®ä¸Šé¢çš„å†…å®¹åº”è¯¥å·²ç»è®©ä½ ç†è§£2è€…äº†ï¼‰</h2><p>1ã€æˆ‘è®°å¾—åœ¨ä¸€æœ¬è®² tcp/ip çš„ä¹¦ä¸Šæœ‰è¿™æ ·ä¸€å¥è¯ï¼šåˆ†å¸ƒå¼æ˜¯æŒ‡ å¤šä¸ªç³»ç»ŸååŒåˆä½œå®Œæˆä¸€ä¸ªç‰¹å®šä»»åŠ¡çš„ç³»ç»Ÿã€‚</p><p>åˆ†å¸ƒå¼æ˜¯è§£å†³ä¸­å¿ƒåŒ–ç®¡ç†çš„é—®é¢˜ï¼ŒæŠŠæ‰€æœ‰çš„ä»»åŠ¡å åŠ åˆ°ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†ï¼Œå¤ªæ…¢äº†ã€‚</p><p>æ‰€ä»¥æŠŠä¸€ä¸ªå¤§çš„é—®é¢˜æ‹†åˆ†ä¸ºå¤šä¸ªå°çš„é—®é¢˜ï¼Œå¹¶åˆ†åˆ«è§£å†³ï¼Œæœ€ç»ˆååŒåˆä½œã€‚åˆ†å¸ƒå¼çš„ä¸»è¦å·¥ä½œæ˜¯åˆ†è§£ä»»åŠ¡ï¼Œå°†èŒèƒ½æ‹†è§£ã€‚</p><p>2ã€é›†ç¾¤ä¸»è¦çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸ºäº†åˆ†æ‹…è¯·æ±‚çš„å‹åŠ›ï¼Œä¹Ÿå°±æ˜¯åœ¨å‡ ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²ç›¸åŒçš„åº”ç”¨ç¨‹åºï¼Œæ¥åˆ†æ‹…å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p><p>å½“å‹åŠ›è¿›ä¸€æ­¥å¢å¤§çš„æ—¶å€™ï¼Œå¯èƒ½åœ¨éœ€è¦å­˜å‚¨çš„éƒ¨åˆ†ï¼Œmysqlæ— æ³•é¢å¯¹å¾ˆå¤šçš„å†™å‹åŠ›ã€‚å› ä¸ºåœ¨mysqlåšæˆé›†ç¾¤ä¹‹åï¼Œä¸»è¦çš„å†™å‹åŠ›è¿˜æ˜¯åœ¨masterçš„æœºå™¨ä¸Šé¢ï¼Œå…¶ä»–slaveæœºå™¨æ— æ³•åˆ†æ‹…å†™å‹åŠ›ï¼Œä»è€Œè¿™ä¸ªæ—¶å€™ï¼Œä¹Ÿå°±å¼•å‡ºæ¥åˆ†å¸ƒå¼ã€‚</p><p>åˆ†å¸ƒå¼çš„ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯å•å°æœºå™¨å·²ç»æ— æ³•æ»¡è¶³è¿™ç§æ€§èƒ½çš„è¦æ±‚ï¼Œå¿…é¡»è¦èåˆå¤šä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”èŠ‚ç‚¹ä¹‹é—´æ˜¯ç›¸å…³ä¹‹é—´æœ‰äº¤äº’çš„ã€‚ç›¸å½“äºåœ¨å†™mysqlçš„æ—¶å€™ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨éƒ¨åˆ†æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨çš„ç”±æ¥ã€‚åœ¨å­˜å‚¨ä¸€äº›éç»“æ„åŒ–æ•°æ®ï¼šé™æ€æ–‡ä»¶ã€å›¾ç‰‡ã€pdfã€å°è§†é¢‘ â€¦ è¿™äº›ä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„ç”±æ¥ã€‚</p><p>3ã€é›†ç¾¤ä¸»è¦æ˜¯ç®€å•åŠ æœºå™¨è§£å†³é—®é¢˜ï¼Œå¯¹äºé—®é¢˜æœ¬èº«ä¸åšä»»ä½•åˆ†è§£ï¼›</p><p>å¸ƒå¼å¤„ç†é‡Œå¿…ç„¶åŒ…å«ä»»åŠ¡åˆ†è§£ä¸ç­”æ¡ˆå½’å¹¶ã€‚åˆ†å¸ƒå¼ä¸­çš„æŸä¸ªå­ä»»åŠ¡èŠ‚ç‚¹ï¼Œå¯èƒ½ç”±ä¸€ä¸ªé›†ç¾¤æ¥ä»£æ›¿ï¼›é›†ç¾¤ä¸­ä»»ä¸€èŠ‚ç‚¹ï¼Œéƒ½æ˜¯åšä¸€ä¸ªå®Œæ•´çš„ä»»åŠ¡ã€‚</p><p>é›†ç¾¤å’Œåˆ†å¸ƒå¼éƒ½æ˜¯ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œä½†æ˜¯é›†ç¾¤ä¹‹é—´çš„é€šä¿¡åè°ƒåŸºæœ¬ä¸éœ€è¦ï¼›è€Œåˆ†å¸ƒå¼å„ä¸ªèŠ‚ç‚¹çš„é€šä¿¡åè°ƒå¿…ä¸å¯å°‘ã€‚</p><hr><p><strong>å°†ä¸€å¥—ç³»ç»Ÿæ‹†åˆ†æˆä¸åŒå­ç³»ç»Ÿéƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼ˆè¿™å«åˆ†å¸ƒå¼ï¼‰ï¼Œç„¶åéƒ¨ç½²å¤šä¸ªç›¸åŒçš„å­ç³»ç»Ÿåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼ˆè¿™å«é›†ç¾¤ï¼‰ï¼Œéƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„åŒä¸€ä¸ªå­ç³»ç»Ÿåº”åšè´Ÿè½½å‡è¡¡ã€‚</strong></p><p><strong>_åˆ†å¸ƒå¼ï¼šä¸€ä¸ªä¸šåŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå­ä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Š ã€‚ _</strong></p><p>_<strong>é›†ç¾¤ï¼šåŒä¸€ä¸ªä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Š ã€‚</strong><br>_</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring bootç›´æ¥ä½¿ç”¨httpsè®¿é—®</title>
      <link href="/2019/03/11/spring%20boot%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8https%E8%AE%BF%E9%97%AE/"/>
      <url>/2019/03/11/spring%20boot%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8https%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-https"><a href="#spring-boot-https" class="headerlink" title="spring-boot-https"></a>spring-boot-https</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>æˆ‘ä»¬ä½¿ç”¨spring booté…ç½®httpsè¯ä¹¦ï¼Œæ‰“åˆ°åå‘ä»£ç†è®¿é—®httpsçš„æ•ˆæœã€‚ç”±äºç°åœ¨æ‰‹é‡Œæ²¡æœ‰å¯ç”¨çš„è¯ä¹¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨jdkå¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -alias tomcat -keypass 123456 -keyalg RSA -keysize 1024 -validity 365 -keystore D:/tomcat.keystore -storepass 123456</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸Šé¢ä»£ç æˆ‘ä»¬åœ¨Dç›˜ç”Ÿæˆä¸€ä¸ª<strong>å¯†ç ä¸ºï¼š123456</strong>ï¼Œ<strong>åç§°ä¸ºtomcat.keystore</strong>çš„è¯ä¹¦<br><a href="https://i.imgur.com/Zb4NU4L.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Zb4NU4L.png" class="lazyload" title></a></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªspring boot å·¥ç¨‹æŠŠè¯ä¹¦æ‹·è´åˆ°resourcesç›®å½•ä¸‹ï¼Œé…ç½®application.propertiesæ–‡ä»¶ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># httpsç«¯å£å·</span><br><span class="line">server.port=443</span><br><span class="line">http.port=8888</span><br><span class="line"># è¯ä¹¦çš„è·¯å¾„</span><br><span class="line">server.ssl.key-store=classpath:tomcat.keystore</span><br><span class="line"># è¯ä¹¦å¯†ç ï¼Œè¯·ä¿®æ”¹ä¸ºæ‚¨è‡ªå·±è¯ä¹¦çš„å¯†ç </span><br><span class="line">server.ssl.key-password=123456</span><br><span class="line"># ç§˜é’¥åº“ç±»å‹</span><br><span class="line">server.ssl.key-store-type=JKS</span><br><span class="line"># è¯ä¹¦åˆ«å</span><br><span class="line">server.ssl.key-alias=tomcat</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/H9wB6cm.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/H9wB6cm.png" class="lazyload" title></a></p><p>ç„¶åæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªTomcaté…ç½®ç±»å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yi.https.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.Context;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.connector.Connector;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.descriptor.web.SecurityCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.descriptor.web.SecurityConstraint;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * httpè½¬httpsé…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-3-11 22:31:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpsConfig</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›‘å¬çš„httpè¯·æ±‚çš„ç«¯å£,éœ€è¦åœ¨applicationé…ç½®ä¸­æ·»åŠ http.port=ç«¯å£å·  å¦‚80</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"${http.port}"</span>)</span><br><span class="line">    Integer httpPort;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­£å¸¸å¯ç”¨çš„httpsç«¯å£ å¦‚443</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"${server.port}"</span>)</span><br><span class="line">    Integer httpsPort;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®å†…ç½®çš„servletå®¹å™¨å·¥å‚ä¸ºtomcat.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TomcatServletWebServerFactory <span class="title">servletContainer</span><span class="params">()</span> </span>{</span><br><span class="line">        TomcatServletWebServerFactory tomcat = <span class="keyword">new</span> TomcatServletWebServerFactory() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">postProcessContext</span><span class="params">(Context context)</span> </span>{</span><br><span class="line">                SecurityConstraint constraint = <span class="keyword">new</span> SecurityConstraint();</span><br><span class="line">                constraint.setUserConstraint(<span class="string">"CONFIDENTIAL"</span>);</span><br><span class="line">                SecurityCollection collection = <span class="keyword">new</span> SecurityCollection();</span><br><span class="line">                collection.addPattern(<span class="string">"/*"</span>);</span><br><span class="line">                constraint.addCollection(collection);</span><br><span class="line">                context.addConstraint(constraint);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        tomcat.addAdditionalTomcatConnectors(initiateHttpConnector());</span><br><span class="line">        <span class="keyword">return</span> tomcat;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®ä¸€ä¸ªhttpè¿æ¥ä¿¡æ¯.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Connector <span class="title">initiateHttpConnector</span><span class="params">()</span> </span>{</span><br><span class="line">        Connector connector = <span class="keyword">new</span> Connector(<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span>);</span><br><span class="line">        connector.setScheme(<span class="string">"http"</span>);</span><br><span class="line">        connector.setPort(httpPort);</span><br><span class="line">        connector.setSecure(<span class="keyword">false</span>);</span><br><span class="line">        connector.setRedirectPort(httpsPort);</span><br><span class="line">        <span class="keyword">return</span> connector;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¥½äº†æ ¸å¿ƒä»£ç å’Œé…ç½®å¤§åŠŸå‘Šæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®¿é—®ä¸€ä¸‹å§ï¼š<a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a> éšåä»–ä¼šè‡ªåŠ¨è·³åˆ°æˆ‘ä»¬é…ç½®çš„443ç«¯å£</p><p><a href="https://i.imgur.com/XhriQWg.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/XhriQWg.png" class="lazyload" title></a><br>å› ä¸ºæˆ‘ä»¬ä¸æ˜¯å®‰å…¨çš„è¯ä¹¦ï¼Œæ‰€ä»¥ç‚¹å‡»é«˜çº§é‚£é‡Œï¼Œç„¶åç‚¹å‡»ç»§ç»­å‰å¾€</p><p><a href="https://i.imgur.com/6IQ0rXp.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/6IQ0rXp.png" class="lazyload" title></a></p><p>æ¯”è¾ƒç®€å•ï¼Œå…·ä½“çœ‹ä»£ç å§<br><a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-https" target="_blank" rel="noopener">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-https</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Spring Boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Cloudå¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒEureka 2.xåœæ­¢ç»´æŠ¤äº†å’‹åŠï¼Ÿ</title>
      <link href="/2019/02/27/Spring%20Cloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83Eureka%202.x%E5%81%9C%E6%AD%A2%E7%BB%B4%E6%8A%A4%E4%BA%86%E5%92%8B%E5%8A%9E%EF%BC%9F/"/>
      <url>/2019/02/27/Spring%20Cloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83Eureka%202.x%E5%81%9C%E6%AD%A2%E7%BB%B4%E6%8A%A4%E4%BA%86%E5%92%8B%E5%8A%9E%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h1><h3 id="1ã€Eurekaå®˜æ–¹å®£å¸ƒ2-xä¸å†å¼€æº"><a href="#1ã€Eurekaå®˜æ–¹å®£å¸ƒ2-xä¸å†å¼€æº" class="headerlink" title="1ã€Eurekaå®˜æ–¹å®£å¸ƒ2.xä¸å†å¼€æº"></a>1ã€Eurekaå®˜æ–¹å®£å¸ƒ2.xä¸å†å¼€æº</h3><p>å¦‚æœå¯¹Spring Cloudå¾®æœåŠ¡æŠ€æœ¯ä½“ç³»æœ‰ä¸€å®šäº†è§£äº†ä¹‹åï¼Œè‚¯å®šå°±çŸ¥é“Spring Cloudæœ€å¼€å§‹åŸç”Ÿæ”¯æŒå’Œæ¨èçš„æœåŠ¡æ³¨å†Œä¸­å¿ƒæ˜¯å›½å¤–çš„ä¸€ä¸ªè§†é¢‘ç½‘ç«™Netflixå¼€æºçš„Eurekaã€‚</p><p>è¿™ä¸ªEurekaå‘¢ï¼Œåˆåˆ†æˆäº†æ‰€è°“çš„1.xç‰ˆæœ¬å’Œ2.xç‰ˆæœ¬ï¼Œä¹‹å‰åœ¨å›½å†…æ¯”è¾ƒå¸¸ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„éƒ½æ˜¯Eurekaçš„1.xç‰ˆæœ¬ã€‚</p><p>ç„¶åNetflixè¿™ä¸ªå…¬å¸æœ¬èº«ä¸€ç›´åœ¨åšEureka 2.xç‰ˆæœ¬ï¼Œç»“æœåšç€åšç€ï¼Œå¤§å®¶ä¸‡ä¼—ç©ç›®å¾ˆæœŸå¾…çš„æ—¶å€™ã€‚ã€‚ã€‚</p><p><strong>2018å¹´7æœˆï¼Œäººå®¶å®˜æ–¹å°±çªç„¶å®£å¸ƒEureka 2.xåœæ­¢å¼€æºè®¡åˆ’äº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</strong><br><a href="https://i.loli.net/2019/02/27/5c75e3dab6232.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/02/27/5c75e3dab6232.png" class="lazyload" title="alt"></a></p><p>ç”¨ä¸­æ–‡ç»™å¤§å®¶ç¿»è¯‘ä¸€ä¸‹ï¼Œè¿™é‡Œçš„æ„æ€å°±æ˜¯è¯´ï¼š<strong>Eureka 2.0çš„å¼€æºå·¥ä½œå·²ç»åœæ­¢äº†ï¼Œå¦‚æœä½ è¦ç”¨Eureka 2.xç‰ˆæœ¬çš„ä»£ç æ¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„è¯ï¼Œä¸€åˆ‡åæœè¯·è‡ªè´Ÿã€‚</strong></p><p>å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€ï¼Œå°±æ˜¯ä¸æ‰“ç®—æŠŠè¿™ä¸ªäº‹å„¿åšå¤§åšå¼ºä¸‹å»äº†ã€‚</p><p>å½“ç„¶ç°åœ¨å…¶å®Eureka 1.xçš„ç‰ˆæœ¬ä¹Ÿæœ‰ä¸å°‘å…¬å¸åœ¨ç”Ÿäº§ç¯å¢ƒç”¨ï¼Œè€Œä¸”åŸºæœ¬ä¹Ÿè¿˜ç®—èƒ½ç”¨çš„çŠ¶æ€ï¼ŒåŸºæœ¬åŠŸèƒ½è¿˜ç®—æ­£å¸¸ï¼Œåº”ä»˜å¾ˆå¤šå¸¸è§„çš„åœºæ™¯ä¹Ÿè¶³å¤Ÿäº†ã€‚</p><p>ä½†æ˜¯ç°å®å°±æ˜¯è¿™ä¸ªå£°æ˜å‘å‡ºæ¥ï¼Œè®©å¤§ä¼™éƒ½å¿ƒé‡Œä¸€å‡‰ï¼Œæ€ä¹ˆæ„Ÿè§‰è¿™ä¸ªè¿™ä¸ªEurekaæœ‰ç‚¹ä¸å¤ªé è°±äº†å‘¢ï¼Œå’±è¿˜æ•¢ç»§ç»­ç”¨ä¹ˆï¼Œæ²¡é”™ï¼Œå¾ˆå¤šå°ä¼™ä¼´å°±æ˜¯è¿™æ„Ÿè§‰ã€‚</p><h3 id="2ã€äº’è”ç½‘å¤§å‚çš„åŸºç¡€æ¶æ„ï¼šè‡ªç ”æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#2ã€äº’è”ç½‘å¤§å‚çš„åŸºç¡€æ¶æ„ï¼šè‡ªç ”æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="2ã€äº’è”ç½‘å¤§å‚çš„åŸºç¡€æ¶æ„ï¼šè‡ªç ”æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>2ã€äº’è”ç½‘å¤§å‚çš„åŸºç¡€æ¶æ„ï¼šè‡ªç ”æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h3><p>è¿™é‡Œç»™å¤§å®¶è¯´ä¸€å¥é¢˜å¤–è¯ï¼ŒBATã€TMDç­‰ä¸€çº¿äº’è”ç½‘å…¬å¸ï¼ŒåŒ…æ‹¬ä¸€äº›æœ‰ä¸€å®šç ”å‘å®åŠ›çš„ä¸­å¤§å‹äº’è”ç½‘å…¬å¸ï¼Œéƒ½æ˜¯è‡ªç ”äº†å¾®æœåŠ¡æŠ€æœ¯æ¶æ„ä¸­çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚æˆ–è€…æ˜¯åŸºäºå¼€æºçš„Eurekaä¹‹ç±»çš„é¡¹ç›®æ¥åšäºŒæ¬¡å¼€å‘ï¼Œè‡ªè¡Œä¼˜åŒ–é‡Œé¢çš„æ¶æ„ï¼Œè§£å†³é‡åˆ°çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥å¯¹äºæœ‰åŸºç¡€æ¶æ„å›¢é˜Ÿçš„å…¬å¸è€Œè¨€ï¼Œè¿™ä¸ªé—®é¢˜ç›¸å¯¹æ¥è¯´è¿˜æ²¡é‚£ä¹ˆä¸¥é‡ã€‚</p><p>å› ä¸ºå¤§å‚çš„åŸºç¡€æ¶æ„å›¢é˜Ÿï¼Œå®Œå…¨å¯ä»¥æŠŠå¸¸è§çš„å¼€æºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æºç éƒ½æ·±å…¥çœ‹ä¸€éï¼Œç„¶åç»è¿‡å¤§é‡ä¸¥è°¨çš„æµ‹è¯•æ‰¾åˆ°å„ä¸ªå¼€æºæŠ€æœ¯çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚æœ€åå†³å®šæ˜¯ä»0å¼€å§‹è‡ªç ”ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œè¿˜æ˜¯è¯´åŸºäºæŸä¸ªå¼€æºçš„æŠ€æœ¯æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘å’Œä¼˜åŒ–ã€‚</p><p>æ¯”å¦‚è¯´Eureka 1.xä½œä¸ºä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæœ‰ä¸€ä¸ª<strong>éå¸¸å…¸å‹çš„æ¶æ„é—®é¢˜</strong>ã€‚</p><p>è™½ç„¶ä»–å¯ä»¥éƒ¨ç½²é›†ç¾¤æ¶æ„ï¼Œä½†æ˜¯é›†ç¾¤ä¸­æ¯ä¸ªEurekaå®ä¾‹éƒ½æ˜¯å¯¹ç­‰çš„ã€‚æ¯ä¸ªEurekaå®ä¾‹éƒ½åŒ…å«äº†å…¨éƒ¨çš„æœåŠ¡æ³¨å†Œè¡¨ï¼Œæ¯ä¸ªEurekaå®ä¾‹æ¥æ”¶åˆ°äº†æœåŠ¡æ³¨å†Œ/ä¸‹çº¿ç­‰è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šåŒæ­¥è½¬å‘ç»™é›†ç¾¤ä¸­å…¶ä»–çš„Eurekaå®ä¾‹ï¼Œå®ç°é›†ç¾¤æ•°æ®åŒæ­¥ã€‚</p><p>å¤§å®¶çœ‹ä¸‹é¢çš„å›¾ï¼Œå¤§æ¦‚å°±æ˜¯ä¸€ä¸ªç¤ºæ„ã€‚<br><a href="https://i.loli.net/2019/02/27/5c75e44b78aac.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/02/27/5c75e44b78aac.png" class="lazyload" title="alt"></a></p><p><strong>é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†</strong>ï¼šå¦‚æœæ˜¯æ”¯æŒè¶…å¤§è§„æ¨¡çš„æœåŠ¡é›†ç¾¤ï¼Œè¿™æ ·çš„æ¨¡å¼èƒ½è¡Œä¹ˆï¼Ÿ</p><p>æ¯å°æœºå™¨çš„å†…å­˜æ˜¯æœ‰é™çš„ï¼Œé›†ç¾¤é‡Œçš„æœåŠ¡æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œå¯èƒ½æœ‰å‡ åä¸‡ä¸ªæœåŠ¡å®ä¾‹åœ¨è¿è¡Œï¼Œé‚£ä¹ˆæœåŠ¡æ³¨å†Œè¡¨è¶Šæ¥è¶Šå¤§ï¼Œæœ€åè¶…è¿‡å•æœºå†…å­˜æ”¯æ’‘çš„æé™æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™å¦‚æœè‡ªå·±ç ”å‘æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œå°±å¯ä»¥å‚è€ƒå¤§æ•°æ®é¢†åŸŸçš„Hadoopçš„æ¶æ„æ€æƒ³ã€‚</p><p>Hadoopçš„è®¾è®¡æ€æƒ³æ˜¯æŠŠæ³¨å†Œè¡¨åˆ†ç‰‡å­˜å‚¨ï¼Œåˆ†å¸ƒå¼å­˜å‚¨åœ¨å¤šå°æœºå™¨ä¸Šï¼Œæ¯å°æœºå™¨å­˜å‚¨éƒ¨åˆ†æ³¨å†Œè¡¨æ•°æ®ã€‚</p><p>ç„¶åæ¯ä¸ªServerå¯ä»¥åŠ ä¸Šä¸€ä¸ªä»èŠ‚ç‚¹åšçƒ­å¤‡ä»½ï¼Œé¿å…å•æœºæŒ‚æ‰å¯¼è‡´æ³¨å†Œ è¡¨æ•°æ®ä¸¢å¤±ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹æ¶æ„å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><a href="https://i.loli.net/2019/02/27/5c75e47bd6e91.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/02/27/5c75e47bd6e91.png" class="lazyload" title="alt"></a></p><p>å®é™…åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Eurekaçš„æ—¶å€™ï¼Œä½ è¿˜ä¼šç¢°åˆ°å¾ˆå¤šç°å®çš„é—®é¢˜ã€‚</p><p>æ¯”å¦‚è¯´ä¸Šé¢è®²äº†ï¼ŒEurekaæœ¬èº«æ˜¯åŸºäºç®€å•çš„åŒæ­¥æœºåˆ¶å®ç°é›†ç¾¤æ¶æ„çš„ï¼Œä½†æ˜¯è¿™é‡Œåœ¨é›†ç¾¤ä¹‹é—´è¿›è¡ŒåŒæ­¥çš„æ—¶å€™ï¼Œå…¶å®æ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œé‡‡ç”¨çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§çš„åè®®ã€‚</p><p>è¿™å°±å¯èƒ½ä¼šå¯¼è‡´è¯´ï¼Œä½ æŸä¸ªæœåŠ¡æ³¨å†Œåˆ°äº†ä¸€ä¸ªEureka Serverå®ä¾‹ä¸Šå»ï¼Œä½†æ˜¯ä»–éœ€è¦å¼‚æ­¥å¤åˆ¶åˆ°å…¶ä»–çš„Eureka Serverï¼Œè¿™ä¸­é—´æ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p><p>æ‰€ä»¥å¯èƒ½å¯¼è‡´å…¶ä»–çš„Eureka Serveræ˜¯çœ‹ä¸åˆ°é‚£ä¸ªåˆšæ–°æ³¨å†Œçš„æœåŠ¡å®ä¾‹çš„ã€‚</p><p>å¤§å®¶çœ‹ä¸‹é¢çš„å›¾ï¼Œå°±ç¤ºæ„äº†è¿™ä¸ªé—®é¢˜ï¼š</p><p><a href="https://i.loli.net/2019/02/27/5c75e49cd6b00.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/02/27/5c75e49cd6b00.png" class="lazyload" title="alt"></a></p><p>ä½†æ˜¯å¦‚æœæ˜¯é‡‡å–äº†ç±»ä¼¼Hadoopçš„é‚£ç§æ•°æ®åˆ†ç‰‡æ€æƒ³çš„è¯ï¼Œä¸€ä¸ªæ³¨å†Œè¡¨æ•°æ®åˆ†ç‰‡å°±åœ¨ä¸€å°æœºå™¨ä¸Šï¼Œç”±è¿™å°æœºå™¨è´Ÿè´£æä¾›æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥å®ç°<strong>å¼ºä¸€è‡´çš„æ•ˆæœ</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä½ æ³¨å†Œäº†ï¼Œç«‹é©¬å°±ä¼šè¢«åˆ«äººå‘ç°ï¼Œå¦‚ä¸‹å›¾ã€‚<br><a href="https://i.loli.net/2019/02/27/5c75e4b3c1d37.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/02/27/5c75e4b3c1d37.png" class="lazyload" title="alt"></a></p><p>è¿™é‡Œåªæ˜¯è¯´å…¶ä¸­å‡ ä¸ªä¾‹å­ç½¢äº†ï¼Œæ”¹é€ å¼€æºç³»ç»Ÿçš„æ€è·¯æ˜¯å¾ˆå¤šçš„ï¼Œå®é™…ä¸Šå¤§å‚å®Œå…¨å¯ä»¥å¯¹å¼€æºæŠ€æœ¯åšå¾ˆå¤šçš„è‡ªç ”ã€å®šåˆ¶å’Œæ”¹é€ ï¼Œè§£å†³çº¿ä¸Šçš„ç”Ÿäº§é—®é¢˜ï¼Œè®©æœåŠ¡æ³¨å†Œä¸­å¿ƒæœç€ä»–ä»¬å¿ƒé‡ŒæœŸæœ›çš„æ•ˆæœå»å‘å±•ï¼Œæ‰€ä»¥å¯¹ä»–ä»¬æ¥è¯´å…¶å®é—®é¢˜å¹¶ä¸å¤§ã€‚</p><h3 id="3ã€ä¸­å°å…¬å¸çš„å…¶ä»–é€‰æ‹©ï¼šConsul"><a href="#3ã€ä¸­å°å…¬å¸çš„å…¶ä»–é€‰æ‹©ï¼šConsul" class="headerlink" title="3ã€ä¸­å°å…¬å¸çš„å…¶ä»–é€‰æ‹©ï¼šConsul"></a>3ã€ä¸­å°å…¬å¸çš„å…¶ä»–é€‰æ‹©ï¼šConsul</h3><p>åªæ˜¯å¯¹äºå¾ˆå¤šä¸­å°å‹å…¬å¸è€Œè¨€ï¼Œå¯èƒ½æœ¬èº«æ²¡æœ‰åŸºç¡€æ¶æ„å›¢é˜Ÿçš„æ”¯æ’‘ï¼Œæˆ–è€…æ˜¯æ²¡æœ‰è¿‡å¤šçš„äººåŠ›ç‰©åŠ›æŠ•å…¥åˆ°è‡ªç ”ä¸­é—´ä»¶ã€å¼€æºç³»ç»ŸäºŒæ¬¡å¼€å‘ä¸­å»ã€‚</p><p>é‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥è€ƒè™‘é€‰æ‹©å…¶ä»–çš„å¼€æºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æŠ€æœ¯äº†ï¼Œæ¯”å¦‚Spring CloudåŒæ ·æ”¯æŒçš„Consulå°±æ˜¯ç›®å‰å¾ˆå¤šå…¬å¸çš„é€‰æ‹©ã€‚</p><p>è¿™å„¿å’±ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹Consulï¼Œåé¢å¯ä»¥è€ƒè™‘å†å†™æ–‡ç« ä»‹ç»ä»‹ç»Consulçš„æ¶æ„åŸç†å’Œä½¿ç”¨ä»€ä¹ˆçš„ï¼Œå¤§å®¶çœ‹ä¸€ä¸‹ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒæŠ€æœ¯é€‰å‹çš„å‚è€ƒï¼š</p><ul><li><p><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong></p></li><li><p>Consulå½“ç„¶æ˜¯å¯ä»¥ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„äº†ï¼Œå¯ä»¥ç”¨åšå¾®æœåŠ¡æ¶æ„çš„æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚</p></li><li><p>åŒæ—¶è¿™é‡Œå¯ä»¥å…ˆç»™å¤§å®¶è¯´ä¸€ä¸‹ï¼ŒConsulçš„æœåŠ¡æ³¨å†Œæœºåˆ¶é€‰æ‹©çš„æ˜¯åŸºäºDaftåè®®çš„å¼ºä¸€è‡´ï¼Œæ²¡æœ‰åƒEurekaé‚£æ ·ä½¿ç”¨æœ€ç»ˆä¸€è‡´çš„æ•ˆæœã€‚</p></li><li><p><strong>å¥åº·æ£€æŸ¥</strong></p></li><li><p>Consulå¯ä»¥æ”¯æŒéå¸¸å¼ºå¤§çš„å¥åº·æ£€æŸ¥çš„åŠŸèƒ½ï¼Œå•¥å«å¥åº·æ£€æŸ¥ï¼Ÿ</p></li><li><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸åœçš„å‘è¯·æ±‚ç»™ä½ çš„æœåŠ¡æ£€æŸ¥ä»–åˆ°åº•æ­»äº†æ²¡æœ‰ï¼Œç›®å‰æ˜¯å¦è¿˜å¥åº·ï¼Œè¿™ä¸ªå°±æ˜¯å«åšå¥åº·æ£€æŸ¥ã€‚</p></li><li><p><strong>kvå­˜å‚¨</strong></p></li><li><p>Consulä¸å…‰æ”¯æŒæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼Œå±…ç„¶è¿˜å¯ä»¥æ”¯æŒç®€å•çš„kvå­˜å‚¨ã€‚</p></li><li><p>ä»–å¯ä»¥è®©ä½ ç”¨key-valueå¯¹çš„å½¢å¼å­˜æ”¾ä¸€äº›ä¿¡æ¯ä»¥åŠæå–æŸ¥è¯¢ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Ÿ</p></li><li><p><strong>å®‰å…¨çš„æœåŠ¡é€šä¿¡</strong></p></li><li><p>Consulæ”¯æŒè®©ä½ çš„æœåŠ¡ä¹‹é—´è¿›è¡Œæˆæƒæ¥é™åˆ¶å“ªäº›æœåŠ¡å¯ä»¥é€šä¿¡å’Œè¿æ¥</p></li><li><p><strong>å¤šæ•°æ®ä¸­å¿ƒæ”¯æŒ</strong></p></li></ul><p>å…¶å®è¯´å®è¯ï¼Œåœ¨åšæŠ€æœ¯é€‰å‹çš„æ—¶å€™ï¼Œéå¸¸å…³é”®çš„ä¸€ç‚¹ï¼Œå°±æ˜¯çœ‹ç¤¾åŒºæ˜¯å¦æ´»è·ƒã€‚</p><p>æ‰€ä»¥è™½ç„¶ä¸Šé¢è¯´äº†å¾ˆå¤šï¼Œä½†æ˜¯å…¶å®å¤§å®¶å®Œå…¨å¯ä»¥çœ‹ä¸€çœ¼ä¸‹é¢çš„Eureka Githubå’ŒConsul Githubçš„æ›´æ–°æ´»è·ƒåº¦çš„å¯¹æ¯”ã€‚</p><p>æˆ‘ä»¬æ˜æ˜¾ä¼šå‘ç°ï¼ŒEureka 1.xç‰ˆæœ¬æœ€è¿‘çš„æ›´æ–°éƒ½åœ¨å‡ ä¸ªæœˆå‰ç”šè‡³å‡ å¹´å‰ï¼Œä½†æ˜¯Consulæœ€è¿‘çš„æ›´æ–°å¾ˆå¤šéƒ½æ˜¯å‡ å¤©å‰çš„ã€‚</p><p>æ‰€ä»¥æœ¬èº«Spring Cloudå®˜æ–¹æŠ€æœ¯æ ˆä¹Ÿæ˜¯æ”¯æŒConsulçš„ï¼ŒEurekaå¼€æºç¤¾åŒºæ…¢æ…¢ä¸å†æ´»è·ƒä¹‹åï¼Œè‡ªç„¶å¾ˆå¤šä¸­å°å…¬å¸å¼€å§‹é€‰æ‹©ä½¿ç”¨åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œè€Œä¸”ç¤¾åŒºæ›´æ–°ä¹Ÿæ›´åŠ æ´»è·ƒçš„Consulä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒäº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p><a href="https://juejin.im/post/5c7431f2f265da2db0739755" target="_blank" rel="noopener">è½¬è½½è‡ªçŸ³æ‰ç å†œ</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> Spring Cloud </tag>
            
            <tag> Eureka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå¸¸ç”¨ä½†æˆ‘è®°ä¸ä½çš„å‘½ä»¤</title>
      <link href="/2019/02/26/Linux%E5%B8%B8%E7%94%A8%E4%BD%86%E6%88%91%E8%AE%B0%E4%B8%8D%E4%BD%8F%E7%9A%84%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/02/26/Linux%E5%B8%B8%E7%94%A8%E4%BD%86%E6%88%91%E8%AE%B0%E4%B8%8D%E4%BD%8F%E7%9A%84%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Linuxå¦‚ä½•æŸ¥çœ‹ç«¯å£</p><p>1ã€lsof -i:ç«¯å£å· ç”¨äºæŸ¥çœ‹æŸä¸€ç«¯å£çš„å ç”¨æƒ…å†µï¼Œæ¯”å¦‚æŸ¥çœ‹8000ç«¯å£ä½¿ç”¨æƒ…å†µï¼Œlsof -i:8000</p><a id="more"></a><p>Linuxå¦‚ä½•æŸ¥çœ‹ç«¯å£</p><p>1ã€lsof -i:ç«¯å£å· ç”¨äºæŸ¥çœ‹æŸä¸€ç«¯å£çš„å ç”¨æƒ…å†µï¼Œæ¯”å¦‚æŸ¥çœ‹8000ç«¯å£ä½¿ç”¨æƒ…å†µï¼Œlsof -i:8000</p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"># lsof -i:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">8000</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">COMMAND   PID USER   FD   TYPE  DEVICE SIZE</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">OFF NODE NAME  lwfs</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">22065</span> root    <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">6u</span>  IPv4 <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">4395053</span>      0t0  TCP *:irdmi (LISTEN)</pre></div><p>å¯ä»¥çœ‹åˆ°8000ç«¯å£å·²ç»è¢«è½»é‡çº§æ–‡ä»¶ç³»ç»Ÿè½¬å‘æœåŠ¡lwfså ç”¨</p><p>2ã€netstat -tunlp |grep ç«¯å£å·ï¼Œç”¨äºæŸ¥çœ‹æŒ‡å®šçš„ç«¯å£å·çš„è¿›ç¨‹æƒ…å†µï¼Œå¦‚æŸ¥çœ‹8000ç«¯å£çš„æƒ…å†µï¼Œnetstat -tunlp |grep 8000</p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <div class="cnblogs_code_toolbar" style="margin: 5px 0px 0px; padding: 0px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;"><a title="å¤åˆ¶ä»£ç " style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); border: none !important; background-color: rgb(245, 245, 245) !important;">![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)</a></span></div><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"># netstat -<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">tunlp Active Internet connections (only servers)Proto Recv</span>-Q Send-Q Local Address               Foreign Address             State       PID/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">Program name   tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">111</span>                 <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">4814</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">rpcbind        tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">5908</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">25492</span>/qemu-<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">kvm      tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">6996</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">22065</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">lwfs          tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">192.168</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">122.1</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">53</span>            <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">38296</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">dnsmasq       tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">22</span>                  <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">5278</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">sshd           tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">127.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.1</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">631</span>               <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">5013</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">cupsd          tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">127.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.1</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">25</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">5962</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">master         tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">8666</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">44868</span>/<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">lwfs          tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">8000</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">22065</span>/lwfs        </pre><div class="cnblogs_code_toolbar" style="margin: 5px 0px 0px; padding: 0px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;"><a title="å¤åˆ¶ä»£ç " style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); border: none !important; background-color: rgb(245, 245, 245) !important;">![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)</a></span></div></div><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"># netstat -tunlp | <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 255);">grep</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">8000</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);">tcp</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span>      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0</span> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">8000</span>                <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>.<span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">0.0</span>:*                   LISTEN      <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 128);">22065</span>/lwfs          </pre></div><p>è¯´æ˜ä¸€ä¸‹å‡ ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <div class="cnblogs_code_toolbar" style="margin: 5px 0px 0px; padding: 0px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;"><a title="å¤åˆ¶ä»£ç " style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); border: none !important; background-color: rgb(245, 245, 245) !important;">![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)</a></span></div><pre style="margin-bottom: 0px; padding: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"> <span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(255, 0, 0);">-t (tcp) ä»…æ˜¾ç¤ºtcpç›¸å…³é€‰é¡¹                                 -u (udp)ä»…æ˜¾ç¤ºudpç›¸å…³é€‰é¡¹                                 -n æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–ä¸ºæ•°å­—                                 -l ä»…åˆ—å‡ºåœ¨Listen(ç›‘å¬)çš„æœåŠ¡çŠ¶æ€                                 -</span><span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(0, 0, 0);"><span style="margin: 0px; padding: 0px; line-height: 1.8; color: rgb(255, 0, 0);">p æ˜¾ç¤ºå»ºç«‹ç›¸å…³é“¾æ¥çš„ç¨‹åºå</span></span> </pre><div class="cnblogs_code_toolbar" style="margin: 5px 0px 0px; padding: 0px;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;"><a title="å¤åˆ¶ä»£ç " style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); border: none !important; background-color: rgb(245, 245, 245) !important;">![å¤åˆ¶ä»£ç ](https://common.cnblogs.com/images/copycode.gif)</a></span></div></div><p>åå°å¯åŠ¨ä¸€ä¸ªjarï¼š</p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <pre style="padding: 0px; margin-bottom: 0px; line-height: 1.42857; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">nohup java -jar xxx.jar &    </pre></div><p><span style="font-family: " helvetica neue", helvetica, "pingfang sc", "hiragino sans gb", "microsoft yahei", "noto cjk "wenquanyi micro hei", arial, sans-serif; font-size: 13px;">tail å‘½ä»¤å¯ç”¨äºæŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼Œæœ‰ä¸€ä¸ªå¸¸ç”¨çš„å‚æ•°</span> <span class="marked" style="border: 0px; margin: 0px; padding: 0.2em; background-color: rgb(236, 234, 230); border-radius: 3px; font-weight: bold; font-family: SFMono-Regular, Consolas, " liberation mono", menlo, courier, monospace; font-size: 13px;">-f</span> <span style="font-family: " helvetica neue", helvetica, "pingfang sc", "hiragino sans gb", "microsoft yahei", "noto cjk "wenquanyi micro hei", arial, sans-serif; font-size: 13px;">å¸¸ç”¨äºæŸ¥é˜…æ­£åœ¨æ”¹å˜çš„æ—¥å¿—æ–‡ä»¶ã€‚</span></p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <pre style="padding: 0px; margin-bottom: 0px; line-height: 1.42857; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">  **å‘½ä»¤æ ¼å¼ï¼š**  <pre class="prettyprint prettyprinted" style="border-left-width: 4px; border-color: rgb(221, 221, 221); margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 20px; font-family: Menlo, Monaco, Consolas, " andale mono", "lucida console", "courier new", monospace; white-space: pre-wrap; background: url(" images codecolorer_bg.gif") center top rgb(251, 251, 251);"><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">tail</span> <span class="pun" style="border: 0px; margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[å‚æ•°]</span> <span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);"></span> <span class="pun" style="border: 0px; margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[æ–‡ä»¶]</span> <span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);"></span> </pre><p></p></pre></div><p><strong>å‚æ•°ï¼š</strong></p><div class="cnblogs_code" style="margin: 5px 0px; padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: " courier new" !important; font-size: 12px !important;">  <pre style="padding: 0px; margin-bottom: 0px; line-height: 1.42857; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">   _-f å¾ªç¯è¯»å–_   -q ä¸æ˜¾ç¤ºå¤„ç†ä¿¡æ¯   _-v æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯_   -c<æ•°ç›®> æ˜¾ç¤ºçš„å­—èŠ‚æ•°   _-n<è¡Œæ•°> æ˜¾ç¤ºè¡Œæ•°_   --pid=PID ä¸-fåˆç”¨,è¡¨ç¤ºåœ¨è¿›ç¨‹ID,PIDæ­»æ‰ä¹‹åç»“æŸ.   _-q, --quiet, --silent ä»ä¸è¾“å‡ºç»™å‡ºæ–‡ä»¶åçš„é¦–éƒ¨_   -s, --sleep-interval=S ä¸-fåˆç”¨,è¡¨ç¤ºåœ¨æ¯æ¬¡åå¤çš„é—´éš”ä¼‘çœ Sç§’  </pre></div><p><strong>å®ä¾‹</strong></p><p>è¦æ˜¾ç¤º notes.log æ–‡ä»¶çš„æœ€å 10 è¡Œï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="prettyprint prettyprinted" style="border-left-width: 4px; border-color: rgb(221, 221, 221); margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 20px; font-family: Menlo, Monaco, Consolas, " andale mono", "lucida console", "courier new", monospace; white-space: pre-wrap; background: url(" images codecolorer_bg.gif") center top rgb(251, 251, 251);"><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">tail notes</span><span class="pun" style="border: 0px; margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">log</span></pre><p>è¦è·Ÿè¸ªåä¸º notes.log çš„æ–‡ä»¶çš„å¢é•¿æƒ…å†µï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="prettyprint prettyprinted" style="border-left-width: 4px; border-color: rgb(221, 221, 221); margin: 15px auto; padding: 10px 15px; font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 12px; line-height: 20px; font-family: Menlo, Monaco, Consolas, " andale mono", "lucida console", "courier new", monospace; white-space: pre-wrap; background: url(" images codecolorer_bg.gif") center top rgb(251, 251, 251);"><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">tail</span> <span class="pun" style="border: 0px; margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-</span><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">f notes</span><span class="pun" style="border: 0px; margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="border: 0px; margin: 0px; padding: 0px; color: rgb(0, 0, 0);">log</span></pre><p>æ­¤å‘½ä»¤æ˜¾ç¤º notes.log æ–‡ä»¶çš„æœ€å 10 è¡Œã€‚å½“å°†æŸäº›è¡Œæ·»åŠ è‡³ notes.log æ–‡ä»¶æ—¶ï¼Œtail å‘½ä»¤ä¼šç»§ç»­æ˜¾ç¤ºè¿™äº›è¡Œã€‚ æ˜¾ç¤ºä¸€ç›´ç»§ç»­ï¼Œç›´åˆ°æ‚¨æŒ‰ä¸‹ï¼ˆCtrl-Cï¼‰ç»„åˆé”®åœæ­¢æ˜¾ç¤ºã€‚</p><p>vmstat - è™šæ‹Ÿå†…å­˜ç»Ÿè®¡</p><p>vmstat å‘½ä»¤æŠ¥å‘Šæœ‰å…³è¿›ç¨‹ã€å†…å­˜ã€åˆ†é¡µã€å— IOã€ä¸­æ–­å’Œ CPU æ´»åŠ¨ç­‰ä¿¡æ¯ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vmstat 3</span><br></pre></td></tr></tbody></table></figure></div><p>è¾“å‡ºç¤ºä¾‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------</span><br><span class="line"> r b swpd free buff cache si so bi bo in cs us sy id wa st</span><br><span class="line"> 0 0 0 2540988 522188 5130400 0 0 2 32 4 2 4 1 96 0 0</span><br><span class="line"> 1 0 0 2540988 522188 5130400 0 0 0 720 1199 665 1 0 99 0 0</span><br><span class="line"> 0 0 0 2540956 522188 5130400 0 0 0 0 1151 1569 4 1 95 0 0</span><br><span class="line"> 0 0 0 2540956 522188 5130500 0 0 0 6 1117 439 1 0 99 0 0</span><br><span class="line"> 0 0 0 2540940 522188 5130512 0 0 0 536 1189 932 1 0 98 0 0</span><br><span class="line"> 0 0 0 2538444 522188 5130588 0 0 0 0 1187 1417 4 1 96 0 0</span><br><span class="line"> 0 0 0 2490060 522188 5130640 0 0 0 18 1253 1123 5 1 94 0 0</span><br></pre></td></tr></tbody></table></figure></div><p>2.æ‰¾å‡ºå ç”¨å†…å­˜èµ„æºæœ€å¤šçš„å‰ 10 ä¸ªè¿›ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -auxf | sort -nr -k 4 | head -10</span><br></pre></td></tr></tbody></table></figure></div><p>3.æ‰¾å‡ºå ç”¨ CPU èµ„æºæœ€å¤šçš„å‰ 10 ä¸ªè¿›ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -auxf | sort -nr -k 3 | head -10</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å¸¸ç”¨ç§æ´»"><a href="#å¸¸ç”¨ç§æ´»" class="headerlink" title="å¸¸ç”¨ç§æ´»"></a>å¸¸ç”¨ç§æ´»</h3><p>æŸ¥æ‰¾æ–‡ä»¶<strong>all-server.log</strong>ä¸­å«<strong>deviceId</strong>æœ‰çš„å†…å®¹å¹¶æ˜¾ç¤ºå‡ºæ¥</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -type f -name 'all-server.log'|xargs grep "deviceId"</span><br></pre></td></tr></tbody></table></figure></div><p>ç»Ÿè®¡<strong>aaa</strong>åœ¨æ–‡ä»¶<strong>all-server.log</strong>å‡ºç°çš„æ¬¡æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat all-server.log |grep "aaa"|wc -l</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™ä»£ç æ€èƒ½ä¸ä¼šè¿™äº›Linuxå‘½ä»¤</title>
      <link href="/2019/02/26/%E5%86%99%E4%BB%A3%E7%A0%81%E6%80%8E%E8%83%BD%E4%B8%8D%E4%BC%9A%E8%BF%99%E4%BA%9BLinux%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/02/26/%E5%86%99%E4%BB%A3%E7%A0%81%E6%80%8E%E8%83%BD%E4%B8%8D%E4%BC%9A%E8%BF%99%E4%BA%9BLinux%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p> è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ª <a href="http://www.thegeekstuff.com/2010/11/50-linux-commands" target="_blank" rel="noopener">http://www.thegeekstuff.com/2010/11/50-linux-commands</a> è¿™äº›éƒ½æ˜¯ä¸€äº›å¾ˆå¸¸ç”¨çš„å‘½ä»¤ï¼Œè¿™ç¯‡æ–‡ç« ä¸­æ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€äº›ç®€å•çš„ç¤ºä¾‹è¯´æ˜å®ƒçš„ç”¨æ³•ï¼Œ å¯¹äºæƒ³å­¦ä¹ Unix/Linuxçš„äººï¼Œè¿™äº›å‘½ä»¤åŸºæœ¬ä¸Šéƒ½æ˜¯éœ€è¦æŒæ¡çš„ã€‚</p><a id="more"></a><article class="markdown-body"><blockquote><p>è¿™ç¯‡æ–‡ç« ç¿»è¯‘è‡ª <a href="http://www.thegeekstuff.com/2010/11/50-linux-commands/" target="_blank" rel="noopener">http://www.thegeekstuff.com/2010/11/50-linux-commands</a> è¿™äº›éƒ½æ˜¯ä¸€äº›å¾ˆå¸¸ç”¨çš„å‘½ä»¤ï¼Œè¿™ç¯‡æ–‡ç« ä¸­æ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€äº›ç®€å•çš„ç¤ºä¾‹è¯´æ˜å®ƒçš„ç”¨æ³•ï¼Œ å¯¹äºæƒ³å­¦ä¹ Unix/Linuxçš„äººï¼Œè¿™äº›å‘½ä»¤åŸºæœ¬ä¸Šéƒ½æ˜¯éœ€è¦æŒæ¡çš„ã€‚</p></blockquote><p>åŒæ—¶æˆ‘ä¹Ÿåšäº†ä¸€å¼ ç®€æ˜“ç‰ˆçš„å›¾ä¾‹ï¼š</p><p><a href="https://i.loli.net/2017/08/22/599b9b3ca5bb7.png" target="_blank" rel="noopener"><img alt="Linuxå‘½ä»¤è¡¨" title="Linuxå‘½ä»¤è¡¨" data-src="https://i.loli.net/2017/08/22/599b9b3ca5bb7.png" class="lazyload"></a></p><h2 id="1-tar"><a href="#1-tar" class="headerlink" title="1. tar"></a>1. tar</h2><p>åˆ›å»ºä¸€ä¸ªæ–°çš„taræ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tar cvf archive_name.tar dirname/</code></pre></div></div><p>è§£å‹taræ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tar xvf archive_name.tar</code></pre></div></div><p>æŸ¥çœ‹taræ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tar tvf archive_name.tar</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/04/unix-tar-command-examples/" target="_blank" rel="noopener">The Ultimate Tar Command Tutorial with 10 Practical Examples</a></p><h2 id="2-grep"><a href="#2-grep" class="headerlink" title="2. grep"></a>2. grep</h2><p>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²(ä¸åŒºåˆ†å¤§å°å†™)</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ grep -i "the" demo_file</code></pre></div></div><p>è¾“å‡ºæˆåŠŸåŒ¹é…çš„è¡Œï¼Œä»¥åŠè¯¥è¡Œä¹‹åçš„ä¸‰è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ grep -A 3 -i "example" demo_text</code></pre></div></div><p>åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­é€’å½’æŸ¥è¯¢åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ grep -r "ramesh" *</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/03/15-practical-unix-grep-command-examples/" target="_blank" rel="noopener">Get a Grip on the Grep! â€“ 15 Practical Grep Command Examples</a></p><h2 id="3-find"><a href="#3-find" class="headerlink" title="3. find"></a>3. find</h2><p>æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶åçš„æ–‡ä»¶(ä¸åŒºåˆ†å¤§å°å†™)</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ find -iname "MyProgram.c"</code></pre></div></div><p>å¯¹æ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡ŒæŸä¸ªå‘½ä»¤</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ find -iname "MyProgram.c" -exec md5sum {} \;</code></pre></div></div><p>æŸ¥æ‰¾homeç›®å½•ä¸‹çš„æ‰€æœ‰ç©ºæ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ find ~ -empty</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/03/15-practical-linux-find-command-examples/" target="_blank" rel="noopener">Mommy, I found it! â€” 15 Practical Linux Find Command Examples</a></p><h2 id="4-ssh"><a href="#4-ssh" class="headerlink" title="4. ssh"></a>4. ssh</h2><p>ç™»å½•åˆ°è¿œç¨‹ä¸»æœº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ssh -l jsmith remotehost.example.com</code></pre></div></div><p>è°ƒè¯•sshå®¢æˆ·ç«¯</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ssh -v -l jsmith remotehost.example.com</code></pre></div></div><p>æ˜¾ç¤ºsshå®¢æˆ·ç«¯ç‰ˆæœ¬</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ssh -V</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2008/05/5-basic-linux-ssh-client-commands/" target="_blank" rel="noopener">5 Basic Linux SSH Client Commands</a></p><h2 id="5-sed"><a href="#5-sed" class="headerlink" title="5. sed"></a>5. sed</h2><p>å½“ä½ å°†Dosç³»ç»Ÿä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°Unix/Linuxåï¼Œè¿™ä¸ªæ–‡ä»¶æ¯è¡Œéƒ½ä¼šä»¥\r\nç»“å°¾ï¼Œsedå¯ä»¥è½»æ˜“å°†å…¶è½¬æ¢ä¸ºUnixæ ¼å¼çš„æ–‡ä»¶ï¼Œä½¿ç”¨\nç»“å°¾çš„æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sed 's/.$//' filename</code></pre></div></div><p>åè½¬æ–‡ä»¶å†…å®¹å¹¶è¾“å‡º</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sed -n '1!G; h; p' filename</code></pre></div></div><p>ä¸ºéç©ºè¡Œæ·»åŠ è¡Œå·</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sed '/./=' thegeekstuff.txt | sed 'N; s/\n/ /'</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/10/unix-sed-tutorial-advanced-sed-substitution-examples/" target="_blank" rel="noopener">Advanced Sed Substitution Examples</a></p><h2 id="6-awk"><a href="#6-awk" class="headerlink" title="6. awk"></a>6. awk</h2><p>åˆ é™¤é‡å¤è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ awk '!($0 in array) { array[$0]; print}' temp</code></pre></div></div><p>æ‰“å°/etc/passwdä¸­æ‰€æœ‰åŒ…å«åŒæ ·çš„uidå’Œgidçš„è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ awk -F ':' '$3=$4' /etc/passwd</code></pre></div></div><p>æ‰“å°æ–‡ä»¶ä¸­çš„æŒ‡å®šéƒ¨åˆ†çš„å­—æ®µ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ awk '{print $2,$5;}' employee.txt</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/01/8-powerful-awk-built-in-variables-fs-ofs-rs-ors-nr-nf-filename-fnr/" target="_blank" rel="noopener">8 Powerful Awk Built-in Variables â€“ FS, OFS, RS, ORS, NR, NF, FILENAME, FNR</a></p><h2 id="7-vim"><a href="#7-vim" class="headerlink" title="7. vim"></a>7. vim</h2><p>æ‰“å¼€æ–‡ä»¶å¹¶è·³åˆ°ç¬¬10è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ vim +10 filename.txt</code></pre></div></div><p>æ‰“å¼€æ–‡ä»¶è·³åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ vim +/search-term filename.txt</code></pre></div></div><p>ä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ vim -R /etc/passwd</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/01/vi-and-vim-macro-tutorial-how-to-record-and-play/" target="_blank" rel="noopener">How To Record and Play in Vim Editor</a></p><h2 id="8-diff"><a href="#8-diff" class="headerlink" title="8. diff"></a>8. diff</h2><p>æ¯”è¾ƒçš„æ—¶å€™å¿½ç•¥ç©ºç™½ç¬¦</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ diff -w name_list.txt name_list_new.txt</code></pre></div></div><h2 id="9-sort"><a href="#9-sort" class="headerlink" title="9. sort"></a>9. sort</h2><p>ä»¥å‡åºå¯¹æ–‡ä»¶å†…å®¹æ’åº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sort names.txt</code></pre></div></div><p>ä»¥é™åºå¯¹æ–‡ä»¶å†…å®¹æ’åº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sort -r names.txt</code></pre></div></div><p>ä»¥ç¬¬ä¸‰ä¸ªå­—æ®µå¯¹/etc/passwdçš„å†…å®¹æ’åº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ sort -t: -k 3n /etc/passwd | more</code></pre></div></div><h2 id="10-export"><a href="#10-export" class="headerlink" title="10. export"></a>10. export</h2><p>è¾“å‡ºè·Ÿå­—ç¬¦ä¸²oracleåŒ¹é…çš„ç¯å¢ƒå˜é‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ export | grep ORCALEdeclare -x ORACLE_BASE="/u01/app/oracle"declare -x ORACLE_HOME="/u01/app/oracle/product/10.2.0"declare -x ORACLE_SID="med"declare -x ORACLE_TERM="xterm"</code></pre></div></div><p>è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ export ORACLE_HOME=/u01/app/oracle/product/10.2.0</code></pre></div></div><h2 id="11-xargs"><a href="#11-xargs" class="headerlink" title="11. xargs"></a>11. xargs</h2><p>å°†æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶æ‹·è´åˆ°å¤–éƒ¨é©±åŠ¨å™¨</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ls *.jpg | xargs -n1 -i cp {} /external-hard-drive/directory</code></pre></div></div><p>å°†ç³»ç»Ÿä¸­æ‰€æœ‰jpdæ–‡ä»¶å‹ç¼©æ‰“åŒ…</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ find / -name *.jpg -type f -print | xargs tar -cvzf images.tar.gz</code></pre></div></div><p>ä¸‹è½½æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰urlå¯¹åº”çš„é¡µé¢</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ cat url-list.txt | xargs wget â€“c</code></pre></div></div><h2 id="12-ls"><a href="#12-ls" class="headerlink" title="12. ls"></a>12. ls</h2><p>ä»¥æ˜“è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°(æ˜¾ç¤ºä¸ºMB,GBâ€¦)</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ls -lh-rw-r----- 1 ramesh team-dev 8.9M Jun 12 15:27 arch-linux.txt.gz</code></pre></div></div><p>ä»¥æœ€åä¿®æ”¹æ—¶é—´å‡åºåˆ—å‡ºæ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ls -ltr</code></pre></div></div><p>åœ¨æ–‡ä»¶ååé¢æ˜¾ç¤ºæ–‡ä»¶ç±»å‹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ls -F</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/07/linux-ls-command-examples/" target="_blank" rel="noopener">Unix LS Command: 15 Practical Examples</a></p><h2 id="13-pwd"><a href="#13-pwd" class="headerlink" title="13. pwd"></a>13. pwd</h2><p>è¾“å‡ºå½“å‰å·¥ä½œç›®å½•</p><h2 id="14-cd"><a href="#14-cd" class="headerlink" title="14. cd"></a>14. cd</h2><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>cd -å¯ä»¥åœ¨æœ€è¿‘å·¥ä½œçš„ä¸¤ä¸ªç›®å½•é—´åˆ‡æ¢</code></pre></div></div><p>ä½¿ç”¨ <strong>shopt -s cdspell</strong> å¯ä»¥è®¾ç½®è‡ªåŠ¨å¯¹ cd å‘½ä»¤è¿›è¡Œæ‹¼å†™æ£€æŸ¥</p><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2008/10/6-awesome-linux-cd-command-hacks-productivity-tip3-for-geeks/" target="_blank" rel="noopener">6 Awesome Linux cd command Hacks</a></p><h2 id="15-gzip"><a href="#15-gzip" class="headerlink" title="15. gzip"></a>15. gzip</h2><p>åˆ›å»ºä¸€ä¸ª <code>*.gz</code> çš„å‹ç¼©æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ gzip test.txt</code></pre></div></div><p>è§£å‹ <code>*.gz</code> æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ gzip -d test.txt.gz</code></pre></div></div><p>æ˜¾ç¤ºå‹ç¼©çš„æ¯”ç‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ gzip -l *.gz     compressed        uncompressed  ratio uncompressed_name          23709               97975  75.8% asp-patch-rpms.txt</code></pre></div></div><h2 id="16-bzip2"><a href="#16-bzip2" class="headerlink" title="16. bzip2"></a>16. bzip2</h2><p>åˆ›å»º <code>*.bz2</code> å‹ç¼©æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ bzip2 test.txt</code></pre></div></div><p>è§£å‹ <code>*.bz2</code> æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>bzip2 -d test.txt.bz2</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/10/bzcommand-examples/" target="_blank" rel="noopener">BZ is Eazy! bzip2, bzgrep, bzcmp, bzdiff, bzcat, bzless, bzmore examples</a></p><h2 id="17-uzip"><a href="#17-uzip" class="headerlink" title="17. uzip"></a>17. uzip</h2><p>è§£å‹ <code>*.zip</code> æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ unzip test.zip</code></pre></div></div><p>æŸ¥çœ‹ <code>*.zip</code> æ–‡ä»¶çš„å†…å®¹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ unzip -l jasper.zipArchive:  jasper.zipLength     Date   Time    Name--------    ----   ----    ----40995  11-30-98 23:50   META-INF/MANIFEST.MF32169  08-25-98 21:07   classes_15964  08-25-98 21:07   classes_names10542  08-25-98 21:07   classes_ncomp</code></pre></div></div><h2 id="18-shutdown"><a href="#18-shutdown" class="headerlink" title="18. shutdown"></a>18. shutdown</h2><p>å…³é—­ç³»ç»Ÿå¹¶ç«‹å³å…³æœº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ shutdown -h now</code></pre></div></div><p>10åˆ†é’Ÿåå…³æœº</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ shutdown -h +10</code></pre></div></div><p>é‡å¯</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ shutdown -r now</code></pre></div></div><p>é‡å¯æœŸé—´å¼ºåˆ¶è¿›è¡Œç³»ç»Ÿæ£€æŸ¥</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ shutdown -Fr now</code></pre></div></div><h2 id="19-ftp"><a href="#19-ftp" class="headerlink" title="19. ftp"></a>19. ftp</h2><p>ftpå‘½ä»¤å’Œsftpå‘½ä»¤çš„ç”¨æ³•åŸºæœ¬ç›¸ä¼¼è¿æ¥ftpæœåŠ¡å™¨å¹¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ftp IP/hostnameftp> mget *.html</code></pre></div></div><p>æ˜¾ç¤ºè¿œç¨‹ä¸»æœºä¸Šæ–‡ä»¶åˆ—è¡¨</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>ftp> mls *.html -/ftptest/features.html/ftptest/index.html/ftptest/othertools.html/ftptest/samplereport.html/ftptest/usage.html</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/06/ftp-sftp-tutorial/" target="_blank" rel="noopener">FTP and SFTP Beginners Guide with 10 Examples</a></p><h2 id="20-crontab"><a href="#20-crontab" class="headerlink" title="20. crontab"></a>20. crontab</h2><p>æŸ¥çœ‹æŸä¸ªç”¨æˆ·çš„ <code>crontab</code> å…¥å£</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ crontab -u john -l</code></pre></div></div><p>è®¾ç½®ä¸€ä¸ªæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡çš„è®¡åˆ’ä»»åŠ¡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>*/10 * * * * /home/ramesh/check-disk-space</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/" target="_blank" rel="noopener">Linux Crontab: 15 Awesome Cron Job Examples</a></p><h2 id="21-service"><a href="#21-service" class="headerlink" title="21. service"></a>21. service</h2><p>service å‘½ä»¤ç”¨äºè¿è¡Œ System V init è„šæœ¬ï¼Œè¿™äº›è„šæœ¬ä¸€èˆ¬ä½äº/etc/init.dæ–‡ä»¶ä¸‹ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥ç›´æ¥è¿è¡Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„è„šæœ¬ï¼Œè€Œä¸ç”¨åŠ ä¸Šè·¯å¾„</p><p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ service ssh status</code></pre></div></div><p>æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ service --status-all</code></pre></div></div><p>é‡å¯æœåŠ¡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ service ssh restart</code></pre></div></div><h2 id="22-ps"><a href="#22-ps" class="headerlink" title="22. ps"></a>22. ps</h2><p>pså‘½ä»¤ç”¨äºæ˜¾ç¤ºæ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹çš„ä¿¡æ¯ï¼Œpså‘½ä»¤æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œè¿™é‡Œåªåˆ—å‡ºäº†å‡ ä¸ª</p><p>æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ps -ef | more</code></pre></div></div><p>ä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ŒHé€‰é¡¹è¡¨ç¤ºæ˜¾ç¤ºè¿›ç¨‹çš„å±‚æ¬¡ç»“æ„</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ps -efH | more</code></pre></div></div><h2 id="23-free"><a href="#23-free" class="headerlink" title="23. free"></a>23. free</h2><p>è¿™ä¸ªå‘½ä»¤ç”¨äºæ˜¾ç¤ºç³»ç»Ÿå½“å‰å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬å·²ç”¨å†…å­˜ã€å¯ç”¨å†…å­˜å’Œäº¤æ¢å†…å­˜çš„æƒ…å†µ</p><p>é»˜è®¤æƒ…å†µä¸‹freeä¼šä»¥å­—èŠ‚ä¸ºå•ä½è¾“å‡ºå†…å­˜çš„ä½¿ç”¨é‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ free             total       used       free     shared    buffers     cachedMem:       3566408    1580220    1986188          0     203988     902960-/+ buffers/cache:     473272    3093136Swap:      4000176          0    4000176</code></pre></div></div><p>å¦‚æœä½ æƒ³ä»¥å…¶ä»–å•ä½è¾“å‡ºå†…å­˜çš„ä½¿ç”¨é‡ï¼Œéœ€è¦åŠ ä¸€ä¸ªé€‰é¡¹ï¼Œ-gä¸ºGBï¼Œ-mä¸ºMBï¼Œ-kä¸ºKBï¼Œ-bä¸ºå­—èŠ‚</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ free -g             total       used       free     shared    buffers     cachedMem:             3          1          1          0          0          0-/+ buffers/cache:          0          2Swap:            3          0          3</code></pre></div></div><p>å¦‚æœä½ æƒ³æŸ¥çœ‹æ‰€æœ‰å†…å­˜çš„æ±‡æ€»ï¼Œè¯·ä½¿ç”¨-té€‰é¡¹ï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹ä¼šåœ¨è¾“å‡ºä¸­åŠ ä¸€ä¸ªæ±‡æ€»è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>ramesh@ramesh-laptop:~$ free -t             total       used       free     shared    buffers     cachedMem:       3566408    1592148    1974260          0     204260     912556-/+ buffers/cache:     475332    3091076Swap:      4000176          0    4000176Total:     7566584    1592148    5974436</code></pre></div></div><h2 id="24-top"><a href="#24-top" class="headerlink" title="24. top"></a>24. top</h2><p>topå‘½ä»¤ä¼šæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­å ç”¨èµ„æºæœ€å¤šçš„ä¸€äº›è¿›ç¨‹ï¼ˆé»˜è®¤ä»¥CPUå ç”¨ç‡æ’åºï¼‰å¦‚æœä½ æƒ³æ”¹å˜æ’åºæ–¹å¼ï¼Œå¯ä»¥åœ¨ç»“æœåˆ—è¡¨ä¸­ç‚¹å‡»Oï¼ˆå¤§å†™å­—æ¯Oï¼‰ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨äºæ’åºçš„åˆ—ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥é€‰æ‹©ä½ æƒ³æ’åºçš„åˆ—</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>Current Sort Field:  P  for window 1:DefSelect sort field via field letter, type any other key to return  a: PID        = Process Id              v: nDRT       = Dirty Pages count  d: UID        = User Id                 y: WCHAN      = Sleeping in Function  e: USER       = User Name               z: Flags      = Task Flags  ........</code></pre></div></div><p>å¦‚æœåªæƒ³æ˜¾ç¤ºæŸä¸ªç‰¹å®šç”¨æˆ·çš„è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨-ué€‰é¡¹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ top -u oracle</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/01/15-practical-unix-linux-top-command-examples/" target="_blank" rel="noopener">Can You Top This? 15 Practical Linux Top Command Examples</a></p><h2 id="25-df"><a href="#25-df" class="headerlink" title="25. df"></a>25. df</h2><p>æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œé»˜è®¤æƒ…å†µä¸‹df -k å°†ä»¥å­—èŠ‚ä¸ºå•ä½è¾“å‡ºç£ç›˜çš„ä½¿ç”¨é‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ df -kFilesystem           1K-blocks      Used Available Use% Mounted on/dev/sda1             29530400   3233104  24797232  12% //dev/sda2            120367992  50171596  64082060  44% /home</code></pre></div></div><p>ä½¿ç”¨ <code>-h</code> é€‰é¡¹å¯ä»¥ä»¥æ›´ç¬¦åˆé˜…è¯»ä¹ æƒ¯çš„æ–¹å¼æ˜¾ç¤ºç£ç›˜ä½¿ç”¨é‡</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ df -hFilesystem                  Size   Used  Avail Capacity  iused      ifree %iused  Mounted on/dev/disk0s2               232Gi   84Gi  148Gi    37% 21998562   38864868   36%   /devfs                      187Ki  187Ki    0Bi   100%      648          0  100%   /devmap -hosts                   0Bi    0Bi    0Bi   100%        0          0  100%   /netmap auto_home                0Bi    0Bi    0Bi   100%        0          0  100%   /home/dev/disk0s4               466Gi   45Gi  421Gi    10%   112774  440997174    0%   /Volumes/BOOTCAMP//app@izenesoft.cn/public  2.7Ti  1.3Ti  1.4Ti    48%        0 18446744073709551615    0%   /Volumes/public</code></pre></div></div><p>ä½¿ç”¨ <code>-T</code> é€‰é¡¹æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ df -TFilesystem    Type   1K-blocks      Used Available Use% Mounted on/dev/sda1     ext4    29530400   3233120  24797216  12% //dev/sda2     ext4   120367992  50171596  64082060  44% /home</code></pre></div></div><h2 id="26-kill"><a href="#26-kill" class="headerlink" title="26. kill"></a>26. kill</h2><p>kill ç”¨äºç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šå…ˆç”¨ps -efæŸ¥æ‰¾æŸä¸ªè¿›ç¨‹å¾—åˆ°å®ƒçš„è¿›ç¨‹å·ï¼Œç„¶åå†ä½¿ç”¨kill -9 è¿›ç¨‹å·ç»ˆæ­¢è¯¥è¿›ç¨‹ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨killallã€pkillã€xkillæ¥ç»ˆæ­¢è¿›ç¨‹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ps -ef | grep vimramesh    7243  7222  9 22:43 pts/2    00:00:00 vim$ kill -9 7243</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/12/4-ways-to-kill-a-process-kill-killall-pkill-xkill/" target="_blank" rel="noopener">4 Ways to Kill a Process â€“ kill, killall, pkill, xkill</a></p><h2 id="27-rm"><a href="#27-rm" class="headerlink" title="27. rm"></a>27. rm</h2><p>åˆ é™¤æ–‡ä»¶å‰å…ˆç¡®è®¤</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ rm -i filename.txt</code></pre></div></div><p>åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨shellçš„å…ƒå­—ç¬¦ä¼šéå¸¸æœ‰ç”¨ã€‚åˆ é™¤æ–‡ä»¶å‰å…ˆæ‰“å°æ–‡ä»¶åå¹¶è¿›è¡Œç¡®è®¤</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ rm -i file*</code></pre></div></div><p>é€’å½’åˆ é™¤æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶åˆ é™¤è¯¥æ–‡ä»¶å¤¹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ rm -r example</code></pre></div></div><h2 id="28-cp"><a href="#28-cp" class="headerlink" title="28. cp"></a>28. cp</h2><p>æ‹·è´æ–‡ä»¶1åˆ°æ–‡ä»¶2ï¼Œå¹¶ä¿æŒæ–‡ä»¶çš„æƒé™ã€å±ä¸»å’Œæ—¶é—´æˆ³</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ cp -p file1 file2</code></pre></div></div><p>æ‹·è´file1åˆ°file2ï¼Œå¦‚æœfile2å­˜åœ¨ä¼šæç¤ºæ˜¯å¦è¦†ç›–</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ cp -i file1 file2</code></pre></div></div><h2 id="29-mv"><a href="#29-mv" class="headerlink" title="29. mv"></a>29. mv</h2><p>å°†æ–‡ä»¶åfile1é‡å‘½åä¸ºfile2ï¼Œå¦‚æœfile2å­˜åœ¨åˆ™æç¤ºæ˜¯å¦è¦†ç›–</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mv -i file1 file2</code></pre></div></div><p>æ³¨æ„å¦‚æœä½¿ç”¨-fé€‰é¡¹åˆ™ä¸ä¼šè¿›è¡Œæç¤º</p><p>-vä¼šè¾“å‡ºé‡å‘½åçš„è¿‡ç¨‹ï¼Œå½“æ–‡ä»¶åä¸­åŒ…å«é€šé…ç¬¦æ—¶ï¼Œè¿™ä¸ªé€‰é¡¹ä¼šéå¸¸æ–¹ä¾¿</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mv -v file1 file2</code></pre></div></div><h2 id="30-cat"><a href="#30-cat" class="headerlink" title="30. cat"></a>30. cat</h2><p>ä½ å¯ä»¥ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šå…ˆæ‰“å°file1çš„å†…å®¹ï¼Œç„¶åæ‰“å°file2çš„å†…å®¹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ cat file1 file2</code></pre></div></div><p>-nå‘½ä»¤å¯ä»¥åœ¨æ¯è¡Œçš„å‰é¢åŠ ä¸Šè¡Œå·</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ cat -n /etc/logrotate.conf/var/log/btmp {missingok3        monthly4        create 0660 root utmp5        rotate 16 }</code></pre></div></div><h2 id="31-mount"><a href="#31-mount" class="headerlink" title="31. mount"></a>31. mount</h2><p>å¦‚æœè¦æŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç„¶åå°†è¿™ä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸Š</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># mkdir /u01# mount /dev/sdb1 /u01</code></pre></div></div><p>ä¹Ÿå¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°fstabä¸­è¿›è¡Œè‡ªåŠ¨æŒ‚è½½ï¼Œè¿™æ ·ä»»ä½•æ—¶å€™ç³»ç»Ÿé‡å¯çš„æ—¶å€™ï¼Œæ–‡ä»¶ç³»ç»Ÿéƒ½ä¼šè¢«åŠ è½½</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>/dev/sdb1 /u01 ext2 defaults 0 2</code></pre></div></div><h2 id="32-chmod"><a href="#32-chmod" class="headerlink" title="32. chmod"></a>32. chmod</h2><p>chmodç”¨äºæ”¹å˜æ–‡ä»¶å’Œç›®å½•çš„æƒé™</p><p>ç»™æŒ‡å®šæ–‡ä»¶çš„å±ä¸»å’Œå±ç»„æ‰€æœ‰æƒé™(åŒ…æ‹¬è¯»ã€å†™ã€æ‰§è¡Œ)</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ chmod ug+rwx file.txt</code></pre></div></div><p>åˆ é™¤æŒ‡å®šæ–‡ä»¶çš„å±ç»„çš„æ‰€æœ‰æƒé™</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ chmod g-rwx file.txt</code></pre></div></div><p>ä¿®æ”¹ç›®å½•çš„æƒé™ï¼Œä»¥åŠé€’å½’ä¿®æ”¹ç›®å½•ä¸‹é¢æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•çš„æƒé™</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ chmod -R ug+rwx file.txt</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/06/chmod-command-examples/" target="_blank" rel="noopener">7 Chmod Command Examples for Beginners</a></p><h2 id="33-chown"><a href="#33-chown" class="headerlink" title="33. chown"></a>33. chown</h2><p>chownç”¨äºæ”¹å˜æ–‡ä»¶å±ä¸»å’Œå±ç»„</p><p>åŒæ—¶å°†æŸä¸ªæ–‡ä»¶çš„å±ä¸»æ”¹ä¸ºoracleï¼Œå±ç»„æ”¹ä¸ºdb</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ chown oracle:dba dbora.sh</code></pre></div></div><p>ä½¿ç”¨-Ré€‰é¡¹å¯¹ç›®å½•å’Œç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œé€’å½’ä¿®æ”¹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ chown -R oracle:dba /home/oracle</code></pre></div></div><h2 id="34-passwd"><a href="#34-passwd" class="headerlink" title="34. passwd"></a>34. passwd</h2><p>passwdç”¨äºåœ¨å‘½ä»¤è¡Œä¿®æ”¹å¯†ç ï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤ä¼šè¦æ±‚ä½ å…ˆè¾“å…¥æ—§å¯†ç ï¼Œç„¶åè¾“å…¥æ–°å¯†ç </p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ passwd</code></pre></div></div><p>è¶…çº§ç”¨æˆ·å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ä¿®æ”¹å…¶ä»–ç”¨æˆ·çš„å¯†ç ï¼Œè¿™ä¸ªæ—¶å€™ä¸éœ€è¦è¾“å…¥ç”¨æˆ·çš„å¯†ç </p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># passwd USERNAME</code></pre></div></div><p>passwdè¿˜å¯ä»¥åˆ é™¤æŸä¸ªç”¨æˆ·çš„å¯†ç ï¼Œè¿™ä¸ªå‘½ä»¤åªæœ‰rootç”¨æˆ·æ‰èƒ½æ“ä½œï¼Œåˆ é™¤å¯†ç åï¼Œè¿™ä¸ªç”¨æˆ·ä¸éœ€è¦è¾“å…¥å¯†ç å°±å¯ä»¥ç™»å½•åˆ°ç³»ç»Ÿ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># passwd -d USERNAME</code></pre></div></div><h2 id="35-mkdir"><a href="#35-mkdir" class="headerlink" title="35. mkdir"></a>35. mkdir</h2><p>åœ¨homeç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºtempçš„ç›®å½•</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mkdir ~/temp</code></pre></div></div><p>ä½¿ç”¨-pé€‰é¡¹å¯ä»¥åˆ›å»ºä¸€ä¸ªè·¯å¾„ä¸Šæ‰€æœ‰ä¸å­˜åœ¨çš„ç›®å½•</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mkdir -p dir1/dir2/dir3/dir4/</code></pre></div></div><h2 id="36-ifconfig"><a href="#36-ifconfig" class="headerlink" title="36. ifconfig"></a>36. ifconfig</h2><p>ifconfigç”¨äºæŸ¥çœ‹å’Œé…ç½®Linuxç³»ç»Ÿçš„ç½‘ç»œæ¥å£</p><p>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£åŠå…¶çŠ¶æ€</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ifconfig -a</code></pre></div></div><p>ä½¿ç”¨upå’Œdownå‘½ä»¤å¯åŠ¨æˆ–åœæ­¢æŸä¸ªæ¥å£</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ifconfig eth0 up$ ifconfig eth0 down</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/03/ifconfig-7-examples-to-configure-network-interface/" target="_blank" rel="noopener">Ifconfig: 7 Examples To Configure Network Interface</a></p><h2 id="37-uname"><a href="#37-uname" class="headerlink" title="37. uname"></a>37. uname</h2><p>unameå¯ä»¥æ˜¾ç¤ºä¸€äº›é‡è¦çš„ç³»ç»Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å†…æ ¸åç§°ã€ä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬å·ã€å¤„ç†å™¨ç±»å‹ä¹‹ç±»çš„ä¿¡æ¯</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ uname -aLinux john-laptop 2.6.32-24-generic #41-Ubuntu SMP Thu Aug 19 01:12:52 UTC 2010 i686 GNU/Linux</code></pre></div></div><h2 id="38-whereis"><a href="#38-whereis" class="headerlink" title="38. whereis"></a>38. whereis</h2><p>å½“ä½ ä¸çŸ¥é“æŸä¸ªå‘½ä»¤çš„ä½ç½®æ—¶å¯ä»¥ä½¿ç”¨whereiså‘½ä»¤ï¼Œä¸‹é¢ä½¿ç”¨whereisæŸ¥æ‰¾lsçš„ä½ç½®</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ whereis lsls: /bin/ls /usr/share/man/man1/ls.1.gz /usr/share/man/man1p/ls.1p.gz</code></pre></div></div><p>å½“ä½ æƒ³æŸ¥æ‰¾æŸä¸ªå¯æ‰§è¡Œç¨‹åºçš„ä½ç½®ï¼Œä½†è¿™ä¸ªç¨‹åºåˆä¸åœ¨whereisçš„é»˜è®¤ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨-Bé€‰é¡¹ï¼Œå¹¶æŒ‡å®šç›®å½•ä½œä¸ºè¿™ä¸ªé€‰é¡¹çš„å‚æ•°ã€‚ä¸‹é¢çš„å‘½ä»¤åœ¨/tmpç›®å½•ä¸‹æŸ¥æ‰¾lsmkå‘½ä»¤</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ whereis -u -B /tmp -f lsmklsmk: /tmp/lsmk</code></pre></div></div><h2 id="39-whatis"><a href="#39-whatis" class="headerlink" title="39. whatis"></a>39. whatis</h2><p>wathisæ˜¾ç¤ºæŸä¸ªå‘½ä»¤çš„æè¿°ä¿¡æ¯</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ whatis lsls        (1)  - list directory contents$ whatis ifconfigifconfig (8)         - configure a network interface</code></pre></div></div><h2 id="40-locate"><a href="#40-locate" class="headerlink" title="40. locate"></a>40. locate</h2><p>locateå‘½åå¯ä»¥æ˜¾ç¤ºæŸä¸ªæŒ‡å®šæ–‡ä»¶ï¼ˆæˆ–ä¸€ç»„æ–‡ä»¶ï¼‰çš„è·¯å¾„ï¼Œå®ƒä¼šä½¿ç”¨ç”±updatedbåˆ›å»ºçš„æ•°æ®åº“</p><p>ä¸‹é¢çš„å‘½ä»¤ä¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰åŒ…å«crontabå­—ç¬¦ä¸²çš„æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ locate crontab/etc/anacrontab/etc/crontab/usr/bin/crontab/usr/share/doc/cron/examples/crontab2english.pl.gz/usr/share/man/man1/crontab.1.gz/usr/share/man/man5/anacrontab.5.gz/usr/share/man/man5/crontab.5.gz/usr/share/vim/vim72/syntax/crontab.vim</code></pre></div></div><h2 id="41-man"><a href="#41-man" class="headerlink" title="41. man"></a>41. man</h2><p>æ˜¾ç¤ºæŸä¸ªå‘½ä»¤çš„mané¡µé¢</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ man crontab</code></pre></div></div><p>æœ‰äº›å‘½ä»¤å¯èƒ½ä¼šæœ‰å¤šä¸ªmané¡µé¢ï¼Œæ¯ä¸ªmané¡µé¢å¯¹åº”ä¸€ç§å‘½ä»¤ç±»å‹</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ man SECTION-NUMBER commandname</code></pre></div></div><p>mané¡µé¢ä¸€èˆ¬å¯ä»¥åˆ†ä¸º8ç§å‘½ä»¤ç±»å‹</p><ol><li>ç”¨æˆ·å‘½ä»¤</li><li>ç³»ç»Ÿè°ƒç”¨</li><li>cåº“å‡½æ•°</li><li>è®¾å¤‡ä¸ç½‘ç»œæ¥å£</li><li>æ–‡ä»¶æ ¼å¼</li><li>æ¸¸æˆä¸å±ä¿</li><li>ç¯å¢ƒã€è¡¨ã€å®</li><li>ç³»ç»Ÿç®¡ç†å‘˜å‘½ä»¤å’Œåå°è¿è¡Œå‘½ä»¤</li></ol><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ‰§è¡Œ <code>whatis crontab</code>ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>crontab</code> æœ‰ä¸¤ä¸ªå‘½ä»¤ç±»å‹1å’Œ5ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å‘½ä»¤ç±»å‹5çš„mané¡µé¢</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ whatis crontabcrontab (1)          - maintain crontab files for individual users (V3)crontab (5)          - tables for driving cron$ man 5 crontab</code></pre></div></div><h2 id="42-tail"><a href="#42-tail" class="headerlink" title="42. tail"></a>42. tail</h2><p>tailå‘½ä»¤é»˜è®¤æ˜¾ç¤ºæ–‡ä»¶æœ€åçš„10è¡Œæ–‡æœ¬</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tail filename.txt</code></pre></div></div><p>ä½ å¯ä»¥ä½¿ç”¨-né€‰é¡¹æŒ‡å®šè¦æ˜¾ç¤ºçš„è¡Œæ•°</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tail -n N filename.txt</code></pre></div></div><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨-fé€‰é¡¹è¿›è¡Œå®æ—¶æŸ¥çœ‹ï¼Œè¿™ä¸ªå‘½ä»¤æ‰§è¡Œåä¼šç­‰å¾…ï¼Œå¦‚æœæœ‰æ–°è¡Œæ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œå®ƒä¼šç»§ç»­è¾“å‡ºæ–°çš„è¡Œï¼Œåœ¨æŸ¥çœ‹æ—¥å¿—æ—¶è¿™ä¸ªé€‰é¡¹ä¼šéå¸¸æœ‰ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡CTRL-Cç»ˆæ­¢å‘½ä»¤çš„æ‰§è¡Œ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ tail -f log-file</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/09/multitail-to-view-tail-f-output-of-multiple-log-files-in-one-terminal/" target="_blank" rel="noopener">3 Methods To View tail -f output of Multiple Log Files in One Terminal</a></p><h2 id="43-less"><a href="#43-less" class="headerlink" title="43. less"></a>43. less</h2><p>è¿™ä¸ªå‘½åå¯ä»¥åœ¨ä¸åŠ è½½æ•´ä¸ªæ–‡ä»¶çš„å‰æä¸‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œåœ¨æŸ¥çœ‹å¤§å‹æ—¥å¿—æ–‡ä»¶çš„æ—¶å€™è¿™ä¸ªå‘½ä»¤ä¼šéå¸¸æœ‰ç”¨</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ less huge-log-file.log</code></pre></div></div><p>å½“ä½ ç”¨lesså‘½ä»¤æ‰“å¼€æŸä¸ªæ–‡ä»¶æ—¶ï¼Œä¸‹é¢ä¸¤ä¸ªæŒ‰é”®ä¼šç»™ä½ å¸¦æ¥å¾ˆå¤šå¸®åŠ©ï¼Œä»–ä»¬ç”¨äºå‘å‰å’Œå‘åæ»šå±</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>CTRL+F â€“ forward one windowCTRL+B â€“ backward one window</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/02/unix-less-command-10-tips-for-effective-navigation/" target="_blank" rel="noopener">Unix Less Command: 10 Tips for Effective Navigation</a></p><h2 id="44-su"><a href="#44-su" class="headerlink" title="44. su"></a>44. su</h2><p>suå‘½ä»¤ç”¨äºåˆ‡æ¢ç”¨æˆ·è´¦å·ï¼Œè¶…çº§ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥åˆ‡æ¢åˆ°ä»»ä½•å…¶ä»–ç”¨æˆ·è€Œä¸ç”¨è¾“å…¥å¯†ç </p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ su - USERNAME</code></pre></div></div><p>ç”¨å¦å¤–ä¸€ä¸ªç”¨æˆ·åæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ä¸‹é¢çš„ç¤ºä¾‹ä¸­ç”¨æˆ·johnä½¿ç”¨rajç”¨æˆ·åæ‰§è¡Œlså‘½ä»¤ï¼Œæ‰§è¡Œå®Œåè¿”å›johnçš„è´¦å·</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>[john@dev-server]$ su - raj -c 'ls'[john@dev-server]$</code></pre></div></div><p>ç”¨æŒ‡å®šç”¨æˆ·ç™»å½•ï¼Œå¹¶ä¸”ä½¿ç”¨æŒ‡å®šçš„shellç¨‹åºï¼Œè€Œä¸ç”¨é»˜è®¤çš„</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ su -s 'SHELLNAME' USERNAME</code></pre></div></div><h2 id="45-mysql"><a href="#45-mysql" class="headerlink" title="45. mysql"></a>45. mysql</h2><p>mysqlå¯èƒ½æ˜¯Linuxä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„æ•°æ®åº“ï¼Œå³ä½¿ä½ æ²¡æœ‰åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£…mysqlï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨mysqlå®¢æˆ·ç«¯è¿æ¥åˆ°è¿œç¨‹çš„mysqlæœåŠ¡å™¨</p><p>è¿æ¥ä¸€ä¸ªè¿œç¨‹æ•°æ®åº“ï¼Œéœ€è¦è¾“å…¥å¯†ç </p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mysql -u root -p -h 192.168.1.2</code></pre></div></div><p>è¿æ¥æœ¬åœ°æ•°æ®åº“</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ mysql -u root -p</code></pre></div></div><p>ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ•°æ®åº“å¯†ç ï¼Œåªéœ€è¦åœ¨-påé¢åŠ ä¸Šå¯†ç ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥ç›´æ¥å†™åœ¨påé¢è€Œä¸ç”¨åŠ ç©ºæ ¼</p><h2 id="46-yum"><a href="#46-yum" class="headerlink" title="46. yum"></a>46. yum</h2><p>ä½¿ç”¨yumå®‰è£…apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ yum install httpd</code></pre></div></div><p>æ›´æ–°apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ yum update httpd</code></pre></div></div><p>å¸è½½/åˆ é™¤apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ yum remove httpd</code></pre></div></div><h2 id="47-rpm"><a href="#47-rpm" class="headerlink" title="47. rpm"></a>47. rpm</h2><p>ä½¿ç”¨rpmå®‰è£…apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># rpm -ivh httpd-2.2.3-22.0.1.el5.i386.rpm</code></pre></div></div><p>æ›´æ–°apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># rpm -uvh httpd-2.2.3-22.0.1.el5.i386.rpm</code></pre></div></div><p>å¸è½½/åˆ é™¤apache</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># rpm -ev httpd</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2010/07/rpm-command-examples/" target="_blank" rel="noopener">RPM Command: 15 Examples to Install, Uninstall, Upgrade, Query RPM Packages</a></p><h2 id="48-ping"><a href="#48-ping" class="headerlink" title="48. ping"></a>48. ping</h2><p>pingä¸€ä¸ªè¿œç¨‹ä¸»æœºï¼Œåªå‘5ä¸ªæ•°æ®åŒ…</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ ping -c 5 gmail.com</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/11/ping-tutorial-13-effective-ping-command-examples/" target="_blank" rel="noopener">Ping Tutorial: 15 Effective Ping Command Examples</a></p><h2 id="49-date"><a href="#49-date" class="headerlink" title="49. date"></a>49. date</h2><p>è®¾ç½®ç³»ç»Ÿæ—¥æœŸ</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># date -s "01/31/2010 23:59:53"</code></pre></div></div><p>å½“ä½ ä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´ï¼Œä½ éœ€è¦åŒæ­¥ç¡¬ä»¶æ—¶é—´å’Œç³»ç»Ÿæ—¶é—´</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code># hwclock â€“systohc# hwclock --systohc â€“utc</code></pre></div></div><h2 id="50-wget"><a href="#50-wget" class="headerlink" title="50. wget"></a>50. wget</h2><p>ä½¿ç”¨wgetä»ç½‘ä¸Šä¸‹è½½è½¯ä»¶ã€éŸ³ä¹ã€è§†é¢‘</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ wget http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz</code></pre></div></div><p>ä¸‹è½½æ–‡ä»¶å¹¶ä»¥æŒ‡å®šçš„æ–‡ä»¶åä¿å­˜æ–‡ä»¶</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre><code>$ wget -O taglist.zip http://www.vim.org/scripts/download_script.php?src_id=7701</code></pre></div></div><p>æ›´å¤šç¤ºä¾‹ï¼š<a href="http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/" target="_blank" rel="noopener">The Ultimate Wget Download Guide With 15 Awesome Examples</a></p><div class="copy-right"><p>æœ¬æ–‡ç”± <a href="javascript:void(0);">ç‹çˆµnice</a> åˆ›ä½œï¼Œ é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="noopener">çŸ¥è¯†å…±äº«ç½²å4.0</a> å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯ã€‚</p><p>æœ¬ç«™æ–‡ç« é™¤æ³¨æ˜è½¬è½½/å‡ºå¤„å¤–ï¼Œå‡ä¸ºæœ¬ç«™åŸåˆ›æˆ–ç¿»è¯‘ï¼Œè½¬è½½å‰è¯·åŠ¡å¿…ç½²åã€‚</p></div></article></body></html>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxä¹‹proxy_passæŒ‡ä»¤å®Œå…¨æ‹†è§£</title>
      <link href="/2019/02/18/nginx%E4%B9%8Bproxy_pass%E6%8C%87%E4%BB%A4%E5%AE%8C%E5%85%A8%E6%8B%86%E8%A7%A3/"/>
      <url>/2019/02/18/nginx%E4%B9%8Bproxy_pass%E6%8C%87%E4%BB%A4%E5%AE%8C%E5%85%A8%E6%8B%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="ä¸€ã€proxy-passçš„nginxå®˜æ–¹æŒ‡å—"><a href="#ä¸€ã€proxy-passçš„nginxå®˜æ–¹æŒ‡å—" class="headerlink" title="ä¸€ã€proxy_passçš„nginxå®˜æ–¹æŒ‡å—"></a>ä¸€ã€proxy_passçš„nginxå®˜æ–¹æŒ‡å—</h3><p>nginxä¸­æœ‰ä¸¤ä¸ªæ¨¡å—éƒ½æœ‰proxy_passæŒ‡ä»¤ã€‚</p><ul><li><p>ngx_http_proxy_moduleçš„proxy_passï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•: proxy_pass URL;</span><br><span class="line">åœºæ™¯: location, if in location, limit_except</span><br><span class="line">è¯´æ˜: è®¾ç½®åç«¯ä»£ç†æœåŠ¡å™¨çš„åè®®(protocol)å’Œåœ°å€(address),ä»¥åŠlocationä¸­å¯ä»¥åŒ¹é…çš„ä¸€ä¸ªå¯é€‰çš„URIã€‚åè®®å¯ä»¥æ˜¯"http"æˆ–"https"ã€‚åœ°å€å¯ä»¥æ˜¯ä¸€ä¸ªåŸŸåæˆ–ipåœ°å€å’Œç«¯å£ï¼Œæˆ–è€…ä¸€ä¸ª unix-domain socket è·¯å¾„ã€‚  </span><br><span class="line">è¯¦è§å®˜æ–¹æ–‡æ¡£: http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass</span><br><span class="line">URIçš„åŒ¹é…ï¼Œæœ¬æ–‡ç¬¬å››éƒ¨åˆ†é‡ç‚¹è®¨è®ºã€‚</span><br></pre></td></tr></tbody></table></figure></div></li><li><p>ngx_stream_proxy_moduleçš„proxy_passï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•: proxy_pass address;</span><br><span class="line">åœºæ™¯: server</span><br><span class="line">è¯´æ˜: è®¾ç½®åç«¯ä»£ç†æœåŠ¡å™¨çš„åœ°å€ã€‚è¿™ä¸ªåœ°å€(address)å¯ä»¥æ˜¯ä¸€ä¸ªåŸŸåæˆ–ipåœ°å€å’Œç«¯å£ï¼Œæˆ–è€…ä¸€ä¸ª unix-domain socketè·¯å¾„ã€‚  </span><br><span class="line">è¯¦è§å®˜æ–¹æ–‡æ¡£: http://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_pass</span><br></pre></td></tr></tbody></table></figure></div></li></ul><h3 id="äºŒã€ä¸¤ä¸ªproxy-passçš„å…³ç³»å’ŒåŒºåˆ«"><a href="#äºŒã€ä¸¤ä¸ªproxy-passçš„å…³ç³»å’ŒåŒºåˆ«" class="headerlink" title="äºŒã€ä¸¤ä¸ªproxy_passçš„å…³ç³»å’ŒåŒºåˆ«"></a>äºŒã€ä¸¤ä¸ªproxy_passçš„å…³ç³»å’ŒåŒºåˆ«</h3><p>åœ¨ä¸¤ä¸ªæ¨¡å—ä¸­ï¼Œä¸¤ä¸ªproxy_passéƒ½æ˜¯ç”¨æ¥åšåç«¯ä»£ç†çš„æŒ‡ä»¤ã€‚<br><strong>ngx_stream_proxy_module</strong>æ¨¡å—çš„proxy_passæŒ‡ä»¤åªèƒ½åœ¨serveræ®µä½¿ç”¨ä½¿ç”¨, åªéœ€è¦æä¾›åŸŸåæˆ–ipåœ°å€å’Œç«¯å£ã€‚å¯ä»¥ç†è§£ä¸ºç«¯å£è½¬å‘ï¼Œå¯ä»¥æ˜¯tcpç«¯å£ï¼Œä¹Ÿå¯ä»¥æ˜¯udpç«¯å£ã€‚</p><p><strong>ngx_http_proxy_module</strong>æ¨¡å—çš„proxy_passæŒ‡ä»¤éœ€è¦åœ¨locationæ®µï¼Œlocationä¸­çš„ifæ®µï¼Œlimit_exceptæ®µä¸­ä½¿ç”¨ï¼Œå¤„ç†éœ€è¦æä¾›åŸŸåæˆ–ipåœ°å€å’Œç«¯å£å¤–ï¼Œè¿˜éœ€è¦æä¾›åè®®ï¼Œå¦‚â€httpâ€æˆ–â€httpsâ€ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„uriå¯ä»¥é…ç½®ã€‚</p><h3 id="ä¸‰ã€proxy-passçš„å…·ä½“ç”¨æ³•"><a href="#ä¸‰ã€proxy-passçš„å…·ä½“ç”¨æ³•" class="headerlink" title="ä¸‰ã€proxy_passçš„å…·ä½“ç”¨æ³•"></a>ä¸‰ã€proxy_passçš„å…·ä½“ç”¨æ³•</h3><p>ngx_stream_proxy_moduleæ¨¡å—çš„proxy_passæŒ‡ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">127.0.0.1:12345</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> <span class="number">127.0.0.1:8080</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">12345</span>;</span><br><span class="line">    <span class="attribute">proxy_connect_timeout</span> <span class="number">1s</span>;</span><br><span class="line">    <span class="attribute">proxy_timeout</span> <span class="number">1m</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> example.com:<span class="number">12345</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">53</span> udp;</span><br><span class="line">    <span class="attribute">proxy_responses</span> <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">proxy_timeout</span> <span class="number">20s</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> dns.example.com:<span class="number">53</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span> [::<span class="number">1</span>]:<span class="number">12345</span>;</span><br><span class="line">    <span class="attribute">proxy_pass</span> unix:/tmp/stream.socket;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ngx_http_proxy_moduleæ¨¡å—çš„proxy_passæŒ‡ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span>      <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> www.test.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ­£å¸¸ä»£ç†ï¼Œä¸ä¿®æ”¹åç«¯urlçš„</span></span><br><span class="line">    <span class="attribute">location</span> /some/path/ {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¿®æ”¹åç«¯urlåœ°å€çš„ä»£ç†ï¼ˆæœ¬ä¾‹åç«¯åœ°å€ä¸­ï¼Œæœ€åå¸¦äº†ä¸€ä¸ªæ–œçº¿)</span></span><br><span class="line">    <span class="attribute">location</span> /testb {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://www.other.com:8801/;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨ if in location</span></span><br><span class="line">    <span class="attribute">location</span> /google {</span><br><span class="line">        <span class="attribute">if</span> ( <span class="variable">$geoip_country_code</span> <span class="regexp">~ (RU|CN)</span> ) {</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://www.google.hk;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> /yongfu/ {</span><br><span class="line">        <span class="comment"># æ²¡æœ‰åŒ¹é… limit_except çš„ï¼Œä»£ç†åˆ° unix:/tmp/backend.socket:/uri/</span></span><br><span class="line">        proxy_pass http://unix:/tmp/backend.socket:/uri/;;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åŒ¹é…åˆ°è¯·æ±‚æ–¹æ³•ä¸º: PUT or DELETE, ä»£ç†åˆ°9080</span></span><br><span class="line">        <span class="attribute">limit_except</span> PUT DELETE {</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://127.0.0.1:9080;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å››ã€proxy-passåï¼Œåç«¯æœåŠ¡å™¨çš„url-request-uri-æƒ…å†µåˆ†æ"><a href="#å››ã€proxy-passåï¼Œåç«¯æœåŠ¡å™¨çš„url-request-uri-æƒ…å†µåˆ†æ" class="headerlink" title="å››ã€proxy_passåï¼Œåç«¯æœåŠ¡å™¨çš„url(request_uri)æƒ…å†µåˆ†æ"></a>å››ã€proxy_passåï¼Œåç«¯æœåŠ¡å™¨çš„url(request_uri)æƒ…å†µåˆ†æ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span>      <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> www.test.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢A</span></span><br><span class="line">    <span class="comment"># è®¿é—® http://www.test.com/testa/aaaa</span></span><br><span class="line">    <span class="comment"># åç«¯çš„request_uriä¸º: /testa/aaaa</span></span><br><span class="line">    <span class="attribute">location</span><span class="regexp"> ^~</span> /testa/ {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æƒ…å½¢B</span></span><br><span class="line">    <span class="comment"># è®¿é—® http://www.test.com/testb/bbbb</span></span><br><span class="line">    <span class="comment"># åç«¯çš„request_uriä¸º: /bbbb</span></span><br><span class="line">    <span class="attribute">location</span><span class="regexp"> ^~</span> /testb/ {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801/;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢C</span></span><br><span class="line">    <span class="comment"># ä¸‹é¢è¿™æ®µlocationæ˜¯æ­£ç¡®çš„</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ /testc</span> {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢D</span></span><br><span class="line">    <span class="comment"># ä¸‹é¢è¿™æ®µlocationæ˜¯é”™è¯¯çš„</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># nginx -t æ—¶ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯: </span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># nginx: [emerg] "proxy_pass" cannot have URI part in location given by regular </span></span><br><span class="line">    <span class="comment"># expression, or inside named location, or inside "if" statement, or inside </span></span><br><span class="line">    <span class="comment"># "limit_except" block in /opt/app/nginx/conf/vhost/test.conf:17</span></span><br><span class="line">    <span class="comment"># </span></span><br><span class="line">    <span class="comment"># å½“locationä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œproxy_pass ä¸èƒ½åŒ…å«URIéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­åŒ…å«äº†"/"</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ /testd</span> {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801/;   <span class="comment"># è®°ä½ï¼Œlocationä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œä¸èƒ½è¿™æ ·å†™ï¼ï¼ï¼</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢E</span></span><br><span class="line">    <span class="comment"># è®¿é—® http://www.test.com/ccc/bbbb</span></span><br><span class="line">    <span class="comment"># åç«¯çš„request_uriä¸º: /aaa/ccc/bbbb</span></span><br><span class="line">    <span class="attribute">location</span> /ccc/ {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801/aaa<span class="variable">$request_uri</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢F</span></span><br><span class="line">    <span class="comment"># è®¿é—® http://www.test.com/namea/ddd</span></span><br><span class="line">    <span class="comment"># åç«¯çš„request_uriä¸º: /yongfu?namea=ddd</span></span><br><span class="line">    <span class="attribute">location</span> /namea/ {</span><br><span class="line">        <span class="attribute">rewrite</span>    /namea/([^/]+) /yongfu?namea=<span class="variable">$1</span> <span class="literal">break</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æƒ…å½¢G</span></span><br><span class="line">    <span class="comment"># è®¿é—® http://www.test.com/nameb/eee</span></span><br><span class="line">    <span class="comment"># åç«¯çš„request_uriä¸º: /yongfu?nameb=eee</span></span><br><span class="line">    <span class="attribute">location</span> /nameb/ {</span><br><span class="line">        <span class="attribute">rewrite</span>    /nameb/([^/]+) /yongfu?nameb=<span class="variable">$1</span> <span class="literal">break</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8801/;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /data/logs/www/www.test.com.log;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span>      <span class="number">8801</span>;</span><br><span class="line">    <span class="attribute">server_name</span> www.test.com;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">root</span>        /data/www/test;</span><br><span class="line">    <span class="attribute">index</span>       index.php index.html;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> /test.php?u=<span class="variable">$1</span> <span class="literal">last</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> {</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> =<span class="number">404</span>;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> unix:/tmp/php-cgi.sock;</span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span> /data/logs/www/www.test.com.<span class="number">8801</span>.log;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul><li>æƒ…å½¢Aå’Œæƒ…å½¢Bè¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥çŸ¥é“proxy_passåå¸¦ä¸€ä¸ªURI,å¯ä»¥æ˜¯æ–œæ (/)ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–uriï¼Œå¯¹åç«¯request_uriå˜é‡çš„å½±å“ã€‚</li><li>æƒ…å½¢Dè¯´æ˜ï¼Œå½“locationä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œproxy_passä¸èƒ½åŒ…å«URIéƒ¨åˆ†ã€‚</li><li>æƒ…å½¢Eé€šè¿‡å˜é‡($request_uri, ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å˜é‡)ï¼Œå¯¹åç«¯çš„request_uriè¿›è¡Œæ”¹å†™ã€‚</li><li>æƒ…å½¢Få’Œæƒ…å½¢Gé€šè¿‡rewriteé…åˆbreakæ ‡å¿—,å¯¹urlè¿›è¡Œæ”¹å†™ï¼Œå¹¶æ”¹å†™åç«¯çš„request_uriã€‚éœ€è¦æ³¨æ„ï¼Œproxy_passåœ°å€çš„URIéƒ¨åˆ†åœ¨æƒ…å½¢Gä¸­æ— æ•ˆï¼Œä¸ç®¡å¦‚ä½•è®¾ç½®ï¼Œéƒ½ä¼šè¢«å¿½ç•¥ã€‚</li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxä¹‹proxy_passä»£ç†åç«¯httpsè¯·æ±‚å®Œå…¨æ‹†è§£</title>
      <link href="/2019/02/18/nginx%E4%B9%8Bproxy_pass%E4%BB%A3%E7%90%86%E5%90%8E%E7%AB%AFhttps%E8%AF%B7%E6%B1%82%E5%AE%8C%E5%85%A8%E6%8B%86%E8%A7%A3/"/>
      <url>/2019/02/18/nginx%E4%B9%8Bproxy_pass%E4%BB%A3%E7%90%86%E5%90%8E%E7%AB%AFhttps%E8%AF%B7%E6%B1%82%E5%AE%8C%E5%85%A8%E6%8B%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡è§£é‡Šäº†æ€ä¹ˆå¯¹nginxå’Œåç«¯æœåŠ¡å™¨ç»„æˆ–ä»£ç†æœåŠ¡å™¨è¿›è¡ŒåŠ å¯†httpé€šä¿¡ã€‚</p><h3 id="è·å–SSLæœåŠ¡ç«¯è¯ä¹¦"><a href="#è·å–SSLæœåŠ¡ç«¯è¯ä¹¦" class="headerlink" title="è·å–SSLæœåŠ¡ç«¯è¯ä¹¦"></a>è·å–SSLæœåŠ¡ç«¯è¯ä¹¦</h3><p>ä½ å¯ä»¥ä»ä¸€ä¸ªå¯ä¿¡è¯ä¹¦é¢å‘æœºæ„(CA)è´­ä¹°ä¸€ä¸ªæœåŠ¡å™¨è¯ä¹¦, æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨opensslåº“åˆ›å»ºä¸€ä¸ªå†…éƒ¨CAï¼Œ å¹¶ç»™è‡ªå·±é¢å‘è¯ä¹¦ã€‚è¿™ä¸ªæœåŠ¡å™¨ç«¯è¯ä¹¦å’Œç§é’¥éœ€è¦éƒ¨ç½²åœ¨åç«¯çš„æ¯ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚</p><h3 id="è·å–SSLå®¢æˆ·ç«¯è¯ä¹¦"><a href="#è·å–SSLå®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="è·å–SSLå®¢æˆ·ç«¯è¯ä¹¦"></a>è·å–SSLå®¢æˆ·ç«¯è¯ä¹¦</h3><p>nignxä½¿ç”¨ä¸€ä¸ªSSLå®¢æˆ·ç«¯è¯ä¹¦æ¥å¯¹åç«¯æœåŠ¡å™¨ç»„æ¥æ ‡è¯†è‡ªå·±ã€‚è¿™ä¸ªå®¢æˆ·ç«¯è¯ä¹¦å¿…é¡»æ˜¯è¢«ä¸€ä¸ªå¯ä¿¡CAç­¾åçš„ï¼Œå¹¶ä¸”å’Œç›¸åŒ¹é…çš„ç§é’¥ä¸€èµ·éƒ¨ç½²åœ¨nginxä¸­ã€‚<br>ä½ è¿˜éœ€è¦åœ¨åç«¯æœåŠ¡å™¨ä¸Šé…ç½®å¥½æ‰€æœ‰çš„æ¥æºSSLè¿æ¥éƒ½éœ€è¦å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¹¶ä¿¡ä»»è¿™ä¸ªCAé¢å‘çš„nginxå®¢æˆ·ç«¯è¯ä¹¦ã€‚ ç„¶åå½“nginxè¿æ¥åç«¯æ—¶ï¼Œå°†æä¾›å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¹¶ä¸”åç«¯å°†ä¼šæ¥æ”¶è¿™ä¸ªè¿æ¥ã€‚</p><h3 id="é…ç½®nginx"><a href="#é…ç½®nginx" class="headerlink" title="é…ç½®nginx"></a>é…ç½®nginx</h3><p>é¦–å…ˆï¼Œæ”¹å˜ç›¸åº”URLåˆ°æ”¯æŒSSLè¿æ¥çš„åç«¯æœåŠ¡å™¨ç»„ã€‚åœ¨nginxçš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡æ˜proxy_passæŒ‡ä»¤åœ¨ä»£ç†æœåŠ¡å™¨æˆ–åç«¯æœåŠ¡å™¨ç»„ä¸­ä½¿ç”¨â€httpsâ€åè®®:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /upstream {</span><br><span class="line">    <span class="attribute">proxy_pass</span> https://backend.example.com;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¢åŠ å®¢æˆ·ç«¯è¯ä¹¦å’Œç§é’¥ï¼Œç”¨äºéªŒè¯nginxå’Œæ¯ä¸ªåç«¯æœåŠ¡å™¨ã€‚ä½¿ç”¨proxy_ssl_certificate å’Œ proxy_ssl_certificate_keyæŒ‡ä»¤:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /upstream {  </span><br><span class="line">    <span class="attribute">proxy_pass</span>                https://backend.example.com;  </span><br><span class="line">    <span class="attribute">proxy_ssl_certificate</span>     /etc/nginx/client.pem;  </span><br><span class="line">    <span class="attribute">proxy_ssl_certificate_key</span> /etc/nginx/client.key  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœä½ åœ¨åç«¯æœåŠ¡å™¨ä½¿ç”¨äº†è‡ªç­¾åè¯ä¹¦æˆ–è€…ä½¿ç”¨äº†è‡ªå»ºCAï¼Œä½ éœ€è¦é…ç½®proxy_ssl_trusted_certificate. è¿™ä¸ªæ–‡ä»¶å¿…é¡»æ˜¯PEMæ ¼å¼çš„ã€‚å¦å¤–è¿˜å¯ä»¥é…ç½®proxy_ssl_verifyå’Œproxy_ssl_verfiy_depthæŒ‡ä»¤ï¼Œ ç”¨æ¥éªŒè¯å®‰å…¨è¯ä¹¦ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /upstream {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">proxy_ssl_trusted_certificate</span> /etc/nginx/trusted_ca_cert.crt;</span><br><span class="line">    <span class="attribute">proxy_ssl_verify</span>       <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">proxy_ssl_verify_depth</span> <span class="number">2</span>;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ¯ä¸€ä¸ªæ–°çš„SSLè¿æ¥éƒ½éœ€è¦åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿›è¡Œä¸€ä¸ªå®Œæ•´çš„SSLæ¡æ‰‹è¿‡ç¨‹ï¼Œè¿™éå¸¸è€—è´¹CPUè®¡ç®—èµ„æºã€‚ä¸ºäº†æ˜¯nignxä»£ç†é¢„å…ˆåå•†è¿æ¥å‚æ•°ï¼Œä½¿ç”¨ä¸€ç§ç®€ç•¥çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œå¢åŠ proxy_ssl_session_reuseæŒ‡ä»¤é…ç½®:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /upstream {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">proxy_ssl_session_reuse</span> <span class="literal">on</span>;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¯é€‰çš„ï¼Œä½ ä¹Ÿå¯ä»¥é…ç½®ä½¿ç”¨çš„SSLåè®®å’ŒSSLç§˜é’¥ç®—æ³•:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /upstream {</span><br><span class="line">        ...</span><br><span class="line">        <span class="attribute">proxy_ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">proxy_ssl_ciphers</span>   HIGH:!aNULL:!MD5;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="é…ç½®åç«¯æœåŠ¡å™¨"><a href="#é…ç½®åç«¯æœåŠ¡å™¨" class="headerlink" title="é…ç½®åç«¯æœåŠ¡å™¨"></a>é…ç½®åç«¯æœåŠ¡å™¨</h3><p>æ¯ä¸€ä¸ªåç«¯æœåŠ¡å™¨éƒ½å¿…é¡»é…ç½®æˆæ¥å—httpsè¿æ¥ã€‚æ¯ä¸€ä¸ªåç«¯æœåŠ¡å™¨éœ€è¦ä½¿ç”¨ssl_certificateå’Œssl_certificate_keyæŒ‡ä»¤æ¥æŒ‡å®šæœåŠ¡å™¨è¯ä¹¦å’Œç§é’¥çš„æ–‡ä»¶è·¯å¾„:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">    <span class="attribute">listen</span>              <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span>         backend1.example.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span>     /etc/ssl/certs/server.crt;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/ssl/certs/server.key;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">location</span> /yourapp {</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://url_to_app.com;</span><br><span class="line">        ...</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ssl_client_certificatæŒ‡ä»¤æ¥è®¾å®šå®¢æˆ·ç«¯è¯ä¹¦çš„æ–‡ä»¶è·¯å¾„:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">ssl_client_certificate</span> /etc/ssl/certs/ca.crt;</span><br><span class="line">    <span class="attribute">ssl_verify_client</span>      <span class="literal">off</span>;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="å®Œæ•´ç¤ºä¾‹"><a href="#å®Œæ•´ç¤ºä¾‹" class="headerlink" title="å®Œæ•´ç¤ºä¾‹"></a>å®Œæ•´ç¤ºä¾‹</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">nginx</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">upstream</span> backend.example.com {</span><br><span class="line">        <span class="attribute">server</span> backend1.example.com:<span class="number">443</span>;</span><br><span class="line">        <span class="attribute">server</span> backend2.example.com:<span class="number">443</span>;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> {</span><br><span class="line">        <span class="attribute">listen</span>      <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> www.example.com;</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /upstream {</span><br><span class="line">            <span class="attribute">proxy_pass</span>                    https://backend.example.com;</span><br><span class="line">            <span class="attribute">proxy_ssl_certificate</span>         /etc/nginx/client.pem;</span><br><span class="line">            <span class="attribute">proxy_ssl_certificate_key</span>     /etc/nginx/client.key</span><br><span class="line">            proxy_ssl_protocols           TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">            <span class="attribute">proxy_ssl_ciphers</span>             HIGH:!aNULL:!MD5;</span><br><span class="line">            <span class="attribute">proxy_ssl_trusted_certificate</span> /etc/nginx/trusted_ca_cert.crt;</span><br><span class="line"></span><br><span class="line">            <span class="attribute">proxy_ssl_verify</span>        <span class="literal">on</span>;</span><br><span class="line">            <span class="attribute">proxy_ssl_verify_depth</span>  <span class="number">2</span>;</span><br><span class="line">            <span class="attribute">proxy_ssl_session_reuse</span> <span class="literal">on</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> {</span><br><span class="line">        <span class="attribute">listen</span>      <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> backend1.example.com;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_certificate</span>        /etc/ssl/certs/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span>    /etc/ssl/certs/server.key;</span><br><span class="line">        <span class="attribute">ssl_client_certificate</span> /etc/ssl/certs/ca.crt;</span><br><span class="line">        <span class="attribute">ssl_verify_client</span>      <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /yourapp {</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://url_to_app.com;</span><br><span class="line">        ...</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> {</span><br><span class="line">        <span class="attribute">listen</span>      <span class="number">443</span> ssl;</span><br><span class="line">        <span class="attribute">server_name</span> backend2.example.com;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_certificate</span>        /etc/ssl/certs/server.crt;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span>    /etc/ssl/certs/server.key;</span><br><span class="line">        <span class="attribute">ssl_client_certificate</span> /etc/ssl/certs/ca.crt;</span><br><span class="line">        <span class="attribute">ssl_verify_client</span>      <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /yourapp {</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://url_to_app.com;</span><br><span class="line">        ...</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ proxy_passæŒ‡ä»¤è®¾ç½®ä½¿ç”¨äº†â€httpsâ€åè®®ï¼Œæ‰€ä»¥nginxè½¬å‘åˆ°åç«¯æœåŠ¡å™¨çš„æµé‡æ˜¯å®‰å…¨çš„ã€‚</p><p>å½“ä¸€ä¸ªå®‰å…¨çš„è¿æ¥ç¬¬ä¸€æ¬¡ä»nginxè½¬å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œå°†ä¼šå®æ–½ä¸€æ¬¡å®Œæ•´çš„æ¡æ‰‹è¿‡ç¨‹ã€‚</p><ul><li>proxy_ssl_certificateæŒ‡ä»¤è®¾ç½®äº†åç«¯æœåŠ¡å™¨éœ€è¦çš„PEMæ ¼å¼è¯ä¹¦çš„æ–‡ä»¶ä½ç½®ã€‚</li><li>proxy_ssl_certificate_keyæŒ‡ä»¤è®¾ç½®äº†è¯ä¹¦çš„ç§é’¥ä½ç½®ã€‚proxy_ssl_protocolså’Œ</li><li>proxy_ssl_ciphersæŒ‡ä»¤æ§åˆ¶ä½¿ç”¨çš„åè®®å’Œç§˜é’¥ç®—æ³•ã€‚</li></ul><p>å› ä¸ºproxy_ssl_session_reuseæŒ‡ä»¤é…ç½®ï¼Œå½“ä¸‹ä¸€æ¬¡nginxè½¬å‘ä¸€ä¸ªè¿æ¥åˆ°åç«¯æœåŠ¡å™¨æ—¶ï¼Œä¼šè¯å‚æ•°ä¼šè¢«é‡å¤ä½¿ç”¨ï¼Œä»è€Œæ›´å¿«çš„å»ºç«‹å®‰å…¨è¿æ¥ã€‚</p><p><strong>proxy_ssl_trusted_certificate</strong>æŒ‡ä»¤è®¾ç½®çš„é‚£ä¸ªå¯ä¿¡CAè¯ä¹¦æ–‡ä»¶æ˜¯ç”¨æ¥éªŒè¯åç«¯æœåŠ¡å™¨çš„è¯ä¹¦ã€‚</p><p><strong>proxy_ssl_verify_depth</strong>æŒ‡ä»¤æŒ‡å®šäº†è¯ä¹¦é“¾æ£€æŸ¥çš„æ·±åº¦ã€‚proxy_ssl_verifyæŒ‡ä»¤éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå²ä¸Šæœ€å…¨SQLä¼˜åŒ–æ–¹æ¡ˆ</title>
      <link href="/2019/01/30/MySQL%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8SQL%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/"/>
      <url>/2019/01/30/MySQL%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8SQL%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="å²ä¸Šæœ€å…¨SQLä¼˜åŒ–æ–¹æ¡ˆ"><a href="#å²ä¸Šæœ€å…¨SQLä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="å²ä¸Šæœ€å…¨SQLä¼˜åŒ–æ–¹æ¡ˆ"></a>å²ä¸Šæœ€å…¨SQLä¼˜åŒ–æ–¹æ¡ˆ</h1><p>åœ¨è¿›è¡ŒMySQLçš„ä¼˜åŒ–ä¹‹å‰ï¼Œå¿…é¡»è¦äº†è§£çš„å°±æ˜¯MySQLçš„æŸ¥è¯¢è¿‡ç¨‹ï¼Œå¾ˆå¤šæŸ¥è¯¢ä¼˜åŒ–å·¥ä½œå®é™…ä¸Šå°±æ˜¯éµå¾ªä¸€äº›åŸåˆ™ï¼Œè®©MySQLçš„ä¼˜åŒ–å™¨èƒ½å¤ŸæŒ‰ç…§é¢„æƒ³çš„åˆç†æ–¹å¼è¿è¡Œè€Œå·²ã€‚<br><a href="https://i.imgur.com/2q4bunY.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/2q4bunY.png" class="lazyload" title></a></p><h2 id="1ã€ä¼˜åŒ–çš„å“²å­¦"><a href="#1ã€ä¼˜åŒ–çš„å“²å­¦" class="headerlink" title="1ã€ä¼˜åŒ–çš„å“²å­¦"></a>1ã€ä¼˜åŒ–çš„å“²å­¦</h2><p>æ³¨ï¼šä¼˜åŒ–æœ‰é£é™©ï¼Œæ¶‰è¶³éœ€è°¨æ…</p><h3 id="aä¼˜åŒ–å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Ÿ"><a href="#aä¼˜åŒ–å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="aä¼˜åŒ–å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Ÿ"></a>aä¼˜åŒ–å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼Ÿ</h3><ul><li><p>ä¼˜åŒ–ä¸æ€»æ˜¯å¯¹ä¸€ä¸ªå•çº¯çš„ç¯å¢ƒè¿›è¡Œï¼Œè¿˜å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„å·²æŠ•äº§çš„ç³»ç»Ÿï¼›</p></li><li><p>ä¼˜åŒ–æ‰‹æ®µæœ¬æ¥å°±æœ‰å¾ˆå¤§çš„é£é™©ï¼Œåªä¸è¿‡ä½ æ²¡èƒ½åŠ›æ„è¯†åˆ°å’Œé¢„è§åˆ°ï¼›</p></li><li><p>ä»»ä½•çš„æŠ€æœ¯å¯ä»¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œä½†å¿…ç„¶å­˜åœ¨å¸¦æ¥ä¸€ä¸ªé—®é¢˜çš„é£é™©ï¼›</p></li><li><p>å¯¹äºä¼˜åŒ–æ¥è¯´è§£å†³é—®é¢˜è€Œå¸¦æ¥çš„é—®é¢˜ï¼Œæ§åˆ¶åœ¨å¯æ¥å—çš„èŒƒå›´å†…æ‰æ˜¯æœ‰æˆæœï¼›</p></li><li><p>ä¿æŒç°çŠ¶æˆ–å‡ºç°æ›´å·®çš„æƒ…å†µéƒ½æ˜¯å¤±è´¥ï¼</p></li></ul><h3 id="bä¼˜åŒ–çš„éœ€æ±‚ï¼Ÿ"><a href="#bä¼˜åŒ–çš„éœ€æ±‚ï¼Ÿ" class="headerlink" title="bä¼˜åŒ–çš„éœ€æ±‚ï¼Ÿ"></a>bä¼˜åŒ–çš„éœ€æ±‚ï¼Ÿ</h3><ul><li><p>ç¨³å®šæ€§å’Œä¸šåŠ¡å¯æŒç»­æ€§ï¼Œé€šå¸¸æ¯”æ€§èƒ½æ›´é‡è¦ï¼›</p></li><li><p>ä¼˜åŒ–ä¸å¯é¿å…æ¶‰åŠåˆ°å˜æ›´ï¼Œå˜æ›´å°±æœ‰é£é™©ï¼›</p></li><li><p>ä¼˜åŒ–ä½¿æ€§èƒ½å˜å¥½ï¼Œç»´æŒå’Œå˜å·®æ˜¯ç­‰æ¦‚ç‡äº‹ä»¶ï¼›</p></li><li><p>åˆ‡è®°ä¼˜åŒ–ï¼Œåº”è¯¥æ˜¯å„éƒ¨é—¨ååŒï¼Œå…±åŒå‚ä¸çš„å·¥ä½œï¼Œä»»ä½•å•ä¸€éƒ¨é—¨éƒ½ä¸èƒ½å¯¹æ•°æ®åº“è¿›è¡Œä¼˜åŒ–ï¼</p></li></ul><p>æ‰€ä»¥ä¼˜åŒ–å·¥ä½œï¼Œæ˜¯ç”±ä¸šåŠ¡éœ€è¦é©±ä½¿çš„ï¼</p><h2 id="2ã€ä¼˜åŒ–æ€è·¯"><a href="#2ã€ä¼˜åŒ–æ€è·¯" class="headerlink" title="2ã€ä¼˜åŒ–æ€è·¯"></a>2ã€ä¼˜åŒ–æ€è·¯</h2><h3 id="aä¼˜åŒ–ä»€ä¹ˆï¼Ÿ"><a href="#aä¼˜åŒ–ä»€ä¹ˆï¼Ÿ" class="headerlink" title="aä¼˜åŒ–ä»€ä¹ˆï¼Ÿ"></a>aä¼˜åŒ–ä»€ä¹ˆï¼Ÿ</h3><p>åœ¨æ•°æ®åº“ä¼˜åŒ–ä¸Šæœ‰ä¸¤ä¸ªä¸»è¦æ–¹é¢ï¼šå³å®‰å…¨ä¸æ€§èƒ½ã€‚</p><ul><li><p>å®‰å…¨->æ•°æ®å¯æŒç»­æ€§ï¼›</p></li><li><p>æ€§èƒ½->æ•°æ®çš„é«˜æ€§èƒ½è®¿é—®ã€‚</p></li></ul><h3 id="bä¼˜åŒ–çš„èŒƒå›´æœ‰å“ªäº›ï¼Ÿ"><a href="#bä¼˜åŒ–çš„èŒƒå›´æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="bä¼˜åŒ–çš„èŒƒå›´æœ‰å“ªäº›ï¼Ÿ"></a>bä¼˜åŒ–çš„èŒƒå›´æœ‰å“ªäº›ï¼Ÿ</h3><p><strong>å­˜å‚¨ã€ä¸»æœºå’Œæ“ä½œç³»ç»Ÿæ–¹é¢ï¼š</strong></p><ul><li><p>ä¸»æœºæ¶æ„ç¨³å®šæ€§ï¼›</p></li><li><p>I/Oè§„åˆ’åŠé…ç½®ï¼›</p></li><li><p>Swapäº¤æ¢åˆ†åŒºï¼›</p></li><li><p>OSå†…æ ¸å‚æ•°å’Œç½‘ç»œé—®é¢˜ã€‚</p></li></ul><p><strong>åº”ç”¨ç¨‹åºæ–¹é¢ï¼š</strong></p><ul><li><p>åº”ç”¨ç¨‹åºç¨³å®šæ€§ï¼›</p></li><li><p>SQLè¯­å¥æ€§èƒ½ï¼›</p></li><li><p>ä¸²è¡Œè®¿é—®èµ„æºï¼›</p></li><li><p>æ€§èƒ½æ¬ ä½³ä¼šè¯ç®¡ç†ï¼›</p></li><li><p>è¿™ä¸ªåº”ç”¨é€‚ä¸é€‚åˆç”¨MySQLã€‚</p></li></ul><p><strong>æ•°æ®åº“ä¼˜åŒ–æ–¹é¢ï¼š</strong></p><ul><li><p>å†…å­˜ï¼›</p></li><li><p>æ•°æ®åº“ç»“æ„ï¼ˆç‰©ç†&é€»è¾‘ï¼‰ï¼›</p></li><li><p>å®ä¾‹é…ç½®ã€‚</p></li></ul><p>è¯´æ˜ï¼šä¸ç®¡æ˜¯è®¾è®¡ç³»ç»Ÿã€å®šä½é—®é¢˜è¿˜æ˜¯ä¼˜åŒ–ï¼Œéƒ½å¯ä»¥æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œã€‚</p><h3 id="cä¼˜åŒ–ç»´åº¦ï¼Ÿ"><a href="#cä¼˜åŒ–ç»´åº¦ï¼Ÿ" class="headerlink" title="cä¼˜åŒ–ç»´åº¦ï¼Ÿ"></a>cä¼˜åŒ–ç»´åº¦ï¼Ÿ</h3><p><strong>æ•°æ®åº“ä¼˜åŒ–ç»´åº¦æœ‰å››ä¸ªï¼š</strong><br>ç¡¬ä»¶ã€ç³»ç»Ÿé…ç½®ã€æ•°æ®åº“è¡¨ç»“æ„ã€SQLåŠç´¢å¼•ã€‚<br><a href="https://i.imgur.com/UkvYZ6t.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/UkvYZ6t.png" class="lazyload" title></a></p><p><strong>ä¼˜åŒ–é€‰æ‹©ï¼š</strong></p><ul><li><p>ä¼˜åŒ–æˆæœ¬ï¼šç¡¬ä»¶>ç³»ç»Ÿé…ç½®>æ•°æ®åº“è¡¨ç»“æ„>SQLåŠç´¢å¼•ã€‚</p></li><li><p>ä¼˜åŒ–æ•ˆæœï¼šç¡¬ä»¶<ç³»ç»Ÿé…ç½®<æ•°æ®åº“è¡¨ç»“æ„<sqlåŠç´¢å¼•ã€‚< p></sqlåŠç´¢å¼•ã€‚<></p></li></ul><h2 id="1ã€ä¼˜åŒ–å·¥å…·æœ‰å•¥ï¼Ÿ"><a href="#1ã€ä¼˜åŒ–å·¥å…·æœ‰å•¥ï¼Ÿ" class="headerlink" title="1ã€ä¼˜åŒ–å·¥å…·æœ‰å•¥ï¼Ÿ"></a>1ã€ä¼˜åŒ–å·¥å…·æœ‰å•¥ï¼Ÿ</h2><h3 id="aæ•°æ®åº“å±‚é¢ï¼Ÿ"><a href="#aæ•°æ®åº“å±‚é¢ï¼Ÿ" class="headerlink" title="aæ•°æ®åº“å±‚é¢ï¼Ÿ"></a>aæ•°æ®åº“å±‚é¢ï¼Ÿ</h3><p>æ£€æŸ¥é—®é¢˜å¸¸ç”¨å·¥å…·ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰MySQL</span><br><span class="line"></span><br><span class="line">2ï¼‰msyqladminï¼šMySQLå®¢æˆ·ç«¯ï¼Œå¯è¿›è¡Œç®¡ç†æ“ä½œ</span><br><span class="line"></span><br><span class="line">3ï¼‰mysqlshowï¼šåŠŸèƒ½å¼ºå¤§çš„æŸ¥çœ‹shellå‘½ä»¤</span><br><span class="line"></span><br><span class="line">4ï¼‰show [SESSION | GLOBAL] variablesï¼šæŸ¥çœ‹æ•°æ®åº“å‚æ•°ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">5ï¼‰SHOW [SESSION | GLOBAL] STATUSï¼šæŸ¥çœ‹æ•°æ®åº“çš„çŠ¶æ€ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">6ï¼‰information_schemaï¼šè·å–å…ƒæ•°æ®çš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line">7ï¼‰SHOW ENGINE INNODB STATUSï¼šInnodbå¼•æ“çš„æ‰€æœ‰çŠ¶æ€</span><br><span class="line"></span><br><span class="line">8ï¼‰SHOW PROCESSLISTï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰è¿æ¥sessionçŠ¶æ€</span><br><span class="line"></span><br><span class="line">9ï¼‰explainï¼šè·å–æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œè®¡åˆ’</span><br><span class="line"></span><br><span class="line">10ï¼‰show indexï¼šæŸ¥çœ‹è¡¨çš„ç´¢å¼•ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">11ï¼‰slow-logï¼šè®°å½•æ…¢æŸ¥è¯¢è¯­å¥</span><br><span class="line"></span><br><span class="line">12ï¼‰mysqldumpslowï¼šåˆ†æslowlogæ–‡ä»¶çš„</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸å¸¸ç”¨ä½†å¥½ç”¨çš„å·¥å…·ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰Zabbixï¼šç›‘æ§ä¸»æœºã€ç³»ç»Ÿã€æ•°æ®åº“ï¼ˆéƒ¨ç½²zabbixç›‘æ§å¹³å°ï¼‰</span><br><span class="line"></span><br><span class="line">2ï¼‰pt-query-digestï¼šåˆ†ææ…¢æ—¥å¿—</span><br><span class="line"></span><br><span class="line">3ï¼‰MySQL slapï¼šåˆ†ææ…¢æ—¥å¿—</span><br><span class="line"></span><br><span class="line">4ï¼‰sysbenchï¼šå‹åŠ›æµ‹è¯•å·¥å…·</span><br><span class="line"></span><br><span class="line">5ï¼‰MySQL profilingï¼šç»Ÿè®¡æ•°æ®åº“æ•´ä½“çŠ¶æ€å·¥å…·    </span><br><span class="line"></span><br><span class="line">6ï¼‰Performance Schemaï¼šMySQLæ€§èƒ½çŠ¶æ€ç»Ÿè®¡çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">7ï¼‰workbenchï¼šç®¡ç†ã€å¤‡ä»½ã€ç›‘æ§ã€åˆ†æã€ä¼˜åŒ–å·¥å…·ï¼ˆæ¯”è¾ƒè´¹èµ„æºï¼‰</span><br></pre></td></tr></tbody></table></figure></div><h3 id="bæ•°æ®åº“å±‚é¢é—®é¢˜è§£å†³æ€è·¯ï¼Ÿ"><a href="#bæ•°æ®åº“å±‚é¢é—®é¢˜è§£å†³æ€è·¯ï¼Ÿ" class="headerlink" title="bæ•°æ®åº“å±‚é¢é—®é¢˜è§£å†³æ€è·¯ï¼Ÿ"></a>bæ•°æ®åº“å±‚é¢é—®é¢˜è§£å†³æ€è·¯ï¼Ÿ</h3><p>ä¸€èˆ¬åº”æ€¥è°ƒä¼˜çš„æ€è·¯ï¼šé’ˆå¯¹çªç„¶çš„ä¸šåŠ¡åŠç†å¡é¡¿ï¼Œæ— æ³•è¿›è¡Œæ­£å¸¸çš„ä¸šåŠ¡å¤„ç†ï¼Œéœ€è¦ç«‹é©¬è§£å†³çš„åœºæ™¯ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰show processlistï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰explain  select id ,name from stu where name='clsn'; # ALL  id name age  sexï¼›</span><br><span class="line"></span><br><span class="line">select id,name from stu  where id=2-1 å‡½æ•° ç»“æœé›†>30ï¼›show index from tableï¼›</span><br><span class="line"></span><br><span class="line">3ï¼‰é€šè¿‡æ‰§è¡Œè®¡åˆ’åˆ¤æ–­ï¼Œç´¢å¼•é—®é¢˜ï¼ˆæœ‰æ²¡æœ‰ã€åˆä¸åˆç†ï¼‰æˆ–è€…è¯­å¥æœ¬èº«é—®é¢˜ï¼›</span><br><span class="line"></span><br><span class="line">4ï¼‰show status  like '%lock%';    # æŸ¥è¯¢é”çŠ¶æ€</span><br><span class="line"></span><br><span class="line">kill SESSION_ID;   # æ€æ‰æœ‰é—®é¢˜çš„sessionã€‚</span><br></pre></td></tr></tbody></table></figure></div><p>å¸¸è§„è°ƒä¼˜æ€è·¯ï¼šé’ˆå¯¹ä¸šåŠ¡å‘¨æœŸæ€§çš„å¡é¡¿ï¼Œä¾‹å¦‚åœ¨æ¯å¤©10-11ç‚¹ä¸šåŠ¡ç‰¹åˆ«æ…¢ï¼Œä½†æ˜¯è¿˜èƒ½å¤Ÿä½¿ç”¨ï¼Œè¿‡äº†è¿™æ®µæ—¶é—´å°±å¥½äº†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰æŸ¥çœ‹slowlogï¼Œåˆ†æslowlogï¼Œåˆ†æå‡ºæŸ¥è¯¢æ…¢çš„è¯­å¥ï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰æŒ‰ç…§ä¸€å®šä¼˜å…ˆçº§ï¼Œä¸€ä¸ªä¸€ä¸ªæ’æŸ¥æ‰€æœ‰æ…¢è¯­å¥ï¼›</span><br><span class="line"></span><br><span class="line">3ï¼‰åˆ†ætop SQLï¼Œè¿›è¡Œexplainè°ƒè¯•ï¼ŒæŸ¥çœ‹è¯­å¥æ‰§è¡Œæ—¶é—´ï¼›</span><br><span class="line"></span><br><span class="line">4ï¼‰è°ƒæ•´ç´¢å¼•æˆ–è¯­å¥æœ¬èº«ã€‚</span><br></pre></td></tr></tbody></table></figure></div><h3 id="cç³»ç»Ÿå±‚é¢ï¼Ÿ"><a href="#cç³»ç»Ÿå±‚é¢ï¼Ÿ" class="headerlink" title="cç³»ç»Ÿå±‚é¢ï¼Ÿ"></a>cç³»ç»Ÿå±‚é¢ï¼Ÿ</h3><p><strong>Cpuæ–¹é¢ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstatã€sar topã€htopã€nmonã€mpstatï¼›</span><br></pre></td></tr></tbody></table></figure></div><p><strong>å†…å­˜ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">freeã€ps-auxï¼›</span><br></pre></td></tr></tbody></table></figure></div><p><strong>IOè®¾å¤‡ï¼ˆç£ç›˜ã€ç½‘ç»œï¼‰ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostatã€ssã€netstatã€iptrafã€iftopã€lsofï¼›</span><br></pre></td></tr></tbody></table></figure></div><p><strong>vmstatå‘½ä»¤è¯´æ˜ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰Procsï¼šræ˜¾ç¤ºæœ‰å¤šå°‘è¿›ç¨‹æ­£åœ¨ç­‰å¾…CPUæ—¶é—´ã€‚bæ˜¾ç¤ºå¤„äºä¸å¯ä¸­æ–­çš„ä¼‘çœ çš„è¿›ç¨‹æ•°é‡ã€‚åœ¨ç­‰å¾…I/Oã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰Memoryï¼šswpdæ˜¾ç¤ºè¢«äº¤æ¢åˆ°ç£ç›˜çš„æ•°æ®å—çš„æ•°é‡ã€‚æœªè¢«ä½¿ç”¨çš„æ•°æ®å—ï¼Œç”¨æˆ·ç¼“å†²æ•°æ®å—ï¼Œç”¨äºæ“ä½œç³»ç»Ÿçš„æ•°æ®å—çš„æ•°é‡ã€‚</span><br><span class="line"></span><br><span class="line">3ï¼‰Swapï¼šæ“ä½œç³»ç»Ÿæ¯ç§’ä»ç£ç›˜ä¸Šäº¤æ¢åˆ°å†…å­˜å’Œä»å†…å­˜äº¤æ¢åˆ°ç£ç›˜çš„æ•°æ®å—çš„æ•°é‡ã€‚s1å’Œs0æœ€å¥½æ˜¯0ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰Ioï¼šæ¯ç§’ä»è®¾å¤‡ä¸­è¯»å…¥b1çš„å†™å…¥åˆ°è®¾å¤‡b0çš„æ•°æ®å—çš„æ•°é‡ã€‚åæ˜ äº†ç£ç›˜I/Oã€‚</span><br><span class="line"></span><br><span class="line">5ï¼‰Systemï¼šæ˜¾ç¤ºäº†æ¯ç§’å‘ç”Ÿä¸­æ–­çš„æ•°é‡ï¼ˆinï¼‰å’Œä¸Šä¸‹æ–‡äº¤æ¢ï¼ˆcsï¼‰çš„æ•°é‡ã€‚</span><br><span class="line"></span><br><span class="line">6ï¼‰Cpuï¼šæ˜¾ç¤ºç”¨äºè¿è¡Œç”¨æˆ·ä»£ç ï¼Œç³»ç»Ÿä»£ç ï¼Œç©ºé—²ï¼Œç­‰å¾…I/Oçš„Cpuæ—¶é—´ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>iostatå‘½ä»¤è¯´æ˜ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å®ä¾‹å‘½ä»¤ï¼šiostat -dk 1 5</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€   iostat -d -k -x 5 ï¼ˆæŸ¥çœ‹è®¾å¤‡ä½¿ç”¨ç‡ï¼ˆ%utilï¼‰å’Œå“åº”æ—¶é—´ï¼ˆawaitï¼‰ï¼‰</span><br><span class="line"></span><br><span class="line">1ï¼‰tpsï¼šè¯¥è®¾å¤‡æ¯ç§’çš„ä¼ è¾“æ¬¡æ•°ã€‚â€œä¸€æ¬¡ä¼ è¾“â€æ„æ€æ˜¯â€œä¸€æ¬¡I/Oè¯·æ±‚â€ã€‚å¤šä¸ªé€»è¾‘è¯·æ±‚å¯èƒ½ä¼šè¢«åˆå¹¶ä¸ºâ€œä¸€æ¬¡I/Oè¯·æ±‚â€ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰iops ï¼šç¡¬ä»¶å‡ºå‚çš„æ—¶å€™ï¼Œå‚å®¶å®šä¹‰çš„ä¸€ä¸ªæ¯ç§’æœ€å¤§çš„IOæ¬¡æ•°</span><br><span class="line"></span><br><span class="line">3ï¼‰"ä¸€æ¬¡ä¼ è¾“"è¯·æ±‚çš„å¤§å°æ˜¯æœªçŸ¥çš„ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰kB_read/sï¼šæ¯ç§’ä»è®¾å¤‡ï¼ˆdrive expressedï¼‰è¯»å–çš„æ•°æ®é‡ï¼›</span><br><span class="line"></span><br><span class="line">5ï¼‰KB_wrtn/sï¼šæ¯ç§’å‘è®¾å¤‡ï¼ˆdrive expressedï¼‰å†™å…¥çš„æ•°æ®é‡ï¼›</span><br><span class="line"></span><br><span class="line">6ï¼‰kB_readï¼šè¯»å–çš„æ€»æ•°æ®é‡ï¼›</span><br><span class="line"></span><br><span class="line">7ï¼‰kB_wrtnï¼šå†™å…¥çš„æ€»æ•°é‡æ•°æ®é‡ï¼›è¿™äº›å•ä½éƒ½ä¸ºKilobytesã€‚</span><br></pre></td></tr></tbody></table></figure></div><h3 id="dç³»ç»Ÿå±‚é¢é—®é¢˜è§£å†³åŠæ³•ï¼Ÿ"><a href="#dç³»ç»Ÿå±‚é¢é—®é¢˜è§£å†³åŠæ³•ï¼Ÿ" class="headerlink" title="dç³»ç»Ÿå±‚é¢é—®é¢˜è§£å†³åŠæ³•ï¼Ÿ"></a>dç³»ç»Ÿå±‚é¢é—®é¢˜è§£å†³åŠæ³•ï¼Ÿ</h3><p>ä½ è®¤ä¸ºåˆ°åº•è´Ÿè½½é«˜å¥½ï¼Œè¿˜æ˜¯ä½å¥½å‘¢ï¼Ÿåœ¨å®é™…çš„ç”Ÿäº§ä¸­ï¼Œä¸€èˆ¬è®¤ä¸ºCpuåªè¦ä¸è¶…è¿‡90%éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ã€‚<br>å½“ç„¶ä¸æ’é™¤ä¸‹é¢è¿™äº›ç‰¹æ®Šæƒ…å†µï¼š<br><strong>Cpuè´Ÿè½½é«˜ï¼ŒIOè´Ÿè½½ä½ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰å†…å­˜ä¸å¤Ÿï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰ç£ç›˜æ€§èƒ½å·®ï¼›</span><br><span class="line"></span><br><span class="line">3ï¼‰SQLé—®é¢˜--->å»æ•°æ®åº“å±‚ï¼Œè¿›ä¸€æ­¥æ’æŸ¥SQL é—®é¢˜ï¼›</span><br><span class="line"></span><br><span class="line">4ï¼‰IOå‡ºé—®é¢˜äº†ï¼ˆç£ç›˜åˆ°ä¸´ç•Œäº†ã€raidè®¾è®¡ä¸å¥½ã€raidé™çº§ã€é”ã€åœ¨å•ä½æ—¶é—´å†…tpsè¿‡é«˜ï¼‰ï¼›</span><br><span class="line"></span><br><span class="line">5ï¼‰tpsè¿‡é«˜ï¼šå¤§é‡çš„å°æ•°æ®IOã€å¤§é‡çš„å…¨è¡¨æ‰«æã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>IOè´Ÿè½½é«˜ï¼ŒCpuè´Ÿè½½ä½ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰å¤§é‡å°çš„IOå†™æ“ä½œï¼š</span><br><span class="line"></span><br><span class="line">autocommitï¼Œäº§ç”Ÿå¤§é‡å°IOï¼›IO/PSï¼Œç£ç›˜çš„ä¸€ä¸ªå®šå€¼ï¼Œç¡¬ä»¶å‡ºå‚çš„æ—¶å€™ï¼Œå‚å®¶å®šä¹‰çš„ä¸€ä¸ªæ¯ç§’æœ€å¤§çš„IOæ¬¡æ•°ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰å¤§é‡å¤§çš„IO å†™æ“ä½œï¼šSQLé—®é¢˜çš„å‡ ç‡æ¯”è¾ƒå¤§</span><br></pre></td></tr></tbody></table></figure></div><p><strong>IOå’Œcpuè´Ÿè½½éƒ½å¾ˆé«˜ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¡¬ä»¶ä¸å¤Ÿäº†æˆ–SQLå­˜åœ¨é—®é¢˜ã€‚</span><br></pre></td></tr></tbody></table></figure></div><h2 id="4ã€åŸºç¡€ä¼˜åŒ–"><a href="#4ã€åŸºç¡€ä¼˜åŒ–" class="headerlink" title="4ã€åŸºç¡€ä¼˜åŒ–"></a>4ã€åŸºç¡€ä¼˜åŒ–</h2><h3 id="aä¼˜åŒ–æ€è·¯ï¼Ÿ"><a href="#aä¼˜åŒ–æ€è·¯ï¼Ÿ" class="headerlink" title="aä¼˜åŒ–æ€è·¯ï¼Ÿ"></a>aä¼˜åŒ–æ€è·¯ï¼Ÿ</h3><p><strong>å®šä½é—®é¢˜ç‚¹å®å¸ï¼š</strong>ç¡¬ä»¶â€“>ç³»ç»Ÿâ€“>åº”ç”¨â€“>æ•°æ®åº“â€“>æ¶æ„ï¼ˆé«˜å¯ç”¨ã€è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ï¼‰ã€‚</p><p><strong>å¤„ç†æ–¹å‘ï¼š</strong>æ˜ç¡®ä¼˜åŒ–ç›®æ ‡ã€æ€§èƒ½å’Œå®‰å…¨çš„æŠ˜ä¸­ã€é˜²æ‚£æœªç„¶ã€‚</p><h3 id="bç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ"><a href="#bç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="bç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ"></a>bç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ</h3><p><strong>ä¸»æœºæ–¹é¢ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®æ•°æ®åº“ç±»å‹ï¼Œä¸»æœºCPUé€‰æ‹©ã€å†…å­˜å®¹é‡é€‰æ‹©ã€ç£ç›˜é€‰æ‹©ï¼š</span><br><span class="line"></span><br><span class="line">1ï¼‰å¹³è¡¡å†…å­˜å’Œç£ç›˜èµ„æºï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰éšæœºçš„I/Oå’Œé¡ºåºçš„I/Oï¼›</span><br><span class="line"></span><br><span class="line">3ï¼‰ä¸»æœº RAIDå¡çš„BBUï¼ˆBattery Backup Unitï¼‰å…³é—­ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>CPUçš„é€‰æ‹©ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CPUçš„ä¸¤ä¸ªå…³é”®å› ç´ ï¼šæ ¸æ•°ã€ä¸»é¢‘</span><br><span class="line"></span><br><span class="line">æ ¹æ®ä¸åŒçš„ä¸šåŠ¡ç±»å‹è¿›è¡Œé€‰æ‹©ï¼š</span><br><span class="line"></span><br><span class="line">1ï¼‰CPUå¯†é›†å‹ï¼šè®¡ç®—æ¯”è¾ƒå¤šï¼ŒOLTP - ä¸»é¢‘å¾ˆé«˜çš„cpuã€æ ¸æ•°è¿˜è¦å¤š</span><br><span class="line"></span><br><span class="line">2ï¼‰IOå¯†é›†å‹ï¼šæŸ¥è¯¢æ¯”è¾ƒï¼ŒOLAP - æ ¸æ•°è¦å¤šï¼Œä¸»é¢‘ä¸ä¸€å®šé«˜çš„</span><br></pre></td></tr></tbody></table></figure></div><p><strong>å†…å­˜çš„é€‰æ‹©ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OLAPç±»å‹æ•°æ®åº“ï¼Œéœ€è¦æ›´å¤šå†…å­˜ï¼Œå’Œæ•°æ®è·å–é‡çº§æœ‰å…³ã€‚</span><br><span class="line"></span><br><span class="line">OLTPç±»å‹æ•°æ®ä¸€èˆ¬å†…å­˜æ˜¯Cpuæ ¸å¿ƒæ•°é‡çš„2å€åˆ°4å€ï¼Œæ²¡æœ‰æœ€ä½³å®è·µã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>å­˜å‚¨æ–¹é¢ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰æ ¹æ®å­˜å‚¨æ•°æ®ç§ç±»çš„ä¸åŒï¼Œé€‰æ‹©ä¸åŒçš„å­˜å‚¨è®¾å¤‡ï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰é…ç½®åˆç†çš„RAIDçº§åˆ«ï¼ˆraid5ã€raid10ã€çƒ­å¤‡ç›˜ï¼‰ï¼›</span><br><span class="line"></span><br><span class="line">3ï¼‰å¯¹ä¸æ“ä½œç³»ç»Ÿæ¥è®²ï¼Œä¸éœ€è¦å¤ªç‰¹æ®Šçš„é€‰æ‹©ï¼Œæœ€å¥½åšå¥½å†—ä½™ï¼ˆraid1ï¼‰ï¼ˆssdã€sasã€sataï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰raidå¡ï¼š</span><br><span class="line"></span><br><span class="line">       ä¸»æœºraidå¡é€‰æ‹©ï¼š</span><br><span class="line"></span><br><span class="line">           å®ç°æ“ä½œç³»ç»Ÿç£ç›˜çš„å†—ä½™ï¼ˆraid1ï¼‰ï¼›</span><br><span class="line"></span><br><span class="line">           å¹³è¡¡å†…å­˜å’Œç£ç›˜èµ„æºï¼›</span><br><span class="line"></span><br><span class="line">           éšæœºçš„I/Oå’Œé¡ºåºçš„I/Oï¼›</span><br><span class="line"></span><br><span class="line">           ä¸»æœºraidå¡çš„BBUï¼ˆBattery Backup Unitï¼‰è¦å…³é—­ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç½‘ç»œè®¾å¤‡æ–¹é¢ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æµé‡æ”¯æŒæ›´é«˜çš„ç½‘ç»œè®¾å¤‡ï¼ˆäº¤æ¢æœºã€è·¯ç”±å™¨ã€ç½‘çº¿ã€ç½‘å¡ã€HBAå¡ï¼‰</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼šä»¥ä¸Šè¿™äº›è§„åˆ’åº”è¯¥åœ¨åˆå§‹è®¾è®¡ç³»ç»Ÿæ—¶å°±åº”è¯¥è€ƒè™‘å¥½ã€‚</p><h3 id="cæœåŠ¡å™¨ç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ"><a href="#cæœåŠ¡å™¨ç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="cæœåŠ¡å™¨ç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ"></a>cæœåŠ¡å™¨ç¡¬ä»¶ä¼˜åŒ–ï¼Ÿ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ç‰©ç†çŠ¶æ€ç¯</span><br><span class="line"></span><br><span class="line">2ï¼‰è‡ªå¸¦ç®¡ç†è®¾å¤‡ï¼šè¿œç¨‹æ§åˆ¶å¡ï¼ˆFENCEè®¾å¤‡ï¼šipmi ilo idarcï¼‰ã€å¼€å…³æœºã€ç¡¬ä»¶ç›‘æ§ã€‚</span><br><span class="line"></span><br><span class="line">3ï¼‰ç¬¬ä¸‰æ–¹çš„ç›‘æ§è½¯ä»¶ã€è®¾å¤‡ï¼ˆsnmpã€agentï¼‰å¯¹ç‰©ç†è®¾æ–½è¿›è¡Œç›‘æ§ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰å­˜å‚¨è®¾å¤‡ï¼šè‡ªå¸¦çš„ç›‘æ§å¹³å°ã€‚EMC2ï¼ˆhpæ”¶è´­äº†ï¼‰ã€ æ—¥ç«‹ï¼ˆhdsï¼‰ã€IBMä½ç«¯OEM hdsã€é«˜ç«¯å­˜å‚¨æ˜¯è‡ªå·±æŠ€æœ¯ï¼Œåä¸ºå­˜å‚¨ã€‚</span><br></pre></td></tr></tbody></table></figure></div><h3 id="dç³»ç»Ÿä¼˜åŒ–ï¼Ÿ"><a href="#dç³»ç»Ÿä¼˜åŒ–ï¼Ÿ" class="headerlink" title="dç³»ç»Ÿä¼˜åŒ–ï¼Ÿ"></a>dç³»ç»Ÿä¼˜åŒ–ï¼Ÿ</h3><p><strong>Cpuï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŸºæœ¬ä¸éœ€è¦è°ƒæ•´ï¼Œåœ¨ç¡¬ä»¶é€‰æ‹©æ–¹é¢ä¸‹åŠŸå¤«å³å¯ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>å†…å­˜ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŸºæœ¬ä¸éœ€è¦è°ƒæ•´ï¼Œåœ¨ç¡¬ä»¶é€‰æ‹©æ–¹é¢ä¸‹åŠŸå¤«å³å¯ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>SWAPï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQLå°½é‡é¿å…ä½¿ç”¨swapã€‚</span><br><span class="line"></span><br><span class="line">é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸­é»˜è®¤swapä¸º0ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>IO ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raidã€no lvmã€ext4æˆ–xfsã€ssdã€IOè°ƒåº¦ç­–ç•¥ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>Swapè°ƒæ•´(ä¸ä½¿ç”¨swapåˆ†åŒº)</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/proc/sys/vm/swappinessçš„å†…å®¹æ”¹æˆ0ï¼ˆä¸´æ—¶ï¼‰ï¼Œ/etc/sysctl. confä¸Šæ·»åŠ vm.swappiness=0ï¼ˆæ°¸ä¹…ï¼‰</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™ä¸ªå‚æ•°å†³å®šäº†Linuxæ˜¯å€¾å‘äºä½¿ç”¨swapï¼Œè¿˜æ˜¯å€¾å‘äºé‡Šæ”¾æ–‡ä»¶ç³»ç»Ÿcacheã€‚åœ¨å†…å­˜ç´§å¼ çš„æƒ…å†µä¸‹ï¼Œæ•°å€¼è¶Šä½è¶Šå€¾å‘äºé‡Šæ”¾æ–‡ä»¶ç³»ç»Ÿcacheã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸ªå‚æ•°åªèƒ½å‡å°‘ä½¿ç”¨swapçš„æ¦‚ç‡ï¼Œå¹¶ä¸èƒ½é¿å…Linuxä½¿ç”¨swapã€‚</p><p><strong>ä¿®æ”¹MySQLçš„é…ç½®å‚æ•°innodb_flush_ methodï¼Œå¼€å¯O_DIRECTæ¨¡å¼ï¼š</strong><br>è¿™ç§æƒ…å†µä¸‹ï¼ŒInnoDBçš„buffer poolä¼šç›´æ¥ç»•è¿‡æ–‡ä»¶ç³»ç»Ÿcacheæ¥è®¿é—®ç£ç›˜ï¼Œä½†æ˜¯redo logä¾æ—§ä¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿcacheã€‚<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒRedo logæ˜¯è¦†å†™æ¨¡å¼çš„ï¼Œå³ä½¿ä½¿ç”¨äº†æ–‡ä»¶ç³»ç»Ÿçš„cacheï¼Œä¹Ÿä¸ä¼šå ç”¨å¤ªå¤šã€‚</p><p><strong>IOè°ƒåº¦ç­–ç•¥ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#echo deadline>/sys/block/sda/queue/scheduler   ä¸´æ—¶ä¿®æ”¹ä¸ºdeadline</span><br></pre></td></tr></tbody></table></figure></div><p>æ°¸ä¹…ä¿®æ”¹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /boot/grub/grub.conf</span><br><span class="line">æ›´æ”¹åˆ°å¦‚ä¸‹å†…å®¹:</span><br><span class="line">kernel /boot/vmlinuz-2.6.18-8.el5 ro root=LABEL=/ elevator=deadline rhgb quiet</span><br></pre></td></tr></tbody></table></figure></div><h3 id="eç³»ç»Ÿå‚æ•°è°ƒæ•´ï¼Ÿ"><a href="#eç³»ç»Ÿå‚æ•°è°ƒæ•´ï¼Ÿ" class="headerlink" title="eç³»ç»Ÿå‚æ•°è°ƒæ•´ï¼Ÿ"></a>eç³»ç»Ÿå‚æ•°è°ƒæ•´ï¼Ÿ</h3><p><strong>Linuxç³»ç»Ÿå†…æ ¸å‚æ•°ä¼˜åŒ–ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim/etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">net.ipv4.ip_local_port_range = 1024 65535ï¼š# ç”¨æˆ·ç«¯å£èŒƒå›´</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 4096 </span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_fin_timeout = 30 </span><br><span class="line"></span><br><span class="line">fs.file-max=65535ï¼š# ç³»ç»Ÿæœ€å¤§æ–‡ä»¶å¥æŸ„ï¼Œæ§åˆ¶çš„æ˜¯èƒ½æ‰“å¼€æ–‡ä»¶æœ€å¤§æ•°é‡</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ç”¨æˆ·é™åˆ¶å‚æ•°ï¼ˆMySQLå¯ä»¥ä¸è®¾ç½®ä»¥ä¸‹é…ç½®ï¼‰ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim/etc/security/limits.conf </span><br><span class="line"></span><br><span class="line">* soft nproc 65535</span><br><span class="line"></span><br><span class="line">* hard nproc 65535</span><br><span class="line"></span><br><span class="line">* soft nofile 65535</span><br><span class="line"></span><br><span class="line">* hard nofile 65535</span><br></pre></td></tr></tbody></table></figure></div><h3 id="fåº”ç”¨ä¼˜åŒ–ï¼Ÿ"><a href="#fåº”ç”¨ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="fåº”ç”¨ä¼˜åŒ–ï¼Ÿ"></a>fåº”ç”¨ä¼˜åŒ–ï¼Ÿ</h3><p>ä¸šåŠ¡åº”ç”¨å’Œæ•°æ®åº“åº”ç”¨ç‹¬ç«‹ï¼›<br><strong>é˜²ç«å¢™ï¼š</strong>iptablesã€selinuxç­‰å…¶ä»–æ— ç”¨æœåŠ¡ï¼ˆå…³é—­ï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --level 23456 acpid off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 anacron off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 autofs off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 avahi-daemon off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 bluetooth off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 cups off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 firstboot off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 haldaemon off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 hplip off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 ip6tables off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 iptables  off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 isdn off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 pcscd off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 sendmail  off</span><br><span class="line"></span><br><span class="line">chkconfig --level 23456 yum-updatesd  off</span><br></pre></td></tr></tbody></table></figure></div><p>å®‰è£…å›¾å½¢ç•Œé¢çš„æœåŠ¡å™¨ä¸è¦å¯åŠ¨å›¾å½¢ç•Œé¢runlevel 3ã€‚<br>å¦å¤–ï¼Œæ€è€ƒå°†æ¥æˆ‘ä»¬çš„ä¸šåŠ¡æ˜¯å¦çœŸçš„éœ€è¦MySQLï¼Œè¿˜æ˜¯ä½¿ç”¨å…¶ä»–ç§ç±»çš„æ•°æ®åº“ã€‚ç”¨æ•°æ®åº“çš„æœ€é«˜å¢ƒç•Œå°±æ˜¯ä¸ç”¨æ•°æ®åº“ã€‚</p><h2 id="5ã€æ•°æ®åº“ä¼˜åŒ–"><a href="#5ã€æ•°æ®åº“ä¼˜åŒ–" class="headerlink" title="5ã€æ•°æ®åº“ä¼˜åŒ–"></a>5ã€æ•°æ®åº“ä¼˜åŒ–</h2><p><strong>SQLä¼˜åŒ–æ–¹å‘ï¼š</strong>æ‰§è¡Œè®¡åˆ’ã€ç´¢å¼•ã€SQLæ”¹å†™ã€‚<br><strong>æ¶æ„ä¼˜åŒ–æ–¹å‘ï¼š</strong>é«˜å¯ç”¨æ¶æ„ã€é«˜æ€§èƒ½æ¶æ„ã€åˆ†åº“åˆ†è¡¨ã€‚</p><h3 id="aæ•°æ®åº“å‚æ•°ä¼˜åŒ–ï¼Ÿ"><a href="#aæ•°æ®åº“å‚æ•°ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="aæ•°æ®åº“å‚æ•°ä¼˜åŒ–ï¼Ÿ"></a>aæ•°æ®åº“å‚æ•°ä¼˜åŒ–ï¼Ÿ</h3><p><strong>è°ƒæ•´</strong><br>å®ä¾‹æ•´ä½“ï¼ˆé«˜çº§ä¼˜åŒ–ï¼Œæ‰©å±•ï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">thread_concurrencyï¼š# å¹¶å‘çº¿ç¨‹æ•°é‡ä¸ªæ•°</span><br><span class="line"></span><br><span class="line">sort_buffer_sizeï¼š# æ’åºç¼“å­˜</span><br><span class="line"></span><br><span class="line">read_buffer_sizeï¼š# é¡ºåºè¯»å–ç¼“å­˜</span><br><span class="line"></span><br><span class="line">read_rnd_buffer_sizeï¼š# éšæœºè¯»å–ç¼“å­˜</span><br><span class="line"></span><br><span class="line">key_buffer_sizeï¼š# ç´¢å¼•ç¼“å­˜</span><br><span class="line"></span><br><span class="line">thread_cache_sizeï¼š# (1Gâ€”>8, 2Gâ€”>16, 3Gâ€”>32, >3Gâ€”>64)</span><br></pre></td></tr></tbody></table></figure></div><p><strong>è¿æ¥å±‚ï¼ˆåŸºç¡€ä¼˜åŒ–ï¼‰</strong><br>è®¾ç½®åˆç†çš„è¿æ¥å®¢æˆ·å’Œè¿æ¥æ–¹å¼ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">max_connections           # æœ€å¤§è¿æ¥æ•°ï¼Œçœ‹äº¤æ˜“ç¬”æ•°è®¾ç½®    </span><br><span class="line"></span><br><span class="line">max_connect_errors        # æœ€å¤§é”™è¯¯è¿æ¥æ•°ï¼Œèƒ½å¤§åˆ™å¤§</span><br><span class="line"></span><br><span class="line">connect_timeout           # è¿æ¥è¶…æ—¶</span><br><span class="line"></span><br><span class="line">max_user_connections      # æœ€å¤§ç”¨æˆ·è¿æ¥æ•°</span><br><span class="line"></span><br><span class="line">skip-name-resolve         # è·³è¿‡åŸŸåè§£æ</span><br><span class="line"></span><br><span class="line">wait_timeout              # ç­‰å¾…è¶…æ—¶</span><br><span class="line"></span><br><span class="line">back_log                  # å¯ä»¥åœ¨å †æ ˆä¸­çš„è¿æ¥æ•°é‡</span><br></pre></td></tr></tbody></table></figure></div><p><strong>SQLå±‚ï¼ˆåŸºç¡€ä¼˜åŒ–ï¼‰</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query_cache_sizeï¼š æŸ¥è¯¢ç¼“å­˜  >>>  OLAPç±»å‹æ•°æ®åº“,éœ€è¦é‡ç‚¹åŠ å¤§æ­¤å†…å­˜ç¼“å­˜ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šè¶…è¿‡GBã€‚</span><br><span class="line"></span><br><span class="line">å¯¹äºç»å¸¸è¢«ä¿®æ”¹çš„æ•°æ®ï¼Œç¼“å­˜ä¼šç«‹é©¬å¤±æ•ˆã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥å®ç”¨å†…å­˜æ•°æ®åº“ï¼ˆredisã€memecacheï¼‰ï¼Œæ›¿ä»£ä»–çš„åŠŸèƒ½ã€‚</span><br></pre></td></tr></tbody></table></figure></div><h3 id="bå­˜å‚¨å¼•æ“å±‚ï¼ˆinnodbåŸºç¡€ä¼˜åŒ–å‚æ•°ï¼‰ï¼Ÿ"><a href="#bå­˜å‚¨å¼•æ“å±‚ï¼ˆinnodbåŸºç¡€ä¼˜åŒ–å‚æ•°ï¼‰ï¼Ÿ" class="headerlink" title="bå­˜å‚¨å¼•æ“å±‚ï¼ˆinnodbåŸºç¡€ä¼˜åŒ–å‚æ•°ï¼‰ï¼Ÿ"></a>bå­˜å‚¨å¼•æ“å±‚ï¼ˆinnodbåŸºç¡€ä¼˜åŒ–å‚æ•°ï¼‰ï¼Ÿ</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">default-storage-engine</span><br><span class="line"></span><br><span class="line">innodb_buffer_pool_size       # æ²¡æœ‰å›ºå®šå¤§å°ï¼Œ50%æµ‹è¯•å€¼ï¼Œçœ‹çœ‹æƒ…å†µå†å¾®è°ƒã€‚ä½†æ˜¯å°½é‡è®¾ç½®ä¸è¦è¶…è¿‡ç‰©ç†å†…å­˜70%</span><br><span class="line"></span><br><span class="line">innodb_file_per_table=(1,0)</span><br><span class="line"></span><br><span class="line">innodb_flush_log_at_trx_commit=(0,1,2) # 1æ˜¯æœ€å®‰å…¨çš„ï¼Œ0æ˜¯æ€§èƒ½æœ€é«˜ï¼Œ2æŠ˜ä¸­</span><br><span class="line"></span><br><span class="line">binlog_sync</span><br><span class="line"></span><br><span class="line">Innodb_flush_method=(O_DIRECT, fdatasync)</span><br><span class="line"></span><br><span class="line">innodb_log_buffer_size           # 100Mä»¥ä¸‹</span><br><span class="line"></span><br><span class="line">innodb_log_file_size               # 100M ä»¥ä¸‹</span><br><span class="line"></span><br><span class="line">innodb_log_files_in_group       # 5ä¸ªæˆå‘˜ä»¥ä¸‹,ä¸€èˆ¬2-3ä¸ªå¤Ÿç”¨ï¼ˆiblogfile0-Nï¼‰</span><br><span class="line"></span><br><span class="line">innodb_max_dirty_pages_pct   # è¾¾åˆ°ç™¾åˆ†ä¹‹75çš„æ—¶å€™åˆ·å†™ å†…å­˜è„é¡µåˆ°ç£ç›˜ã€‚</span><br><span class="line"></span><br><span class="line">log_bin</span><br><span class="line"></span><br><span class="line">max_binlog_cache_size                     # å¯ä»¥ä¸è®¾ç½®</span><br><span class="line"></span><br><span class="line">max_binlog_size                               # å¯ä»¥ä¸è®¾ç½®</span><br><span class="line"></span><br><span class="line">innodb_additional_mem_pool_size     #å°äº2Gå†…å­˜çš„æœºå™¨ï¼Œæ¨èå€¼æ˜¯20Mã€‚32Gå†…å­˜ä»¥ä¸Š100M</span><br></pre></td></tr></tbody></table></figure></div><p>è°ˆè°ˆé¡¹ç›®ä¸­å¸¸ç”¨çš„MySQLä¼˜åŒ–æ–¹æ³•ï¼Œå…±19æ¡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br><strong>1ã€EXPLAIN</strong><br>åšMySQLä¼˜åŒ–ï¼Œæˆ‘ä»¬è¦å–„ç”¨EXPLAINæŸ¥çœ‹SQLæ‰§è¡Œè®¡åˆ’ã€‚</p><p>ä¸‹é¢æ¥ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ ‡æ³¨ï¼ˆ1ã€2ã€3ã€4ã€5ï¼‰æˆ‘ä»¬è¦é‡ç‚¹å…³æ³¨çš„æ•°æ®ï¼š</p><p><a href="https://i.imgur.com/TWfKAPb.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/TWfKAPb.png" class="lazyload" title></a></p><p>typeåˆ—ï¼Œè¿æ¥ç±»å‹ã€‚ä¸€ä¸ªå¥½çš„SQLè¯­å¥è‡³å°‘è¦è¾¾åˆ°rangeçº§åˆ«ã€‚æœç»å‡ºç°allçº§åˆ«ã€‚<br>keyåˆ—ï¼Œä½¿ç”¨åˆ°çš„ç´¢å¼•åã€‚å¦‚æœæ²¡æœ‰é€‰æ‹©ç´¢å¼•ï¼Œå€¼æ˜¯NULLã€‚å¯ä»¥é‡‡å–å¼ºåˆ¶ç´¢å¼•æ–¹å¼ã€‚<br>key_lenåˆ—ï¼Œç´¢å¼•é•¿åº¦ã€‚<br>rowsåˆ—ï¼Œæ‰«æè¡Œæ•°ã€‚è¯¥å€¼æ˜¯ä¸ªé¢„ä¼°å€¼ã€‚<br>extraåˆ—ï¼Œè¯¦ç»†è¯´æ˜ã€‚æ³¨æ„ï¼Œå¸¸è§çš„ä¸å¤ªå‹å¥½çš„å€¼ï¼Œå¦‚ä¸‹ï¼šUsing filesortï¼ŒUsing temporaryã€‚</p><p><strong>2ã€SQLè¯­å¥ä¸­INåŒ…å«çš„å€¼ä¸åº”è¿‡å¤š</strong><br>MySQLå¯¹äºINåšäº†ç›¸åº”çš„ä¼˜åŒ–ï¼Œå³å°†INä¸­çš„å¸¸é‡å…¨éƒ¨å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œè€Œä¸”è¿™ä¸ªæ•°ç»„æ˜¯æ’å¥½åºçš„ã€‚ä½†æ˜¯å¦‚æœæ•°å€¼è¾ƒå¤šï¼Œäº§ç”Ÿçš„æ¶ˆè€—ä¹Ÿæ˜¯æ¯”è¾ƒå¤§çš„ã€‚å†ä¾‹å¦‚ï¼šselect id from t where num in(1,2,3) å¯¹äºè¿ç»­çš„æ•°å€¼ï¼Œèƒ½ç”¨betweenå°±ä¸è¦ç”¨inäº†ï¼›å†æˆ–è€…ä½¿ç”¨è¿æ¥æ¥æ›¿æ¢ã€‚</p><p><strong>3ã€SELECTè¯­å¥åŠ¡å¿…æŒ‡æ˜å­—æ®µåç§°</strong><br>SELECT*å¢åŠ å¾ˆå¤šä¸å¿…è¦çš„æ¶ˆè€—ï¼ˆCPUã€IOã€å†…å­˜ã€ç½‘ç»œå¸¦å®½ï¼‰ï¼›å¢åŠ äº†ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„å¯èƒ½æ€§ï¼›å½“è¡¨ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå‰æ–­ä¹Ÿéœ€è¦æ›´æ–°ã€‚æ‰€ä»¥è¦æ±‚ç›´æ¥åœ¨selectåé¢æ¥ä¸Šå­—æ®µåã€‚</p><p><strong>4ã€å½“åªéœ€è¦ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨limit 1</strong><br>è¿™æ˜¯ä¸ºäº†ä½¿EXPLAINä¸­typeåˆ—è¾¾åˆ°constç±»å‹</p><p><strong>5ã€å¦‚æœæ’åºå­—æ®µæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œå°±å°½é‡å°‘æ’åº</strong></p><p><strong>6ã€å¦‚æœé™åˆ¶æ¡ä»¶ä¸­å…¶ä»–å­—æ®µæ²¡æœ‰ç´¢å¼•ï¼Œå°½é‡å°‘ç”¨or</strong><br>orä¸¤è¾¹çš„å­—æ®µä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸æ˜¯ç´¢å¼•å­—æ®µï¼Œè€Œå…¶ä»–æ¡ä»¶ä¹Ÿä¸æ˜¯ç´¢å¼•å­—æ®µï¼Œä¼šé€ æˆè¯¥æŸ¥è¯¢ä¸èµ°ç´¢å¼•çš„æƒ…å†µã€‚å¾ˆå¤šæ—¶å€™ä½¿ç”¨union allæˆ–è€…æ˜¯unionï¼ˆå¿…è¦çš„æ—¶å€™ï¼‰çš„æ–¹å¼æ¥ä»£æ›¿â€œorâ€ä¼šå¾—åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p><p><strong>7ã€å°½é‡ç”¨union allä»£æ›¿union</strong><br>unionå’Œunion allçš„å·®å¼‚ä¸»è¦æ˜¯å‰è€…éœ€è¦å°†ç»“æœé›†åˆå¹¶åå†è¿›è¡Œå”¯ä¸€æ€§è¿‡æ»¤æ“ä½œï¼Œè¿™å°±ä¼šæ¶‰åŠåˆ°æ’åºï¼Œå¢åŠ å¤§é‡çš„CPUè¿ç®—ï¼ŒåŠ å¤§èµ„æºæ¶ˆè€—åŠå»¶è¿Ÿã€‚å½“ç„¶ï¼Œunion allçš„å‰ææ¡ä»¶æ˜¯ä¸¤ä¸ªç»“æœé›†æ²¡æœ‰é‡å¤æ•°æ®ã€‚</p><p><strong>8ã€ä¸ä½¿ç”¨ORDER BY RAND()</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> <span class="string">`dynamic`</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">rand</span>() <span class="keyword">limit</span> <span class="number">1000</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸Šé¢çš„SQLè¯­å¥ï¼Œå¯ä¼˜åŒ–ä¸ºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> <span class="string">`dynamic`</span> t1 <span class="keyword">join</span> (<span class="keyword">select</span> <span class="keyword">rand</span>() * (<span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">id</span>) <span class="keyword">from</span> <span class="string">`dynamic`</span>) <span class="keyword">as</span> nid) t2 <span class="keyword">on</span> t1.id > t2.nidlimit <span class="number">1000</span>;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>9ã€åŒºåˆ†inå’Œexistsã€not inå’Œnot exists</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> è¡¨A <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">id</span> <span class="keyword">from</span> è¡¨B)</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸Šé¢SQLè¯­å¥ç›¸å½“äº</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> è¡¨A <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> * <span class="keyword">from</span> è¡¨B <span class="keyword">where</span> è¡¨B.id=è¡¨A.id)</span><br></pre></td></tr></tbody></table></figure></div><p>åŒºåˆ†inå’Œexistsä¸»è¦æ˜¯é€ æˆäº†é©±åŠ¨é¡ºåºçš„æ”¹å˜ï¼ˆè¿™æ˜¯æ€§èƒ½å˜åŒ–çš„å…³é”®ï¼‰ï¼Œå¦‚æœæ˜¯existsï¼Œé‚£ä¹ˆä»¥å¤–å±‚è¡¨ä¸ºé©±åŠ¨è¡¨ï¼Œå…ˆè¢«è®¿é—®ï¼Œå¦‚æœæ˜¯INï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œå­æŸ¥è¯¢ã€‚æ‰€ä»¥INé€‚åˆäºå¤–è¡¨å¤§è€Œå†…è¡¨å°çš„æƒ…å†µï¼›EXISTSé€‚åˆäºå¤–è¡¨å°è€Œå†…è¡¨å¤§çš„æƒ…å†µã€‚</p><p>å…³äºnot inå’Œnot existsï¼Œæ¨èä½¿ç”¨not existsï¼Œä¸ä»…ä»…æ˜¯æ•ˆç‡é—®é¢˜ï¼Œnot inå¯èƒ½å­˜åœ¨é€»è¾‘é—®é¢˜ã€‚å¦‚ä½•é«˜æ•ˆçš„å†™å‡ºä¸€ä¸ªæ›¿ä»£not existsçš„SQLè¯­å¥ï¼Ÿ</p><p>åŸSQLè¯­å¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> colname â€¦ <span class="keyword">from</span> Aè¡¨ <span class="keyword">where</span> a.id <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> b.id <span class="keyword">from</span> Bè¡¨)</span><br></pre></td></tr></tbody></table></figure></div><p>é«˜æ•ˆçš„SQLè¯­å¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> colname â€¦ <span class="keyword">from</span> Aè¡¨ <span class="keyword">Left</span> <span class="keyword">join</span> Bè¡¨ <span class="keyword">on</span> <span class="keyword">where</span> a.id = b.id <span class="keyword">where</span> b.id <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></tbody></table></figure></div><p>å–å‡ºçš„ç»“æœé›†å¦‚ä¸‹å›¾è¡¨ç¤ºï¼ŒAè¡¨ä¸åœ¨Bè¡¨ä¸­çš„æ•°æ®ï¼š<br><a href="https://i.imgur.com/FULvDCo.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/FULvDCo.png" class="lazyload" title></a></p><p><strong>10ã€ä½¿ç”¨åˆç†çš„åˆ†é¡µæ–¹å¼ä»¥æé«˜åˆ†é¡µçš„æ•ˆç‡</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span> <span class="keyword">from</span> product <span class="keyword">limit</span> <span class="number">866613</span>, <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨ä¸Šè¿°SQLè¯­å¥åšåˆ†é¡µçš„æ—¶å€™ï¼Œå¯èƒ½æœ‰äººä¼šå‘ç°ï¼Œéšç€è¡¨æ•°æ®é‡çš„å¢åŠ ï¼Œç›´æ¥ä½¿ç”¨limitåˆ†é¡µæŸ¥è¯¢ä¼šè¶Šæ¥è¶Šæ…¢ã€‚<br><strong>ä¼˜åŒ–çš„æ–¹æ³•å¦‚ä¸‹ï¼š</strong><br>å¯ä»¥å–å‰ä¸€é¡µçš„æœ€å¤§è¡Œæ•°çš„idï¼Œç„¶åæ ¹æ®è¿™ä¸ªæœ€å¤§çš„idæ¥é™åˆ¶ä¸‹ä¸€é¡µçš„èµ·ç‚¹ã€‚æ¯”å¦‚æ­¤åˆ—ä¸­ï¼Œä¸Šä¸€é¡µæœ€å¤§çš„idæ˜¯866612ã€‚<br><strong>SQLå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„å†™æ³•ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span> <span class="keyword">from</span> product <span class="keyword">where</span> <span class="keyword">id</span>> <span class="number">866612</span> <span class="keyword">limit</span> <span class="number">20</span></span><br></pre></td></tr></tbody></table></figure></div><p><strong>11ã€åˆ†æ®µæŸ¥è¯¢</strong><br>åœ¨ä¸€äº›ç”¨æˆ·é€‰æ‹©é¡µé¢ä¸­ï¼Œå¯èƒ½ä¸€äº›ç”¨æˆ·é€‰æ‹©çš„æ—¶é—´èŒƒå›´è¿‡å¤§ï¼Œé€ æˆæŸ¥è¯¢ç¼“æ…¢ã€‚ä¸»è¦çš„åŸå› æ˜¯æ‰«æè¡Œæ•°è¿‡å¤šã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡ç¨‹åºï¼Œåˆ†æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œå¾ªç¯éå†ï¼Œå°†ç»“æœåˆå¹¶å¤„ç†è¿›è¡Œå±•ç¤ºã€‚</p><p>å¦‚ä¸‹å›¾è¿™ä¸ªSQLè¯­å¥ï¼Œæ‰«æçš„è¡Œæ•°æˆç™¾ä¸‡çº§ä»¥ä¸Šçš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨åˆ†æ®µæŸ¥è¯¢ï¼š<br><a href="https://i.imgur.com/XDCI9bK.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/XDCI9bK.png" class="lazyload" title></a></p><p><strong>12ã€é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œnullå€¼åˆ¤æ–­</strong><br>å¯¹äºnullçš„åˆ¤æ–­ä¼šå¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</p><p><strong>13ã€ä¸å»ºè®®ä½¿ç”¨%å‰ç¼€æ¨¡ç³ŠæŸ¥è¯¢</strong><br>ä¾‹å¦‚LIKEâ€œ%nameâ€æˆ–è€…LIKEâ€œ%name%â€ï¼Œè¿™ç§æŸ¥è¯¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆè€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨LIKE â€œname%â€ã€‚<br>é‚£å¦‚ä½•æŸ¥è¯¢%name%ï¼Ÿ<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè™½ç„¶ç»™secretå­—æ®µæ·»åŠ äº†ç´¢å¼•ï¼Œä½†åœ¨explainç»“æœå¹¶æ²¡æœ‰ä½¿ç”¨ï¼š<br><a href="https://i.imgur.com/E9YS8j4.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/E9YS8j4.png" class="lazyload" title></a><br>é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œç­”æ¡ˆï¼šä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚</p><p>åœ¨æˆ‘ä»¬æŸ¥è¯¢ä¸­ç»å¸¸ä¼šç”¨åˆ°<strong>select id,fnum,fdst from dynamic_201606 where user_name like â€˜%zhangsan%â€™;</strong> ã€‚è¿™æ ·çš„è¯­å¥ï¼Œæ™®é€šç´¢å¼•æ˜¯æ— æ³•æ»¡è¶³æŸ¥è¯¢éœ€æ±‚çš„ã€‚åº†å¹¸çš„æ˜¯åœ¨MySQLä¸­ï¼Œæœ‰å…¨æ–‡ç´¢å¼•æ¥å¸®åŠ©æˆ‘ä»¬ã€‚</p><p><strong>åˆ›å»ºå…¨æ–‡ç´¢å¼•çš„SQLè¯­æ³•æ˜¯ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`dynamic_201606`</span> <span class="keyword">ADD</span> FULLTEXT <span class="keyword">INDEX</span> <span class="string">`idx_user_name`</span> (<span class="string">`user_name`</span>);</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ä½¿ç”¨å…¨æ–‡ç´¢å¼•çš„SQLè¯­å¥æ˜¯ï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,fnum,fdst <span class="keyword">from</span> dynamic_201606 <span class="keyword">where</span> <span class="keyword">match</span>(user_name) against(<span class="string">'zhangsan'</span> <span class="keyword">in</span> <span class="built_in">boolean</span> <span class="keyword">mode</span>);</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼šåœ¨éœ€è¦åˆ›å»ºå…¨æ–‡ç´¢å¼•ä¹‹å‰ï¼Œè¯·è”ç³»DBAç¡®å®šèƒ½å¦åˆ›å»ºã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯æŸ¥è¯¢è¯­å¥çš„å†™æ³•ä¸æ™®é€šç´¢å¼•çš„åŒºåˆ«ã€‚</p><p><strong>14ã€é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œ</strong><br>æ¯”å¦‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user_id,user_project <span class="keyword">from</span> user_base <span class="keyword">where</span> age*<span class="number">2</span>=<span class="number">36</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸­å¯¹å­—æ®µå°±è¡Œäº†ç®—æœ¯è¿ç®—ï¼Œè¿™ä¼šé€ æˆå¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•ï¼Œå»ºè®®æ”¹æˆï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user_id,user_project <span class="keyword">from</span> user_base <span class="keyword">where</span> age=<span class="number">36</span>/<span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>15ã€é¿å…éšå¼ç±»å‹è½¬æ¢</strong><br>whereå­å¥ä¸­å‡ºç°columnå­—æ®µçš„ç±»å‹å’Œä¼ å…¥çš„å‚æ•°ç±»å‹ä¸ä¸€è‡´çš„æ—¶å€™å‘ç”Ÿçš„ç±»å‹è½¬æ¢ï¼Œå»ºè®®å…ˆç¡®å®šwhereä¸­çš„å‚æ•°ç±»å‹ã€‚</p><p><strong>16ã€å¯¹äºè”åˆç´¢å¼•æ¥è¯´ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™</strong><br>ä¸¾åˆ—æ¥è¯´ç´¢å¼•å«æœ‰å­—æ®µidã€nameã€schoolï¼Œå¯ä»¥ç›´æ¥ç”¨idå­—æ®µï¼Œä¹Ÿå¯ä»¥idã€nameè¿™æ ·çš„é¡ºåºï¼Œä½†æ˜¯name;schooléƒ½æ— æ³•ä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚æ‰€ä»¥åœ¨åˆ›å»ºè”åˆç´¢å¼•çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ç´¢å¼•å­—æ®µé¡ºåºï¼Œå¸¸ç”¨çš„æŸ¥è¯¢å­—æ®µæ”¾åœ¨æœ€å‰é¢ã€‚</p><p><strong>17ã€å¿…è¦æ—¶å¯ä»¥ä½¿ç”¨force indexæ¥å¼ºåˆ¶æŸ¥è¯¢èµ°æŸä¸ªç´¢å¼•</strong><br>æœ‰çš„æ—¶å€™MySQLä¼˜åŒ–å™¨é‡‡å–å®ƒè®¤ä¸ºåˆé€‚çš„ç´¢å¼•æ¥æ£€ç´¢SQLè¯­å¥ï¼Œä½†æ˜¯å¯èƒ½å®ƒæ‰€é‡‡ç”¨çš„ç´¢å¼•å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¿™æ—¶å°±å¯ä»¥é‡‡ç”¨forceindexæ¥å¼ºåˆ¶ä¼˜åŒ–å™¨ä½¿ç”¨æˆ‘ä»¬åˆ¶å®šçš„ç´¢å¼•ã€‚</p><p><strong>18ã€æ³¨æ„èŒƒå›´æŸ¥è¯¢è¯­å¥</strong><br>å¯¹äºè”åˆç´¢å¼•æ¥è¯´ï¼Œå¦‚æœå­˜åœ¨èŒƒå›´æŸ¥è¯¢ï¼Œæ¯”å¦‚betweenã€>ã€<ç­‰æ¡ä»¶æ—¶ï¼Œä¼šé€ æˆåé¢çš„ç´¢å¼•å­—æ®µå¤±æ•ˆã€‚</p><p><strong>19ã€å…³äºJOINä¼˜åŒ–</strong><br><a href="https://i.imgur.com/QOcz25x.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/QOcz25x.png" class="lazyload" title></a></p><p>LEFT JOIN Aè¡¨ä¸ºé©±åŠ¨è¡¨ï¼ŒINNER JOIN MySQLä¼šè‡ªåŠ¨æ‰¾å‡ºé‚£ä¸ªæ•°æ®å°‘çš„è¡¨ä½œç”¨é©±åŠ¨è¡¨ï¼ŒRIGHT JOIN Bè¡¨ä¸ºé©±åŠ¨è¡¨ã€‚</p><p><strong>æ³¨æ„ï¼š</strong><br>1ï¼‰MySQLä¸­æ²¡æœ‰full joinï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ¥è§£å†³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> A <span class="keyword">left</span> <span class="keyword">join</span> B <span class="keyword">on</span> B.name = A.namewhere B.name <span class="keyword">is</span> nullunion allselect * <span class="keyword">from</span> B;</span><br></pre></td></tr></tbody></table></figure></div><p>2ï¼‰å°½é‡ä½¿ç”¨inner joinï¼Œé¿å…left joinï¼š<br>å‚ä¸è”åˆæŸ¥è¯¢çš„è¡¨è‡³å°‘ä¸º2å¼ è¡¨ï¼Œä¸€èˆ¬éƒ½å­˜åœ¨å¤§å°ä¹‹åˆ†ã€‚å¦‚æœè¿æ¥æ–¹å¼æ˜¯inner joinï¼Œåœ¨æ²¡æœ‰å…¶ä»–è¿‡æ»¤æ¡ä»¶çš„æƒ…å†µä¸‹MySQLä¼šè‡ªåŠ¨é€‰æ‹©å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œä½†æ˜¯left joinåœ¨é©±åŠ¨è¡¨çš„é€‰æ‹©ä¸Šéµå¾ªçš„æ˜¯å·¦è¾¹é©±åŠ¨å³è¾¹çš„åŸåˆ™ï¼Œå³left joinå·¦è¾¹çš„è¡¨åä¸ºé©±åŠ¨è¡¨ã€‚</p><p>3ï¼‰åˆç†åˆ©ç”¨ç´¢å¼•ï¼š<br>è¢«é©±åŠ¨è¡¨çš„ç´¢å¼•å­—æ®µä½œä¸ºonçš„é™åˆ¶å­—æ®µã€‚</p><p>4ï¼‰åˆ©ç”¨å°è¡¨å»é©±åŠ¨å¤§è¡¨ï¼š<br><a href="https://i.imgur.com/lYmzIyp.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/lYmzIyp.png" class="lazyload" title></a></p><p>ä»åŸç†å›¾èƒ½å¤Ÿç›´è§‚çš„çœ‹å‡ºå¦‚æœèƒ½å¤Ÿå‡å°‘é©±åŠ¨è¡¨çš„è¯ï¼Œå‡å°‘åµŒå¥—å¾ªç¯ä¸­çš„å¾ªç¯æ¬¡æ•°ï¼Œä»¥å‡å°‘ IOæ€»é‡åŠCPUè¿ç®—çš„æ¬¡æ•°ã€‚</p><p>5ï¼‰å·§ç”¨STRAIGHT_JOINï¼š<br>inner joinæ˜¯ç”±MySQLé€‰æ‹©é©±åŠ¨è¡¨ï¼Œä½†æ˜¯æœ‰äº›ç‰¹æ®Šæƒ…å†µéœ€è¦é€‰æ‹©å¦ä¸ªè¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œæ¯”å¦‚æœ‰group byã€order byç­‰ã€ŒUsing filesortã€ã€ã€ŒUsing temporaryã€æ—¶ã€‚STRAIGHT_JOINæ¥å¼ºåˆ¶è¿æ¥é¡ºåºï¼Œåœ¨STRAIGHT_JOINå·¦è¾¹çš„è¡¨åå°±æ˜¯é©±åŠ¨è¡¨ï¼Œå³è¾¹åˆ™æ˜¯è¢«é©±åŠ¨è¡¨ã€‚åœ¨ä½¿ç”¨STRAIGHT_JOINæœ‰ä¸ªå‰ææ¡ä»¶æ˜¯è¯¥æŸ¥è¯¢æ˜¯å†…è¿æ¥ï¼Œä¹Ÿå°±æ˜¯inner joinã€‚å…¶ä»–é“¾æ¥ä¸æ¨èä½¿ç”¨STRAIGHT_JOINï¼Œå¦åˆ™å¯èƒ½é€ æˆæŸ¥è¯¢ç»“æœä¸å‡†ç¡®ã€‚</p><p><a href="https://i.imgur.com/baYubFP.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/baYubFP.png" class="lazyload" title></a></p><p>è¿™ä¸ªæ–¹å¼æœ‰æ—¶èƒ½å‡å°‘3å€çš„æ—¶é—´ã€‚<br>ä»¥ä¸Š19æ¡MySQLä¼˜åŒ–æ–¹æ³•å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼</p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go-fastdfs å°å·§çµæ´»çš„æ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/2019/01/29/go-fastdfs%20%E5%B0%8F%E5%B7%A7%E7%81%B5%E6%B4%BB%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
      <url>/2019/01/29/go-fastdfs%20%E5%B0%8F%E5%B7%A7%E7%81%B5%E6%B4%BB%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-go-fastdfs"><a href="#spring-boot-go-fastdfs" class="headerlink" title="spring-boot-go-fastdfs"></a>spring-boot-go-fastdfs</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>go-fastdfsæ˜¯ä¸€ä¸ªåŸºäºgoè¯­è¨€å¼€å‘çš„å¼€æºæ–‡ä»¶ç³»ç»Ÿï¼Œgo-fastdfsï¼ˆç±»fastdfsï¼‰åœ¨è¿ç»´ç®¡ç†ç­‰æ–¹é¢ä¼˜äºfastdfsï¼Œæ›´äººæ€§åŒ–ã€‚<br>æ‰§è¡Œç¨‹åºï¼š<a href="https://github.com/sjqzhang/go-fastdfs/releases" target="_blank" rel="noopener">https://github.com/sjqzhang/go-fastdfs/releases</a><br>æºç ï¼š<a href="https://github.com/sjqzhang/go-fastdfs" target="_blank" rel="noopener">https://github.com/sjqzhang/go-fastdfs</a></p><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li>æ”¯æŒcurlå‘½ä»¤ä¸Šä¼ </li><li>æ”¯æŒæµè§ˆå™¨ä¸Šä¼ </li><li>æ”¯æŒHTTPä¸‹è½½</li><li>æ”¯æŒå¤šæœºè‡ªåŠ¨åŒæ­¥</li><li>ç±»fastdfs</li><li>é«˜æ€§èƒ½ ï¼ˆä½¿ç”¨leveldbä½œä¸ºkvåº“ï¼‰</li><li>é«˜å¯é ï¼ˆè®¾è®¡æå…¶ç®€å•ï¼Œä½¿ç”¨æˆç†Ÿç»„ä»¶ï¼‰</li><li>æ— ä¸­å¿ƒè®¾è®¡</li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>æ— ä¾èµ–(å•ä¸€æ–‡ä»¶ï¼‰</li><li>è‡ªåŠ¨åŒæ­¥</li><li>å¤±è´¥è‡ªåŠ¨ä¿®å¤</li><li>æŒ‰å¤©åˆ†ç›®å½•æ–¹ä¾¿ç»´æŠ¤</li><li>æ”¯æŒä¸åŒçš„åœºæ™¯</li><li>æ–‡ä»¶è‡ªåŠ¨å»é‡</li><li>æ”¯æŒç›®å½•è‡ªå®šä¹‰</li><li>æ”¯æŒä¿ç•™åŸæ–‡ä»¶å</li><li>æ”¯æŒè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å</li><li>æ”¯æŒæµè§ˆå™¨ä¸Šä¼ </li><li>æ”¯æŒæŸ¥çœ‹é›†ç¾¤æ–‡ä»¶ä¿¡æ¯</li><li>æ”¯æŒé›†ç¾¤ç›‘æ§é‚®ä»¶å‘Šè­¦</li><li>æ”¯æŒtokenä¸‹è½½ã€€token=md5(file_md5+timestamp)</li><li>è¿ç»´ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªè§’è‰²ï¼ˆä¸åƒfastdfsæœ‰ä¸‰ä¸ªè§’è‰²Tracker Server,Storage Server,Clientï¼‰ï¼Œé…ç½®è‡ªåŠ¨ç”Ÿæˆ</li><li>æ¯ä¸ªèŠ‚ç‚¹å¯¹ç­‰ï¼ˆç®€åŒ–è¿ç»´ï¼‰</li><li>æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯ä»¥åŒæ—¶è¯»å†™</li></ul><h3 id="å¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨"><a href="#å¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨"></a>å¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨</h3><blockquote><p>linuxï¼š./fileserver<br>windowsï¼šåŒå‡»fileserver.exe</p></blockquote><p>å…·ä½“ä»£ç å®ç°è¯·çœ‹æºç ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†é—®ä»·é‚£ç³»ç»Ÿä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯´æ²¡æœ‰åˆ é™¤çš„åŠŸèƒ½è¿™ä¸€ç‚¹å°±æ˜¾å¾—ä¼˜ç‚¹è›‹ç–¼äº†ã€‚</p><p>ä¸Šä¼ ç»“æœï¼š<br><a href="https://i.imgur.com/HLYNp1I.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/HLYNp1I.png" class="lazyload" title></a></p><p>æºç åœ°å€ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-go-fastdfs" target="_blank" rel="noopener">æºç </a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="https://www.hwy.ac.cn" target="_blank" rel="noopener">https://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> æ–‡ä»¶ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>69 ä¸ªç»å…¸ Spring é¢è¯•é¢˜å’Œç­”æ¡ˆ</title>
      <link href="/2019/01/27/69%20%E4%B8%AA%E7%BB%8F%E5%85%B8%20Spring%20%E9%9D%A2%E8%AF%95%E9%A2%98%E5%92%8C%E7%AD%94%E6%A1%88/"/>
      <url>/2019/01/27/69%20%E4%B8%AA%E7%BB%8F%E5%85%B8%20Spring%20%E9%9D%A2%E8%AF%95%E9%A2%98%E5%92%8C%E7%AD%94%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="1-ä»€ä¹ˆæ˜¯spring"><a href="#1-ä»€ä¹ˆæ˜¯spring" class="headerlink" title="1. ä»€ä¹ˆæ˜¯spring?"></a>1. ä»€ä¹ˆæ˜¯spring?</h3><p>Spring æ˜¯ä¸ªjavaä¼ä¸šçº§åº”ç”¨çš„å¼€æºå¼€å‘æ¡†æ¶ã€‚Springä¸»è¦ç”¨æ¥å¼€å‘Javaåº”ç”¨ï¼Œä½†æ˜¯æœ‰äº›æ‰©å±•æ˜¯é’ˆå¯¹æ„å»ºJ2EEå¹³å°çš„webåº”ç”¨ã€‚Spring æ¡†æ¶ç›®æ ‡æ˜¯ç®€åŒ–Javaä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œå¹¶é€šè¿‡POJOä¸ºåŸºç¡€çš„ç¼–ç¨‹æ¨¡å‹ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p><h3 id="2-ä½¿ç”¨Springæ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ä½¿ç”¨Springæ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. ä½¿ç”¨Springæ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. ä½¿ç”¨Springæ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>è½»é‡ï¼šSpring æ˜¯è½»é‡çš„ï¼ŒåŸºæœ¬çš„ç‰ˆæœ¬å¤§çº¦2MB</li><li>æ§åˆ¶åè½¬ï¼šSpringé€šè¿‡æ§åˆ¶åè½¬å®ç°äº†æ¾æ•£è€¦åˆï¼Œå¯¹è±¡ä»¬ç»™å‡ºå®ƒä»¬çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–çš„å¯¹è±¡ä»¬</li><li>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹(AOP)ï¼šSpringæ”¯æŒé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œå¹¶ä¸”æŠŠåº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€</li><li>å®¹å™¨ï¼šSpring åŒ…å«å¹¶ç®¡ç†åº”ç”¨ä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®</li><li>MVCæ¡†æ¶ï¼šSpringçš„WEBæ¡†æ¶æ˜¯ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¡†æ¶ï¼Œæ˜¯Webæ¡†æ¶çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“</li><li>äº‹åŠ¡ç®¡ç†ï¼šSpring æä¾›ä¸€ä¸ªæŒç»­çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šè‡³æœ¬åœ°äº‹åŠ¡ä¸‹è‡³å…¨å±€äº‹åŠ¡ï¼ˆJTAï¼‰</li><li>å¼‚å¸¸å¤„ç†ï¼šSpring æä¾›æ–¹ä¾¿çš„APIæŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸ï¼ˆæ¯”å¦‚ç”±JDBCï¼ŒHibernate or JDOæŠ›å‡ºçš„ï¼‰è½¬åŒ–ä¸ºä¸€è‡´çš„unchecked å¼‚å¸¸</li></ul><h3 id="3-Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"><a href="#3-Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ" class="headerlink" title="3.  Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"></a>3.  Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ</h3><p>ä»¥ä¸‹æ˜¯Spring æ¡†æ¶çš„åŸºæœ¬æ¨¡å—ï¼š</p><ul><li>Core module</li><li>Bean module</li><li>Context module</li><li>Expression Language module</li><li>JDBC module</li><li>ORM module</li><li>OXM module</li><li>Java Messaging Service(JMS) module</li><li>Transaction module</li><li>Web module</li><li>Web-Servlet module</li><li>Web-Struts module</li><li>Web-Portlet module</li></ul><h3 id="4-æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—"><a href="#4-æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—" class="headerlink" title="4. æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—"></a>4. æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—</h3><p>è¿™æ˜¯åŸºæœ¬çš„Springæ¨¡å—ï¼Œæä¾›spring æ¡†æ¶çš„åŸºç¡€åŠŸèƒ½ï¼ŒBeanFactory æ˜¯ ä»»ä½•ä»¥springä¸ºåŸºç¡€çš„åº”ç”¨çš„æ ¸å¿ƒã€‚Spring æ¡†æ¶å»ºç«‹åœ¨æ­¤æ¨¡å—ä¹‹ä¸Šï¼Œå®ƒä½¿Springæˆä¸ºä¸€ä¸ªå®¹å™¨ã€‚</p><h3 id="5-BeanFactory-â€“-BeanFactory-å®ç°ä¸¾ä¾‹"><a href="#5-BeanFactory-â€“-BeanFactory-å®ç°ä¸¾ä¾‹" class="headerlink" title="5. BeanFactory â€“ BeanFactory å®ç°ä¸¾ä¾‹"></a>5. BeanFactory â€“ BeanFactory å®ç°ä¸¾ä¾‹</h3><p>Bean å·¥å‚æ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªå®ç°ï¼Œæä¾›äº†æ§åˆ¶åè½¬åŠŸèƒ½ï¼Œç”¨æ¥æŠŠåº”ç”¨çš„é…ç½®å’Œä¾èµ–ä»æ­£çœŸçš„åº”ç”¨ä»£ç ä¸­åˆ†ç¦»ã€‚<br>æœ€å¸¸ç”¨çš„BeanFactory å®ç°æ˜¯XmlBeanFactory ç±»ã€‚</p><h3 id="6-XMLBeanFactory"><a href="#6-XMLBeanFactory" class="headerlink" title="6. XMLBeanFactory"></a>6. XMLBeanFactory</h3><p>æœ€å¸¸ç”¨çš„å°±æ˜¯org.springframework.beans.factory.xml.XmlBeanFactory ï¼Œå®ƒæ ¹æ®XMLæ–‡ä»¶ä¸­çš„å®šä¹‰åŠ è½½beansã€‚è¯¥å®¹å™¨ä»XML æ–‡ä»¶è¯»å–é…ç½®å…ƒæ•°æ®å¹¶ç”¨å®ƒå»åˆ›å»ºä¸€ä¸ªå®Œå…¨é…ç½®çš„ç³»ç»Ÿæˆ–åº”ç”¨ã€‚</p><h3 id="7-è§£é‡ŠAOPæ¨¡å—"><a href="#7-è§£é‡ŠAOPæ¨¡å—" class="headerlink" title="7. è§£é‡ŠAOPæ¨¡å—"></a>7. è§£é‡ŠAOPæ¨¡å—</h3><p>AOPæ¨¡å—ç”¨äºå‘ç»™æˆ‘ä»¬çš„Springåº”ç”¨åšé¢å‘åˆ‡é¢çš„å¼€å‘ï¼Œ å¾ˆå¤šæ”¯æŒç”±AOPè”ç›Ÿæä¾›ï¼Œè¿™æ ·å°±ç¡®ä¿äº†Springå’Œå…¶ä»–AOPæ¡†æ¶çš„å…±é€šæ€§ã€‚è¿™ä¸ªæ¨¡å—å°†å…ƒæ•°æ®ç¼–ç¨‹å¼•å…¥Springã€‚</p><h3 id="8-è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—"><a href="#8-è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—" class="headerlink" title="8. è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—"></a>8. è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—</h3><p>é€šè¿‡ä½¿ç”¨JDBCæŠ½è±¡å’ŒDAOæ¨¡å—ï¼Œä¿è¯æ•°æ®åº“ä»£ç çš„ç®€æ´ï¼Œå¹¶èƒ½é¿å…æ•°æ®åº“èµ„æºé”™è¯¯å…³é—­å¯¼è‡´çš„é—®é¢˜ï¼Œå®ƒåœ¨å„ç§ä¸åŒçš„æ•°æ®åº“çš„é”™è¯¯ä¿¡æ¯ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å¼‚å¸¸è®¿é—®å±‚ã€‚å®ƒè¿˜åˆ©ç”¨Springçš„AOP æ¨¡å—ç»™Springåº”ç”¨ä¸­çš„å¯¹è±¡æä¾›äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚</p><h3 id="9-è§£é‡Šå¯¹è±¡-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"><a href="#9-è§£é‡Šå¯¹è±¡-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—" class="headerlink" title="9. è§£é‡Šå¯¹è±¡/å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"></a>9. è§£é‡Šå¯¹è±¡/å…³ç³»æ˜ å°„é›†æˆæ¨¡å—</h3><p>Spring é€šè¿‡æä¾›ORMæ¨¡å—ï¼Œæ”¯æŒæˆ‘ä»¬åœ¨ç›´æ¥JDBCä¹‹ä¸Šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡/å…³ç³»æ˜ å°„æ˜ å°„(ORM)å·¥å…·ï¼ŒSpring æ”¯æŒé›†æˆä¸»æµçš„ORMæ¡†æ¶ï¼Œå¦‚Hiberate,JDOå’Œ iBATIS SQL Mapsã€‚Springçš„äº‹åŠ¡ç®¡ç†åŒæ ·æ”¯æŒä»¥ä¸Šæ‰€æœ‰ORMæ¡†æ¶åŠJDBCã€‚</p><h3 id="10-è§£é‡ŠWEB-æ¨¡å—"><a href="#10-è§£é‡ŠWEB-æ¨¡å—" class="headerlink" title="10.  è§£é‡ŠWEB æ¨¡å—"></a>10.  è§£é‡ŠWEB æ¨¡å—</h3><p>Springçš„WEBæ¨¡å—æ˜¯æ„å»ºåœ¨application context æ¨¡å—åŸºç¡€ä¹‹ä¸Šï¼Œæä¾›ä¸€ä¸ªé€‚åˆwebåº”ç”¨çš„ä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªæ¨¡å—ä¹ŸåŒ…æ‹¬æ”¯æŒå¤šç§é¢å‘webçš„ä»»åŠ¡ï¼Œå¦‚é€æ˜åœ°å¤„ç†å¤šä¸ªæ–‡ä»¶ä¸Šä¼ è¯·æ±‚å’Œç¨‹åºçº§è¯·æ±‚å‚æ•°çš„ç»‘å®šåˆ°ä½ çš„ä¸šåŠ¡å¯¹è±¡ã€‚å®ƒä¹Ÿæœ‰å¯¹Jakarta Strutsçš„æ”¯æŒã€‚</p><h3 id="12-Springé…ç½®æ–‡ä»¶"><a href="#12-Springé…ç½®æ–‡ä»¶" class="headerlink" title="12.  Springé…ç½®æ–‡ä»¶"></a>12.  Springé…ç½®æ–‡ä»¶</h3><p>Springé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç±»ä¿¡æ¯ï¼Œæè¿°äº†å¦‚ä½•é…ç½®å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•ç›¸äº’è°ƒç”¨ã€‚</p><h3 id="13-ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ"><a href="#13-ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ" class="headerlink" title="13.  ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ"></a>13.  ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ</h3><p>Spring IOC è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œè£…é…å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="14-IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#14-IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="14.  IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>14.  IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>IOC æˆ– ä¾èµ–æ³¨å…¥æŠŠåº”ç”¨çš„ä»£ç é‡é™åˆ°æœ€ä½ã€‚å®ƒä½¿åº”ç”¨å®¹æ˜“æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ä¸å†éœ€è¦å•ä¾‹å’ŒJNDIæŸ¥æ‰¾æœºåˆ¶ã€‚æœ€å°çš„ä»£ä»·å’Œæœ€å°çš„ä¾µå…¥æ€§ä½¿æ¾æ•£è€¦åˆå¾—ä»¥å®ç°ã€‚IOCå®¹å™¨æ”¯æŒåŠ è½½æœåŠ¡æ—¶çš„é¥¿æ±‰å¼åˆå§‹åŒ–å’Œæ‡’åŠ è½½ã€‚</p><h3 id="15-ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#15-ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="15. ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>15. ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>FileSystemXmlApplicationContext ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</li><li>ClassPathXmlApplicationContextï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚</li><li>WebXmlApplicationContextï¼šæ­¤å®¹å™¨åŠ è½½ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªWEBåº”ç”¨çš„æ‰€æœ‰beanã€‚</li></ul><h3 id="16-Bean-å·¥å‚å’Œ-Application-contexts-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#16-Bean-å·¥å‚å’Œ-Application-contexts-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="16. Bean å·¥å‚å’Œ Application contexts  æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>16. Bean å·¥å‚å’Œ Application contexts  æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Application contextsæä¾›ä¸€ç§æ–¹æ³•å¤„ç†æ–‡æœ¬æ¶ˆæ¯ï¼Œä¸€ä¸ªé€šå¸¸çš„åšæ³•æ˜¯åŠ è½½æ–‡ä»¶èµ„æºï¼ˆæ¯”å¦‚é•œåƒï¼‰ï¼Œå®ƒä»¬å¯ä»¥å‘æ³¨å†Œä¸ºç›‘å¬å™¨çš„beanå‘å¸ƒäº‹ä»¶ã€‚å¦å¤–ï¼Œåœ¨å®¹å™¨æˆ–å®¹å™¨å†…çš„å¯¹è±¡ä¸Šæ‰§è¡Œçš„é‚£äº›ä¸å¾—ä¸ç”±beanå·¥å‚ä»¥ç¨‹åºåŒ–æ–¹å¼å¤„ç†çš„æ“ä½œï¼Œå¯ä»¥åœ¨Application contextsä¸­ä»¥å£°æ˜çš„æ–¹å¼å¤„ç†ã€‚Application contextså®ç°äº†MessageSourceæ¥å£ï¼Œè¯¥æ¥å£çš„å®ç°ä»¥å¯æ’æ‹”çš„æ–¹å¼æä¾›è·å–æœ¬åœ°åŒ–æ¶ˆæ¯çš„æ–¹æ³•ã€‚</p><h3 id="17-ä¸€ä¸ªSpringçš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ"><a href="#17-ä¸€ä¸ªSpringçš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="17. ä¸€ä¸ªSpringçš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ"></a>17. ä¸€ä¸ªSpringçš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ</h3><ul><li>ä¸€ä¸ªå®šä¹‰äº†ä¸€äº›åŠŸèƒ½çš„æ¥å£</li><li>è¿™å®ç°åŒ…æ‹¬å±æ€§ï¼Œå®ƒçš„Setter ï¼Œ getter æ–¹æ³•å’Œå‡½æ•°ç­‰</li><li>Spring AOP</li><li>Spring çš„XML é…ç½®æ–‡ä»¶</li><li>ä½¿ç”¨ä»¥ä¸ŠåŠŸèƒ½çš„å®¢æˆ·ç«¯ç¨‹åº</li></ul><h1 id="ä¾èµ–æ³¨å…¥"><a href="#ä¾èµ–æ³¨å…¥" class="headerlink" title="ä¾èµ–æ³¨å…¥"></a>ä¾èµ–æ³¨å…¥</h1><h3 id="18-ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#18-ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="18. ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>18. ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>ä¾èµ–æ³¨å…¥ï¼Œæ˜¯IOCçš„ä¸€ä¸ªæ–¹é¢ï¼Œæ˜¯ä¸ªé€šå¸¸çš„æ¦‚å¿µï¼Œå®ƒæœ‰å¤šç§è§£é‡Šã€‚è¿™æ¦‚å¿µæ˜¯è¯´ä½ ä¸ç”¨åˆ›å»ºå¯¹è±¡ï¼Œè€Œåªéœ€è¦æè¿°å®ƒå¦‚ä½•è¢«åˆ›å»ºã€‚ä½ ä¸åœ¨ä»£ç é‡Œç›´æ¥ç»„è£…ä½ çš„ç»„ä»¶å’ŒæœåŠ¡ï¼Œä½†æ˜¯è¦åœ¨é…ç½®æ–‡ä»¶é‡Œæè¿°å“ªäº›ç»„ä»¶éœ€è¦å“ªäº›æœåŠ¡ï¼Œä¹‹åä¸€ä¸ªå®¹å™¨ï¼ˆIOCå®¹å™¨ï¼‰è´Ÿè´£æŠŠä»–ä»¬ç»„è£…èµ·æ¥ã€‚</p><h3 id="19-æœ‰å“ªäº›ä¸åŒç±»å‹çš„IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ"><a href="#19-æœ‰å“ªäº›ä¸åŒç±»å‹çš„IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ" class="headerlink" title="19.  æœ‰å“ªäº›ä¸åŒç±»å‹çš„IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ"></a>19.  æœ‰å“ªäº›ä¸åŒç±»å‹çš„IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ</h3><p>æ„é€ å™¨ä¾èµ–æ³¨å…¥ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚<br>Setteræ–¹æ³•æ³¨å…¥ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚</p><h3 id="20-å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯-Setteræ–¹æ³•æ³¨å…¥ï¼Ÿ"><a href="#20-å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯-Setteræ–¹æ³•æ³¨å…¥ï¼Ÿ" class="headerlink" title="20. å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯ Setteræ–¹æ³•æ³¨å…¥ï¼Ÿ"></a>20. å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯ Setteræ–¹æ³•æ³¨å…¥ï¼Ÿ</h3><p>ä½ ä¸¤ç§ä¾èµ–æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥å’ŒSetteræ–¹æ³•æ³¨å…¥ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–ã€‚</p><h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><h3 id="21-ä»€ä¹ˆæ˜¯Spring-beansï¼Ÿ"><a href="#21-ä»€ä¹ˆæ˜¯Spring-beansï¼Ÿ" class="headerlink" title="21.ä»€ä¹ˆæ˜¯Spring beansï¼Ÿ"></a>21.ä»€ä¹ˆæ˜¯Spring beansï¼Ÿ</h3><p>Spring beans æ˜¯é‚£äº›å½¢æˆSpringåº”ç”¨çš„ä¸»å¹²çš„javaå¯¹è±¡ã€‚å®ƒä»¬è¢«Spring IOCå®¹å™¨åˆå§‹åŒ–ï¼Œè£…é…ï¼Œå’Œç®¡ç†ã€‚è¿™äº›beansé€šè¿‡å®¹å™¨ä¸­é…ç½®çš„å…ƒæ•°æ®åˆ›å»ºã€‚æ¯”å¦‚ï¼Œä»¥XMLæ–‡ä»¶ä¸­<bean> çš„å½¢å¼å®šä¹‰ã€‚<br>Spring æ¡†æ¶å®šä¹‰çš„beanséƒ½æ˜¯å•ä»¶beansã€‚åœ¨bean tagä¸­æœ‰ä¸ªå±æ€§â€singletonâ€ï¼Œå¦‚æœå®ƒè¢«èµ‹ä¸ºTRUEï¼Œbean å°±æ˜¯å•ä»¶ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ª prototype beanã€‚é»˜è®¤æ˜¯TRUEï¼Œæ‰€ä»¥æ‰€æœ‰åœ¨Springæ¡†æ¶ä¸­çš„beans ç¼ºçœéƒ½æ˜¯å•ä»¶ã€‚</bean></p><h3 id="22-ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ"><a href="#22-ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ" class="headerlink" title="22. ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ"></a>22. ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ</h3><p>ä¸€ä¸ªSpring Bean çš„å®šä¹‰åŒ…å«å®¹å™¨å¿…çŸ¥çš„æ‰€æœ‰é…ç½®å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªbeanï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…åŠå®ƒçš„ä¾èµ–ã€‚</p><h3 id="23-å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ"><a href="#23-å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ" class="headerlink" title="23. å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ"></a>23. å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ</h3><p>è¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚</p><ul><li>XMLé…ç½®æ–‡ä»¶ã€‚</li><li>åŸºäºæ³¨è§£çš„é…ç½®ã€‚</li><li>åŸºäºjavaçš„é…ç½®ã€‚</li></ul><h3 id="24-ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"><a href="#24-ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="24. ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"></a>24. ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ</h3><p>å½“å®šä¹‰ä¸€ä¸ª<bean> åœ¨Springé‡Œï¼Œæˆ‘ä»¬è¿˜èƒ½ç»™è¿™ä¸ªbeanå£°æ˜ä¸€ä¸ªä½œç”¨åŸŸã€‚å®ƒå¯ä»¥é€šè¿‡bean å®šä¹‰ä¸­çš„scopeå±æ€§æ¥å®šä¹‰ã€‚å¦‚ï¼Œå½“Springè¦åœ¨éœ€è¦çš„æ—¶å€™æ¯æ¬¡ç”Ÿäº§ä¸€ä¸ªæ–°çš„beanå®ä¾‹ï¼Œbeançš„scopeå±æ€§è¢«æŒ‡å®šä¸ºprototypeã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ä¸ªbeanæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¿”å›åŒä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªbeançš„scope å±æ€§ å¿…é¡»è®¾ä¸º singletonã€‚</bean></p><h3 id="25-è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ"><a href="#25-è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ" class="headerlink" title="25. è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ"></a>25. è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ</h3><p>Springæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š</p><ul><li>singleton : beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li><li>prototypeï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</li><li>requestï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li><li>sessionï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li><li>global-sessionï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚<br>ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯Singletonã€‚</li></ul><h3 id="26-Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"><a href="#26-Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ" class="headerlink" title="26. Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"></a>26. Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>ä¸ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="27-è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#27-è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="27. è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ"></a>27. è§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ</h3><ul><li>Springå®¹å™¨ ä»XML æ–‡ä»¶ä¸­è¯»å–beançš„å®šä¹‰ï¼Œå¹¶å®ä¾‹åŒ–beanã€‚</li><li>Springæ ¹æ®beançš„å®šä¹‰å¡«å……æ‰€æœ‰çš„å±æ€§ã€‚</li><li>å¦‚æœbeanå®ç°äº†BeanNameAware æ¥å£ï¼ŒSpring ä¼ é€’bean çš„ID åˆ° setBeanNameæ–¹æ³•ã€‚</li><li>å¦‚æœBean å®ç°äº† BeanFactoryAware æ¥å£ï¼Œ Springä¼ é€’beanfactory ç»™setBeanFactory æ–¹æ³•ã€‚</li><li>å¦‚æœæœ‰ä»»ä½•ä¸beanç›¸å…³è”çš„BeanPostProcessorsï¼ŒSpringä¼šåœ¨postProcesserBeforeInitialization()æ–¹æ³•å†…è°ƒç”¨å®ƒä»¬ã€‚</li><li>å¦‚æœbeanå®ç°IntializingBeanäº†ï¼Œè°ƒç”¨å®ƒçš„afterPropertySetæ–¹æ³•ï¼Œå¦‚æœbeanå£°æ˜äº†åˆå§‹åŒ–æ–¹æ³•ï¼Œè°ƒç”¨æ­¤åˆå§‹åŒ–æ–¹æ³•ã€‚</li><li>å¦‚æœæœ‰BeanPostProcessors å’Œbean å…³è”ï¼Œè¿™äº›beançš„postProcessAfterInitialization() æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</li><li>å¦‚æœbeanå®ç°äº† DisposableBeanï¼Œå®ƒå°†è°ƒç”¨destroy()æ–¹æ³•ã€‚</li></ul><h3 id="28-å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"><a href="#28-å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ" class="headerlink" title="28.  å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"></a>28.  å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ</h3><p>æœ‰ä¸¤ä¸ªé‡è¦çš„bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯setup ï¼Œ å®ƒæ˜¯åœ¨å®¹å™¨åŠ è½½beançš„æ—¶å€™è¢«è°ƒç”¨ã€‚ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ teardown  å®ƒæ˜¯åœ¨å®¹å™¨å¸è½½ç±»çš„æ—¶å€™è¢«è°ƒç”¨ã€‚<br>The bean æ ‡ç­¾æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼ˆinit-methodå’Œdestroy-methodï¼‰ã€‚ç”¨å®ƒä»¬ä½ å¯ä»¥è‡ªå·±å®šåˆ¶åˆå§‹åŒ–å’Œæ³¨é”€æ–¹æ³•ã€‚å®ƒä»¬ä¹Ÿæœ‰ç›¸åº”çš„æ³¨è§£ï¼ˆ@PostConstructå’Œ@PreDestroyï¼‰ã€‚</p><h3 id="29-ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿ"><a href="#29-ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿ" class="headerlink" title="29. ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿ"></a>29. ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿ</h3><p>å½“ä¸€ä¸ªbeanä»…è¢«ç”¨ä½œå¦ä¸€ä¸ªbeançš„å±æ€§æ—¶ï¼Œå®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨beanï¼Œä¸ºäº†å®šä¹‰inner beanï¼Œåœ¨Spring çš„ åŸºäºXMLçš„ é…ç½®å…ƒæ•°æ®ä¸­ï¼Œå¯ä»¥åœ¨ <property>æˆ– <constructor-arg> å…ƒç´ å†…ä½¿ç”¨<bean> å…ƒç´ ï¼Œå†…éƒ¨beané€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„Scopeä¸€èˆ¬æ˜¯prototypeã€‚</bean></constructor-arg></property></p><h3 id="30-åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ"><a href="#30-åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ" class="headerlink" title="30. åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ"></a>30. åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ</h3><p>Springæä¾›ä»¥ä¸‹å‡ ç§é›†åˆçš„é…ç½®å…ƒç´ ï¼š</p><ul><li><list>ç±»å‹ç”¨äºæ³¨å…¥ä¸€åˆ—å€¼ï¼Œå…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</list></li><li><set> ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„å€¼ï¼Œä¸å…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</set></li><li><map> ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½å¯ä»¥ä¸ºä»»æ„ç±»å‹ã€‚</map></li><li><props>ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½åªèƒ½ä¸ºStringç±»å‹ã€‚</props></li></ul><h3 id="31-ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ"><a href="#31-ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ" class="headerlink" title="31. ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ"></a>31. ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ</h3><p>è£…é…ï¼Œæˆ–bean è£…é…æ˜¯æŒ‡åœ¨Spring å®¹å™¨ä¸­æŠŠbeanç»„è£…åˆ°ä¸€èµ·ï¼Œå‰ææ˜¯å®¹å™¨éœ€è¦çŸ¥é“beançš„ä¾èµ–å…³ç³»ï¼Œå¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¥æŠŠå®ƒä»¬è£…é…åˆ°ä¸€èµ·ã€‚</p><h3 id="32-ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#32-ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="32. ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>32. ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>Spring å®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨è£…é…ç›¸äº’åˆä½œçš„beanï¼Œè¿™æ„å‘³ç€å®¹å™¨ä¸éœ€è¦<constructor-arg>å’Œ<property>é…ç½®ï¼Œèƒ½é€šè¿‡Beanå·¥å‚è‡ªåŠ¨å¤„ç†beanä¹‹é—´çš„åä½œã€‚</property></constructor-arg></p><h3 id="33-è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"><a href="#33-è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…" class="headerlink" title="33. è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"></a>33. è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…</h3><p>æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼Springå®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥</p><ul><li>noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½®ref å±æ€§æ¥è¿›è¡Œè£…é…ã€‚</li><li>byNameï¼šé€šè¿‡å‚æ•°å è‡ªåŠ¨è£…é…ï¼ŒSpringå®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç°beançš„autowireå±æ€§è¢«è®¾ç½®æˆbynameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥beançš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„beanã€‚</li><li>byTypeï¼šé€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpringå®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç°beançš„autowireå±æ€§è¢«è®¾ç½®æˆbyTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥beançš„å±æ€§å…·æœ‰ç›¸åŒç±»å‹çš„beanã€‚å¦‚æœæœ‰å¤šä¸ªbeanç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li><li>constructorï¼šè¿™ä¸ªæ–¹å¼ç±»ä¼¼äºbyTypeï¼Œ ä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>autodetectï¼šé¦–å…ˆå°è¯•ä½¿ç”¨constructoræ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œåˆ™ä½¿ç”¨byTypeæ–¹å¼ã€‚</li></ul><h3 id="34-è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"><a href="#34-è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ" class="headerlink" title="34.è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"></a>34.è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ</h3><p>è‡ªåŠ¨è£…é…çš„å±€é™æ€§æ˜¯ï¼š</p><ul><li>é‡å†™ï¼šä½ ä»éœ€ç”¨ <constructor-arg>å’Œ <property> é…ç½®æ¥å®šä¹‰ä¾èµ–ï¼Œæ„å‘³ç€æ€»è¦é‡å†™è‡ªåŠ¨è£…é…ã€‚</property></constructor-arg></li><li>åŸºæœ¬æ•°æ®ç±»å‹ï¼šä½ ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•çš„å±æ€§ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒStringå­—ç¬¦ä¸²ï¼Œå’Œç±»ã€‚</li><li>æ¨¡ç³Šç‰¹æ€§ï¼šè‡ªåŠ¨è£…é…ä¸å¦‚æ˜¾å¼è£…é…ç²¾ç¡®ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå»ºè®®ä½¿ç”¨æ˜¾å¼è£…é…ã€‚</li></ul><h3 id="35-ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"><a href="#35-ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ" class="headerlink" title="35. ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"></a>35. ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ</h3><p>å¯ä»¥ã€‚</p><h1 id="Springæ³¨è§£"><a href="#Springæ³¨è§£" class="headerlink" title="Springæ³¨è§£"></a>Springæ³¨è§£</h1><h3 id="36-ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"><a href="#36-ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­" class="headerlink" title="36. ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"></a>36. ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­</h3><p>åŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚<br>ä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p><h3 id="37-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"><a href="#37-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ" class="headerlink" title="37. ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"></a>37. ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ</h3><p>ç›¸å¯¹äºXMLæ–‡ä»¶ï¼Œæ³¨è§£å‹çš„é…ç½®ä¾èµ–äºé€šè¿‡å­—èŠ‚ç å…ƒæ•°æ®è£…é…ç»„ä»¶ï¼Œè€Œéå°–æ‹¬å·çš„å£°æ˜ã€‚<br>å¼€å‘è€…é€šè¿‡åœ¨ç›¸åº”çš„ç±»ï¼Œæ–¹æ³•æˆ–å±æ€§ä¸Šä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œç›´æ¥ç»„ä»¶ç±»ä¸­è¿›è¡Œé…ç½®ï¼Œè€Œä¸æ˜¯ä½¿ç”¨xmlè¡¨è¿°beançš„è£…é…å…³ç³»ã€‚</p><h3 id="38-æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"><a href="#38-æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ" class="headerlink" title="38. æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"></a>38. æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h3><p>æ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® <a href="context:annotation-config/">context:annotation-config/</a>å…ƒç´ ã€‚</p><h3 id="39-Required-æ³¨è§£"><a href="#39-Required-æ³¨è§£" class="headerlink" title="39. @Required  æ³¨è§£"></a>39. @Required  æ³¨è§£</h3><p>è¿™ä¸ªæ³¨è§£è¡¨æ˜beançš„å±æ€§å¿…é¡»åœ¨é…ç½®çš„æ—¶å€™è®¾ç½®ï¼Œé€šè¿‡ä¸€ä¸ªbeanå®šä¹‰çš„æ˜¾å¼çš„å±æ€§å€¼æˆ–é€šè¿‡è‡ªåŠ¨è£…é…ï¼Œè‹¥@Requiredæ³¨è§£çš„beanå±æ€§æœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚</p><h3 id="40-Autowired-æ³¨è§£"><a href="#40-Autowired-æ³¨è§£" class="headerlink" title="40. @Autowired æ³¨è§£"></a>40. @Autowired æ³¨è§£</h3><p>@Autowired æ³¨è§£æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•å®Œæˆè‡ªåŠ¨è£…é…ã€‚å®ƒçš„ç”¨æ³•å’Œ@Requiredä¸€æ ·ï¼Œä¿®é¥°setteræ–¹æ³•ã€æ„é€ å™¨ã€å±æ€§æˆ–è€…å…·æœ‰ä»»æ„åç§°å’Œ/æˆ–å¤šä¸ªå‚æ•°çš„PNæ–¹æ³•ã€‚</p><h3 id="41-Qualifier-æ³¨è§£"><a href="#41-Qualifier-æ³¨è§£" class="headerlink" title="41. @Qualifier æ³¨è§£"></a>41. @Qualifier æ³¨è§£</h3><p>å½“æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„beanå´åªæœ‰ä¸€ä¸ªéœ€è¦è‡ªåŠ¨è£…é…æ—¶ï¼Œå°†@Qualifier æ³¨è§£å’Œ@Autowire æ³¨è§£ç»“åˆä½¿ç”¨ä»¥æ¶ˆé™¤è¿™ç§æ··æ·†ï¼ŒæŒ‡å®šéœ€è¦è£…é…çš„ç¡®åˆ‡çš„beanã€‚</p><h1 id="Springæ•°æ®è®¿é—®"><a href="#Springæ•°æ®è®¿é—®" class="headerlink" title="Springæ•°æ®è®¿é—®"></a>Springæ•°æ®è®¿é—®</h1><h3 id="42-åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ"><a href="#42-åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ" class="headerlink" title="42.åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ"></a>42.åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ</h3><p>ä½¿ç”¨SpringJDBC æ¡†æ¶ï¼Œèµ„æºç®¡ç†å’Œé”™è¯¯å¤„ç†çš„ä»£ä»·éƒ½ä¼šè¢«å‡è½»ã€‚æ‰€ä»¥å¼€å‘è€…åªéœ€å†™statements å’Œ queriesä»æ•°æ®å­˜å–æ•°æ®ï¼ŒJDBCä¹Ÿå¯ä»¥åœ¨Springæ¡†æ¶æä¾›çš„æ¨¡æ¿ç±»çš„å¸®åŠ©ä¸‹æ›´æœ‰æ•ˆåœ°è¢«ä½¿ç”¨ï¼Œè¿™ä¸ªæ¨¡æ¿å«JdbcTemplate ï¼ˆä¾‹å­è§è¿™é‡Œhereï¼‰</p><h3 id="43-JdbcTemplate"><a href="#43-JdbcTemplate" class="headerlink" title="43. JdbcTemplate"></a>43. JdbcTemplate</h3><p>JdbcTemplate ç±»æä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•è§£å†³è¯¸å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼Œæ‰§è¡Œå†™å¥½çš„æˆ–å¯è°ƒç”¨çš„æ•°æ®åº“æ“ä½œè¯­å¥ï¼Œæä¾›è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ã€‚</p><h3 id="44-Springå¯¹DAOçš„æ”¯æŒ"><a href="#44-Springå¯¹DAOçš„æ”¯æŒ" class="headerlink" title="44. Springå¯¹DAOçš„æ”¯æŒ"></a>44. Springå¯¹DAOçš„æ”¯æŒ</h3><p>Springå¯¹æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰çš„æ”¯æŒæ—¨åœ¨ç®€åŒ–å®ƒå’Œæ•°æ®è®¿é—®æŠ€æœ¯å¦‚JDBCï¼ŒHibernate or JDO ç»“åˆä½¿ç”¨ã€‚è¿™ä½¿æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åˆ‡æ¢æŒä¹…å±‚ã€‚ç¼–ç æ—¶ä¹Ÿä¸ç”¨æ‹…å¿ƒä¼šæ•è·æ¯ç§æŠ€æœ¯ç‰¹æœ‰çš„å¼‚å¸¸ã€‚</p><h3 id="45-ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ"><a href="#45-ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ" class="headerlink" title="45. ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ"></a>45. ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ</h3><p>åœ¨Springä¸­æœ‰ä¸¤ç§æ–¹å¼è®¿é—®Hibernateï¼š</p><ul><li>æ§åˆ¶åè½¬  Hibernate Templateå’Œ Callback</li><li>ç»§æ‰¿ HibernateDAOSupportæä¾›ä¸€ä¸ªAOP æ‹¦æˆªå™¨</li></ul><h3 id="46-Springæ”¯æŒçš„ORM"><a href="#46-Springæ”¯æŒçš„ORM" class="headerlink" title="46. Springæ”¯æŒçš„ORM"></a>46. Springæ”¯æŒçš„ORM</h3><ul><li>Springæ”¯æŒä»¥ä¸‹ORMï¼š</li><li>Hibernate</li><li>iBatis</li><li>JPA (Java Persistence API)</li><li>TopLink</li><li>JDO (Java Data Objects)</li><li>OJB</li></ul><h3 id="47-å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ"><a href="#47-å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ" class="headerlink" title="47.å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ"></a>47.å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ</h3><p>ç”¨Springçš„ SessionFactory è°ƒç”¨ LocalSessionFactoryã€‚é›†æˆè¿‡ç¨‹åˆ†ä¸‰æ­¥ï¼š</p><ul><li>é…ç½®the Hibernate SessionFactory</li><li>ç»§æ‰¿HibernateDaoSupportå®ç°ä¸€ä¸ªDAO</li><li>åœ¨AOPæ”¯æŒçš„äº‹åŠ¡ä¸­è£…é…</li></ul><h3 id="48-Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"><a href="#48-Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹" class="headerlink" title="48. Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"></a>48. Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹</h3><p>Springæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p><ul><li>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚</li><li>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</li></ul><h3 id="49-Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#49-Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="49. Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>49. Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><ul><li>å®ƒä¸ºä¸åŒçš„äº‹åŠ¡API  å¦‚ JTAï¼ŒJDBCï¼ŒHibernateï¼ŒJPA å’ŒJDOï¼Œæä¾›ä¸€ä¸ªä¸å˜çš„ç¼–ç¨‹æ¨¡å¼ã€‚</li><li>å®ƒä¸ºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æä¾›äº†ä¸€å¥—ç®€å•çš„APIè€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„äº‹åŠ¡APIå¦‚</li><li>å®ƒæ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li><li>å®ƒå’ŒSpringå„ç§æ•°æ®è®¿é—®æŠ½è±¡å±‚å¾ˆå¥½å¾—é›†æˆã€‚</li></ul><h3 id="50-ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"><a href="#50-ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ" class="headerlink" title="50. ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"></a>50. ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ</h3><p>å¤§å¤šæ•°Springæ¡†æ¶çš„ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºå®ƒå¯¹åº”ç”¨ä»£ç çš„å½±å“æœ€å°ï¼Œå› æ­¤æ›´ç¬¦åˆä¸€ä¸ªæ— ä¾µå…¥çš„è½»é‡çº§å®¹å™¨çš„æ€æƒ³ã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œè™½ç„¶æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆè¿™ç§æ–¹å¼å…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶äº‹åŠ¡ï¼‰å°‘äº†ä¸€ç‚¹çµæ´»æ€§ã€‚</p><h1 id="Springé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰"><a href="#Springé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰" class="headerlink" title="Springé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰"></a>Springé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</h1><h3 id="51-è§£é‡ŠAOP"><a href="#51-è§£é‡ŠAOP" class="headerlink" title="51.  è§£é‡ŠAOP"></a>51.  è§£é‡ŠAOP</h3><p>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œæˆ–AOPï¼Œ æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œå…è®¸ç¨‹åºæ¨¡å—åŒ–æ¨ªå‘åˆ‡å‰²å…³æ³¨ç‚¹ï¼Œæˆ–æ¨ªåˆ‡å…¸å‹çš„è´£ä»»åˆ’åˆ†ï¼Œå¦‚æ—¥å¿—å’Œäº‹åŠ¡ç®¡ç†ã€‚</p><h3 id="52-Aspect-åˆ‡é¢"><a href="#52-Aspect-åˆ‡é¢" class="headerlink" title="52. Aspect åˆ‡é¢"></a>52. Aspect åˆ‡é¢</h3><p>AOPæ ¸å¿ƒå°±æ˜¯åˆ‡é¢ï¼Œå®ƒå°†å¤šä¸ªç±»çš„é€šç”¨è¡Œä¸ºå°è£…æˆå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¯¥æ¨¡å—å«æœ‰ä¸€ç»„APIæä¾›æ¨ªåˆ‡åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæ—¥å¿—æ¨¡å—å¯ä»¥è¢«ç§°ä½œæ—¥å¿—çš„AOPåˆ‡é¢ã€‚æ ¹æ®éœ€æ±‚çš„ä¸åŒï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥æœ‰è‹¥å¹²åˆ‡é¢ã€‚åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢é€šè¿‡å¸¦æœ‰@Aspectæ³¨è§£çš„ç±»å®ç°ã€‚</p><h3 id="52-åœ¨Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#52-åœ¨Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="52. åœ¨Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>52. åœ¨Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å…³æ³¨ç‚¹æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ªåŠŸèƒ½ã€‚<br>æ¨ªåˆ‡å…³æ³¨ç‚¹æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ï¼Œå‡ ä¹åº”ç”¨çš„æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦çš„åŠŸèƒ½ã€‚å› æ­¤è¿™äº›éƒ½å±äºæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</p><h3 id="54-è¿æ¥ç‚¹"><a href="#54-è¿æ¥ç‚¹" class="headerlink" title="54. è¿æ¥ç‚¹"></a>54. è¿æ¥ç‚¹</h3><p>è¿æ¥ç‚¹ä»£è¡¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŸä¸ªä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ªAOPåˆ‡é¢ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸ªåº”ç”¨ç¨‹åºæ‰§è¡ŒSpring AOPçš„ä½ç½®ã€‚</p><h3 id="55-é€šçŸ¥"><a href="#55-é€šçŸ¥" class="headerlink" title="55. é€šçŸ¥"></a>55. é€šçŸ¥</h3><p>é€šçŸ¥æ˜¯ä¸ªåœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ‰§è¡Œåè¦åšçš„åŠ¨ä½œï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚<br>Springåˆ‡é¢å¯ä»¥åº”ç”¨äº”ç§ç±»å‹çš„é€šçŸ¥ï¼š</p><ul><li>beforeï¼šå‰ç½®é€šçŸ¥ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰è¢«è°ƒç”¨</li><li>afterï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹åè°ƒç”¨çš„é€šçŸ¥ï¼Œæ— è®ºæ–¹æ³•æ‰§è¡Œæ˜¯å¦æˆåŠŸ</li><li>after-returningï¼šä»…å½“æ–¹æ³•æˆåŠŸå®Œæˆåæ‰§è¡Œçš„é€šçŸ¥</li><li>after-throwingï¼šåœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸é€€å‡ºæ—¶æ‰§è¡Œçš„é€šçŸ¥</li><li>aroundï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åè°ƒç”¨çš„é€šçŸ¥</li></ul><h3 id="56-åˆ‡ç‚¹"><a href="#56-åˆ‡ç‚¹" class="headerlink" title="56. åˆ‡ç‚¹"></a>56. åˆ‡ç‚¹</h3><p>åˆ‡å…¥ç‚¹æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„è¿æ¥ç‚¹ï¼Œé€šçŸ¥å°†åœ¨è¿™äº›ä½ç½®æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–åŒ¹é…çš„æ–¹å¼æŒ‡æ˜åˆ‡å…¥ç‚¹ã€‚</p><h3 id="57-ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ"><a href="#57-ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ" class="headerlink" title="57. ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ"></a>57. ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ</h3><p>å¼•å…¥å…è®¸æˆ‘ä»¬åœ¨å·²å­˜åœ¨çš„ç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><h3 id="58-ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ"><a href="#58-ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ" class="headerlink" title="58. ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ"></a>58. ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ</h3><p>è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢æ‰€é€šçŸ¥çš„å¯¹è±¡ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ä¹ŸæŒ‡è¢«é€šçŸ¥ï¼ˆadvisedï¼‰å¯¹è±¡ã€‚</p><h3 id="59-ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"><a href="#59-ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ" class="headerlink" title="59. ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"></a>59. ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ</h3><p>ä»£ç†æ˜¯é€šçŸ¥ç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ã€‚ä»å®¢æˆ·ç«¯çš„è§’åº¦çœ‹ï¼Œä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="60-æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"><a href="#60-æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ" class="headerlink" title="60. æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"></a>60. æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ</h3><ul><li>BeanNameAutoProxyCreator</li><li>DefaultAdvisorAutoProxyCreator</li><li>Metadata autoproxying</li></ul><h3 id="61-ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ"><a href="#61-ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ" class="headerlink" title="61. ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ"></a>61. ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ</h3><p>ç»‡å…¥æ˜¯å°†åˆ‡é¢å’Œåˆ°å…¶ä»–åº”ç”¨ç±»å‹æˆ–å¯¹è±¡è¿æ¥æˆ–åˆ›å»ºä¸€ä¸ªè¢«é€šçŸ¥å¯¹è±¡çš„è¿‡ç¨‹ã€‚<br>ç»‡å…¥å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼ŒåŠ è½½æ—¶ï¼Œæˆ–è¿è¡Œæ—¶å®Œæˆã€‚</p><h3 id="62-è§£é‡ŠåŸºäºXML-Schemaæ–¹å¼çš„åˆ‡é¢å®ç°"><a href="#62-è§£é‡ŠåŸºäºXML-Schemaæ–¹å¼çš„åˆ‡é¢å®ç°" class="headerlink" title="62. è§£é‡ŠåŸºäºXML Schemaæ–¹å¼çš„åˆ‡é¢å®ç°"></a>62. è§£é‡ŠåŸºäºXML Schemaæ–¹å¼çš„åˆ‡é¢å®ç°</h3><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ‡é¢ç”±å¸¸è§„ç±»ä»¥åŠåŸºäºXMLçš„é…ç½®å®ç°ã€‚</p><h3 id="63-è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"><a href="#63-è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°" class="headerlink" title="63. è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"></a>63. è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°</h3><p>åœ¨è¿™ç§æƒ…å†µä¸‹(åŸºäº@AspectJçš„å®ç°)ï¼Œæ¶‰åŠåˆ°çš„åˆ‡é¢å£°æ˜çš„é£æ ¼ä¸å¸¦æœ‰java5æ ‡æ³¨çš„æ™®é€šjavaç±»ä¸€è‡´ã€‚</p><h1 id="Spring-çš„MVC"><a href="#Spring-çš„MVC" class="headerlink" title="Spring çš„MVC"></a>Spring çš„MVC</h1><h3 id="64-ä»€ä¹ˆæ˜¯Springçš„MVCæ¡†æ¶ï¼Ÿ"><a href="#64-ä»€ä¹ˆæ˜¯Springçš„MVCæ¡†æ¶ï¼Ÿ" class="headerlink" title="64. ä»€ä¹ˆæ˜¯Springçš„MVCæ¡†æ¶ï¼Ÿ"></a>64. ä»€ä¹ˆæ˜¯Springçš„MVCæ¡†æ¶ï¼Ÿ</h3><p>Spring é…å¤‡æ„å»ºWeb åº”ç”¨çš„å…¨åŠŸèƒ½MVCæ¡†æ¶ã€‚Springå¯ä»¥å¾ˆä¾¿æ·åœ°å’Œå…¶ä»–MVCæ¡†æ¶é›†æˆï¼Œå¦‚Strutsï¼ŒSpring çš„MVCæ¡†æ¶ç”¨æ§åˆ¶åè½¬æŠŠä¸šåŠ¡å¯¹è±¡å’Œæ§åˆ¶é€»è¾‘æ¸…æ™°åœ°éš”ç¦»ã€‚å®ƒä¹Ÿå…è®¸ä»¥å£°æ˜çš„æ–¹å¼æŠŠè¯·æ±‚å‚æ•°å’Œä¸šåŠ¡å¯¹è±¡ç»‘å®šã€‚</p><h3 id="65-DispatcherServlet"><a href="#65-DispatcherServlet" class="headerlink" title="65. DispatcherServlet"></a>65. DispatcherServlet</h3><p>Springçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚</p><h3 id="66-WebApplicationContext"><a href="#66-WebApplicationContext" class="headerlink" title="66. WebApplicationContext"></a>66. WebApplicationContext</h3><p>WebApplicationContext ç»§æ‰¿äº†ApplicationContext  å¹¶å¢åŠ äº†ä¸€äº›WEBåº”ç”¨å¿…å¤‡çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œå®ƒä¸åŒäºä¸€èˆ¬çš„ApplicationContext ï¼Œå› ä¸ºå®ƒèƒ½å¤„ç†ä¸»é¢˜ï¼Œå¹¶æ‰¾åˆ°è¢«å…³è”çš„servletã€‚</p><h3 id="67-ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"><a href="#67-ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ" class="headerlink" title="67. ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"></a>67. ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h3><p>æ§åˆ¶å™¨æä¾›ä¸€ä¸ªè®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæ­¤è¡Œä¸ºé€šå¸¸é€šè¿‡æœåŠ¡æ¥å£å®ç°ã€‚æ§åˆ¶å™¨è§£æç”¨æˆ·è¾“å…¥å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç”±è§†å›¾å‘ˆç°ç»™ç”¨æˆ·çš„æ¨¡å‹ã€‚Springç”¨ä¸€ä¸ªéå¸¸æŠ½è±¡çš„æ–¹å¼å®ç°äº†ä¸€ä¸ªæ§åˆ¶å±‚ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºå¤šç§ç”¨é€”çš„æ§åˆ¶å™¨ã€‚</p><h3 id="68-Controller-æ³¨è§£"><a href="#68-Controller-æ³¨è§£" class="headerlink" title="68. @Controller æ³¨è§£"></a>68. @Controller æ³¨è§£</h3><p>è¯¥æ³¨è§£è¡¨æ˜è¯¥ç±»æ‰®æ¼”æ§åˆ¶å™¨çš„è§’è‰²ï¼ŒSpringä¸éœ€è¦ä½ ç»§æ‰¿ä»»ä½•å…¶ä»–æ§åˆ¶å™¨åŸºç±»æˆ–å¼•ç”¨Servlet APIã€‚</p><h3 id="69-RequestMapping-æ³¨è§£"><a href="#69-RequestMapping-æ³¨è§£" class="headerlink" title="69. @RequestMapping æ³¨è§£"></a>69. @RequestMapping æ³¨è§£</h3><p>è¯¥æ³¨è§£æ˜¯ç”¨æ¥æ˜ å°„ä¸€ä¸ªURLåˆ°ä¸€ä¸ªç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„æ–¹å¤„ç†æ³•ä¸Šã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dubboé‡å¯ä¸€å¹´ï¼Œå°šèƒ½é¥­å¦ï¼Ÿ</title>
      <link href="/2019/01/23/Dubbo%E9%87%8D%E5%90%AF%E4%B8%80%E5%B9%B4%EF%BC%8C%E5%B0%9A%E8%83%BD%E9%A5%AD%E5%90%A6%EF%BC%9F/"/>
      <url>/2019/01/23/Dubbo%E9%87%8D%E5%90%AF%E4%B8%80%E5%B9%B4%EF%BC%8C%E5%B0%9A%E8%83%BD%E9%A5%AD%E5%90%A6%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p><a href="https://i.imgur.com/WDop93m.png" data-fancybox="group" data-caption="æ¥æºï¼šå¼€æºä¸­å›½ | å˜‰å®¾ï¼šåŒ—çº¬" class="fancybox"><img alt="æ¥æºï¼šå¼€æºä¸­å›½ | å˜‰å®¾ï¼šåŒ—çº¬" data-src="https://i.imgur.com/WDop93m.png" class="lazyload" title="æ¥æºï¼šå¼€æºä¸­å›½ | å˜‰å®¾ï¼šåŒ—çº¬"></a></p><p>æœ¬æ–‡æ¥æºï¼šå¼€æºä¸­å›½ï¼›å˜‰å®¾ä»‹ç»ï¼šåŒ—çº¬ï¼Œå¼€æºä¸­å›½ç¤¾åŒºæ˜µç§°ï¼šbeiwei30ï¼ŒApache Dubboâ„¢ PPMCï¼Œé˜¿é‡Œå·´å·´é«˜çº§æŠ€æœ¯ä¸“å®¶ï¼Œä¸“æ³¨äºå¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿã€RPC æ¡†æ¶å’Œå¾®æœåŠ¡é¢†åŸŸã€‚</p><p>Dubbo å»å¹´å®£å¸ƒé‡å¯ç»´æŠ¤ï¼Œåˆ°ç°åœ¨å·²ç»ä¸€å¹´æœ‰ä½™ï¼Œå½“åˆé‡å¯çš„æ¶ˆæ¯åœ¨å¼€å‘è€…ä¸­å¼•èµ·äº†å¼ºçƒˆçš„åå“ï¼Œå¾ˆå¤šäººçœ‹å¥½ï¼Œä¹Ÿæœ‰äººæŒæ€€ç–‘çš„æ€åº¦ï¼Œç”šè‡³åˆ°ä»Šå¤©ï¼Œè¿˜æ˜¯æœ‰ä¸å°‘äººè®¤ä¸º Dubbo æ—©å·²æ­»å»ï¼Œå›ä¸äº†é­‚ã€‚</p><p>è´¨ç–‘å£°ä¸­ï¼ŒDubbo å°†é¦–è¦ç›®æ ‡å®šä½äºé‡æ–°æ¿€æ´»ç¤¾åŒºï¼Œèµ¢å›å¼€å‘è€…çš„ä¿¡ä»»ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒDubbo å‘å¸ƒäº†å¤šä¸ªç‰ˆæœ¬ï¼Œå¹¶é€æ¸ä»ä¸€ä¸ª RPC æ¡†æ¶å‘å¾®æœåŠ¡ç”Ÿæ€ç³»ç»Ÿè½¬å˜ï¼›å›¢é˜Ÿ â€œæŠŠ Dubbo æ‰“é€ æˆä¸€ä¸ªå›½é™…åŒ–ä¸ç°ä»£åŒ–é¡¹ç›®â€çš„æ¢ç´¢ç›®å‰æ¥çœ‹ä¹Ÿæœ‰æ‰€å‘¼åº”ï¼Œæ¯”å¦‚å¹´åˆ Dubbo å…¥é©» Apache è½¯ä»¶åŸºé‡‘ä¼šå­µåŒ–å™¨ï¼Œæ¯”å¦‚å®ƒåœ¨ç‰¹æ€§ä¸­æä¾›äº†æ›´åŠ å…¨é¢çš„å¼‚æ­¥æ”¯æŒï¼›è€Œç›®å‰ GitHub ä¸Šçš„ star æ•°ä¹Ÿå·²ç»æœ‰ 2.4w+ã€‚</p><p>æœŸé—´è¿˜æœ‰ Dubbo 3.0 çš„æ¶ˆæ¯æ”¾å‡ºï¼Œ3.0 å°†ä¼šæ˜¯ä¸€ä¸ªå˜é©çš„ç‰ˆæœ¬ï¼Œå®ƒå»ä¸€åˆ‡é˜»å¡çš„å˜åŒ–ç”šè‡³å°†å½±å“åˆ°é˜¿é‡Œ 10 å¤šå¹´ç§¯ç´¯çš„ä¸­é—´ä»¶ã€‚</p><p>ä¸éš¾çœ‹å‡ºï¼Œç›®å‰ Dubbo è¿˜æ´»ç€ã€‚è¿‘æœŸ Dubbo å°†å‘å¸ƒé‡å¯åçš„ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘ç‰ˆæœ¬ 2.7.0ï¼Œè€Œä¸”è¿˜é¢„å‘Šäº†é¡¹ç›®å³å°†ä» Apache è½¯ä»¶åŸºé‡‘ä¼šæ¯•ä¸šï¼Œå€Ÿæ­¤æœºä¼šï¼Œæˆ‘ä»¬é‡‡è®¿äº† Dubbo çš„é¡¹ç›®è´Ÿè´£äººåŒ—çº¬ï¼Œè¯·ä»–ä¸ºå¼€å‘è€…æ¢³ç†äº†é‡å¯ç»´æŠ¤è¿™ä¸€å¹´å¤š Dubbo çš„è¿›å±•ï¼Œå¹¶åˆ†äº«äº†æ¥ä¸‹æ¥çš„è®¡åˆ’ã€‚</p><h3 id="å¼€æºä¸­å›½ï¼š"><a href="#å¼€æºä¸­å›½ï¼š" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>2.7.0 æ–°ç‰ˆæœ¬æœ€å€¼å¾—å…³æ³¨çš„åœ°æ–¹åœ¨å“ªé‡Œ?</p><h3 id="åŒ—çº¬ï¼š"><a href="#åŒ—çº¬ï¼š" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>Dubbo 2.7.0 æ·»åŠ äº†ç¤¾åŒºå‘¼å£°å¾ˆé«˜çš„å¼‚æ­¥åŒ–æ”¯æŒã€ä»¥åŠæ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒåˆ†ç¦»è¿™ä¸¤ä¸ªç‰¹æ€§ã€‚</p><p>ä¸ 2.6 åŠä»¥å‰çš„ç‰ˆæœ¬ç›¸æ¯”ï¼Œå¼‚æ­¥åŒ–æ”¯æŒä¸å†å±€é™äºåŸºäº Future æ¥å£çš„å¼‚æ­¥ï¼Œä¹Ÿä¸å†ä»…ä»…å±€é™äºåªèƒ½åœ¨å®¢æˆ·ç«¯å¼‚æ­¥ã€‚å…·ä½“æ¥è¯´ï¼ŒDubbo 2.7.0 ç‰ˆæœ¬å…¨é¢æ‹¥æŠ± JDK8ï¼Œåœ¨å®¢æˆ·ç«¯å¼€å§‹æ”¯æŒåŸºäº CompletableFuture çš„å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ï¼Œåœ¨æœåŠ¡ç«¯æ”¯æŒåŸºäº AsyncContext çš„å¼‚æ­¥æ¨¡å‹ã€‚</p><p>2.6 åŠä»¥å‰çš„ç‰ˆæœ¬ï¼Œå…ƒæ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨ URL ä¸Šï¼Œé…ç½®ä¿¡æ¯å’Œæ³¨å†Œä¿¡æ¯åªèƒ½å­˜å‚¨åœ¨æ³¨å†Œä¸­å¿ƒä¸Šï¼Œæ³¨å†Œä¸­å¿ƒçš„å®¹é‡å’Œæ‰©å±•æˆä¸ºç“¶é¢ˆã€‚è¿™ä¸ªé™åˆ¶åœ¨ä½¿ç”¨ ZooKeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„å¤§è§„æ¨¡ Dubbo åº”ç”¨åœºæ™¯ä¸‹å°¤ä¸ºçªå‡ºã€‚</p><p>åœ¨ 2.7.0 ä¸­ï¼Œé€šè¿‡å¯¹ URL çš„æ”¹é€ ï¼Œå°†æ³¨å†Œä¸­å¿ƒæ‹†åˆ†æˆäº†ä¸‰ä¸ªä¸­å¿ƒï¼Œåˆ†åˆ«æ˜¯æ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒå’Œå…ƒæ•°æ®ä¸­å¿ƒï¼Œä¸‰è€…å„å¸å…¶è´£ï¼Œä¸ä»…æœ‰æ•ˆåœ°è§£å†³äº†ä¸Šè¿°å®¹é‡é—®é¢˜ï¼Œè€Œä¸”å¾ˆå¥½åœ°é€‚åº”äº†å¾®æœåŠ¡çš„æŠ€æœ¯æ¶æ„ï¼Œç”¨æˆ·å¯ä»¥å¼€å§‹è‡ªç”±é€‰æ‹©é€‚åˆè‡ªå·±åœºæ™¯çš„æ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒã€‚</p><p>2.7.0 å°†å†…å»ºæ”¯æŒ ZooKeeperã€Nacos å’Œ Apollo ç­‰ç¬¬ä¸‰æ–¹æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒï¼Œåœ¨åç»­çš„ç‰ˆæœ¬ä¸­ï¼Œè¿˜ä¼šè¿›ä¸€æ­¥æä¾›å¯¹ Consul å’Œ etcd çš„æ”¯æŒã€‚å¦å¤–ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªå…¨æ–°çš„å…ƒæ•°æ®ä¸­å¿ƒï¼Œå°†ä¸æ³¨å†Œé…ç½®æ— å…³çš„æœåŠ¡ä¿¡æ¯å•ç‹¬å­˜å‚¨ï¼Œé™¤äº†å‡è½»é…ç½®ä¸­å¿ƒä¸æ³¨å†Œä¸­å¿ƒçš„å·¥ä½œå‹åŠ›ä¹‹å¤–ï¼Œè¿˜ä¸ºå°†æ¥æ›´ä¸°å¯Œçš„æœåŠ¡æ²»ç†æ‰“ä¸‹åŸºç¡€ã€‚æœªæ¥ï¼ŒDubbo ä¼šåŸºäºå…ƒæ•°æ®ä¸­å¿ƒæä¾›æœåŠ¡æµ‹è¯•ã€æœåŠ¡ Mock ä»¥åŠæœåŠ¡ API ç®¡ç†ç­‰ç‰¹æ€§ã€‚</p><p>é’ˆå¯¹ä¸‰ä¸ªä¸­å¿ƒçš„åˆ†ç¦»ï¼ŒDubbo è¿˜ä¼šé…å¥—å‘å¸ƒå…¨æ–°è®¾è®¡çš„ Dubbo Ops æ§åˆ¶å°ã€‚</p><p>å¦å¤–ï¼Œ2.7.x ä¼šæ˜¯ Dubbo åœ¨ Apache è½¯ä»¶åŸºé‡‘ä¼šæ¯•ä¸šçš„ç‰ˆæœ¬ï¼Œå®‰è£…åŒ…åŒ…åæ­£å¼åˆ‡æ¢åˆ°äº† org.apache.dubboï¼Œä¸ºäº†ä¿è¯å‘å‰çš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬è¿˜åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­æä¾›äº† com.alibaba.dubbo çš„å…¼å®¹åŒ…ã€‚</p><h3 id="å¼€æºä¸­å›½ï¼š-1"><a href="#å¼€æºä¸­å›½ï¼š-1" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>å¤šè¯­è¨€æ”¯æŒç°åœ¨çœ‹åªæœ‰ä¸€ä¸ª PHP ç‰ˆæœ¬å¯¹é½å¾—æ¯”è¾ƒå®Œå–„ï¼ŒPython å’Œ Node ç‰ˆæœ¬æ˜¯æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å»é…åˆå®ç°åŠŸèƒ½ã€‚åœ¨è¯­è¨€æ”¯æŒè¿™æ–¹é¢ï¼Œç°åœ¨è¿›å±•æ˜¯æ€ä¹ˆæ ·ï¼Œæœ‰ä»€ä¹ˆè®¡åˆ’ï¼Ÿ</p><h3 id="åŒ—çº¬ï¼š-1"><a href="#åŒ—çº¬ï¼š-1" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>é™¤äº† PHP ç‰ˆæœ¬å¯¹é½å¾—æ¯”è¾ƒå¥½ä»¥å¤–ï¼ŒNode ç‰ˆæœ¬ä¹Ÿå€¼å¾—æ¨èã€‚ç›®å‰ç”Ÿæ€ä¸­çš„ Node å®ç°æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯åƒç±³ç½‘è´¡çŒ®çš„ dubbo2.js å’Œèš‚èšé‡‘æœ egg å›¢é˜Ÿè´¡çŒ®çš„ egg-dubbo-rpcã€‚è¿™äº›è¯­è¨€çš„å®ç°éƒ½æ˜¯åœ¨ç”Ÿäº§ç³»ç»Ÿé‡ŒéªŒè¯è¿‡çš„ï¼Œå…¶ä¸­ egg çš„å®ç°æ—¢æ”¯æŒå®¢æˆ·ç«¯ä¹Ÿæ”¯æŒæœåŠ¡ç«¯ã€‚</p><p>é™¤äº† PHP å’Œ Nodeï¼ŒDubbo è¿˜æä¾›äº† Go å’Œ Python æ”¯æŒã€‚å…¶ä¸­ Python ç‰ˆæœ¬æ”¯æŒå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº’é€šï¼Œèµ°çš„æ˜¯ json-rpc åè®®ï¼ŒGo ç‰ˆæœ¬å°†æ”¯æŒåŸç”Ÿ Dubbo åè®®ï¼Œå¹¶è®¡åˆ’åŒæ—¶æä¾›å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚</p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œé™¤äº†å¤šè¯­è¨€å®¢æˆ·ç«¯çš„æ”¯æŒï¼ŒDubbo åŸºäºæ ‡å‡†çš„ Java REST APIâ€”â€”JAX-RS 2.0å®ç°äº† REST è°ƒç”¨æ”¯æŒï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚ç…§è¿™é‡Œï¼š</p><p><a href="http://dubbo.apache.org/zh-cn/docs/user/references/protocol/rest.html" target="_blank" rel="noopener">http://dubbo.apache.org/zh-cn/docs/user/references/protocol/rest.html</a></p><p>æ€»çš„æ¥è¯´ï¼Œç›¸æ¯”äºæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯æ˜¯ Dubbo å¤šè¯­è¨€æ”¯æŒçš„é‡ç‚¹ã€‚ä»å®ç”¨çš„è§’åº¦æ¥è®²ï¼Œç¤¾åŒºå¤§é‡çš„è¯‰æ±‚é›†ä¸­åœ¨å¦‚ä½•ç”¨å¤šè¯­è¨€è°ƒç”¨åå°çš„ Dubbo æœåŠ¡ã€‚å½“ç„¶ï¼Œç›®å‰å¤šè¯­è¨€çš„æ”¯æŒè¿˜å¤„äºèµ·æ­¥é˜¶æ®µï¼Œä¸€æ–¹é¢æ˜¯ä¸»æµè¯­è¨€è¦†ç›–ä¸å¤Ÿï¼Œæ¯”å¦‚ .NET è¿˜æ²¡æœ‰å¯ç”¨ç‰ˆæœ¬ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºå„ä¸ªè¯­è¨€çš„æˆç†Ÿåº¦å‚å·®ä¸é½ï¼Œç¤¾åŒºæŠ•å…¥ä¸å¤Ÿã€‚</p><p>è™½ç„¶ Service Mesh çš„æ–¹æ¡ˆåœ¨è¿™ä¸¤å¹´å‘å±•å¾—å¦‚ç«å¦‚è¼ï¼Œä½†æˆ‘ä»¬ä¹Ÿå‘ç°åŸç”Ÿå¤šè¯­è¨€å®¢æˆ·ç«¯åœ¨å¤§é‡çš„åœºæ™¯ä¸­è¿˜ä¼šæŒç»­å­˜åœ¨å¾ˆé•¿çš„æ—¶é—´ï¼Œå› æ­¤æˆ‘ä»¬ååˆ†é‡è§†åŸç”Ÿå¤šè¯­è¨€å®¢æˆ·ç«¯çš„å»ºè®¾ã€‚åé¢æ€»ä½“çš„æ€è·¯æ˜¯å®šä¹‰ Dubbo åŸç”Ÿå®¢æˆ·ç«¯æœ€å°åŠŸèƒ½é›†ï¼Œä»¥åŠæˆç†Ÿåº¦è¯„ä¼°æ ‡å‡†ï¼ŒæŒç»­è¿è¥ç¤¾åŒºï¼Œå¸å¼•æ›´å¤šçš„å¤šè¯­è¨€å¿—æ„¿è€…åŠ å…¥ã€‚</p><h3 id="å¼€æºä¸­å›½ï¼š-2"><a href="#å¼€æºä¸­å›½ï¼š-2" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>é‡å¯ç»´æŠ¤è¿™ä¸€å¹´æ¥ä¸»è¦çš„å·¥ä½œæ˜¯å…³äºå“ªäº›æ–¹é¢çš„ï¼Ÿå®è´¨è¿›å±•å¦‚ä½•ï¼Ÿ</p><h3 id="åŒ—çº¬ï¼š-2"><a href="#åŒ—çº¬ï¼š-2" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>è¯´åˆ°è¿™ä¸ªï¼Œå…¶å® Dubbo æœ€è¿‘æ‰åˆšåˆšåœ¨å¼€æºä¸­å›½å‘èµ·çš„â€œæœ€å—æ¬¢è¿ä¸­å›½å¼€æºè½¯ä»¶è¯„é€‰â€ä¸­å–å¾—äº†ç¬¬ä¸‰åï¼ˆJava ç±»ç¬¬ä¸€åï¼‰çš„å¥½æˆç»©ï¼Œæ„Ÿè°¢å¼€å‘è€…ä»¬å¯¹ Dubbo çš„ä¿¡ä»»ï¼Œä¹Ÿæ„Ÿè°¢å¼€æºä¸­å›½å‘èµ·çš„è¿™é¡¹æ´»åŠ¨ã€‚</p><p>è‡ªé‡å¯ç»´æŠ¤ä»¥æ¥ï¼Œåˆ° 2.7.0 å‘å¸ƒï¼ŒDubbo å·²ç»ç´¯è®¡å‘å¸ƒäº† 13 ä¸ªç‰ˆæœ¬ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä»é›¶å¼€å§‹æ­å»º Dubbo EcoSystemï¼Œç›®å‰ç”Ÿæ€åˆå…·è§„æ¨¡ï¼š</p><p>é€æ­¥æä¾›äº† Nodeã€Pythonã€Go å’Œ PHP è¯­è¨€å®¢æˆ·ç«¯å®ç°ã€å¼€å‘å·¥å…·åŠé…å¥—(Initializrã€Benchmarkã€IDE plugin) ä¸ samplesï¼›</p><p>ä¸°å¯Œäº†æ ¸å¿ƒ SPI çš„æ‰©å±•å®ç°ï¼ŒåŒ…æ‹¬ Hessianã€Avroã€Protobufã€HTTP/2ã€Thriftã€JMSã€etcd3ã€Sentinelã€Nacosã€Apolloã€K8S ä¸ Dockerï¼›</p><p>æ”¹é€ å¹¶é‡æ–°å®ç°äº† Dubbo Opsï¼›</p><p>å­µåŒ–äº† 27 ä¸ªå­é¡¹ç›®ï¼›</p><p>åŒæ—¶ï¼Œä¸å°‘å¾®æœåŠ¡å¼€æºé¡¹ç›®å¼€å§‹ä¸»åŠ¨å¯¹æ¥ Dubboï¼ŒåŒ…æ‹¬ Zipkinã€spring-cloud-sluethã€SkyWalkingã€Pinpoint å’Œ Jboot ç­‰ã€‚</p><p>ç¤¾åŒºæ–¹é¢ï¼ŒGitHub ä¸Š star æ•°å·²ç»çªç ´ 2.3wï¼Œå¢é•¿ 150%ï¼Œåœ¨ GitHub Java é¡¹ç›®ä¸­æ’åå‰åï¼Œç›®å‰å·²æœ‰ 25 ä½ PPMC å’Œ committerã€162 ä½ contributor (è‡ªé‡å¯å¼€æºä»¥æ¥å¢é•¿äº† 250%ï¼‰ï¼Œå…±ä¸¾åŠäº† 5 åœº meetupï¼Œç°åœºå‚ä¸äººæ•° 2300+ï¼Œçº¿ä¸Šå‚ä¸äººæ•° 35000+ã€‚</p><p>ä¸‹è¾¹ star çš„å¢é•¿æ•°æ®å¯ä»¥å¤§è‡´çœ‹å‡º Dubbo çš„æˆé•¿ï¼š<br><a href="https://i.imgur.com/yLLZDDa.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/yLLZDDa.png" class="lazyload" title></a></p><p>ç›®å‰ Dubbo æ­£åœ¨ Apache è½¯ä»¶åŸºé‡‘ä¼šè¿›è¡Œå­µåŒ–ï¼Œé¢„è®¡åœ¨æœªæ¥çš„å‡ ä¸ªæœˆå°†æ¯•ä¸šæˆä¸ºé¡¶çº§é¡¹ç›®ã€‚</p><p>å½“ç„¶ï¼Œè¿™äº›å¹¶ä¸æ˜¯ç‚«è€€ Dubbo é‡å¯å¼€æºåæ‰€å–å¾—çš„æˆç»©ï¼Œè€Œæ˜¯è¯´åœ¨ç¤¾åŒºçš„å…±åŒåŠªåŠ›ä¸‹ï¼ŒDubbo æ­£å‘æŒ¥ç€å…¶æ›´å¤§çš„æŠ€æœ¯ä»·å€¼ï¼Œè®©æˆåƒä¸Šä¸‡çš„å¼€å‘è€…æ”¶ç›Šï¼Œè¿™ä¹Ÿæ˜¯ Dubbo å›¢é˜Ÿæˆå°±æ„Ÿçš„æœ€å¤§æ¥æºã€‚</p><p>æˆ‘ä»¬é™¤äº†æ„Ÿæ¿€ç¤¾åŒºçš„ä¿¡èµ–ä¹‹å¤–ï¼Œå¿ƒä¸­ä¹Ÿå……æ»¡äº†æ•¬ç•ã€‚å› ä¸º Dubbo åœ¨å›½å†…çš„ç”¨æˆ·ä¹‹å¤šï¼Œå·²è¿œè¶…æˆ‘ä»¬çš„æƒ³è±¡ã€‚åœ¨â€œè°åœ¨ä½¿ç”¨ Dubboâ€çš„è°ƒç ”ä¸­ï¼Œç›®å‰å·²æœ‰ 124 åç”¨æˆ·æä¾›äº†è‡ªå·±çš„ä½¿ç”¨åœºæ™¯ï¼Œå…¶ä¸­ä¸ä¹è‘—åçš„äº’è”ç½‘å…¬å¸å’Œå¤§å‹å›½ä¼ã€‚æˆ‘ä»¬ç›¸ä¿¡è¿™é‡Œæ”¶é›†çš„åªæ˜¯å›½å†…ç”¨æˆ·ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œåªæœ‰æ›´åŠ åŠªåŠ›ï¼Œä¸æ–­è®© Dubbo å˜å¾—æ›´å¥½ï¼Œæ‰èƒ½ä¸è¾œè´Ÿä½¿ç”¨è€…å¯¹ Dubbo çš„ä¿¡èµ–ã€‚</p><p>è°åœ¨ä½¿ç”¨ Dubboï¼š</p><p><a href="https://github.com/apache/incubator-dubbo/issues/1012" target="_blank" rel="noopener">https://github.com/apache/incubator-dubbo/issues/1012</a></p><p>è¿‡å»è¿™ä¸€å¹´ï¼Œå›¢é˜Ÿçš„ç›®æ ‡æ˜¯é‡æ–°æ¿€æ´»ç¤¾åŒºå’Œç”Ÿæ€ã€‚é€šè¿‡çº¿ä¸‹å¼€å‘è€…æ²™é¾™ã€å¼€å‘è€…è®¿è°ˆã€ç¤¾åŒºçš„ issuesã€pull request ä»¥åŠé‚®ä»¶ç»„çš„äº’åŠ¨ç­‰æ–¹å¼æ¥å€¾å¬ç¤¾åŒºçš„å£°éŸ³ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬æŠŠ Dubbo æçŒ®ç»™ Apache è¿›è¡Œå­µåŒ–ï¼Œç§¯æå‘å±•å¤–éƒ¨çš„ committer å’Œ PPMC memberï¼Œä¸¥æ ¼æŒ‰ç…§ Apache ä¹‹é“æ¥è¿ä½œã€‚é€šè¿‡è¿™äº›åŠªåŠ›ï¼Œé‡æ–°èµ¢å¾—äº†ç¤¾åŒºçš„ä¿¡ä»»ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šæ›´åŠ å…³æ³¨æ ¸å¿ƒèƒ½åŠ›çš„æ¼”è¿›ï¼Œ2.7.0 ç‰ˆæœ¬æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚è¿™ä¸ªç‰ˆæœ¬å‡†å¤‡äº†ä¸å¾®æœåŠ¡åŠäº‘åŸç”Ÿç¯å¢ƒä¸­åŸºç¡€è®¾æ–½å¯¹æ¥çš„æŠ€æœ¯åŸºç¡€ï¼Œæœªæ¥ï¼ŒDubbo å°†ä¼šæä¾›å¯¹åº”çš„é€‚é…ï¼Œä½¿å¾— Dubbo å¯ä»¥æ›´å¥½åœ°èå…¥åˆ°å¾®æœåŠ¡å’Œäº‘åŸç”Ÿä½“ç³»ä¸­å»ã€‚</p><p>è¿™é‡Œä¹Ÿé¡ºä¾¿é¢„å‘Šä¸€ä¸‹ï¼Œè¿‘æœŸæˆ‘ä»¬ 2019 å¹´çš„ç¬¬ä¸€åœº meetup ä¹Ÿå¿«æ¥äº†ï¼Œæ¬¢è¿å…³æ³¨ï¼š</p><p><a href="http://t.cn/Ebyekd6ã€‚" target="_blank" rel="noopener">http://t.cn/Ebyekd6ã€‚</a></p><h3 id="å¼€æºä¸­å›½ï¼š-3"><a href="#å¼€æºä¸­å›½ï¼š-3" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>å»å¹´å¹´åˆé€éœ²çš„ 3.0 ç›®å‰æ˜¯ä¸ªä»€ä¹ˆæƒ…å†µï¼Ÿå½“åˆç”šè‡³è¯´ 3.0 å»ä¸€åˆ‡é˜»å¡çš„å˜åŒ–å°†å½±å“åˆ°é˜¿é‡Œ 10 å¹´æ¥ç§¯ç´¯çš„ä¸­é—´ä»¶ï¼Œé‚£ç°åœ¨å…·ä½“æƒ…å†µå¦‚ä½•ï¼Ÿï¼ˆ2.7 ä¸­æåˆ°çš„å®ç°å…¨å¼‚æ­¥ç¼–ç¨‹è·Ÿè¿™ä¸ªå»é˜»å¡æœ‰ä»€ä¹ˆä¸åŒï¼Ÿï¼‰å¦ä¸€æ–¹é¢ï¼Œ3.0 ä¸­çš„ Service Mesh å»ºè®¾ç°åœ¨å¦‚ä½•äº†ï¼Ÿå…¶å®ƒæ–¹é¢å‘¢ï¼Ÿ</p><h3 id="åŒ—çº¬ï¼š-3"><a href="#åŒ—çº¬ï¼š-3" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>è¿‡å»ä¸€å¹´å¤šå·¥ä½œçš„é‡å¿ƒæ˜¯æ¿€æ´»ç¤¾åŒºå’Œç”Ÿæ€ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å¼€å§‹æŠŠå·¥ä½œçš„é‡å¿ƒé€æ­¥è½¬å‘æ ¸å¿ƒå»ºè®¾ï¼Œç›®æ ‡å°±æ˜¯æä¾›ç°ä»£åŒ–çš„æŠ€æœ¯æ ¸å¿ƒï¼Œè§£å†³å¥½å¾®æœåŠ¡ã€å®¹å™¨åŒ–ä¸äº‘åŸç”Ÿç­‰é—®é¢˜ã€‚å·²ç»å‘å¸ƒçš„ 2.7.0 æ˜¯ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œ3.0 åŒæ­¥è¿›å…¥å¼€å‘é˜¶æ®µã€‚</p><p>è¿™é‡Œè¦æŒ‡å‡ºçš„æ˜¯ï¼Œ3.0 ä¸­è§„åˆ’çš„å»é˜»å¡å’Œ 2.7 ä¸­æä¾›çš„å¼‚æ­¥æ˜¯ä¸¤ä¸ªå±‚é¢çš„ç‰¹æ€§ã€‚2.7 ä¸­çš„å¼‚æ­¥æ˜¯å»ºç«‹åœ¨ä¼ ç»Ÿ RPC ä¸­ request â€“ response ä¼šè¯æ¨¡å‹ä¸Šçš„ï¼Œè€Œ 3.0 ä¸­çš„å¼‚æ­¥å°†ä¼šä»é€šè®¯åè®®å±‚é¢ç”±ä¸‹å‘ä¸Šæ„å»ºï¼Œå…³æ³¨çš„æ˜¯è·¨è¿›ç¨‹ã€å…¨é“¾è·¯çš„å¼‚æ­¥é—®é¢˜ã€‚</p><p>é€šè¿‡åº•å±‚åè®®å¼€å§‹æ”¯æŒ streaming æ–¹å¼ï¼Œä¸å•å•å¯ä»¥æ”¯æŒå¤šç§ä¼šè¯æ¨¡å‹ï¼Œè¿˜å¯ä»¥åœ¨åè®®å±‚é¢å¼€å§‹æ”¯æŒåå‹ã€é™æµç­‰ç‰¹æ€§ï¼Œä½¿å¾—æ•´ä¸ªåˆ†å¸ƒå¼ä½“ç³»æ›´å…·æœ‰å¼¹æ€§ã€‚æ‰€ä»¥ï¼Œ2.7 å…³æ³¨çš„å¼‚æ­¥æ›´å±€é™åœ¨ç‚¹å¯¹ç‚¹çš„å¼‚æ­¥ï¼ˆä¸€ä¸ª consumer è°ƒç”¨ä¸€ä¸ª providerï¼‰ï¼Œè€Œ 3.0 å…³æ³¨çš„å¼‚æ­¥åŒ–ï¼Œå®½åº¦ä¸Šåˆ™å…³æ³¨æ•´ä¸ªè°ƒç”¨é“¾ä¸Šçš„å¼‚æ­¥ï¼Œé«˜åº¦ä¸Šåˆ™å‘ä¸Šåˆå¯ä»¥åŒ…è£…æˆ Rx çš„ç¼–ç¨‹æ¨¡å‹ã€‚</p><p>æœ‰è¶£çš„æ˜¯ï¼ŒSpring 5.0 å‘å¸ƒäº†å¯¹ Flux çš„æ”¯æŒï¼Œéšåå¼€å§‹è§£å†³è·¨è¿›ç¨‹çš„å¼‚æ­¥é—®é¢˜ï¼Œæœ‰å…´è¶£çš„å¼€å‘è€…å¯ä»¥å…³æ³¨ä¸€ä¸‹ç›®å‰ RSocket çš„å‘å±•æƒ…å†µã€‚</p><p>3.0 ä¸­å—åˆ°å…³æ³¨çš„è¿˜æœ‰ Dubbo Mesh çš„å‘å±•ã€‚æˆ‘ä»¬å¸Œæœ› Dubbo Mesh æœªæ¥å¯ä»¥è¿›å…¥ Envoy ç¤¾åŒºï¼Œç›®å‰ Dubbo åè®®å·²ç»è¢« Envoy æ”¯æŒã€‚å½“ç„¶ï¼ŒDubbo Mesh ç¦»çœŸæ­£å¯ç”¨è¿˜æœ‰å¾ˆé•¿ä¸€æ®µè·ç¦»ï¼Œå…¶åœ¨é€‰å€ã€è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡æ²»ç†æ–¹é¢çš„å·¥ä½œéœ€è¦ç»§ç»­åœ¨æ•°æ®é¢å»ºè®¾ï¼Œå¦å¤–ï¼Œæ§åˆ¶é¢æ¿çš„å»ºè®¾åœ¨ç¤¾åŒºä¹Ÿæ²¡æœ‰æä¸Šæ—¥ç¨‹ã€‚</p><p>æœ€åå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒDubbo 3.0 å®šä¸‹äº†å†…å¤–èåˆçš„ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´ 3.0 çš„æ ¸å¿ƒæœ€ç»ˆä¼šåœ¨é˜¿é‡Œå·´å·´çš„ç”Ÿäº§ç³»ç»Ÿä¸­éƒ¨ç½²ï¼Œç›¸ä¿¡é€šè¿‡å¤§æµé‡ã€å¤§è§„æ¨¡çš„è€ƒéªŒï¼ŒDubbo ç”¨æˆ·å¯ä»¥è·å¾—ä¸€ä¸ªæ€§èƒ½ã€ç¨³å®šã€æœåŠ¡æ²»ç†å®è·µå„æ–¹é¢ä¿±ä½³çš„æ ¸å¿ƒï¼Œç”¨æˆ·åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­é‡‡ç”¨ 3.0 ä¹Ÿä¼šæ›´åŠ æ”¾å¿ƒã€‚</p><h3 id="å¼€æºä¸­å›½ï¼š-4"><a href="#å¼€æºä¸­å›½ï¼š-4" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>æ¥ä¸‹æ¥ Dubbo å°†ä¼šä» Apache å­µåŒ–å™¨æ¯•ä¸šï¼Œé™¤äº†æœ‰ä¸ªåèª‰ï¼Œå…·ä½“å¯¹é¡¹ç›®ä¹‹åçš„ç»´æŠ¤ã€å‘å±•æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</p><h3 id="åŒ—çº¬ï¼š-4"><a href="#åŒ—çº¬ï¼š-4" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>Apache å­µåŒ–å™¨ä¸»å¸­ Justin Mclean æ¯æ¬¡æ¥ä¸­å›½éƒ½ä¼šåˆ†äº«ä»€ä¹ˆæ˜¯â€œApache ä¹‹é“â€ï¼Œå®ƒæå€¡å…¬ç›Šä½¿å‘½ã€å®ç”¨ä¸»ä¹‰ã€ç¤¾åŒºèƒœäºä»£ç ã€å…¬å¼€é€æ˜ä¸å…±è¯†æ”¿ç­–å’Œä»»äººå”¯è´¤ï¼Œå…·ä½“å¯ä»¥å‚ç…§è¿™ç¯‡ Apache å­µåŒ–å™¨ä¸»å¸­ Justin Mclean çš„åˆ†äº«ï¼š</p><p><a href="https://mp.weixin.qq.com/s/ULea2-uDEG5HRbRewuZjIg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/ULea2-uDEG5HRbRewuZjIg</a></p><p>Dubbo è¿›å…¥ Apache è¿›è¡Œå­µåŒ–ï¼Œç›®çš„å°±æ˜¯éµå¾ª Apache ä¹‹é“æ¥è§„èŒƒåŒ–åœ°å‘å±• Dubboã€‚åŒæ—¶ï¼Œé€šè¿‡å­µåŒ–ï¼ŒDubbo å›¢é˜Ÿçš„æ‰€æœ‰æˆå‘˜ï¼Œå¯¹äºå¦‚ä½•è¿è¥å¥½ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå»ºè®¾å¥½ä¸€ä¸ªå¼€æºç¤¾åŒºæœ‰äº†æ›´æ·±çš„ä½“éªŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­µåŒ–è¿‡ç¨‹å°±æ˜¯ Dubbo å›¢é˜Ÿè‡ªæˆ‘å­¦ä¹ å’Œè¿›é˜¶çš„è¿‡ç¨‹ã€‚</p><p>ä»å­µåŒ–å™¨æ¯•ä¸šæ˜¯ä¸€ç§è£èª‰ï¼Œä½†è¿™å¹¶ä¸æ˜¯ç»“æŸï¼Œè€Œæ˜¯å¦ä¸€ç§å¼€å§‹ã€‚è¿™æœ‰ç‚¹åƒæ±‚å­¦ï¼Œæ¯•ä¸šå¹¶ä¸æ„å‘³ç€å­¦ä¹ ä¸Šçš„ä¸­æ–­ï¼Œè€Œæ˜¯å‘æŒ¥æ›´å¤§ç¤¾ä¼šä»·å€¼çš„å¼€å§‹ã€‚æ¯•ä¸šä¹Ÿæ›´åƒæ˜¯ä¸€ä¸ªæˆäººç¤¼ï¼Œæ„å‘³ç€ Dubbo å›¢é˜Ÿå·²ç»ç¬¦åˆ Apache å¯¹ä¸€ä¸ªæˆç†Ÿå¼€æºé¡¹ç›®çš„è¦æ±‚ï¼Œå¹¶å¼€å§‹å…·å¤‡ç‹¬ç«‹å‘å±•çš„èƒ½åŠ›ã€‚</p><p>Dubbo è‡ªä»åŠ å…¥ Apache çš„é‚£ä¸€å¤©èµ·ï¼Œå°±ä¸å†å±äºé˜¿é‡Œå·´å·´ã€‚Dubbo å˜å¾—æ›´å¥½ï¼Œæ˜¯å› ä¸ºå·²ç»æœ‰è¶Šæ¥è¶Šå¤šæ¥è‡ªç¤¾åŒºçš„å¼€å‘è€…å‚ä¸åˆ° Dubbo çš„å…±å»ºä¸­ã€‚ä¾‹å¦‚ï¼ŒDubbo ç›®å‰çš„ 162 ä½ contributor ä¸­ï¼Œæœ‰æ¥è¿‘ 90% éƒ½æ˜¯æ¥è‡ªéé˜¿é‡Œå·´å·´çš„å¼€å‘è€…ï¼Œè¿™ä¸ªæ¯”ä¾‹åœ¨æœªæ¥åº”è¯¥ä¼šæ›´é«˜ã€‚</p><h3 id="å¼€æºä¸­å›½ï¼š-5"><a href="#å¼€æºä¸­å›½ï¼š-5" class="headerlink" title="å¼€æºä¸­å›½ï¼š"></a>å¼€æºä¸­å›½ï¼š</h3><p>æœ€è¿‘ Netflix å®˜æ–¹è¡¨ç¤ºä¸å†ç»§ç»­å¼€å‘ Hystrixï¼Œç”¨æˆ·è¢«è¿«è¿ç§»ï¼Œå‰ä¸€é˜µå­ Netflix ä¹ŸåŒæ ·å®£å¸ƒäº† Eureka 2.0 ä¸å†ç»´æŠ¤ã€‚è€Œå®é™…ä¸Šï¼ŒSpring å®˜æ–¹è¿‘æœŸä¹Ÿè¡¨æ˜ Netflix ç›¸å…³é¡¹ç›®è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼ˆMaintenance Modeï¼‰ï¼Œå³ Spring Cloud å›¢é˜Ÿä¸ä¼šå†å‘ Netflix æ¨¡å—æ·»åŠ æ–°åŠŸèƒ½ã€‚è¿™è®©å¼€å‘è€…å¯¹ Netflix äº§ç”Ÿè´¨ç–‘ï¼Œæœ‰äº›äººè§‰å¾— Spring Cloud ä¸­çš„ Netflix ç»„ä»¶å®ç°å†ç”¨ä¸‹å»ä¼šä¸ä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Œä¸å°‘å¼€å‘è€…è¡¨ç¤ºè¦å¦å¯»é«˜æ˜ã€‚è€Œæ­¤æ—¶é˜¿é‡Œæ­£åœ¨å»ºè®¾çš„ Dubbo EcoSystem ä¸å¼€æºä¸ä¹…çš„ Spring Cloud Alibaba æ­£å¥½è¿›å…¥å¤§å®¶çš„è§†é‡ã€‚ä½†æ˜¯å¼€å‘è€…ä¹Ÿåœ¨è§‚æœ›ï¼Œä¸çŸ¥é“ Dubbo EcoSystem ä¸ Spring Cloud Alibaba æ˜¯å¦å¯ä»¥åŠæ—¶åœ°æ¥è¿‡å¤§æ——ã€‚</p><h3 id="åŒ—çº¬ï¼š-5"><a href="#åŒ—çº¬ï¼š-5" class="headerlink" title="åŒ—çº¬ï¼š"></a>åŒ—çº¬ï¼š</h3><p>æ­£å¦‚å¤§å®¶æ‰€çœ‹åˆ°çš„ï¼Œä»Šå¹´å‘ç”Ÿåœ¨ Netflix ä¸Šçš„äº‹æƒ…ï¼Œå¯¹ Spring ç”Ÿæ€äº§ç”Ÿäº†ä¸å°çš„å½±å“ï¼Œä½†ä½œä¸ºå¼€å‘è€…æˆ‘ä»¬åº”è¯¥æ„Ÿè°¢ Netflix åœ¨è¿‡å»ä»¥åŠç°åœ¨æ­£åœ¨åšçš„å¯¹å¼€æºçš„è´¡çŒ®ã€‚</p><p>åšå¼€æºçš„æŠ€æœ¯äººéƒ½æœ‰ä¸€ç§æŠ€æœ¯æƒ…æ€€ï¼Œä½†ä»…å‡­æƒ…æ€€ï¼Œå¾ˆéš¾å°†å¼€æºåšæŒä¸‹å»ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦å›å½’åˆ°æŠ€æœ¯å’Œå•†ä¸šçš„æœ¬è´¨å…³ç³»ï¼Œå³æŠ€æœ¯å¯ä»¥æ¨åŠ¨å•†ä¸šå‘å±•ï¼Œä½†ä¹Ÿéœ€è¦å•†ä¸šæ¥èµ‹èƒ½æŠ€æœ¯å‰è¡Œã€‚å¦‚æœä¸€å®¶ä¼ä¸šçš„æˆ˜ç•¥ä¸»èˆªé“ä¸Šï¼ŒæŠ€æœ¯å¹¶ä¸æ˜¯å…¶å‘å±•æ–¹å‘ä¹‹ä¸€ï¼Œé‚£ä¹ˆå…¶å¼€æºé¡¹ç›®è¦ç»´æŒä¸‹å»çš„éš¾åº¦å°±å¾ˆå¤§ã€‚å› æ­¤ï¼Œåœ¨å¼€æºé¢†åŸŸï¼Œæˆ‘æ›´çœ‹å¥½æŠ€æœ¯æœåŠ¡å‹çš„ä¼ä¸šï¼Œå³å¯¹å¤–è¾“å‡ºæŠ€æœ¯å’Œç›¸å…³æœåŠ¡æ˜¯ä¼ä¸šçš„ä¸»è¥ä¸šåŠ¡ä¹‹ä¸€ã€‚</p><p>é˜¿é‡Œå·´å·´åœ¨æœåŠ¡åŒ–æ”¹é€ å’Œå¾®æœåŠ¡é¢†åŸŸå®è·µå¤šå¹´ï¼Œå‡ ä¹æ¶µç›–äº†å¾®æœåŠ¡æŠ€æœ¯æ ˆçš„æ‰€æœ‰äº§å“å’Œç»„ä»¶ï¼Œä¾‹å¦‚ Spring Cloud Alibaba æ»¡è¶³äº†åœ¨ Spring Cloud ä½“ç³»ä¸­ä½¿ç”¨é˜¿é‡Œå·´å·´æŠ€æœ¯æ ˆçš„éœ€æ±‚ï¼ŒNacos æä¾›äº†æ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒæ–¹é¢çš„åŠŸèƒ½ï¼ŒSentinel åˆ™è§£å†³äº†å› é«˜æµé‡ç­‰è®¿é—®è¡Œä¸ºå¸¦æ¥çš„æ¶æ„å¯é æ€§çš„é—®é¢˜ã€‚å¦å¤–ï¼Œä½œä¸ºå·²ç»æˆä¸º Apache é¡¶çº§é¡¹ç›®çš„ RocketMQï¼Œè¿‘æœŸå‘å¸ƒçš„é¦–ä¸ªç¤¾åŒºå­é¡¹ç›® RocketMQ-Spring-Bootï¼Œå®ç°äº† Spring ä½“ç³»ä¸­é€šè¿‡ RocketMQ è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡çš„å›æŸ¥å’Œäº‹åŠ¡æ¶ˆæ¯çš„å‘é€ã€‚</p><p>å…¶å®ï¼Œåœ¨å¾®æœåŠ¡å¼€å‘çš„é¢†åŸŸï¼Œé™¤äº† RPC å’ŒæœåŠ¡æ³¨å†Œå‘ç°ï¼Œå¼€å‘è€…è¿˜éœ€è¦æ›´å¤šçš„èƒ½åŠ›ï¼Œä¾‹å¦‚ API ç½‘å…³ã€åˆ†å¸ƒå¼ç›‘æ§å’Œåˆ†å¸ƒå¼äº‹åŠ¡ç­‰ï¼Œåœ¨è¿™äº›æ–¹é¢ç”±äºæ²¡æœ‰äº‹å®ä¸Šæ¨èçš„æ–¹æ¡ˆï¼Œå¼€å‘è€…åœ¨è°ƒç ”å’Œé€‰å‹çš„è¿‡ç¨‹é€šå¸¸éƒ½æ¯”è¾ƒç—›è‹¦ï¼Œç”šè‡³ä¼šé‡åˆ°ä¸ªåˆ«å¼€æºé¡¹ç›®ä¸å†ç»§ç»­ç»´æŠ¤çš„çª˜å¢ƒã€‚</p><p>å¦‚ä½•é€šè¿‡ Dubbo æŠŠè¿™äº›å¾®æœåŠ¡é¢†åŸŸçš„å…¶å®ƒèƒ½åŠ›æ•´åˆèµ·æ¥ï¼Œå½¢æˆä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæˆä¸ºä¸€ä¸ªäºŸå¾…è§£å†³çš„é—®é¢˜ã€‚</p><p>åƒå‰è¾¹æåˆ°çš„ï¼Œæˆ‘ä»¬è®¡åˆ’å¹¶å·²ç»ç€æ‰‹å›´ç»• Dubbo æ‰“é€ ä¸€ä¸ªå¾®æœåŠ¡ç”Ÿæ€ï¼Œå®ƒåŒ…å«ä¸€ç³»åˆ—å¼€æºé¡¹ç›®ï¼Œæ¶µç›–å¾®æœåŠ¡å¼€å‘ä¸­çš„å„ä¸ªæ–¹é¢ã€‚è¿™é‡Œé¢çš„é¡¹ç›®éƒ½æ˜¯ç»è¿‡ Dubbo ç¤¾åŒºå…±åŒè¯„ä¼°è¿‡ï¼Œå’Œ Dubbo è¿›è¡Œäº†é«˜åº¦é›†æˆçš„ï¼Œåœ¨ç”Ÿäº§ä¸­å¾—åˆ°è¿‡éªŒè¯çš„é¡¹ç›®ï¼Œä¸”å…·æœ‰å…¼å®¹æ€§ä¿éšœã€‚è¿™äº›é¡¹ç›®ä¸ä»…æ¥è‡ªé˜¿é‡Œå·´å·´è‡ªå·±çš„å¼€æºé¡¹ç›®ï¼Œä¹Ÿæ¥è‡ªå…¶å®ƒå…¬å¸æˆ–ç¤¾åŒºã€‚æˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸º Apache Dubbo EcoSystemï¼Œå¸Œæœ›é€šè¿‡è¿™ä¸ªç”Ÿæ€å¸®åŠ©ä½¿ç”¨è€…æ›´è½»æ¾ã€æ›´å¿«é€Ÿåœ°æ­å»ºå¾®æœåŠ¡ã€‚</p><blockquote><p>æœ¬æ–‡æ¥æºï¼š<a href="http://www.oschina.net/question/3820517_2302528" target="_blank" rel="noopener">www.oschina.net/question/3820517_2302528</a></p></blockquote></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Anima æ˜¯ä¸€æ¬¾ç‰›é€¼çš„æ•°æ®åº“æ¡†æ¶</title>
      <link href="/2019/01/23/Anima%20%E6%98%AF%E4%B8%80%E6%AC%BE%E7%89%9B%E9%80%BC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A1%86%E6%9E%B6/"/>
      <url>/2019/01/23/Anima%20%E6%98%AF%E4%B8%80%E6%AC%BE%E7%89%9B%E9%80%BC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-anima"><a href="#spring-boot-anima" class="headerlink" title="spring-boot-anima"></a>spring-boot-anima</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>Anima æ˜¯ä¸€æ¬¾æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ï¼Œå®ƒæ”¯æŒMySQLã€SQLiteã€H2ã€Oracleã€SqlServerç­‰æ•°æ®åº“ï¼Œéå¸¸æ–¹ä¾¿çš„å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚</p><p><a href="https://github.com/biezhi/anima/wiki/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" target="_blank" rel="noopener">å¿«é€Ÿå…¥é—¨</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E5%88%9B%E5%BB%BA-Model" target="_blank" rel="noopener">åˆ›å»º Model</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE" target="_blank" rel="noopener">æŸ¥è¯¢æ•°æ®</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE" target="_blank" rel="noopener">ä¿å­˜æ•°æ®</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4" target="_blank" rel="noopener">æ›´æ–°å’Œåˆ é™¤</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C" target="_blank" rel="noopener">äº‹åŠ¡æ“ä½œ</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E5%9C%A8-Spring-%E6%A1%86%E6%9E%B6%E4%B8%AD%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">åœ¨ Spring æ¡†æ¶ä¸­ä½¿ç”¨</a></p><p><a href="https://github.com/biezhi/anima/wiki/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" target="_blank" rel="noopener">é«˜çº§ç”¨æ³•</a></p><p>æœ¬ä¾‹ç¨‹æ˜¯åœ¨spring bootçš„åŸºç¡€ä¸Šé›†æˆAnimaæ“ä½œMySQLæ•°æ®åº“ï¼Œä»£ç è¿›è¡Œäº†ç®€å•çš„CRUDæ“ä½œï¼š</p><p>æ¥å£ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-11-27 14:40:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IBaiKeService</span> </span>{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Baike <span class="title">selectById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡è‡ªå®šä¹‰sqlæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List<baike> <span class="title">selectListBySQL</span><span class="params">()</span></baike></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List<baike> <span class="title">selectListAll</span><span class="params">()</span></baike></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®æ¡ä»¶æŸ¥è¯¢ï¼Œç‚¹èµæ•°å¤§äºç­‰äº goodçš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> good ç‚¹èµæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List<baike> <span class="title">selectListByGood</span><span class="params">(<span class="keyword">int</span> good)</span></baike></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> baike ç™¾ç§‘æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">save</span><span class="params">(Baike baike)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡ä¿å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> baikes ç™¾ç§‘æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveBatch</span><span class="params">(List<baike> baikes)</baike></span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> baike ç™¾ç§‘æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(Baike baike)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idåˆ é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å®ç°ç±»ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-11-27 14:40:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IBaiKeServiceImpl</span> <span class="keyword">implements</span> <span class="title">IBaiKeService</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Baike <span class="title">selectById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> select().from(Baike<span class="class">.<span class="keyword">class</span>).<span class="title">byId</span>(<span class="title">id</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">save</span><span class="params">(Baike baike)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> baike.save().asInt();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveBatch</span><span class="params">(List<baike> baikes)</baike></span> </span>{</span><br><span class="line">        Anima.saveBatch(baikes);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Baike baike)</span> </span>{</span><br><span class="line">        baike.update();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>{</span><br><span class="line">        Anima.deleteById(Baike<span class="class">.<span class="keyword">class</span>, <span class="title">id</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List<baike> <span class="title">selectListBySQL</span><span class="params">()</span> </baike></span>{</span><br><span class="line">        return select().bySQL(Baike.class, "select * from baike limit ?", 3).all();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List<baike> <span class="title">selectListAll</span><span class="params">()</span> </baike></span>{</span><br><span class="line">        <span class="keyword">return</span> select().from(Baike<span class="class">.<span class="keyword">class</span>).<span class="title">all</span>()</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List<baike> <span class="title">selectListByGood</span><span class="params">(<span class="keyword">int</span> good)</span> </baike></span>{</span><br><span class="line">        return select().from(Baike.class).gte("age", good).all();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å…·ä½“è¯·çœ‹æµ‹è¯•ç”¨ä¾‹ã€‚</p><p>GitHubåœ°å€ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-anima" target="_blank" rel="noopener">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-anima</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="https://www.hwy.ac.cn" target="_blank" rel="noopener">https://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> ORM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Anima </tag>
            
            <tag> ORM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java8ä¸­çš„Streamï¼Œä¸€è¡Œä»£ç ï¼Œè®©é›†åˆæ“ä½œé£èµ·æ¥ï¼</title>
      <link href="/2019/01/13/Java8%E4%B8%AD%E7%9A%84Stream%EF%BC%8C%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%AE%A9%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C%E9%A3%9E%E8%B5%B7%E6%9D%A5%EF%BC%81/"/>
      <url>/2019/01/13/Java8%E4%B8%AD%E7%9A%84Stream%EF%BC%8C%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%AE%A9%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C%E9%A3%9E%E8%B5%B7%E6%9D%A5%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>java8ä¹Ÿå‡ºæ¥å¥½ä¹…äº†ï¼Œæ¥å£é»˜è®¤æ–¹æ³•ï¼Œlambdaè¡¨è¾¾å¼ï¼Œå‡½æ•°å¼æ¥å£ï¼ŒDate APIç­‰ç‰¹æ€§è¿˜æ˜¯æœ‰å¿…è¦å»äº†è§£ä¸€ä¸‹ã€‚æ¯”å¦‚åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°é›†åˆï¼Œéå†é›†åˆå¯ä»¥è¯•ä¸‹lambdaè¡¨è¾¾å¼ï¼Œç»å¸¸è¿˜è¦å¯¹é›†åˆè¿›è¡Œè¿‡æ»¤å’Œæ’åºï¼ŒStreamå°±æ´¾ä¸Šç”¨åœºäº†ã€‚ç”¨ä¹ æƒ¯äº†ï¼Œä¸å¾—ä¸è¯´çœŸçš„å¾ˆå¥½ç”¨ã€‚</p><p>Streamä½œä¸ºjava8çš„æ–°ç‰¹æ€§ï¼ŒåŸºäºlambdaè¡¨è¾¾å¼ï¼Œæ˜¯å¯¹é›†åˆå¯¹è±¡åŠŸèƒ½çš„å¢å¼ºï¼Œå®ƒä¸“æ³¨äºå¯¹é›†åˆå¯¹è±¡è¿›è¡Œå„ç§é«˜æ•ˆã€ä¾¿åˆ©çš„èšåˆæ“ä½œæˆ–è€…å¤§æ‰¹é‡çš„æ•°æ®æ“ä½œï¼Œæé«˜äº†ç¼–ç¨‹æ•ˆç‡å’Œä»£ç å¯è¯»æ€§ã€‚</p><p>Streamçš„åŸç†ï¼šå°†è¦å¤„ç†çš„å…ƒç´ çœ‹åšä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç®¡é“çš„èŠ‚ç‚¹ä¸Šå¤„ç†ï¼ŒåŒ…æ‹¬è¿‡æ»¤ç­›é€‰ã€å»é‡ã€æ’åºã€èšåˆç­‰ã€‚å…ƒç´ æµåœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œçš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œå¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚</p><p>é›†åˆæœ‰ä¸¤ç§æ–¹å¼ç”Ÿæˆæµï¼š</p><ul><li>stream() âˆ’ ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµ</li><li>parallelStream() - ä¸ºé›†åˆåˆ›å»ºå¹¶è¡Œæµ</li></ul><p><a href="00A4764C88EB41819AAB9C696DCAF249" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="00A4764C88EB41819AAB9C696DCAF249" class="lazyload" title="image"></a></p><p>ä¸Šå›¾ä¸­æ˜¯Streamç±»çš„ç±»ç»“æ„å›¾ï¼Œé‡Œé¢åŒ…å«äº†å¤§éƒ¨åˆ†çš„ä¸­é—´å’Œç»ˆæ­¢æ“ä½œã€‚</p><p>ä¸­é—´æ“ä½œä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ³•ï¼ˆæ­¤ç±»å‹æ–¹æ³•è¿”å›çš„éƒ½æ˜¯Streamï¼‰ï¼šmap (mapToInt, flatMap ç­‰)ã€ filterã€ distinctã€ sortedã€ peekã€ limitã€ skipã€ parallelã€ sequentialã€ unordered</p><p>ç»ˆæ­¢æ“ä½œä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ³•ï¼šforEachã€ forEachOrderedã€ toArrayã€ reduceã€ collectã€ minã€ maxã€ countã€ anyMatchã€ allMatchã€ noneMatchã€ findFirstã€ findAnyã€ iterator</p><h2 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h2><p>é¦–å…ˆä¸ºäº†è¯´æ˜Streamå¯¹å¯¹è±¡é›†åˆçš„æ“ä½œï¼Œæ–°å»ºä¸€ä¸ªStudentç±»ï¼ˆå­¦ç”Ÿç±»ï¼‰,è¦†å†™äº†equals()å’ŒhashCode()æ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>{}</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(Long id, String name, <span class="keyword">int</span> age, String address)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student{"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Student student = (Student) o;</span><br><span class="line">        <span class="keyword">return</span> age == student.age &&</span><br><span class="line">                Objects.equals(id, student.id) &&</span><br><span class="line">                Objects.equals(name, student.name) &&</span><br><span class="line">                Objects.equals(address, student.address);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, name, age, address);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="filterï¼ˆç­›é€‰ï¼‰"><a href="#filterï¼ˆç­›é€‰ï¼‰" class="headerlink" title="filterï¼ˆç­›é€‰ï¼‰"></a>filterï¼ˆç­›é€‰ï¼‰</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>{</span><br><span class="line">    Student s1 = <span class="keyword">new</span> Student(<span class="number">1L</span>, <span class="string">"è‚–æˆ˜"</span>, <span class="number">15</span>, <span class="string">"æµ™æ±Ÿ"</span>);</span><br><span class="line">    Student s2 = <span class="keyword">new</span> Student(<span class="number">2L</span>, <span class="string">"ç‹ä¸€åš"</span>, <span class="number">15</span>, <span class="string">"æ¹–åŒ—"</span>);</span><br><span class="line">    Student s3 = <span class="keyword">new</span> Student(<span class="number">3L</span>, <span class="string">"æ¨ç´«"</span>, <span class="number">17</span>, <span class="string">"åŒ—äº¬"</span>);</span><br><span class="line">    Student s4 = <span class="keyword">new</span> Student(<span class="number">4L</span>, <span class="string">"æç°"</span>, <span class="number">17</span>, <span class="string">"æµ™æ±Ÿ"</span>);</span><br><span class="line">    List<student> students = <span class="keyword">new</span> ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line"></span><br><span class="line">    List<student> streamStudents = testFilter(students);</student></span><br><span class="line">    streamStudents.forEach(System.out::println);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é›†åˆçš„ç­›é€‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> students</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List<student> <span class="title">testFilter</span><span class="params">(List<student> students)</student></span> </student></span>{</span><br><span class="line">    <span class="comment">//ç­›é€‰å¹´é¾„å¤§äº15å²çš„å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">//        return students.stream().filter(s -> s.getAge()>15).collect(Collectors.toList());</span></span><br><span class="line">    <span class="comment">//ç­›é€‰ä½åœ¨æµ™æ±Ÿçœçš„å­¦ç”Ÿ</span></span><br><span class="line">    <span class="keyword">return</span> students.stream().filter(s -><span class="string">"æµ™æ±Ÿ"</span>.equals(s.getAddress())).collect(Collectors.toList());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š<br><a href="064F89CEBBDC4437B44DD3125529A4DA" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="064F89CEBBDC4437B44DD3125529A4DA" class="lazyload" title="image"></a></p><p>è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†å››ä¸ªå­¦ç”Ÿï¼Œç»è¿‡filterçš„ç­›é€‰ï¼Œç­›é€‰å‡ºåœ°å€æ˜¯æµ™æ±Ÿçš„å­¦ç”Ÿé›†åˆã€‚</p><h3 id="map-è½¬æ¢"><a href="#map-è½¬æ¢" class="headerlink" title="map(è½¬æ¢)"></a>map(è½¬æ¢)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>{</span><br><span class="line">    Student s1 = <span class="keyword">new</span> Student(<span class="number">1L</span>, <span class="string">"è‚–æˆ˜"</span>, <span class="number">15</span>, <span class="string">"æµ™æ±Ÿ"</span>);</span><br><span class="line">    Student s2 = <span class="keyword">new</span> Student(<span class="number">2L</span>, <span class="string">"ç‹ä¸€åš"</span>, <span class="number">15</span>, <span class="string">"æ¹–åŒ—"</span>);</span><br><span class="line">    Student s3 = <span class="keyword">new</span> Student(<span class="number">3L</span>, <span class="string">"æ¨ç´«"</span>, <span class="number">17</span>, <span class="string">"åŒ—äº¬"</span>);</span><br><span class="line">    Student s4 = <span class="keyword">new</span> Student(<span class="number">4L</span>, <span class="string">"æç°"</span>, <span class="number">17</span>, <span class="string">"æµ™æ±Ÿ"</span>);</span><br><span class="line">    List<student> students = <span class="keyword">new</span> ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line"></span><br><span class="line">    testMap(students);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é›†åˆè½¬æ¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> students</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testMap</span><span class="params">(List<student> students)</student></span> </span>{</span><br><span class="line">    <span class="comment">//åœ¨åœ°å€å‰é¢åŠ ä¸Šéƒ¨åˆ†ä¿¡æ¯ï¼Œåªè·å–åœ°å€è¾“å‡º</span></span><br><span class="line">    List<string> addresses = students.stream().map(s -><span class="string">"ä½å€:"</span>+s.getAddress()).collect(Collectors.toList());</string></span><br><span class="line">    addresses.forEach(a ->System.out.println(a));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœ</p><p><a href="6D2F8F77F11549D1967417EB622A3D8A" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="6D2F8F77F11549D1967417EB622A3D8A" class="lazyload" title="image"></a></p><p>mapå°±æ˜¯å°†å¯¹åº”çš„å…ƒç´ æŒ‰ç…§ç»™å®šçš„æ–¹æ³•è¿›è¡Œè½¬æ¢ã€‚</p><h3 id="distinct-å»é‡"><a href="#distinct-å»é‡" class="headerlink" title="distinct(å»é‡)"></a>distinct(å»é‡)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">  testDistinct1();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆå»é‡ï¼ˆåŸºæœ¬ç±»å‹ï¼‰</span><br><span class="line"> */</span><br><span class="line">private static void testDistinct1() {</span><br><span class="line">    //ç®€å•å­—ç¬¦ä¸²çš„å»é‡</span><br><span class="line">    List<string> list = Arrays.asList("111","222","333","111","222");</string></span><br><span class="line">    list.stream().distinct().forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š<br><a href="F06DD4734C914CD29A6E1A270DE26D6B" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="F06DD4734C914CD29A6E1A270DE26D6B" class="lazyload" title="image"></a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">  testDistinct2();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆå»é‡ï¼ˆå¼•ç”¨å¯¹è±¡ï¼‰</span><br><span class="line"> */</span><br><span class="line">private static void testDistinct2() {</span><br><span class="line">    //å¼•ç”¨å¯¹è±¡çš„å»é‡ï¼Œå¼•ç”¨å¯¹è±¡è¦å®ç°hashCodeå’Œequalæ–¹æ³•ï¼Œå¦åˆ™å»é‡æ— æ•ˆ</span><br><span class="line">    Student s1 = new Student(1L, "è‚–æˆ˜", 15, "æµ™æ±Ÿ");</span><br><span class="line">    Student s2 = new Student(2L, "ç‹ä¸€åš", 15, "æ¹–åŒ—");</span><br><span class="line">    Student s3 = new Student(3L, "æ¨ç´«", 17, "åŒ—äº¬");</span><br><span class="line">    Student s4 = new Student(4L, "æç°", 17, "æµ™æ±Ÿ");</span><br><span class="line">    Student s5 = new Student(1L, "è‚–æˆ˜", 15, "æµ™æ±Ÿ");</span><br><span class="line">    List<student> students = new ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line">    students.add(s5);</span><br><span class="line">    students.stream().distinct().forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="C11539ADDC1E430F8ED438AE06020BE2" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="C11539ADDC1E430F8ED438AE06020BE2" class="lazyload" title="image"></a></p><p>å¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªé‡å¤çš„â€œè‚–æˆ˜â€åŒå­¦è¿›è¡Œäº†å»é‡ï¼Œè¿™ä¸ä»…å› ä¸ºä½¿ç”¨äº†distinct()æ–¹æ³•ï¼Œè€Œä¸”å› ä¸ºStudentå¯¹è±¡é‡å†™äº†equalså’ŒhashCode()æ–¹æ³•ï¼Œå¦åˆ™å»é‡æ˜¯æ— æ•ˆçš„ã€‚</p><h3 id="sorted-æ’åº"><a href="#sorted-æ’åº" class="headerlink" title="sorted(æ’åº)"></a>sorted(æ’åº)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testSort1();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆæ’åºï¼ˆé»˜è®¤æ’åºï¼‰</span><br><span class="line"> */</span><br><span class="line">private static void testSort1() {</span><br><span class="line">    List<string> list = Arrays.asList("333","222","111");</string></span><br><span class="line">    list.stream().sorted().forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="9A7919666C0F47CE9E5BD3EB8E9290C0" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="9A7919666C0F47CE9E5BD3EB8E9290C0" class="lazyload" title="image"></a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testSort2();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆæ’åºï¼ˆæŒ‡å®šæ’åºè§„åˆ™ï¼‰</span><br><span class="line"> */</span><br><span class="line">private static void testSort2() {</span><br><span class="line">    Student s1 = new Student(1L, "è‚–æˆ˜", 15, "æµ™æ±Ÿ");</span><br><span class="line">    Student s2 = new Student(2L, "ç‹ä¸€åš", 15, "æ¹–åŒ—");</span><br><span class="line">    Student s3 = new Student(3L, "æ¨ç´«", 17, "åŒ—äº¬");</span><br><span class="line">    Student s4 = new Student(4L, "æç°", 17, "æµ™æ±Ÿ");</span><br><span class="line">    List<student> students = new ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line">    students.stream()</span><br><span class="line">            .sorted((stu1,stu2) ->Long.compare(stu2.getId(), stu1.getId()))</span><br><span class="line">            .sorted((stu1,stu2) -> Integer.compare(stu2.getAge(),stu1.getAge()))</span><br><span class="line">            .forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="81C4A1F144444D94A87D790C4D5AD75D" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="81C4A1F144444D94A87D790C4D5AD75D" class="lazyload" title="image"></a></p><p>ä¸Šé¢æŒ‡å®šæ’åºè§„åˆ™ï¼Œå…ˆæŒ‰ç…§å­¦ç”Ÿçš„idè¿›è¡Œé™åºæ’åºï¼Œå†æŒ‰ç…§å¹´é¾„è¿›è¡Œé™åºæ’åº</p><h3 id="limitï¼ˆé™åˆ¶è¿”å›ä¸ªæ•°ï¼‰"><a href="#limitï¼ˆé™åˆ¶è¿”å›ä¸ªæ•°ï¼‰" class="headerlink" title="limitï¼ˆé™åˆ¶è¿”å›ä¸ªæ•°ï¼‰"></a>limitï¼ˆé™åˆ¶è¿”å›ä¸ªæ•°ï¼‰</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testLimit();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆlimitï¼Œè¿”å›å‰å‡ ä¸ªå…ƒç´ </span><br><span class="line"> */</span><br><span class="line">private static void testLimit() {</span><br><span class="line">    List<string> list = Arrays.asList("333","222","111");</string></span><br><span class="line">    list.stream().limit(2).forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="19C0E0221FDE405D8E0ED0CCA3E6BF58" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="19C0E0221FDE405D8E0ED0CCA3E6BF58" class="lazyload" title="image"></a></p><h3 id="skip-åˆ é™¤å…ƒç´ "><a href="#skip-åˆ é™¤å…ƒç´ " class="headerlink" title="skip(åˆ é™¤å…ƒç´ )"></a>skip(åˆ é™¤å…ƒç´ )</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testSkip();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é›†åˆskipï¼Œåˆ é™¤å‰nä¸ªå…ƒç´ </span><br><span class="line"> */</span><br><span class="line">private static void testSkip() {</span><br><span class="line">    List<string> list = Arrays.asList("333","222","111");</string></span><br><span class="line">    list.stream().skip(2).forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="D06818C8704B4C80AEA807013CCBBA9F" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="D06818C8704B4C80AEA807013CCBBA9F" class="lazyload" title="image"></a></p><h3 id="reduce-èšåˆ"><a href="#reduce-èšåˆ" class="headerlink" title="reduce(èšåˆ)"></a>reduce(èšåˆ)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testReduce();</span><br><span class="line">}</span><br><span class="line">/**</span><br><span class="line"> * é›†åˆreduce,å°†é›†åˆä¸­æ¯ä¸ªå…ƒç´ èšåˆæˆä¸€æ¡æ•°æ®</span><br><span class="line"> */</span><br><span class="line">private static void testReduce() {</span><br><span class="line">    List<string> list = Arrays.asList("æ¬¢","è¿","ä½ ");</string></span><br><span class="line">    String appendStr = list.stream().reduce("åŒ—äº¬",(a,b) -> a+b);</span><br><span class="line">    System.out.println(appendStr);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="A9E5293DA8754B658839A11CBB609BEF" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A9E5293DA8754B658839A11CBB609BEF" class="lazyload" title="image"></a></p><h3 id="min-æ±‚æœ€å°å€¼"><a href="#min-æ±‚æœ€å°å€¼" class="headerlink" title="min(æ±‚æœ€å°å€¼)"></a>min(æ±‚æœ€å°å€¼)</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testMin();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ±‚é›†åˆä¸­å…ƒç´ çš„æœ€å°å€¼</span><br><span class="line"> */</span><br><span class="line">private static void testMin() {</span><br><span class="line">    Student s1 = new Student(1L, "è‚–æˆ˜", 14, "æµ™æ±Ÿ");</span><br><span class="line">    Student s2 = new Student(2L, "ç‹ä¸€åš", 15, "æ¹–åŒ—");</span><br><span class="line">    Student s3 = new Student(3L, "æ¨ç´«", 17, "åŒ—äº¬");</span><br><span class="line">    Student s4 = new Student(4L, "æç°", 17, "æµ™æ±Ÿ");</span><br><span class="line">    List<student> students = new ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line">    Student minS = students.stream().min((stu1,stu2) ->Integer.compare(stu1.getAge(),stu2.getAge())).get();</span><br><span class="line">    System.out.println(minS.toString());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="D7E4271D589941F99438A5D5A63FF2D3" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="D7E4271D589941F99438A5D5A63FF2D3" class="lazyload" title="image"></a><br>ä¸Šé¢æ˜¯æ±‚æ‰€æœ‰å­¦ç”Ÿä¸­å¹´é¾„æœ€å°çš„ä¸€ä¸ªï¼ŒmaxåŒç†ï¼Œæ±‚æœ€å¤§å€¼ã€‚</p><h3 id="anyMatch-allMatch-noneMatchï¼ˆåŒ¹é…ï¼‰"><a href="#anyMatch-allMatch-noneMatchï¼ˆåŒ¹é…ï¼‰" class="headerlink" title="anyMatch/allMatch/noneMatchï¼ˆåŒ¹é…ï¼‰"></a>anyMatch/allMatch/noneMatchï¼ˆåŒ¹é…ï¼‰</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String [] args) {</span><br><span class="line">    testMatch();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private static void testMatch() {</span><br><span class="line">    Student s1 = new Student(1L, "è‚–æˆ˜", 15, "æµ™æ±Ÿ");</span><br><span class="line">    Student s2 = new Student(2L, "ç‹ä¸€åš", 15, "æ¹–åŒ—");</span><br><span class="line">    Student s3 = new Student(3L, "æ¨ç´«", 17, "åŒ—äº¬");</span><br><span class="line">    Student s4 = new Student(4L, "æç°", 17, "æµ™æ±Ÿ");</span><br><span class="line">    List<student> students = new ArrayList<>();</student></span><br><span class="line">    students.add(s1);</span><br><span class="line">    students.add(s2);</span><br><span class="line">    students.add(s3);</span><br><span class="line">    students.add(s4);</span><br><span class="line">    Boolean anyMatch = students.stream().anyMatch(s ->"æ¹–åŒ—".equals(s.getAddress()));</span><br><span class="line">    if (anyMatch) {</span><br><span class="line">        System.out.println("æœ‰æ¹–åŒ—äºº");</span><br><span class="line">    }</span><br><span class="line">    Boolean allMatch = students.stream().allMatch(s -> s.getAge()>=15);</span><br><span class="line">    if (allMatch) {</span><br><span class="line">        System.out.println("æ‰€æœ‰å­¦ç”Ÿéƒ½æ»¡15å‘¨å²");</span><br><span class="line">    }</span><br><span class="line">    Boolean noneMatch = students.stream().noneMatch(s -> "æ¨æ´‹".equals(s.getName()));</span><br><span class="line">    if (noneMatch) {</span><br><span class="line">        System.out.println("æ²¡æœ‰å«æ¨æ´‹çš„åŒå­¦");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><p><a href="B0478494832B4B2B8A4DAB6D063E4448" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="B0478494832B4B2B8A4DAB6D063E4448" class="lazyload" title="image"></a></p><p>anyMatchï¼šStream ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true</p><p>allMatchï¼šStream ä¸­å…¨éƒ¨å…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true</p><p>noneMatchï¼šStream ä¸­æ²¡æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸Šé¢ä»‹ç»äº†Streamå¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼Œè™½ç„¶å¯¹é›†åˆçš„éå†å’Œæ“ä½œå¯ä»¥ç”¨ä»¥å‰å¸¸è§„çš„æ–¹å¼ï¼Œä½†æ˜¯å½“ä¸šåŠ¡é€»è¾‘å¤æ‚çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä»£ç é‡å¾ˆå¤šï¼Œå¯è¯»æ€§å¾ˆå·®ï¼Œæ˜æ˜ä¸€è¡Œä»£ç è§£å†³çš„äº‹æƒ…ï¼Œä½ å´å†™äº†å¥½å‡ è¡Œã€‚è¯•è¯•lambdaè¡¨è¾¾å¼ï¼Œè¯•è¯•Streamï¼Œä½ ä¼šæœ‰ä¸ä¸€æ ·çš„ä½“éªŒã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIæ ¸å¿ƒä»£ç ï¼Œä¼°å€¼ä¸€ä¸ªäº¿</title>
      <link href="/2019/01/04/AI%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BC%B0%E5%80%BC%E4%B8%80%E4%B8%AA%E4%BA%BF/"/>
      <url>/2019/01/04/AI%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BC%B0%E5%80%BC%E4%B8%80%E4%B8%AA%E4%BA%BF/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p><a href="https://i.imgur.com/Pgr8a16.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Pgr8a16.jpg" class="lazyload" title></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡æ•´åˆdubbo å’Œ zookeeper åˆ°Spring Bootä¸­å®ç°æœåŠ¡æ²»ç†</title>
      <link href="/2019/01/03/%E9%80%9A%E8%BF%87%E6%95%B4%E5%90%88dubbo%20%E5%92%8C%20zookeeper%20%E5%88%B0Spring%20Boot%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/"/>
      <url>/2019/01/03/%E9%80%9A%E8%BF%87%E6%95%B4%E5%90%88dubbo%20%E5%92%8C%20zookeeper%20%E5%88%B0Spring%20Boot%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-dubbo-zookeeper"><a href="#spring-boot-dubbo-zookeeper" class="headerlink" title="spring-boot-dubbo-zookeeper"></a>spring-boot-dubbo-zookeeper</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>é€šè¿‡æ•´åˆdubbo-spring-boot å’Œ zookeeper åˆ°Spring Bootä¸­å®ç°æœåŠ¡æ²»ç†</p><p>é¡¹ç›®ä¸ºèšåˆé¡¹ç›®ï¼Œé€šè¿‡ä¸€ä¸‹å‡ ä¸ªå­é¡¹ç›®æ¨¡å—æä¾›æœåŠ¡ï¼š</p><pre><code>åŸºç¡€å…¬å…±æ¥å£ï¼šspring-boot-dubbo-zookeeper-base-interfaceæœåŠ¡æä¾›è€…ï¼šspring-boot-dubbo-zookeeper-provideræœåŠ¡æ¶ˆè´¹è€…ï¼šspring-boot-dubbo-zookeeper-consumer</code></pre><p>åœ¨application.ymlä¸­é…ç½®zookeeperçš„åœ°å€å¯ä»¥å•å‡»ä¹Ÿå¯ä»¥é›†ç¾¤ã€‚</p><p>é¡¹ç›®å¯åŠ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å°çš„æ—¥å¿—æˆ–è€…Dubbo AdminæŸ¥çœ‹ï¼Œæ—¥å¿—æ‰“å°å³å¯æŸ¥çœ‹ï¼Œæˆ‘å±•ç¤ºä¸€ä¸‹Dubbo Adminçš„æ˜¾ç¤ºï¼š<br><a href="https://i.imgur.com/WCaVKxU.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/WCaVKxU.jpg" class="lazyload" title></a></p><p>æœåŠ¡æ²»ç†ï¼šæä¾›è€…<br><a href="https://i.imgur.com/jFB8P56.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/jFB8P56.jpg" class="lazyload" title></a></p><p>æœåŠ¡æ²»ç†ï¼šæ¶ˆè´¹è€…<br><a href="https://i.imgur.com/ZFXgkNK.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/ZFXgkNK.jpg" class="lazyload" title></a></p><p>é¡¹ç›®å¯åŠ¨ä¹‹åè¯·æ±‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9091/hello/xiaohua</span><br><span class="line">http://localhost:9091/hello/goodbye/meinv</span><br></pre></td></tr></tbody></table></figure></div><h3 id="é¡¹ç›®æºç åœ°å€"><a href="#é¡¹ç›®æºç åœ°å€" class="headerlink" title="é¡¹ç›®æºç åœ°å€"></a>é¡¹ç›®æºç åœ°å€</h3><p><a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-dubbo-zookeeper" target="_blank" rel="noopener">spring-boot-dubbo-zookeeper</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="https://www.hwy.ac.cn" target="_blank" rel="noopener">https://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 11 å·²å‘å¸ƒï¼ŒString è¿˜èƒ½è¿™æ ·ç©ï¼</title>
      <link href="/2018/12/14/Java%2011%20%E5%B7%B2%E5%8F%91%E5%B8%83%EF%BC%8CString%20%E8%BF%98%E8%83%BD%E8%BF%99%E6%A0%B7%E7%8E%A9%EF%BC%81/"/>
      <url>/2018/12/14/Java%2011%20%E5%B7%B2%E5%8F%91%E5%B8%83%EF%BC%8CString%20%E8%BF%98%E8%83%BD%E8%BF%99%E6%A0%B7%E7%8E%A9%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="Java-11-å¢åŠ äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹æ‰€ç¤ºã€‚"><a href="#Java-11-å¢åŠ äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹æ‰€ç¤ºã€‚" class="headerlink" title="Java 11 å¢åŠ äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹æ‰€ç¤ºã€‚"></a>Java 11 å¢åŠ äº†ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¦‚ä»¥ä¸‹æ‰€ç¤ºã€‚</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºç™½</span></span><br><span class="line"><span class="string">" "</span>.isBlank();                <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤é¦–å°¾ç©ºæ ¼</span></span><br><span class="line"><span class="string">" Javastack "</span>.strip();          <span class="comment">// "Javastack"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤å°¾éƒ¨ç©ºæ ¼ </span></span><br><span class="line"><span class="string">" Javastack "</span>.stripTrailing();  <span class="comment">// " Javastack"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»é™¤é¦–éƒ¨ç©ºæ ¼ </span></span><br><span class="line"><span class="string">" Javastack "</span>.stripLeading();   <span class="comment">// "Javastack "</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">"Java"</span>.repeat(<span class="number">3</span>);             <span class="comment">// "JavaJavaJava"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡Œæ•°ç»Ÿè®¡</span></span><br><span class="line"><span class="string">"A\nB\nC"</span>.lines().count();    <span class="comment">// 3</span></span><br></pre></td></tr></tbody></table></figure></div><p>æœ€æœ‰æ„æ€çš„æ˜¯ *<em>repeat *</em>å’Œ *<em>lines *</em>æ–¹æ³•äº†ï¼Œæ¥çœ‹ä¸‹è¿˜èƒ½æ€ä¹ˆç©ï¼</p><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h3><p>repeat æ–¹æ³•çš„ä½œç”¨å°±æ˜¯é‡å¤ä¸€ä¸ªå­—ç¬¦ä¸² N éï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿å·¥å…·ç±»ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.commons.lang3.StringUtils#repeat(java.lang.String, int)</span><br></pre></td></tr></tbody></table></figure></div><p>æ¥çœ‹ä¸‹ repeat çš„æºç ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">repeat</span><span class="params">(<span class="keyword">int</span> count)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (count < <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"count is negative: "</span> + count);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> len = value.length;</span><br><span class="line">    <span class="keyword">if</span> (len == <span class="number">0</span> || count == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (len == <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span>[] single = <span class="keyword">new</span> <span class="keyword">byte</span>[count];</span><br><span class="line">        Arrays.fill(single, value[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(single, coder);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (Integer.MAX_VALUE / count < len) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError(<span class="string">"Repeating "</span> + len + <span class="string">" bytes String "</span> + count +</span><br><span class="line">                <span class="string">" times will produce a String exceeding maximum size."</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> limit = len * count;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">byte</span>[] multiple = <span class="keyword">new</span> <span class="keyword">byte</span>[limit];</span><br><span class="line">    System.arraycopy(value, <span class="number">0</span>, multiple, <span class="number">0</span>, len);</span><br><span class="line">    <span class="keyword">int</span> copied = len;</span><br><span class="line">    <span class="keyword">for</span> (; copied < limit - copied; copied <<= <span class="number">1</span>) {</span><br><span class="line">        System.arraycopy(multiple, <span class="number">0</span>, multiple, copied, copied);</span><br><span class="line">    }</span><br><span class="line">    System.arraycopy(multiple, <span class="number">0</span>, multiple, copied, limit - copied);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(multiple, coder);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ¥çœ‹ä¸‹æ›´å¤šçš„ç”¨æ³•ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">"Java"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°äº0ï¼šjava.lang.IllegalArgumentException</span></span><br><span class="line">System.out.println(str.repeat(-<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰äº0ï¼šç©ºç™½ä¸²ï¼ˆ""ï¼‰</span></span><br><span class="line">System.out.println(str.repeat(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaJavaJava</span></span><br><span class="line">System.out.println(str.repeat(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// java.lang.OutOfMemoryError</span></span><br><span class="line">System.out.println(str.repeat(Integer.MAX_VALUE));</span><br></pre></td></tr></tbody></table></figure></div><p>æ‰€ä»¥è¯´ repeat å¹¶ä¸æ˜¯å¯ä»¥æ— é™å¢é•¿çš„ï¼Œæœ‰ä½¿ç”¨é™åˆ¶çš„ï¼Œè¾¾åˆ°ä¸€å®šé‡å°±ä¼šæŠ¥å†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p><h3 id="lines"><a href="#lines" class="headerlink" title="lines"></a>lines</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Stream<string> <span class="title">lines</span><span class="params">()</span> </string></span>{</span><br><span class="line">    <span class="keyword">return</span> isLatin1() ? StringLatin1.lines(value)</span><br><span class="line">                      : StringUTF16.lines(value);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>lines æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² Stream, å¯ä»¥è¯†åˆ« \n å’Œ \r æ¢è¡Œç¬¦æ¢è¡Œã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4</span></span><br><span class="line">System.out.println(<span class="string">"A\nB\nC\rD"</span>.lines().count());</span><br></pre></td></tr></tbody></table></figure></div><p>æ˜¯ä¸æ˜¯å¾ˆå¥½ï¼Ÿåœ¨å°†æ¥è‚¯å®šæœ‰æ­¦ä¹‹åœ°ï¼å¦‚æ‰¹é‡è¯»å–æ–‡ä»¶å†…å®¹åˆ°ä¸€ä¸ª Stream ä¸­ï¼Œå°±èƒ½å¾ˆå¥½çš„è¯†åˆ«è¡Œç»“æŸç¬¦äº†ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨IDEAæ’ä»¶Alibaba Cloud Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨</title>
      <link href="/2018/12/13/%E4%BD%BF%E7%94%A8IDEA%E6%8F%92%E4%BB%B6Alibaba%20Cloud%20Toolkit%E5%B7%A5%E5%85%B7%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E6%9C%AC%E5%9C%B0%E5%BA%94%E7%94%A8%E5%88%B0ECS%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018/12/13/%E4%BD%BF%E7%94%A8IDEA%E6%8F%92%E4%BB%B6Alibaba%20Cloud%20Toolkit%E5%B7%A5%E5%85%B7%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E6%9C%AC%E5%9C%B0%E5%BA%94%E7%94%A8%E5%88%B0ECS%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="ä½¿ç”¨IDEAæ’ä»¶Alibaba-Cloud-Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨"><a href="#ä½¿ç”¨IDEAæ’ä»¶Alibaba-Cloud-Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨IDEAæ’ä»¶Alibaba Cloud Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨"></a>ä½¿ç”¨IDEAæ’ä»¶Alibaba Cloud Toolkitå·¥å…·ä¸€é”®éƒ¨ç½²æœ¬åœ°åº”ç”¨åˆ°ECSæœåŠ¡å™¨</h1><p>æœ€è¿‘çœ‹åˆ°é˜¿é‡Œäº‘å‘å¸ƒäº†ä¸€æ¬¾åä¸º Alibaba Cloud Toolkit çš„æ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…é«˜æ•ˆå¼€å‘å¹¶éƒ¨ç½²é€‚åˆåœ¨äº‘ç«¯è¿è¡Œçš„åº”ç”¨ï¼Œç¬é—´å‡»ä¸­äº†æˆ‘çš„å°å¿ƒè„ï¼Œè¿™ä¸ªå¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´è¶…çº§æ£’å•Šï¼Œç»ˆäºä¸éœ€è¦å†æ‰‹åŠ¨ scp/ftp ä¸Šä¼ åº”ç”¨åˆ°æœåŠ¡å™¨äº†ï¼Œè¿å¯åŠ¨çš„å‘½ä»¤éƒ½æ˜¯å¯ä»¥è‡ªè¡Œç¼–å†™çš„ï¼Œæ£’æ£’ï¼<br>PSï¼šä¸ªäººå¼€å‘è€…é¡¹ç›®ä¸å¤šä¹Ÿä¸å¤§ï¼Œå¦‚æœä½¿ç”¨jenkinsç­‰å·¥å…·ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œä¸å¦‚ç›´æ¥ç”¨æ‰‹æ‰”æ¥å¾—ç›´æ¥ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Alibaba-Cloud-Toolkit"><a href="#ä»€ä¹ˆæ˜¯-Alibaba-Cloud-Toolkit" class="headerlink" title="ä»€ä¹ˆæ˜¯ Alibaba Cloud Toolkit"></a>ä»€ä¹ˆæ˜¯ Alibaba Cloud Toolkit</h2><p>Alibaba Cloud Toolkit ï¼ˆåæ–‡ç®€ç§° Cloud Toolkitï¼‰æ˜¯é˜¿é‡Œäº‘é’ˆå¯¹ IDE å¹³å°ä¸ºå¼€å‘è€…æä¾›çš„ä¸€æ¬¾æ’ä»¶ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…é«˜æ•ˆå¼€å‘å¹¶éƒ¨ç½²é€‚åˆåœ¨äº‘ç«¯è¿è¡Œçš„åº”ç”¨ã€‚<br>æ‚¨åœ¨æœ¬åœ°å®Œæˆåº”ç”¨ç¨‹åºçš„å¼€å‘ã€è°ƒè¯•å’Œæµ‹è¯•åï¼Œå¯ä»¥ä½¿ç”¨åœ¨ IED ï¼ˆå¦‚ Eclipse æˆ– IntelliJï¼‰ä¸­å®‰è£…çš„ Cloud Toolkit æ’ä»¶ï¼Œé€šè¿‡å›¾å½¢é…ç½®çš„æ–¹å¼è¿æ¥åˆ°äº‘ç«¯éƒ¨ç½²ç¯å¢ƒå¹¶å°†åº”ç”¨ç¨‹åºå¿«å¦‚éƒ¨ç½²åˆ°äº‘ç«¯ã€‚<br>è¯´æ˜ï¼šç›®å‰ Cloud Toolkit ä»…æ”¯æŒ Eclipseã€Intellij ç­‰å…¶å®ƒå¼€å‘ç¯å¢ƒå¼€å‘ä¸­ï¼Œè¯·æ‚¨æŒç»­å…³æ³¨ Cloud Tookit åŠ¨æ€ã€‚<br>å®˜æ–¹æœ‰æä¾›ç®€å•ç‰ˆçš„æ–‡æ¡£è¯´æ˜ï¼Œå°ä¼™ä¼´ä¹Ÿå¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://help.aliyun.com/product/29966.html</span><br></pre></td></tr></tbody></table></figure></div><h2 id="ä½¿ç”¨IDEAå®‰è£…å’Œé…ç½®Cloud-Toolkit"><a href="#ä½¿ç”¨IDEAå®‰è£…å’Œé…ç½®Cloud-Toolkit" class="headerlink" title="ä½¿ç”¨IDEAå®‰è£…å’Œé…ç½®Cloud Toolkit"></a>ä½¿ç”¨IDEAå®‰è£…å’Œé…ç½®Cloud Toolkit</h2><p>ä½œè€…æ‰‹åŠ¨åœ¨ideaä¸Šå®‰è£…äº†ä¸€ä¸‹è¿™ä¸ªå·¥å…·ï¼Œå¹¶æµ‹è¯•å®Œæˆï¼Œå¯¹è¿™ä¸ªå·¥å…·å¯ä»¥è¯´éå¸¸æ»¡æ„ï¼Œä¸‹é¢æ˜¯å®‰è£…å’Œé…ç½®çš„æµç¨‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>åœ¨ideaä¸Šå®‰è£…Alibaba Cloud Toolkitæ’ä»¶</li><li>é‡å¯ideaåº”ç”¨</li><li>é…ç½®Cloud Toolkitæ’ä»¶ä¸­çš„Accoutä¿¡æ¯</li><li>åœ¨é˜¿é‡Œäº‘ä¸­è·å–ç”¨æˆ·AccessKeyç›¸å…³ä¿¡æ¯ï¼ˆAccessKey IDã€    Access Key Secretï¼‰</li><li>é…ç½®å‘å¸ƒåˆ°ECSçš„ç›¸å…³æœåŠ¡å™¨åŠå‘½ä»¤ä¿¡æ¯</li><li>æµ‹è¯•å¹¶æˆåŠŸå‘å¸ƒ</li></ul><p>ä¸»è¦æµç¨‹ä¸ºä»¥ä¸Š6æ­¥ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥é…ç½®ï¼Œä¸Šå›¾ï¼š<br><a href="https://i.imgur.com/hPX0T0T.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/hPX0T0T.jpg" class="lazyload" title></a></p><p>å¦‚æœæ’ä»¶ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œç¨ç­‰ä¸€ä¼šï¼Œä½œè€…æµ‹è¯•æ—¶ä¹Ÿä¸‹è½½å¤±è´¥äº†ä¸€æ¬¡ï¼Œä¸‹è½½å®Œæˆåéœ€è¦é‡å¯ideaåº”ç”¨åç”Ÿæ•ˆã€‚</p><p>é¦–å…ˆï¼Œéœ€è¦å…ˆé…ç½®Alibaba Cloud Toolkitçš„Accountï¼Œä½ç½®è§ä¸‹å›¾ï¼š<br><a href="https://i.imgur.com/e2NM5oN.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/e2NM5oN.jpg" class="lazyload" title></a></p><p><a href="https://i.imgur.com/4BDmwJN.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/4BDmwJN.jpg" class="lazyload" title></a></p><p>ä¸Šå›¾ä¸­çš„AccessKeyéœ€è¦åœ¨é˜¿é‡Œäº‘çš„æ§åˆ¶å°ä¸­é…ç½®ï¼Œå¦‚æœæ˜¯æ–°ç”¨æˆ·ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªAccessKeyï¼Œå¦‚ä¸‹å›¾ï¼š<br><a href="https://i.imgur.com/V7KK3kf.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/V7KK3kf.jpg" class="lazyload" title></a></p><p>åˆ›å»ºå®Œæˆå¹¶é…ç½®å¥½Accountåï¼Œå°±å¯ä»¥ç€æ‰‹é…ç½®å¯¹åº”çš„é¡¹ç›®å‘å¸ƒåˆ°ECSä¿¡æ¯ï¼Œå®˜æ–¹æ–‡æ¡£è§ä»¥ä¸‹é“¾æ¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://help.aliyun.com/document_detail/98762.html</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/1uSOgIR.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/1uSOgIR.jpg" class="lazyload" title></a></p><p>å¦‚æœä½ çš„Accounté…ç½®æ²¡æœ‰é—®é¢˜ï¼Œåˆ™ä¼šè‡ªåŠ¨è´¦æˆ·æ˜¾ç¤ºå¯¹åº”çš„ECSæœåŠ¡å™¨ï¼Œåœ¨å‘å¸ƒæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨é€‰æ‹©æŸå°æœåŠ¡å™¨ï¼Œä¸€å®šè¦é€‰æ‹©å“¦ï¼</p><p>å¯¹äºCommandçš„ç¼–å†™ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼ˆç‚¹å‡»ä¸‹å›¾ä¸­çš„è“è‰²å­—ä½“ï¼šLearn Sampleç›´è¾¾ï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://yq.aliyun.com/articles/665693</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/RRd7HIQ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/RRd7HIQ.jpg" class="lazyload" title></a></p><p>é…ç½®æˆåŠŸåï¼Œå¯ä»¥ç‚¹å‡»Runè¿è¡Œç¨‹åºï¼Œæ­¤æ—¶ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç¼–è¯‘å¹¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­ï¼Œå‘å¸ƒåˆ°åœ°å€å°±æ˜¯ä¸Šå›¾ä¸­çš„Deploy Locationä¸­çš„è·¯å¾„ï¼Œå‘å¸ƒå‰å¦‚æœéœ€è¦Mavenæ‰§è¡Œï¼Œä¸€å®šä¸è¦å¿˜è®°é…ç½®ä¸Šå›¾ä¸­Mavençš„å‘½ä»¤ï¼Œä¸­é—´çš„Commandæ˜¯åœ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨æˆåŠŸåæ‰§è¡Œçš„å‘½ä»¤ï¼Œä¸»è¦ç”¨äºåº”ç”¨çš„å¯åŠ¨åœæ­¢é‡å¯ç­‰ã€‚<br>ä¸‹é¢æ˜¯å‘å¸ƒæˆåŠŸçš„ç¤ºä¾‹ï¼š</p><p><a href="https://i.imgur.com/s9dr40F.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/s9dr40F.jpg" class="lazyload" title></a></p><p>æœåŠ¡å™¨çš„æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</p><p><a href="https://i.imgur.com/25pm03e.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/25pm03e.jpg" class="lazyload" title></a></p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä»¥ä¸Šæ˜¯å¯¹IDEAæ’ä»¶Alibaba Cloud Toolkitçš„å®‰è£…é…ç½®åŠä½¿ç”¨æ¡ˆä¾‹ï¼Œå¦‚æœå°ä¼™ä¼´è¿˜æœ‰é‡åˆ°å…¶ä»–çš„é—®é¢˜ï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸‹é“¾æ¥ï¼ŒåŠ å…¥Alibaba Cloud Toolkit å®˜æ–¹å”¯ä¸€æŒ‡å®šæ”¯æŒç¾¤ï¼Œæäº¤ä½ çš„éœ€æ±‚&Bugå“¦ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://yq.aliyun.com/articles/656292</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä½œè€…ï¼šYClimb</span><br><span class="line">é“¾æ¥ï¼šhttps://juejin.im/post/5c0a748ff265da610f6389a8</span><br><span class="line">æ¥æºï¼šæ˜é‡‘</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> Alibaba Cloud Toolkit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openVPNå¤šé…ç½®æ–‡ä»¶ç®¡ç†</title>
      <link href="/2018/12/06/openVPN%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/"/>
      <url>/2018/12/06/openVPN%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>æˆ‘ä»¬åœ¨ä½¿ç”¨openVPNçš„æ—¶å€™å¯èƒ½ä¼šæœ‰å¥½å‡ ä¸ªä¸åŒçš„é…ç½®ï¼Œæ­¤æ—¶å¦‚æœéœ€è¦åˆ‡æ¢ä½¿ç”¨é»˜è®¤ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶è¾¾åˆ°ä¸€é”®åˆ‡æ¢çš„ç›®çš„ã€‚</p><p>é¦–å…ˆæŠŠä¸åŒçš„é…ç½®æŒ‰æ–‡ä»¶å¤¹åˆ†ç±»å½’ç±»å¥½ï¼ŒæŠŠå…¶æ‰€åœ¨çš„<strong>config.ovpn</strong>æ–‡ä»¶<strong>ç§»åŠ¨</strong>åˆ°æ–‡ä»¶å¤¹å¤–é¢ï¼Œå¦‚ä¸‹ï¼š</p><p><a href="https://i.imgur.com/aFvnCwR.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/aFvnCwR.jpg" class="lazyload" title></a></p><p>æ–‡ä»¶å¤¹é‡Œé¢è£…çš„æ˜¯æˆ‘ä»¬ç”Ÿå­˜çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘çš„é‚£ä¸ªç»å…¸ç½‘ç»œæ–‡ä»¶Açº§é‡Œé¢ï¼š</p><p><a href="https://i.imgur.com/0WPJQMF.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/0WPJQMF.jpg" class="lazyload" title></a></p><p>ä¹‹åæˆ‘ä»¬éœ€è¦ä¿®æ”¹ç§»åŠ¨å‡ºæ¥çš„<strong>xxx.ovpnæ–‡ä»¶</strong>ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€å¯èƒ½ä¸ä¼šè‡ªåŠ¨æ ¼å¼åŒ–å°±ä¸€è¡Œæ˜¾ç¤ºï¼Œçœ‹ç€ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ç”¨Sunlime Textè½¯ä»¶æ‰“å¼€ï¼ŒæŠŠæ¯ä¸ªä¿®æ”¹ä¸ºå¦‚ä¸‹çš„æ ·å­</p><p><a href="https://i.imgur.com/6Z8r8eH.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/6Z8r8eH.jpg" class="lazyload" title></a></p><p>ç„¶åæˆ‘ä»¬å¯åŠ¨<strong>OpenVPN GUI</strong>å°±å¯ä»¥é€‰æ‹©æˆ‘ä»¬æ‰€éœ€è¦çš„ç½‘ç»œäº†</p><p><a href="https://i.imgur.com/WISrKsq.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/WISrKsq.jpg" class="lazyload" title></a></p><p>æˆ‘ä½¿ç”¨çš„æ˜¯Windows 7ç³»ç»Ÿ å…¶ä»–ç³»ç»Ÿä¸çŸ¥é“ä¿¡ä¸ä¿¡ï¼Œéœ€è¦è‡ªå·±æµ‹è¯•ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> openVPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL åŸºæœ¬è¯­æ³•</title>
      <link href="/2018/11/19/MySQL%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2018/11/19/MySQL%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><!-- GFM-TOC --></head><body><ul><li><a href="#ä¸€åŸºç¡€">ä¸€ã€åŸºç¡€</a></li><li><a href="#äºŒåˆ›å»ºè¡¨">äºŒã€åˆ›å»ºè¡¨</a></li><li><a href="#ä¸‰ä¿®æ”¹è¡¨">ä¸‰ã€ä¿®æ”¹è¡¨</a></li><li><a href="#å››æ’å…¥">å››ã€æ’å…¥</a></li><li><a href="#äº”æ›´æ–°">äº”ã€æ›´æ–°</a></li><li><a href="#å…­åˆ é™¤">å…­ã€åˆ é™¤</a></li><li><a href="#ä¸ƒæŸ¥è¯¢">ä¸ƒã€æŸ¥è¯¢</a></li><li><a href="#å…«æ’åº">å…«ã€æ’åº</a></li><li><a href="#ä¹è¿‡æ»¤">ä¹ã€è¿‡æ»¤</a></li><li><a href="#åé€šé…ç¬¦">åã€é€šé…ç¬¦</a></li><li><a href="#åä¸€è®¡ç®—å­—æ®µ">åä¸€ã€è®¡ç®—å­—æ®µ</a></li><li><a href="#åäºŒå‡½æ•°">åäºŒã€å‡½æ•°</a></li><li><a href="#åä¸‰åˆ†ç»„">åä¸‰ã€åˆ†ç»„</a></li><li><a href="#åå››å­æŸ¥è¯¢">åå››ã€å­æŸ¥è¯¢</a></li><li><a href="#åäº”è¿æ¥">åäº”ã€è¿æ¥</a></li><li><a href="#åå…­ç»„åˆæŸ¥è¯¢">åå…­ã€ç»„åˆæŸ¥è¯¢</a></li><li><a href="#åä¸ƒè§†å›¾">åä¸ƒã€è§†å›¾</a></li><li><a href="#åå…«å­˜å‚¨è¿‡ç¨‹">åå…«ã€å­˜å‚¨è¿‡ç¨‹</a></li><li><a href="#åä¹æ¸¸æ ‡">åä¹ã€æ¸¸æ ‡</a></li><li><a href="#äºŒåè§¦å‘å™¨">äºŒåã€è§¦å‘å™¨</a></li><li><a href="#äºŒåä¸€äº‹åŠ¡ç®¡ç†">äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†</a></li><li><a href="#äºŒåäºŒå­—ç¬¦é›†">äºŒåäºŒã€å­—ç¬¦é›†</a></li><li><a href="#äºŒåä¸‰æƒé™ç®¡ç†">äºŒåä¸‰ã€æƒé™ç®¡ç†</a></li><li><a href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a><!-- GFM-TOC --></li></ul><h1 id="ä¸€ã€åŸºç¡€"><a href="#ä¸€ã€åŸºç¡€" class="headerlink" title="ä¸€ã€åŸºç¡€"></a>ä¸€ã€åŸºç¡€</h1><p>æ¨¡å¼å®šä¹‰äº†æ•°æ®å¦‚ä½•å­˜å‚¨ã€å­˜å‚¨ä»€ä¹ˆæ ·çš„æ•°æ®ä»¥åŠæ•°æ®å¦‚ä½•åˆ†è§£ç­‰ä¿¡æ¯ï¼Œæ•°æ®åº“å’Œè¡¨éƒ½æœ‰æ¨¡å¼ã€‚</p><p>ä¸»é”®çš„å€¼ä¸å…è®¸ä¿®æ”¹ï¼Œä¹Ÿä¸å…è®¸å¤ç”¨ï¼ˆä¸èƒ½ä½¿ç”¨å·²ç»åˆ é™¤çš„ä¸»é”®å€¼èµ‹ç»™æ–°æ•°æ®è¡Œçš„ä¸»é”®ï¼‰ã€‚</p><p>SQLï¼ˆStructured Query Language)ï¼Œæ ‡å‡† SQL ç”± ANSI æ ‡å‡†å§”å‘˜ä¼šç®¡ç†ï¼Œä»è€Œç§°ä¸º ANSI SQLã€‚å„ä¸ª DBMS éƒ½æœ‰è‡ªå·±çš„å®ç°ï¼Œå¦‚ PL/SQLã€Transact-SQL ç­‰ã€‚</p><p>SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯æ•°æ®åº“è¡¨åã€åˆ—åå’Œå€¼æ˜¯å¦åŒºåˆ†ä¾èµ–äºå…·ä½“çš„ DBMS ä»¥åŠé…ç½®ã€‚</p><p>SQL æ”¯æŒä»¥ä¸‹ä¸‰ç§æ³¨é‡Šï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨é‡Š</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable; <span class="comment">-- æ³¨é‡Š</span></span><br><span class="line"><span class="comment">/* æ³¨é‡Š1</span></span><br><span class="line"><span class="comment">   æ³¨é‡Š2 */</span></span><br></pre></td></tr></tbody></table></figure></div><p>æ•°æ®åº“åˆ›å»ºä¸ä½¿ç”¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">test</span>;</span><br><span class="line"><span class="keyword">USE</span> <span class="keyword">test</span>;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äºŒã€åˆ›å»ºè¡¨"><a href="#äºŒã€åˆ›å»ºè¡¨" class="headerlink" title="äºŒã€åˆ›å»ºè¡¨"></a>äºŒã€åˆ›å»ºè¡¨</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  col1 <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">  col2 <span class="built_in">VARCHAR</span>(<span class="number">45</span>) <span class="literal">NULL</span>,</span><br><span class="line">  col3 <span class="built_in">DATE</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>));</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸‰ã€ä¿®æ”¹è¡¨"><a href="#ä¸‰ã€ä¿®æ”¹è¡¨" class="headerlink" title="ä¸‰ã€ä¿®æ”¹è¡¨"></a>ä¸‰ã€ä¿®æ”¹è¡¨</h1><p>æ·»åŠ åˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">col</span> <span class="built_in">CHAR</span>(<span class="number">20</span>);</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ é™¤åˆ—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="keyword">col</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ é™¤è¡¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å››ã€æ’å…¥"><a href="#å››ã€æ’å…¥" class="headerlink" title="å››ã€æ’å…¥"></a>å››ã€æ’å…¥</h1><p>æ™®é€šæ’å…¥</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mytable(col1, col2)</span><br><span class="line"><span class="keyword">VALUES</span>(val1, val2);</span><br></pre></td></tr></tbody></table></figure></div><p>æ’å…¥æ£€ç´¢å‡ºæ¥çš„æ•°æ®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mytable1(col1, col2)</span><br><span class="line"><span class="keyword">SELECT</span> col1, col2</span><br><span class="line"><span class="keyword">FROM</span> mytable2;</span><br></pre></td></tr></tbody></table></figure></div><p>å°†ä¸€ä¸ªè¡¨çš„å†…å®¹æ’å…¥åˆ°ä¸€ä¸ªæ–°è¡¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newtable <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äº”ã€æ›´æ–°"><a href="#äº”ã€æ›´æ–°" class="headerlink" title="äº”ã€æ›´æ–°"></a>äº”ã€æ›´æ–°</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mytable</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">col</span> = val</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å…­ã€åˆ é™¤"><a href="#å…­ã€åˆ é™¤" class="headerlink" title="å…­ã€åˆ é™¤"></a>å…­ã€åˆ é™¤</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>TRUNCATE TABLE</strong>  å¯ä»¥æ¸…ç©ºè¡¨ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤æ‰€æœ‰è¡Œã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨æ›´æ–°å’Œåˆ é™¤æ“ä½œæ—¶ä¸€å®šè¦ç”¨ WHERE å­å¥ï¼Œä¸ç„¶ä¼šæŠŠæ•´å¼ è¡¨çš„æ•°æ®éƒ½ç ´åã€‚å¯ä»¥å…ˆç”¨ SELECT è¯­å¥è¿›è¡Œæµ‹è¯•ï¼Œé˜²æ­¢é”™è¯¯åˆ é™¤ã€‚</p><h1 id="ä¸ƒã€æŸ¥è¯¢"><a href="#ä¸ƒã€æŸ¥è¯¢" class="headerlink" title="ä¸ƒã€æŸ¥è¯¢"></a>ä¸ƒã€æŸ¥è¯¢</h1><h2 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h2><p>ç›¸åŒå€¼åªä¼šå‡ºç°ä¸€æ¬¡ã€‚å®ƒä½œç”¨äºæ‰€æœ‰åˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰åˆ—çš„å€¼éƒ½ç›¸åŒæ‰ç®—ç›¸åŒã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> col1, col2</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><h2 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h2><p>é™åˆ¶è¿”å›çš„è¡Œæ•°ã€‚å¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹è¡Œï¼Œä» 0 å¼€å§‹ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿”å›çš„æ€»è¡Œæ•°ã€‚</p><p>è¿”å›å‰ 5 è¡Œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>, <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>è¿”å›ç¬¬ 3 ~ 5 è¡Œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">2</span>, <span class="number">3</span>;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å…«ã€æ’åº"><a href="#å…«ã€æ’åº" class="headerlink" title="å…«ã€æ’åº"></a>å…«ã€æ’åº</h1><ul><li><strong>ASC</strong> ï¼šå‡åºï¼ˆé»˜è®¤ï¼‰</li><li><strong>DESC</strong> ï¼šé™åº</li></ul><p>å¯ä»¥æŒ‰å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªåˆ—æŒ‡å®šä¸åŒçš„æ’åºæ–¹å¼ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> col1 <span class="keyword">DESC</span>, col2 <span class="keyword">ASC</span>;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¹ã€è¿‡æ»¤"><a href="#ä¹ã€è¿‡æ»¤" class="headerlink" title="ä¹ã€è¿‡æ»¤"></a>ä¹ã€è¿‡æ»¤</h1><p>ä¸è¿›è¡Œè¿‡æ»¤çš„æ•°æ®éå¸¸å¤§ï¼Œå¯¼è‡´é€šè¿‡ç½‘ç»œä¼ è¾“äº†å¤šä½™çš„æ•°æ®ï¼Œä»è€Œæµªè´¹äº†ç½‘ç»œå¸¦å®½ã€‚å› æ­¤å°½é‡ä½¿ç”¨ SQL è¯­å¥æ¥è¿‡æ»¤ä¸å¿…è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¼ è¾“æ‰€æœ‰çš„æ•°æ®åˆ°å®¢æˆ·ç«¯ä¸­ç„¶åç”±å®¢æˆ·ç«¯è¿›è¡Œè¿‡æ»¤ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸‹è¡¨æ˜¾ç¤ºäº† WHERE å­å¥å¯ç”¨çš„æ“ä½œç¬¦</p><table><thead><tr><th align="center">æ“ä½œç¬¦</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">=</td><td align="center">ç­‰äº</td></tr><tr><td align="center"><</td><td align="center">å°äº</td></tr><tr><td align="center">></td><td align="center">å¤§äº</td></tr><tr><td align="center"><> !=</td><td align="center">ä¸ç­‰äº</td></tr><tr><td align="center"><= !></td><td align="center">å°äºç­‰äº</td></tr><tr><td align="center">>= !<</td><td align="center">å¤§äºç­‰äº</td></tr><tr><td align="center">BETWEEN</td><td align="center">åœ¨ä¸¤ä¸ªå€¼ä¹‹é—´</td></tr><tr><td align="center">IS NULL</td><td align="center">ä¸º NULL å€¼</td></tr></tbody></table><p>åº”è¯¥æ³¨æ„åˆ°ï¼ŒNULL ä¸ 0ã€ç©ºå­—ç¬¦ä¸²éƒ½ä¸åŒã€‚</p><p><strong>AND å’Œ OR</strong>  ç”¨äºè¿æ¥å¤šä¸ªè¿‡æ»¤æ¡ä»¶ã€‚ä¼˜å…ˆå¤„ç† ANDï¼Œå½“ä¸€ä¸ªè¿‡æ»¤è¡¨è¾¾å¼æ¶‰åŠåˆ°å¤šä¸ª AND å’Œ OR æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ () æ¥å†³å®šä¼˜å…ˆçº§ï¼Œä½¿å¾—ä¼˜å…ˆçº§å…³ç³»æ›´æ¸…æ™°ã€‚</p><p><strong>IN</strong>  æ“ä½œç¬¦ç”¨äºåŒ¹é…ä¸€ç»„å€¼ï¼Œå…¶åä¹Ÿå¯ä»¥æ¥ä¸€ä¸ª SELECT å­å¥ï¼Œä»è€ŒåŒ¹é…å­æŸ¥è¯¢å¾—åˆ°çš„ä¸€ç»„å€¼ã€‚</p><p><strong>NOT</strong>  æ“ä½œç¬¦ç”¨äºå¦å®šä¸€ä¸ªæ¡ä»¶ã€‚</p><h1 id="åã€é€šé…ç¬¦"><a href="#åã€é€šé…ç¬¦" class="headerlink" title="åã€é€šé…ç¬¦"></a>åã€é€šé…ç¬¦</h1><p>é€šé…ç¬¦ä¹Ÿæ˜¯ç”¨åœ¨è¿‡æ»¤è¯­å¥ä¸­ï¼Œä½†å®ƒåªèƒ½ç”¨äºæ–‡æœ¬å­—æ®µã€‚</p><ul><li><p><strong>%</strong>  åŒ¹é… >=0 ä¸ªä»»æ„å­—ç¬¦ï¼›</p></li><li><p><strong>_</strong>  åŒ¹é… ==1 ä¸ªä»»æ„å­—ç¬¦ï¼›</p></li><li><p><strong>[ ]</strong>  å¯ä»¥åŒ¹é…é›†åˆå†…çš„å­—ç¬¦ï¼Œä¾‹å¦‚ [ab] å°†åŒ¹é…å­—ç¬¦ a æˆ–è€… bã€‚ç”¨è„±å­—ç¬¦ ^ å¯ä»¥å¯¹å…¶è¿›è¡Œå¦å®šï¼Œä¹Ÿå°±æ˜¯ä¸åŒ¹é…é›†åˆå†…çš„å­—ç¬¦ã€‚</p></li></ul><p>ä½¿ç”¨ Like æ¥è¿›è¡Œé€šé…ç¬¦åŒ¹é…ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> <span class="keyword">LIKE</span> <span class="string">'[^AB]%'</span>; <span class="comment">-- ä¸ä»¥ A å’Œ B å¼€å¤´çš„ä»»æ„æ–‡æœ¬</span></span><br></pre></td></tr></tbody></table></figure></div><p>ä¸è¦æ»¥ç”¨é€šé…ç¬¦ï¼Œé€šé…ç¬¦ä½äºå¼€å¤´å¤„åŒ¹é…ä¼šéå¸¸æ…¢ã€‚</p><h1 id="åä¸€ã€è®¡ç®—å­—æ®µ"><a href="#åä¸€ã€è®¡ç®—å­—æ®µ" class="headerlink" title="åä¸€ã€è®¡ç®—å­—æ®µ"></a>åä¸€ã€è®¡ç®—å­—æ®µ</h1><p>åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šå®Œæˆæ•°æ®çš„è½¬æ¢å’Œæ ¼å¼åŒ–çš„å·¥ä½œå¾€å¾€æ¯”å®¢æˆ·ç«¯ä¸Šå¿«å¾—å¤šï¼Œå¹¶ä¸”è½¬æ¢å’Œæ ¼å¼åŒ–åçš„æ•°æ®é‡æ›´å°‘çš„è¯å¯ä»¥å‡å°‘ç½‘ç»œé€šä¿¡é‡ã€‚</p><p>è®¡ç®—å­—æ®µé€šå¸¸éœ€è¦ä½¿ç”¨  <strong>AS</strong>  æ¥å–åˆ«åï¼Œå¦åˆ™è¾“å‡ºçš„æ—¶å€™å­—æ®µåä¸ºè®¡ç®—è¡¨è¾¾å¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1 * col2 <span class="keyword">AS</span> <span class="keyword">alias</span></span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>CONCAT()</strong>  ç”¨äºè¿æ¥ä¸¤ä¸ªå­—æ®µã€‚è®¸å¤šæ•°æ®åº“ä¼šä½¿ç”¨ç©ºæ ¼æŠŠä¸€ä¸ªå€¼å¡«å……ä¸ºåˆ—å®½ï¼Œå› æ­¤è¿æ¥çš„ç»“æœä¼šå‡ºç°ä¸€äº›ä¸å¿…è¦çš„ç©ºæ ¼ï¼Œä½¿ç”¨ <strong>TRIM()</strong> å¯ä»¥å»é™¤é¦–å°¾ç©ºæ ¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="keyword">TRIM</span>(col1), <span class="string">'('</span>, <span class="keyword">TRIM</span>(col2), <span class="string">')'</span>) <span class="keyword">AS</span> concat_col</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="åäºŒã€å‡½æ•°"><a href="#åäºŒã€å‡½æ•°" class="headerlink" title="åäºŒã€å‡½æ•°"></a>åäºŒã€å‡½æ•°</h1><p>å„ä¸ª DBMS çš„å‡½æ•°éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼Œå› æ­¤ä¸å¯ç§»æ¤ï¼Œä»¥ä¸‹ä¸»è¦æ˜¯ MySQL çš„å‡½æ•°ã€‚</p><h2 id="æ±‡æ€»"><a href="#æ±‡æ€»" class="headerlink" title="æ±‡æ€»"></a>æ±‡æ€»</h2><table><thead><tr><th align="center">å‡½ æ•°</th><th align="center">è¯´ æ˜</th></tr></thead><tbody><tr><td align="center">AVG()</td><td align="center">è¿”å›æŸåˆ—çš„å¹³å‡å€¼</td></tr><tr><td align="center">COUNT()</td><td align="center">è¿”å›æŸåˆ—çš„è¡Œæ•°</td></tr><tr><td align="center">MAX()</td><td align="center">è¿”å›æŸåˆ—çš„æœ€å¤§å€¼</td></tr><tr><td align="center">MIN()</td><td align="center">è¿”å›æŸåˆ—çš„æœ€å°å€¼</td></tr><tr><td align="center">SUM()</td><td align="center">è¿”å›æŸåˆ—å€¼ä¹‹å’Œ</td></tr></tbody></table><p>AVG() ä¼šå¿½ç•¥ NULL è¡Œã€‚</p><p>ä½¿ç”¨ DISTINCT å¯ä»¥è®©æ±‡æ€»å‡½æ•°å€¼æ±‡æ€»ä¸åŒçš„å€¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(<span class="keyword">DISTINCT</span> col1) <span class="keyword">AS</span> avg_col</span><br><span class="line"><span class="keyword">FROM</span> mytable;</span><br></pre></td></tr></tbody></table></figure></div><h2 id="æ–‡æœ¬å¤„ç†"><a href="#æ–‡æœ¬å¤„ç†" class="headerlink" title="æ–‡æœ¬å¤„ç†"></a>æ–‡æœ¬å¤„ç†</h2><table><thead><tr><th align="center">å‡½æ•°</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">LEFT()</td><td align="center">å·¦è¾¹çš„å­—ç¬¦</td></tr><tr><td align="center">RIGHT()</td><td align="center">å³è¾¹çš„å­—ç¬¦</td></tr><tr><td align="center">LOWER()</td><td align="center">è½¬æ¢ä¸ºå°å†™å­—ç¬¦</td></tr><tr><td align="center">UPPER()</td><td align="center">è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦</td></tr><tr><td align="center">LTRIM()</td><td align="center">å»é™¤å·¦è¾¹çš„ç©ºæ ¼</td></tr><tr><td align="center">RTRIM()</td><td align="center">å»é™¤å³è¾¹çš„ç©ºæ ¼</td></tr><tr><td align="center">LENGTH()</td><td align="center">é•¿åº¦</td></tr><tr><td align="center">SOUNDEX()</td><td align="center">è½¬æ¢ä¸ºè¯­éŸ³å€¼</td></tr></tbody></table><p>å…¶ä¸­ï¼Œ <strong>SOUNDEX()</strong>  å¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºæè¿°å…¶è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">SOUNDEX</span>(col1) = <span class="keyword">SOUNDEX</span>(<span class="string">'apple'</span>)</span><br></pre></td></tr></tbody></table></figure></div><h2 id="æ—¥æœŸå’Œæ—¶é—´å¤„ç†"><a href="#æ—¥æœŸå’Œæ—¶é—´å¤„ç†" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´å¤„ç†"></a>æ—¥æœŸå’Œæ—¶é—´å¤„ç†</h2><ul><li>æ—¥æœŸæ ¼å¼ï¼šYYYY-MM-DD</li><li>æ—¶é—´æ ¼å¼ï¼šHH:MM:SS</li></ul><table><thead><tr><th align="center">å‡½ æ•°</th><th align="center">è¯´ æ˜</th></tr></thead><tbody><tr><td align="center">AddDate()</td><td align="center">å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰ï¼‰</td></tr><tr><td align="center">AddTime()</td><td align="center">å¢åŠ ä¸€ä¸ªæ—¶é—´ï¼ˆæ—¶ã€åˆ†ç­‰ï¼‰</td></tr><tr><td align="center">CurDate()</td><td align="center">è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td align="center">CurTime()</td><td align="center">è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td align="center">Date()</td><td align="center">è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ†</td></tr><tr><td align="center">DateDiff()</td><td align="center">è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·®</td></tr><tr><td align="center">Date_Add()</td><td align="center">é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•°</td></tr><tr><td align="center">Date_Format()</td><td align="center">è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸²</td></tr><tr><td align="center">Day()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ†</td></tr><tr><td align="center">DayOfWeek()</td><td align="center">å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡ </td></tr><tr><td align="center">Hour()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ†</td></tr><tr><td align="center">Minute()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ†</td></tr><tr><td align="center">Month()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ†</td></tr><tr><td align="center">Now()</td><td align="center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td align="center">Second()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ†</td></tr><tr><td align="center">Time()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ†</td></tr><tr><td align="center">Year()</td><td align="center">è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ†</td></tr></tbody></table><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql> SELECT NOW();</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2018-4-14 20:25:11</span><br></pre></td></tr></tbody></table></figure></div><h2 id="æ•°å€¼å¤„ç†"><a href="#æ•°å€¼å¤„ç†" class="headerlink" title="æ•°å€¼å¤„ç†"></a>æ•°å€¼å¤„ç†</h2><table><thead><tr><th align="center">å‡½æ•°</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">SIN()</td><td align="center">æ­£å¼¦</td></tr><tr><td align="center">COS()</td><td align="center">ä½™å¼¦</td></tr><tr><td align="center">TAN()</td><td align="center">æ­£åˆ‡</td></tr><tr><td align="center">ABS()</td><td align="center">ç»å¯¹å€¼</td></tr><tr><td align="center">SQRT()</td><td align="center">å¹³æ–¹æ ¹</td></tr><tr><td align="center">MOD()</td><td align="center">ä½™æ•°</td></tr><tr><td align="center">EXP()</td><td align="center">æŒ‡æ•°</td></tr><tr><td align="center">PI()</td><td align="center">åœ†å‘¨ç‡</td></tr><tr><td align="center">RAND()</td><td align="center">éšæœºæ•°</td></tr></tbody></table><h1 id="åä¸‰ã€åˆ†ç»„"><a href="#åä¸‰ã€åˆ†ç»„" class="headerlink" title="åä¸‰ã€åˆ†ç»„"></a>åä¸‰ã€åˆ†ç»„</h1><p>åˆ†ç»„å°±æ˜¯æŠŠå…·æœ‰ç›¸åŒçš„æ•°æ®å€¼çš„è¡Œæ”¾åœ¨åŒä¸€ç»„ä¸­ã€‚</p><p>å¯ä»¥å¯¹åŒä¸€åˆ†ç»„æ•°æ®ä½¿ç”¨æ±‡æ€»å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚æ±‚åˆ†ç»„æ•°æ®çš„å¹³å‡å€¼ç­‰ã€‚</p><p>æŒ‡å®šçš„åˆ†ç»„å­—æ®µé™¤äº†èƒ½æŒ‰è¯¥å­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œä¹Ÿä¼šè‡ªåŠ¨æŒ‰è¯¥å­—æ®µè¿›è¡Œæ’åºã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>GROUP BY è‡ªåŠ¨æŒ‰åˆ†ç»„å­—æ®µè¿›è¡Œæ’åºï¼ŒORDER BY ä¹Ÿå¯ä»¥æŒ‰æ±‡æ€»å­—æ®µæ¥è¿›è¡Œæ’åºã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">num</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>WHERE è¿‡æ»¤è¡Œï¼ŒHAVING è¿‡æ»¤åˆ†ç»„ï¼Œè¡Œè¿‡æ»¤åº”å½“å…ˆäºåˆ†ç»„è¿‡æ»¤ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span>, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">num</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> > <span class="number">2</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">num</span> >= <span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ†ç»„è§„å®šï¼š</p><ul><li>GROUP BY å­å¥å‡ºç°åœ¨ WHERE å­å¥ä¹‹åï¼ŒORDER BY å­å¥ä¹‹å‰ï¼›</li><li>é™¤äº†æ±‡æ€»å­—æ®µå¤–ï¼ŒSELECT è¯­å¥ä¸­çš„æ¯ä¸€å­—æ®µéƒ½å¿…é¡»åœ¨ GROUP BY å­å¥ä¸­ç»™å‡ºï¼›</li><li>NULL çš„è¡Œä¼šå•ç‹¬åˆ†ä¸ºä¸€ç»„ï¼›</li><li>å¤§å¤šæ•° SQL å®ç°ä¸æ”¯æŒ GROUP BY åˆ—å…·æœ‰å¯å˜é•¿åº¦çš„æ•°æ®ç±»å‹ã€‚</li></ul><h1 id="åå››ã€å­æŸ¥è¯¢"><a href="#åå››ã€å­æŸ¥è¯¢" class="headerlink" title="åå››ã€å­æŸ¥è¯¢"></a>åå››ã€å­æŸ¥è¯¢</h1><p>å­æŸ¥è¯¢ä¸­åªèƒ½è¿”å›ä¸€ä¸ªå­—æ®µçš„æ•°æ®ã€‚</p><p>å¯ä»¥å°†å­æŸ¥è¯¢çš„ç»“æœä½œä¸º WHRER è¯­å¥çš„è¿‡æ»¤æ¡ä»¶ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable1</span><br><span class="line"><span class="keyword">WHERE</span> col1 <span class="keyword">IN</span> (<span class="keyword">SELECT</span> col2</span><br><span class="line">               <span class="keyword">FROM</span> mytable2);</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸‹é¢çš„è¯­å¥å¯ä»¥æ£€ç´¢å‡ºå®¢æˆ·çš„è®¢å•æ•°é‡ï¼Œå­æŸ¥è¯¢è¯­å¥ä¼šå¯¹ç¬¬ä¸€ä¸ªæŸ¥è¯¢æ£€ç´¢å‡ºçš„æ¯ä¸ªå®¢æˆ·æ‰§è¡Œä¸€æ¬¡ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cust_name, (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line">                   <span class="keyword">FROM</span> Orders</span><br><span class="line">                   <span class="keyword">WHERE</span> Orders.cust_id = Customers.cust_id)</span><br><span class="line">                   <span class="keyword">AS</span> orders_num</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> cust_name;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="åäº”ã€è¿æ¥"><a href="#åäº”ã€è¿æ¥" class="headerlink" title="åäº”ã€è¿æ¥"></a>åäº”ã€è¿æ¥</h1><p>è¿æ¥ç”¨äºè¿æ¥å¤šä¸ªè¡¨ï¼Œä½¿ç”¨ JOIN å…³é”®å­—ï¼Œå¹¶ä¸”æ¡ä»¶è¯­å¥ä½¿ç”¨ ON è€Œä¸æ˜¯ WHEREã€‚</p><p>è¿æ¥å¯ä»¥æ›¿æ¢å­æŸ¥è¯¢ï¼Œå¹¶ä¸”æ¯”å­æŸ¥è¯¢çš„æ•ˆç‡ä¸€èˆ¬ä¼šæ›´å¿«ã€‚</p><p>å¯ä»¥ç”¨ AS ç»™åˆ—åã€è®¡ç®—å­—æ®µå’Œè¡¨åå–åˆ«åï¼Œç»™è¡¨åå–åˆ«åæ˜¯ä¸ºäº†ç®€åŒ– SQL è¯­å¥ä»¥åŠè¿æ¥ç›¸åŒè¡¨ã€‚</p><h2 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h2><p>å†…è¿æ¥åˆç§°ç­‰å€¼è¿æ¥ï¼Œä½¿ç”¨ INNER JOIN å…³é”®å­—ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tableb <span class="keyword">AS</span> B</span><br><span class="line"><span class="keyword">ON</span> A.key = B.key;</span><br></pre></td></tr></tbody></table></figure></div><p>å¯ä»¥ä¸æ˜ç¡®ä½¿ç”¨ INNER JOINï¼Œè€Œä½¿ç”¨æ™®é€šæŸ¥è¯¢å¹¶åœ¨ WHERE ä¸­å°†ä¸¤ä¸ªè¡¨ä¸­è¦è¿æ¥çš„åˆ—ç”¨ç­‰å€¼æ–¹æ³•è¿æ¥èµ·æ¥ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A, tableb <span class="keyword">AS</span> B</span><br><span class="line"><span class="keyword">WHERE</span> A.key = B.key;</span><br></pre></td></tr></tbody></table></figure></div><p>åœ¨æ²¡æœ‰æ¡ä»¶è¯­å¥çš„æƒ…å†µä¸‹è¿”å›ç¬›å¡å°”ç§¯ã€‚</p><h2 id="è‡ªè¿æ¥"><a href="#è‡ªè¿æ¥" class="headerlink" title="è‡ªè¿æ¥"></a>è‡ªè¿æ¥</h2><p>è‡ªè¿æ¥å¯ä»¥çœ‹æˆå†…è¿æ¥çš„ä¸€ç§ï¼Œåªæ˜¯è¿æ¥çš„è¡¨æ˜¯è‡ªèº«è€Œå·²ã€‚</p><p>ä¸€å¼ å‘˜å·¥è¡¨ï¼ŒåŒ…å«å‘˜å·¥å§“åå’Œå‘˜å·¥æ‰€å±éƒ¨é—¨ï¼Œè¦æ‰¾å‡ºä¸ Jim å¤„åœ¨åŒä¸€éƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥å§“åã€‚</p><p>å­æŸ¥è¯¢ç‰ˆæœ¬</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span></span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">WHERE</span> department = (</span><br><span class="line">      <span class="keyword">SELECT</span> department</span><br><span class="line">      <span class="keyword">FROM</span> employee</span><br><span class="line">      <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">"Jim"</span>);</span><br></pre></td></tr></tbody></table></figure></div><p>è‡ªè¿æ¥ç‰ˆæœ¬</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.name</span><br><span class="line"><span class="keyword">FROM</span> employee <span class="keyword">AS</span> e1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> employee <span class="keyword">AS</span> e2</span><br><span class="line"><span class="keyword">ON</span> e1.department = e2.department</span><br><span class="line">      <span class="keyword">AND</span> e2.name = <span class="string">"Jim"</span>;</span><br></pre></td></tr></tbody></table></figure></div><h2 id="è‡ªç„¶è¿æ¥"><a href="#è‡ªç„¶è¿æ¥" class="headerlink" title="è‡ªç„¶è¿æ¥"></a>è‡ªç„¶è¿æ¥</h2><p>è‡ªç„¶è¿æ¥æ˜¯æŠŠåŒååˆ—é€šè¿‡ç­‰å€¼æµ‹è¯•è¿æ¥èµ·æ¥çš„ï¼ŒåŒååˆ—å¯ä»¥æœ‰å¤šä¸ªã€‚</p><p>å†…è¿æ¥å’Œè‡ªç„¶è¿æ¥çš„åŒºåˆ«ï¼šå†…è¿æ¥æä¾›è¿æ¥çš„åˆ—ï¼Œè€Œè‡ªç„¶è¿æ¥è‡ªåŠ¨è¿æ¥æ‰€æœ‰åŒååˆ—ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.value, B.value</span><br><span class="line"><span class="keyword">FROM</span> tablea <span class="keyword">AS</span> A <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> tableb <span class="keyword">AS</span> B;</span><br></pre></td></tr></tbody></table></figure></div><h2 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h2><p>å¤–è¿æ¥ä¿ç•™äº†æ²¡æœ‰å…³è”çš„é‚£äº›è¡Œã€‚åˆ†ä¸ºå·¦å¤–è¿æ¥ï¼Œå³å¤–è¿æ¥ä»¥åŠå…¨å¤–è¿æ¥ï¼Œå·¦å¤–è¿æ¥å°±æ˜¯ä¿ç•™å·¦è¡¨æ²¡æœ‰å…³è”çš„è¡Œã€‚</p><p>æ£€ç´¢æ‰€æœ‰é¡¾å®¢çš„è®¢å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿˜æ²¡æœ‰è®¢å•ä¿¡æ¯çš„é¡¾å®¢ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Customers.cust_id, Orders.order_num</span><br><span class="line"><span class="keyword">FROM</span> Customers <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Orders</span><br><span class="line"><span class="keyword">ON</span> Customers.cust_id = Orders.cust_id;</span><br></pre></td></tr></tbody></table></figure></div><p>customers è¡¨ï¼š</p><table><thead><tr><th align="center">cust_id</th><th align="center">cust_name</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">a</td></tr><tr><td align="center">2</td><td align="center">b</td></tr><tr><td align="center">3</td><td align="center">c</td></tr></tbody></table><p>orders è¡¨ï¼š</p><table><thead><tr><th align="center">order_id</th><th align="center">cust_id</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">2</td><td align="center">1</td></tr><tr><td align="center">3</td><td align="center">3</td></tr><tr><td align="center">4</td><td align="center">3</td></tr></tbody></table><p>ç»“æœï¼š</p><table><thead><tr><th align="center">cust_id</th><th align="center">cust_name</th><th align="center">order_id</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">a</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">a</td><td align="center">2</td></tr><tr><td align="center">3</td><td align="center">c</td><td align="center">3</td></tr><tr><td align="center">3</td><td align="center">c</td><td align="center">4</td></tr><tr><td align="center">2</td><td align="center">b</td><td align="center">Null</td></tr></tbody></table><h1 id="åå…­ã€ç»„åˆæŸ¥è¯¢"><a href="#åå…­ã€ç»„åˆæŸ¥è¯¢" class="headerlink" title="åå…­ã€ç»„åˆæŸ¥è¯¢"></a>åå…­ã€ç»„åˆæŸ¥è¯¢</h1><p>ä½¿ç”¨  <strong>UNION</strong>  æ¥ç»„åˆä¸¤ä¸ªæŸ¥è¯¢ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæŸ¥è¯¢è¿”å› M è¡Œï¼Œç¬¬äºŒä¸ªæŸ¥è¯¢è¿”å› N è¡Œï¼Œé‚£ä¹ˆç»„åˆæŸ¥è¯¢çš„ç»“æœä¸€èˆ¬ä¸º M+N è¡Œã€‚</p><p>æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼å’Œèšé›†å‡½æ•°ã€‚</p><p>é»˜è®¤ä¼šå»é™¤ç›¸åŒè¡Œï¼Œå¦‚æœéœ€è¦ä¿ç•™ç›¸åŒè¡Œï¼Œä½¿ç”¨ UNION ALLã€‚</p><p>åªèƒ½åŒ…å«ä¸€ä¸ª ORDER BY å­å¥ï¼Œå¹¶ä¸”å¿…é¡»ä½äºè¯­å¥çš„æœ€åã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">col</span></span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">col</span> =<span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="åä¸ƒã€è§†å›¾"><a href="#åä¸ƒã€è§†å›¾" class="headerlink" title="åä¸ƒã€è§†å›¾"></a>åä¸ƒã€è§†å›¾</h1><p>è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨ï¼Œæœ¬èº«ä¸åŒ…å«æ•°æ®ï¼Œä¹Ÿå°±ä¸èƒ½å¯¹å…¶è¿›è¡Œç´¢å¼•æ“ä½œã€‚</p><p>å¯¹è§†å›¾çš„æ“ä½œå’Œå¯¹æ™®é€šè¡¨çš„æ“ä½œä¸€æ ·ã€‚</p><p>è§†å›¾å…·æœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p><ul><li>ç®€åŒ–å¤æ‚çš„ SQL æ“ä½œï¼Œæ¯”å¦‚å¤æ‚çš„è¿æ¥ï¼›</li><li>åªä½¿ç”¨å®é™…è¡¨çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼›</li><li>é€šè¿‡åªç»™ç”¨æˆ·è®¿é—®è§†å›¾çš„æƒé™ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼›</li><li>æ›´æ”¹æ•°æ®æ ¼å¼å’Œè¡¨ç¤ºã€‚</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myview <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(col1, col2) <span class="keyword">AS</span> concat_col, col3*col4 <span class="keyword">AS</span> compute_col</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">WHERE</span> col5 = val;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="åå…«ã€å­˜å‚¨è¿‡ç¨‹"><a href="#åå…«ã€å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="åå…«ã€å­˜å‚¨è¿‡ç¨‹"></a>åå…«ã€å­˜å‚¨è¿‡ç¨‹</h1><p>å­˜å‚¨è¿‡ç¨‹å¯ä»¥çœ‹æˆæ˜¯å¯¹ä¸€ç³»åˆ— SQL æ“ä½œçš„æ‰¹å¤„ç†ã€‚</p><p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„å¥½å¤„ï¼š</p><ul><li>ä»£ç å°è£…ï¼Œä¿è¯äº†ä¸€å®šçš„å®‰å…¨æ€§ï¼›</li><li>ä»£ç å¤ç”¨ï¼›</li><li>ç”±äºæ˜¯é¢„å…ˆç¼–è¯‘ï¼Œå› æ­¤å…·æœ‰å¾ˆé«˜çš„æ€§èƒ½ã€‚</li></ul><p>å‘½ä»¤è¡Œä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹éœ€è¦è‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼Œå› ä¸ºå‘½ä»¤è¡Œæ˜¯ä»¥ ; ä¸ºç»“æŸç¬¦ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸­ä¹ŸåŒ…å«äº†åˆ†å·ï¼Œå› æ­¤ä¼šé”™è¯¯æŠŠè¿™éƒ¨åˆ†åˆ†å·å½“æˆæ˜¯ç»“æŸç¬¦ï¼Œé€ æˆè¯­æ³•é”™è¯¯ã€‚</p><p>åŒ…å« inã€out å’Œ inout ä¸‰ç§å‚æ•°ã€‚</p><p>ç»™å˜é‡èµ‹å€¼éƒ½éœ€è¦ç”¨ select into è¯­å¥ã€‚</p><p>æ¯æ¬¡åªèƒ½ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ï¼Œä¸æ”¯æŒé›†åˆçš„æ“ä½œã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myprocedure( <span class="keyword">out</span> ret <span class="built_in">int</span> )</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">declare</span> y <span class="built_in">int</span>;</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">sum</span>(col1)</span><br><span class="line">        <span class="keyword">from</span> mytable</span><br><span class="line">        <span class="keyword">into</span> y;</span><br><span class="line">        <span class="keyword">select</span> y*y <span class="keyword">into</span> ret;</span><br><span class="line">    <span class="keyword">end</span> //</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> myprocedure(@ret);</span><br><span class="line"><span class="keyword">select</span> @ret;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="åä¹ã€æ¸¸æ ‡"><a href="#åä¹ã€æ¸¸æ ‡" class="headerlink" title="åä¹ã€æ¸¸æ ‡"></a>åä¹ã€æ¸¸æ ‡</h1><p>åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨æ¸¸æ ‡å¯ä»¥å¯¹ä¸€ä¸ªç»“æœé›†è¿›è¡Œç§»åŠ¨éå†ã€‚</p><p>æ¸¸æ ‡ä¸»è¦ç”¨äºäº¤äº’å¼åº”ç”¨ï¼Œå…¶ä¸­ç”¨æˆ·éœ€è¦å¯¹æ•°æ®é›†ä¸­çš„ä»»æ„è¡Œè¿›è¡Œæµè§ˆå’Œä¿®æ”¹ã€‚</p><p>ä½¿ç”¨æ¸¸æ ‡çš„å››ä¸ªæ­¥éª¤ï¼š</p><ol><li>å£°æ˜æ¸¸æ ‡ï¼Œè¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰å®é™…æ£€ç´¢å‡ºæ•°æ®ï¼›</li><li>æ‰“å¼€æ¸¸æ ‡ï¼›</li><li>å–å‡ºæ•°æ®ï¼›</li><li>å…³é—­æ¸¸æ ‡ï¼›</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> myprocedure(<span class="keyword">out</span> ret <span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">declare</span> done <span class="built_in">boolean</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">declare</span> mycursor <span class="keyword">cursor</span> <span class="keyword">for</span></span><br><span class="line">        <span class="keyword">select</span> col1 <span class="keyword">from</span> mytable;</span><br><span class="line">        <span class="comment"># å®šä¹‰äº†ä¸€ä¸ª continue handlerï¼Œå½“ sqlstate '02000' è¿™ä¸ªæ¡ä»¶å‡ºç°æ—¶ï¼Œä¼šæ‰§è¡Œ set done = 1</span></span><br><span class="line">        <span class="keyword">declare</span> continue <span class="keyword">handler</span> <span class="keyword">for</span> <span class="keyword">sqlstate</span> <span class="string">'02000'</span> <span class="keyword">set</span> done = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        open mycursor;</span><br><span class="line"></span><br><span class="line">        repeat</span><br><span class="line">            fetch mycursor into ret;</span><br><span class="line">            <span class="keyword">select</span> ret;</span><br><span class="line">        until done <span class="keyword">end</span> <span class="keyword">repeat</span>;</span><br><span class="line"></span><br><span class="line">        close mycursor;</span><br><span class="line">    <span class="keyword">end</span> //</span><br><span class="line"> delimiter ;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äºŒåã€è§¦å‘å™¨"><a href="#äºŒåã€è§¦å‘å™¨" class="headerlink" title="äºŒåã€è§¦å‘å™¨"></a>äºŒåã€è§¦å‘å™¨</h1><p>è§¦å‘å™¨ä¼šåœ¨æŸä¸ªè¡¨æ‰§è¡Œä»¥ä¸‹è¯­å¥æ—¶è€Œè‡ªåŠ¨æ‰§è¡Œï¼šDELETEã€INSERTã€UPDATEã€‚</p><p>è§¦å‘å™¨å¿…é¡»æŒ‡å®šåœ¨è¯­å¥æ‰§è¡Œä¹‹å‰è¿˜æ˜¯ä¹‹åè‡ªåŠ¨æ‰§è¡Œï¼Œä¹‹å‰æ‰§è¡Œä½¿ç”¨ BEFORE å…³é”®å­—ï¼Œä¹‹åæ‰§è¡Œä½¿ç”¨ AFTER å…³é”®å­—ã€‚BEFORE ç”¨äºæ•°æ®éªŒè¯å’Œå‡€åŒ–ï¼ŒAFTER ç”¨äºå®¡è®¡è·Ÿè¸ªï¼Œå°†ä¿®æ”¹è®°å½•åˆ°å¦å¤–ä¸€å¼ è¡¨ä¸­ã€‚</p><p>INSERT è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º NEW çš„è™šæ‹Ÿè¡¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> mytrigger <span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> mytable</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> <span class="keyword">SELECT</span> NEW.col <span class="keyword">into</span> @<span class="keyword">result</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="keyword">result</span>; <span class="comment">-- è·å–ç»“æœ</span></span><br></pre></td></tr></tbody></table></figure></div><p>DELETE è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º OLD çš„è™šæ‹Ÿè¡¨ï¼Œå¹¶ä¸”æ˜¯åªè¯»çš„ã€‚</p><p>UPDATE è§¦å‘å™¨åŒ…å«ä¸€ä¸ªåä¸º NEW å’Œä¸€ä¸ªåä¸º OLD çš„è™šæ‹Ÿè¡¨ï¼Œå…¶ä¸­ NEW æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œè€Œ OLD æ˜¯åªè¯»çš„ã€‚</p><p>MySQL ä¸å…è®¸åœ¨è§¦å‘å™¨ä¸­ä½¿ç”¨ CALL è¯­å¥ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p><h1 id="äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†"><a href="#äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†" class="headerlink" title="äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†"></a>äºŒåä¸€ã€äº‹åŠ¡ç®¡ç†</h1><p>åŸºæœ¬æœ¯è¯­ï¼š</p><ul><li>äº‹åŠ¡ï¼ˆtransactionï¼‰æŒ‡ä¸€ç»„ SQL è¯­å¥ï¼›</li><li>å›é€€ï¼ˆrollbackï¼‰æŒ‡æ’¤é”€æŒ‡å®š SQL è¯­å¥çš„è¿‡ç¨‹ï¼›</li><li>æäº¤ï¼ˆcommitï¼‰æŒ‡å°†æœªå­˜å‚¨çš„ SQL è¯­å¥ç»“æœå†™å…¥æ•°æ®åº“è¡¨ï¼›</li><li>ä¿ç•™ç‚¹ï¼ˆsavepointï¼‰æŒ‡äº‹åŠ¡å¤„ç†ä¸­è®¾ç½®çš„ä¸´æ—¶å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼Œä½ å¯ä»¥å¯¹å®ƒå‘å¸ƒå›é€€ï¼ˆä¸å›é€€æ•´ä¸ªäº‹åŠ¡å¤„ç†ä¸åŒï¼‰ã€‚</li></ul><p>ä¸èƒ½å›é€€ SELECT è¯­å¥ï¼Œå›é€€ SELECT è¯­å¥ä¹Ÿæ²¡æ„ä¹‰ï¼›ä¹Ÿä¸èƒ½å›é€€ CREATE å’Œ DROP è¯­å¥ã€‚</p><p>MySQL çš„äº‹åŠ¡æäº¤é»˜è®¤æ˜¯éšå¼æäº¤ï¼Œæ¯æ‰§è¡Œä¸€æ¡è¯­å¥å°±æŠŠè¿™æ¡è¯­å¥å½“æˆä¸€ä¸ªäº‹åŠ¡ç„¶åè¿›è¡Œæäº¤ã€‚å½“å‡ºç° START TRANSACTION è¯­å¥æ—¶ï¼Œä¼šå…³é—­éšå¼æäº¤ï¼›å½“ COMMIT æˆ– ROLLBACK è¯­å¥æ‰§è¡Œåï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨å…³é—­ï¼Œé‡æ–°æ¢å¤éšå¼æäº¤ã€‚</p><p>é€šè¿‡è®¾ç½® autocommit ä¸º 0 å¯ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤ï¼›autocommit æ ‡è®°æ˜¯é’ˆå¯¹æ¯ä¸ªè¿æ¥è€Œä¸æ˜¯é’ˆå¯¹æœåŠ¡å™¨çš„ã€‚</p><p>å¦‚æœæ²¡æœ‰è®¾ç½®ä¿ç•™ç‚¹ï¼ŒROLLBACK ä¼šå›é€€åˆ° START TRANSACTION è¯­å¥å¤„ï¼›å¦‚æœè®¾ç½®äº†ä¿ç•™ç‚¹ï¼Œå¹¶ä¸”åœ¨ ROLLBACK ä¸­æŒ‡å®šè¯¥ä¿ç•™ç‚¹ï¼Œåˆ™ä¼šå›é€€åˆ°è¯¥ä¿ç•™ç‚¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span></span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">SAVEPOINT</span> delete1</span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> delete1</span><br><span class="line">// ...</span><br><span class="line"><span class="keyword">COMMIT</span></span><br></pre></td></tr></tbody></table></figure></div><h1 id="äºŒåäºŒã€å­—ç¬¦é›†"><a href="#äºŒåäºŒã€å­—ç¬¦é›†" class="headerlink" title="äºŒåäºŒã€å­—ç¬¦é›†"></a>äºŒåäºŒã€å­—ç¬¦é›†</h1><p>åŸºæœ¬æœ¯è¯­ï¼š</p><ul><li>å­—ç¬¦é›†ä¸ºå­—æ¯å’Œç¬¦å·çš„é›†åˆï¼›</li><li>ç¼–ç ä¸ºæŸä¸ªå­—ç¬¦é›†æˆå‘˜çš„å†…éƒ¨è¡¨ç¤ºï¼›</li><li>æ ¡å¯¹å­—ç¬¦æŒ‡å®šå¦‚ä½•æ¯”è¾ƒï¼Œä¸»è¦ç”¨äºæ’åºå’Œåˆ†ç»„ã€‚</li></ul><p>é™¤äº†ç»™è¡¨æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹å¤–ï¼Œä¹Ÿå¯ä»¥ç»™åˆ—æŒ‡å®šï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable</span><br><span class="line">(<span class="keyword">col</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> latin <span class="keyword">COLLATE</span> latin1_general_ci )</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> hebrew <span class="keyword">COLLATE</span> hebrew_general_ci;</span><br></pre></td></tr></tbody></table></figure></div><p>å¯ä»¥åœ¨æ’åºã€åˆ†ç»„æ—¶æŒ‡å®šæ ¡å¯¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> mytable</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">col</span> <span class="keyword">COLLATE</span> latin1_general_ci;</span><br></pre></td></tr></tbody></table></figure></div><h1 id="äºŒåä¸‰ã€æƒé™ç®¡ç†"><a href="#äºŒåä¸‰ã€æƒé™ç®¡ç†" class="headerlink" title="äºŒåä¸‰ã€æƒé™ç®¡ç†"></a>äºŒåä¸‰ã€æƒé™ç®¡ç†</h1><p>MySQL çš„è´¦æˆ·ä¿¡æ¯ä¿å­˜åœ¨ mysql è¿™ä¸ªæ•°æ®åº“ä¸­ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USE</span> mysql;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">user</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>åˆ›å»ºè´¦æˆ·</strong> </p><p>æ–°åˆ›å»ºçš„è´¦æˆ·æ²¡æœ‰ä»»ä½•æƒé™ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> myuser <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'mypassword'</span>;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ä¿®æ”¹è´¦æˆ·å</strong> </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RENAME</span> myuser <span class="keyword">TO</span> newuser;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>åˆ é™¤è´¦æˆ·</strong> </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> myuser;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>æŸ¥çœ‹æƒé™</strong> </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> myuser;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>æˆäºˆæƒé™</strong> </p><p>è´¦æˆ·ç”¨ username@host çš„å½¢å¼å®šä¹‰ï¼Œusername@% ä½¿ç”¨çš„æ˜¯é»˜è®¤ä¸»æœºåã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> mydatabase.* <span class="keyword">TO</span> myuser;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>åˆ é™¤æƒé™</strong> </p><p>GRANT å’Œ REVOKE å¯åœ¨å‡ ä¸ªå±‚æ¬¡ä¸Šæ§åˆ¶è®¿é—®æƒé™ï¼š</p><ul><li>æ•´ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨ GRANT ALL å’Œ REVOKE ALLï¼›</li><li>æ•´ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ ON database.*ï¼›</li><li>ç‰¹å®šçš„è¡¨ï¼Œä½¿ç”¨ ON database.tableï¼›</li><li>ç‰¹å®šçš„åˆ—ï¼›</li><li>ç‰¹å®šçš„å­˜å‚¨è¿‡ç¨‹ã€‚</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> mydatabase.* <span class="keyword">FROM</span> myuser;</span><br></pre></td></tr></tbody></table></figure></div><p><strong>æ›´æ”¹å¯†ç </strong> </p><p>å¿…é¡»ä½¿ç”¨ Password() å‡½æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> PASSWROD <span class="keyword">FOR</span> myuser = <span class="keyword">Password</span>(<span class="string">'new_password'</span>);</span><br></pre></td></tr></tbody></table></figure></div><h1 id="Mysqlå¦‚ä½•ä¸ºè¡¨å­—æ®µæ·»åŠ ç´¢å¼•"><a href="#Mysqlå¦‚ä½•ä¸ºè¡¨å­—æ®µæ·»åŠ ç´¢å¼•" class="headerlink" title="Mysqlå¦‚ä½•ä¸ºè¡¨å­—æ®µæ·»åŠ ç´¢å¼•"></a>Mysqlå¦‚ä½•ä¸ºè¡¨å­—æ®µæ·»åŠ ç´¢å¼•</h1><p>1.æ·»åŠ PRIMARY KEYï¼ˆä¸»é”®ç´¢å¼•ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table_name`</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> ( <span class="string">`column`</span> )</span><br></pre></td></tr></tbody></table></figure></div><p>2.æ·»åŠ UNIQUE(å”¯ä¸€ç´¢å¼•)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table_name`</span> <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> ( <span class="string">`column`</span> )</span><br></pre></td></tr></tbody></table></figure></div><p>3.æ·»åŠ INDEX(æ™®é€šç´¢å¼•)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table_name`</span> <span class="keyword">ADD</span> <span class="keyword">INDEX</span> index_name ( <span class="string">`column`</span> )</span><br></pre></td></tr></tbody></table></figure></div><p>4.æ·»åŠ FULLTEXT(å…¨æ–‡ç´¢å¼•)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table_name`</span> <span class="keyword">ADD</span> FULLTEXT ( <span class="string">`column`</span>)</span><br></pre></td></tr></tbody></table></figure></div><p>5.æ·»åŠ å¤šåˆ—ç´¢å¼•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table_name`</span> <span class="keyword">ADD</span> <span class="keyword">INDEX</span> index_name ( <span class="string">`column1`</span>, <span class="string">`column2`</span>, <span class="string">`column3`</span> )</span><br></pre></td></tr></tbody></table></figure></div><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul><li>BenForta. SQL å¿…çŸ¥å¿…ä¼š [M]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2013.</li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¶…è¯¦ç»† Nginx æç®€æ•™ç¨‹</title>
      <link href="/2018/11/15/%E8%B6%85%E8%AF%A6%E7%BB%86%20Nginx%20%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/"/>
      <url>/2018/11/15/%E8%B6%85%E8%AF%A6%E7%BB%86%20Nginx%20%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="è¶…è¯¦ç»†-Nginx-æç®€æ•™ç¨‹"><a href="#è¶…è¯¦ç»†-Nginx-æç®€æ•™ç¨‹" class="headerlink" title="è¶…è¯¦ç»† Nginx æç®€æ•™ç¨‹"></a>è¶…è¯¦ç»† Nginx æç®€æ•™ç¨‹</h1><h3 id="ä»€ä¹ˆæ˜¯Nginx"><a href="#ä»€ä¹ˆæ˜¯Nginx" class="headerlink" title="ä»€ä¹ˆæ˜¯Nginx?"></a>ä»€ä¹ˆæ˜¯Nginx?</h3><p>Nginx (engine x) æ˜¯ä¸€æ¬¾è½»é‡çº§çš„Web æœåŠ¡å™¨ ã€åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ</h3><p>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚</p><p><a href="https://i.imgur.com/A4ix0XJ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/A4ix0XJ.jpg" class="lazyload" title></a></p><h2 id="å®‰è£…ä¸ä½¿ç”¨"><a href="#å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="å®‰è£…ä¸ä½¿ç”¨"></a>å®‰è£…ä¸ä½¿ç”¨</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>nginxå®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="http://nginx.orgï¼Œå‘å¸ƒç‰ˆæœ¬åˆ†ä¸º" target="_blank" rel="noopener">http://nginx.orgï¼Œå‘å¸ƒç‰ˆæœ¬åˆ†ä¸º</a> Linux å’Œ windows ç‰ˆæœ¬ã€‚<br>ä¹Ÿå¯ä»¥ä¸‹è½½æºç ï¼Œç¼–è¯‘åè¿è¡Œã€‚</p><h3 id="ä»æºä»£ç ç¼–è¯‘-Nginx"><a href="#ä»æºä»£ç ç¼–è¯‘-Nginx" class="headerlink" title="ä»æºä»£ç ç¼–è¯‘ Nginx"></a>ä»æºä»£ç ç¼–è¯‘ Nginx</h3><p>æŠŠæºç è§£å‹ç¼©ä¹‹åï¼Œåœ¨ç»ˆç«¯é‡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd C:</span><br><span class="line">cd C: ginx-0.8.54   start nginx</span><br></pre></td></tr></tbody></table></figure></div><p>Nginx / Win32 æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œè€Œé windows æœåŠ¡æ–¹å¼çš„ã€‚æœåŠ¡å™¨æ–¹å¼ç›®å‰è¿˜æ˜¯å¼€å‘å°è¯•ä¸­ã€‚</p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>nginx çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å‡ æ¡å‘½ä»¤ã€‚<br>å¸¸ç”¨åˆ°çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li><p>nginx -s stop ï¼šå¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡ã€‚</p></li><li><p>nginx -s quit ï¼šå¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡ã€‚</p></li><li><p>nginx -s reload ï¼šå› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½ã€‚</p></li><li><p>nginx -s reopen ï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ã€‚</p></li><li><p>nginx -c filename ï¼šä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„ã€‚</p></li><li><p>nginx -t ï¼šä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶ã€‚</p></li><li><p>nginx -vï¼šæ˜¾ç¤º nginx çš„ç‰ˆæœ¬ã€‚</p></li><li><p>nginx -Vï¼šæ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•°ã€‚</p></li></ul><p>å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½æ•²å‘½ä»¤ï¼Œå¯ä»¥åœ¨nginxå®‰è£…ç›®å½•ä¸‹æ–°æ·»ä¸€ä¸ªå¯åŠ¨æ‰¹å¤„ç†æ–‡ä»¶startup.batï¼ŒåŒå‡»å³å¯è¿è¡Œã€‚å†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">rem å¦‚æœå¯åŠ¨å‰å·²ç»å¯åŠ¨nginxå¹¶è®°å½•ä¸‹pidæ–‡ä»¶ï¼Œä¼škillæŒ‡å®šè¿›ç¨‹</span><br><span class="line">nginx.exe -s stop</span><br><span class="line"></span><br><span class="line">rem æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®æ€§</span><br><span class="line">nginx.exe -t -c conf/nginx.conf</span><br><span class="line"></span><br><span class="line">rem æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">nginx.exe -v</span><br><span class="line"></span><br><span class="line">rem æŒ‰ç…§æŒ‡å®šé…ç½®å»å¯åŠ¨nginx</span><br><span class="line">nginx.exe -c conf/nginx.conf</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœæ˜¯è¿è¡Œåœ¨ Linux ä¸‹ï¼Œå†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå¤§åŒå°å¼‚ã€‚</p><h3 id="nginx-é…ç½®å®æˆ˜"><a href="#nginx-é…ç½®å®æˆ˜" class="headerlink" title="nginx é…ç½®å®æˆ˜"></a>nginx é…ç½®å®æˆ˜</h3><p>æˆ‘å§‹ç»ˆè®¤ä¸ºï¼Œå„ç§å¼€å‘å·¥å…·çš„é…ç½®è¿˜æ˜¯ç»“åˆå®æˆ˜æ¥è®²è¿°ï¼Œä¼šè®©äººæ›´æ˜“ç†è§£ã€‚</p><h3 id="httpåå‘ä»£ç†é…ç½®"><a href="#httpåå‘ä»£ç†é…ç½®" class="headerlink" title="httpåå‘ä»£ç†é…ç½®"></a>httpåå‘ä»£ç†é…ç½®</h3><p>æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªå°ç›®æ ‡ï¼šä¸è€ƒè™‘å¤æ‚çš„é…ç½®ï¼Œä»…ä»…æ˜¯å®Œæˆä¸€ä¸ª http åå‘ä»£ç†ã€‚</p><h3 id="nginx-conf-é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š"><a href="#nginx-conf-é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š" class="headerlink" title="nginx.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š"></a>nginx.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</h3><p>æ³¨ï¼šconf / nginx.conf æ˜¯ nginx çš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx -c æŒ‡å®šä½ çš„é…ç½®æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">#è¿è¡Œç”¨æˆ·</span><br><span class="line">#user somebody;</span><br><span class="line"></span><br><span class="line">#å¯åŠ¨è¿›ç¨‹,é€šå¸¸è®¾ç½®æˆå’Œcpuçš„æ•°é‡ç›¸ç­‰</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#å…¨å±€é”™è¯¯æ—¥å¿—</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/error.log;</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/notice.log  notice;</span><br><span class="line">error_log  D:/Tools/nginx-1.10.1/logs/info.log  info;</span><br><span class="line"></span><br><span class="line">#PIDæ–‡ä»¶ï¼Œè®°å½•å½“å‰å¯åŠ¨çš„nginxçš„è¿›ç¨‹ID</span><br><span class="line">pid        D:/Tools/nginx-1.10.1/logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#å·¥ä½œæ¨¡å¼åŠè¿æ¥æ•°ä¸Šé™</span><br><span class="line">events {</span><br><span class="line">   worker_connections 1024;    #å•ä¸ªåå°worker processè¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#è®¾å®šhttpæœåŠ¡å™¨ï¼Œåˆ©ç”¨å®ƒçš„åå‘ä»£ç†åŠŸèƒ½æä¾›è´Ÿè½½å‡è¡¡æ”¯æŒ</span><br><span class="line">http {</span><br><span class="line">   #è®¾å®šmimeç±»å‹(é‚®ä»¶æ”¯æŒç±»å‹),ç±»å‹ç”±mime.typesæ–‡ä»¶å®šä¹‰</span><br><span class="line">   include       D:/Tools/nginx-1.10.1/conf/mime.types;</span><br><span class="line">   default_type  application/octet-stream;</span><br><span class="line">   </span><br><span class="line">   #è®¾å®šæ—¥å¿—</span><br><span class="line">   log_format  main  '[$remote_addr] - [$remote_user] [$time_local] "$request" '</span><br><span class="line">                     '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                     '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line">                     </span><br><span class="line">   access_log    D:/Tools/nginx-1.10.1/logs/access.log main;</span><br><span class="line">   rewrite_log     on;</span><br><span class="line">   </span><br><span class="line">   #sendfile æŒ‡ä»¤æŒ‡å®š nginx æ˜¯å¦è°ƒç”¨ sendfile å‡½æ•°ï¼ˆzero copy æ–¹å¼ï¼‰æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨ï¼Œ</span><br><span class="line">   #å¿…é¡»è®¾ä¸º on,å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸º offï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„uptime.</span><br><span class="line">   sendfile        on;</span><br><span class="line">   #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">   #è¿æ¥è¶…æ—¶æ—¶é—´</span><br><span class="line">   keepalive_timeout  120;</span><br><span class="line">   tcp_nodelay        on;</span><br><span class="line">   </span><br><span class="line">   #gzipå‹ç¼©å¼€å…³</span><br><span class="line">   #gzip  on;</span><br><span class="line"></span><br><span class="line">   #è®¾å®šå®é™…çš„æœåŠ¡å™¨åˆ—è¡¨ </span><br><span class="line">   upstream zp_server1{</span><br><span class="line">       server 127.0.0.1:8089;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   #HTTPæœåŠ¡å™¨</span><br><span class="line">   server {</span><br><span class="line">       #ç›‘å¬80ç«¯å£ï¼Œ80ç«¯å£æ˜¯çŸ¥åç«¯å£å·ï¼Œç”¨äºHTTPåè®®</span><br><span class="line">       listen       80;</span><br><span class="line">       </span><br><span class="line">       #å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span><br><span class="line">       server_name  www.javastack.cn;</span><br><span class="line">       </span><br><span class="line">       #é¦–é¡µ</span><br><span class="line">       index index.html</span><br><span class="line">       </span><br><span class="line">       #æŒ‡å‘webappçš„ç›®å½•</span><br><span class="line">       root D:_WorkspaceProjectgithubzpSpringNotesspring-securityspring-shirosrcmainwebapp;</span><br><span class="line">       </span><br><span class="line">       #ç¼–ç æ ¼å¼</span><br><span class="line">       charset utf-8;</span><br><span class="line">       </span><br><span class="line">       #ä»£ç†é…ç½®å‚æ•°</span><br><span class="line">       proxy_connect_timeout 180;</span><br><span class="line">       proxy_send_timeout 180;</span><br><span class="line">       proxy_read_timeout 180;</span><br><span class="line">       proxy_set_header Host $host;</span><br><span class="line">       proxy_set_header X-Forwarder-For $remote_addr;</span><br><span class="line"></span><br><span class="line">       #åå‘ä»£ç†çš„è·¯å¾„ï¼ˆå’Œupstreamç»‘å®šï¼‰ï¼Œlocation åé¢è®¾ç½®æ˜ å°„çš„è·¯å¾„</span><br><span class="line">       location / {</span><br><span class="line">           proxy_pass http://zp_server1;</span><br><span class="line">       } </span><br><span class="line"></span><br><span class="line">       #é™æ€æ–‡ä»¶ï¼Œnginxè‡ªå·±å¤„ç†</span><br><span class="line">       location ~ ^/(images|javascript|js|css|flash|media|static)/ {</span><br><span class="line">           root D:_WorkspaceProjectgithubzpSpringNotesspring-securityspring-shirosrcmainwebappiews;</span><br><span class="line">           #è¿‡æœŸ30å¤©ï¼Œé™æ€æ–‡ä»¶ä¸æ€ä¹ˆæ›´æ–°ï¼Œè¿‡æœŸå¯ä»¥è®¾å¤§ä¸€ç‚¹ï¼Œå¦‚æœé¢‘ç¹æ›´æ–°ï¼Œåˆ™å¯ä»¥è®¾ç½®å¾—å°ä¸€ç‚¹ã€‚</span><br><span class="line">           expires 30d;</span><br><span class="line">       }</span><br><span class="line">   </span><br><span class="line">       #è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€</span><br><span class="line">       location /NginxStatus {</span><br><span class="line">           stub_status           on;</span><br><span class="line">           access_log            on;</span><br><span class="line">           auth_basic            "NginxStatus";</span><br><span class="line">           auth_basic_user_file  conf/htpasswd;</span><br><span class="line">       }</span><br><span class="line">   </span><br><span class="line">       #ç¦æ­¢è®¿é—® .htxxx æ–‡ä»¶</span><br><span class="line">       location ~ /.ht {</span><br><span class="line">           deny all;</span><br><span class="line">       }</span><br><span class="line">       </span><br><span class="line">       #é”™è¯¯å¤„ç†é¡µé¢ï¼ˆå¯é€‰æ‹©æ€§é…ç½®ï¼‰</span><br><span class="line">       #error_page   404              /404.html;</span><br><span class="line">       #error_page   500 502 503 504  /50x.html;</span><br><span class="line">       #location = /50x.html {</span><br><span class="line">       #    root   html;</span><br><span class="line">       #}</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥è¯•è¯•å§ï¼š</p><p>å¯åŠ¨ webappï¼Œæ³¨æ„å¯åŠ¨ç»‘å®šçš„ç«¯å£è¦å’Œnginxä¸­çš„ upstream è®¾ç½®çš„ç«¯å£ä¿æŒä¸€è‡´ã€‚</p><p>æ›´æ”¹ hostï¼š</p><p>åœ¨ C:Windows\System32\drivers\etc ç›®å½•ä¸‹çš„hostæ–‡ä»¶ä¸­æ·»åŠ ä¸€æ¡DNS è®°å½•127.0.0.1 <a href="http://www.javastack.cn" target="_blank" rel="noopener">www.javastack.cn</a> å¯åŠ¨å‰æ–‡ä¸­ startup.bat çš„å‘½ä»¤</p><p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://www.javastack.cnï¼Œä¸å‡ºæ„å¤–ï¼Œå·²ç»å¯ä»¥è®¿é—®äº†ã€‚" target="_blank" rel="noopener">www.javastack.cnï¼Œä¸å‡ºæ„å¤–ï¼Œå·²ç»å¯ä»¥è®¿é—®äº†ã€‚</a></p><h3 id="è´Ÿè½½å‡è¡¡é…ç½®"><a href="#è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="è´Ÿè½½å‡è¡¡é…ç½®"></a>è´Ÿè½½å‡è¡¡é…ç½®</h3><p>ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œä»£ç†ä»…ä»…æŒ‡å‘ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p><p>ä½†æ˜¯ï¼Œç½‘ç«™åœ¨å®é™…è¿è¥è¿‡ç¨‹ä¸­ï¼Œå¤šåŠéƒ½æ˜¯æœ‰å¤šå°æœåŠ¡å™¨è¿è¡Œç€åŒæ ·çš„appï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡æ¥åˆ†æµã€‚</p><p>nginxä¹Ÿå¯ä»¥å®ç°ç®€å•çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p><p>å‡è®¾è¿™æ ·ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šå°†åº”ç”¨éƒ¨ç½²åœ¨ 192.168.1.11:80ã€192.168.1.12:80ã€192.168.1.13:80 ä¸‰å°linuxç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šã€‚ç½‘ç«™åŸŸåå« <a href="http://www.javastack.cnï¼Œå…¬ç½‘IPä¸º" target="_blank" rel="noopener">www.javastack.cnï¼Œå…¬ç½‘IPä¸º</a> 192.168.1.11ã€‚åœ¨å…¬ç½‘IPæ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½² nginxï¼Œå¯¹æ‰€æœ‰è¯·æ±‚åšè´Ÿè½½å‡è¡¡å¤„ç†ã€‚</p><p>nginx.conf é…ç½®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">http {</span><br><span class="line">    #è®¾å®šmimeç±»å‹,ç±»å‹ç”±mime.typeæ–‡ä»¶å®šä¹‰</span><br><span class="line">   include       /etc/nginx/mime.types;</span><br><span class="line">   default_type  application/octet-stream;</span><br><span class="line"><span class="meta">   #</span><span class="bash">è®¾å®šæ—¥å¿—æ ¼å¼</span></span><br><span class="line">   access_log    /var/log/nginx/access.log;</span><br><span class="line"></span><br><span class="line"><span class="meta">   #</span><span class="bash">è®¾å®šè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨åˆ—è¡¨</span></span><br><span class="line">   upstream load_balance_server {</span><br><span class="line">       #weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§</span><br><span class="line">       server 192.168.1.11:80   weight=5;</span><br><span class="line">       server 192.168.1.12:80   weight=1;</span><br><span class="line">       server 192.168.1.13:80   weight=6;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash">HTTPæœåŠ¡å™¨</span></span><br><span class="line">  server {</span><br><span class="line">       #ä¾¦å¬80ç«¯å£</span><br><span class="line">       listen       80;</span><br><span class="line">       </span><br><span class="line">       #å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span><br><span class="line">       server_name  www.javastack.cn;</span><br><span class="line"></span><br><span class="line">       #å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡è¯·æ±‚</span><br><span class="line">       location / {</span><br><span class="line">           root        /root;                 #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span><br><span class="line">           index       index.html index.htm;  #å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span><br><span class="line">           proxy_pass  http://load_balance_server ;#è¯·æ±‚è½¬å‘load_balance_server å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">           #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®(å¯é€‰æ‹©æ€§é…ç½®)</span><br><span class="line">           #proxy_redirect off;</span><br><span class="line">           proxy_set_header Host $host;</span><br><span class="line">           proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">           #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP</span><br><span class="line">           proxy_set_header X-Forwarded-For $remote_addr;</span><br><span class="line">           proxy_connect_timeout 90;          #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)</span><br><span class="line">           proxy_send_timeout 90;             #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)</span><br><span class="line">           proxy_read_timeout 90;             #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)</span><br><span class="line">           proxy_buffer_size 4k;              #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°</span><br><span class="line">           proxy_buffers 4 32k;               #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®</span><br><span class="line">           proxy_busy_buffers_size 64k;       #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰</span><br><span class="line">           proxy_temp_file_write_size 64k;    #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ </span><br><span class="line">           </span><br><span class="line">           client_max_body_size 10m;          #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°</span><br><span class="line">           client_body_buffer_size 128k;      #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="ç½‘ç«™æœ‰å¤šä¸ªwebappçš„é…ç½®"><a href="#ç½‘ç«™æœ‰å¤šä¸ªwebappçš„é…ç½®" class="headerlink" title="ç½‘ç«™æœ‰å¤šä¸ªwebappçš„é…ç½®"></a>ç½‘ç«™æœ‰å¤šä¸ªwebappçš„é…ç½®</h3><p>å½“ä¸€ä¸ªç½‘ç«™åŠŸèƒ½è¶Šæ¥è¶Šä¸°å¯Œæ—¶ï¼Œå¾€å¾€éœ€è¦å°†ä¸€äº›åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—å‰¥ç¦»å‡ºæ¥ï¼Œç‹¬ç«‹ç»´æŠ¤ã€‚è¿™æ ·çš„è¯ï¼Œé€šå¸¸ï¼Œä¼šæœ‰å¤šä¸ª webappã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ <a href="http://www.javastack.cn" target="_blank" rel="noopener">www.javastack.cn</a> ç«™ç‚¹æœ‰å¥½å‡ ä¸ªwebappï¼Œfinanceï¼ˆé‡‘èï¼‰ã€productï¼ˆäº§å“ï¼‰ã€adminï¼ˆç”¨æˆ·ä¸­å¿ƒï¼‰ã€‚è®¿é—®è¿™äº›åº”ç”¨çš„æ–¹å¼é€šè¿‡ä¸Šä¸‹æ–‡(context)æ¥è¿›è¡ŒåŒºåˆ†:</p><ul><li><p><a href="http://www.javastack.cn/finance/" target="_blank" rel="noopener">www.javastack.cn/finance/</a></p></li><li><p><a href="http://www.javastack.cn/product/" target="_blank" rel="noopener">www.javastack.cn/product/</a></p></li><li><p><a href="http://www.javastack.cn/admin/" target="_blank" rel="noopener">www.javastack.cn/admin/</a></p></li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼Œhttpçš„é»˜è®¤ç«¯å£å·æ˜¯80ï¼Œå¦‚æœåœ¨ä¸€å°æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨è¿™3ä¸ª webapp åº”ç”¨ï¼Œéƒ½ç”¨80ç«¯å£ï¼Œè‚¯å®šæ˜¯ä¸æˆçš„ã€‚æ‰€ä»¥ï¼Œè¿™ä¸‰ä¸ªåº”ç”¨éœ€è¦åˆ†åˆ«ç»‘å®šä¸åŒçš„ç«¯å£å·ã€‚</p><p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œç”¨æˆ·åœ¨å®é™…è®¿é—® <a href="http://www.javastack.cn" target="_blank" rel="noopener">www.javastack.cn</a> ç«™ç‚¹æ—¶ï¼Œè®¿é—®ä¸åŒ webappï¼Œæ€»ä¸ä¼šè¿˜å¸¦ç€å¯¹åº”çš„ç«¯å£å·å»è®¿é—®å§ã€‚æ‰€ä»¥ï¼Œä½ å†æ¬¡éœ€è¦ç”¨åˆ°åå‘ä»£ç†æ¥åšå¤„ç†ã€‚</p><p>é…ç½®ä¹Ÿä¸éš¾ï¼Œæ¥çœ‹çœ‹æ€ä¹ˆåšå§ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">http {</span><br><span class="line"><span class="meta">   #</span><span class="bash">æ­¤å¤„çœç•¥ä¸€äº›åŸºæœ¬é…ç½®</span></span><br><span class="line">   </span><br><span class="line">   upstream product_server{</span><br><span class="line">       server www.javastack.cn:8081;</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   upstream admin_server{</span><br><span class="line">       server www.javastack.cn:8082;</span><br><span class="line">   }</span><br><span class="line">   </span><br><span class="line">   upstream finance_server{</span><br><span class="line">       server www.javastack.cn:8083;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   server {</span><br><span class="line">       #æ­¤å¤„çœç•¥ä¸€äº›åŸºæœ¬é…ç½®</span><br><span class="line">       #é»˜è®¤æŒ‡å‘productçš„server</span><br><span class="line">       location / {</span><br><span class="line">           proxy_pass http://product_server;</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       location /product/{</span><br><span class="line">           proxy_pass http://product_server;</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       location /admin/ {</span><br><span class="line">           proxy_pass http://admin_server;</span><br><span class="line">       }</span><br><span class="line">       </span><br><span class="line">       location /finance/ {</span><br><span class="line">           proxy_pass http://finance_server;</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="httpsåå‘ä»£ç†é…ç½®"><a href="#httpsåå‘ä»£ç†é…ç½®" class="headerlink" title="httpsåå‘ä»£ç†é…ç½®"></a>httpsåå‘ä»£ç†é…ç½®</h3><p>ä¸€äº›å¯¹å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç«™ç‚¹ï¼Œå¯èƒ½ä¼šä½¿ç”¨ HTTPSï¼ˆä¸€ç§ä½¿ç”¨sslé€šä¿¡æ ‡å‡†çš„å®‰å…¨HTTPåè®®ï¼‰ã€‚</p><p>è¿™é‡Œä¸ç§‘æ™® HTTP åè®®å’Œ SSL æ ‡å‡†ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ nginx é…ç½® https éœ€è¦çŸ¥é“å‡ ç‚¹ï¼š</p><ul><li><p>HTTPS çš„å›ºå®šç«¯å£å·æ˜¯ 443ï¼Œä¸åŒäº HTTP çš„ 80 ç«¯å£</p></li><li><p>SSL æ ‡å‡†éœ€è¦å¼•å…¥å®‰å…¨è¯ä¹¦ï¼Œæ‰€ä»¥åœ¨ nginx.conf ä¸­ä½ éœ€è¦æŒ‡å®šè¯ä¹¦å’Œå®ƒå¯¹åº”çš„ key</p></li></ul><p>å…¶ä»–å’Œ http åå‘ä»£ç†åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨ Server éƒ¨åˆ†é…ç½®æœ‰äº›ä¸åŒã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">HTTPæœåŠ¡å™¨</span></span><br><span class="line"> server {</span><br><span class="line">     #ç›‘å¬443ç«¯å£ã€‚443ä¸ºçŸ¥åç«¯å£å·ï¼Œä¸»è¦ç”¨äºHTTPSåè®®</span><br><span class="line">     listen       443 ssl;</span><br><span class="line"></span><br><span class="line">     #å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span><br><span class="line">     server_name  www.javastack.cn;</span><br><span class="line"></span><br><span class="line">     #sslè¯ä¹¦æ–‡ä»¶ä½ç½®(å¸¸è§è¯ä¹¦æ–‡ä»¶æ ¼å¼ä¸ºï¼šcrt/pem)</span><br><span class="line">     ssl_certificate      cert.pem;</span><br><span class="line">     #sslè¯ä¹¦keyä½ç½®</span><br><span class="line">     ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">     #sslé…ç½®å‚æ•°ï¼ˆé€‰æ‹©æ€§é…ç½®ï¼‰</span><br><span class="line">     ssl_session_cache    shared:SSL:1m;</span><br><span class="line">     ssl_session_timeout  5m;</span><br><span class="line">     #æ•°å­—ç­¾åï¼Œæ­¤å¤„ä½¿ç”¨MD5</span><br><span class="line">     ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">     ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">     location / {</span><br><span class="line">         root   /root;</span><br><span class="line">         index  index.html index.htm;</span><br><span class="line">     }</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure></div><h3 id="é™æ€ç«™ç‚¹é…ç½®"><a href="#é™æ€ç«™ç‚¹é…ç½®" class="headerlink" title="é™æ€ç«™ç‚¹é…ç½®"></a>é™æ€ç«™ç‚¹é…ç½®</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®é™æ€ç«™ç‚¹(å³ html æ–‡ä»¶å’Œä¸€å †é™æ€èµ„æº)ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼šå¦‚æœæ‰€æœ‰çš„é™æ€èµ„æºéƒ½æ”¾åœ¨äº† /app/dist ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ nginx.conf ä¸­æŒ‡å®šé¦–é¡µä»¥åŠè¿™ä¸ªç«™ç‚¹çš„ host å³å¯ã€‚</p><p>é…ç½®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events {</span><br><span class="line">   worker_connections  1024;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">http {</span><br><span class="line">   include       mime.types;</span><br><span class="line">   default_type  application/octet-stream;</span><br><span class="line">   sendfile        on;</span><br><span class="line">   keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">   gzip on;</span><br><span class="line">   gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/javascript image/jpeg image/gif image/png;</span><br><span class="line">   gzip_vary on;</span><br><span class="line"></span><br><span class="line">   server {</span><br><span class="line">       listen       80;</span><br><span class="line">       server_name  static.zp.cn;</span><br><span class="line"></span><br><span class="line">       location / {</span><br><span class="line">           root /app/dist;</span><br><span class="line">           index index.html;</span><br><span class="line">           #è½¬å‘ä»»ä½•è¯·æ±‚åˆ° index.html</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åï¼Œæ·»åŠ  HOSTï¼š</p><p>127.0.0.1 static.zp.cnï¼Œæ­¤æ—¶ï¼Œåœ¨æœ¬åœ°æµè§ˆå™¨è®¿é—® static.zp.cn ï¼Œå°±å¯ä»¥è®¿é—®é™æ€ç«™ç‚¹äº†ã€‚</p><h3 id="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><a href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆ" class="headerlink" title="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"></a>è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h3><p>web é¢†åŸŸå¼€å‘ä¸­ï¼Œç»å¸¸é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‰ç«¯å’Œåç«¯åˆ†åˆ«æ˜¯ç‹¬ç«‹çš„ web åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼šåç«¯æ˜¯ Java ç¨‹åºï¼Œå‰ç«¯æ˜¯ React æˆ– Vue åº”ç”¨ï¼Œæ›´å¤šè¯·çœ‹è¿™ç¯‡æ–‡ç« ã€Š<a href="https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247485898&idx=1&sn=32626e4f241d5f04684736b52afafb10&chksm=eb538cfcdc2405ea368fa092c0af8e424ad843198274426cca275acc8ed83d86497ec3a54acc&scene=21#wechat_redirect" target="_blank" rel="noopener">åˆ°åº•ä»€ä¹ˆæ˜¯è·¨åŸŸï¼ŒåŠè§£å†³æ–¹æ¡ˆ</a>ã€‹ã€‚</p><p>å„è‡ªç‹¬ç«‹çš„ web app åœ¨äº’ç›¸è®¿é—®æ—¶ï¼ŒåŠ¿å¿…å­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚è§£å†³è·¨åŸŸé—®é¢˜ä¸€èˆ¬æœ‰ä¸¤ç§æ€è·¯ï¼š</p><h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p>åœ¨åç«¯æœåŠ¡å™¨è®¾ç½® HTTP å“åº”å¤´ï¼ŒæŠŠä½ éœ€è¦è¿è¡Œè®¿é—®çš„åŸŸååŠ å…¥åŠ å…¥ Access-Control-Allow-Origin ä¸­ã€‚</p><h3 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h3><p>æŠŠåç«¯æ ¹æ®è¯·æ±‚ï¼Œæ„é€ jsonæ•°æ®ï¼Œå¹¶è¿”å›ï¼Œå‰ç«¯ç”¨ jsonp è·¨åŸŸã€‚</p><p>è¿™ä¸¤ç§æ€è·¯ï¼Œæœ¬æ–‡ä¸å±•å¼€è®¨è®ºã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œnginx æ ¹æ®ç¬¬ä¸€ç§æ€è·¯ï¼Œä¹Ÿæä¾›äº†ä¸€ç§è§£å†³è·¨åŸŸçš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä¸¾ä¾‹ï¼š<a href="http://www.javastack.cn" target="_blank" rel="noopener">www.javastack.cn</a> ç½‘ç«™æ˜¯ç”±ä¸€ä¸ªå‰ç«¯ app ï¼Œä¸€ä¸ªåç«¯ app ç»„æˆçš„ã€‚å‰ç«¯ç«¯å£å·ä¸º 9000ï¼Œ åç«¯ç«¯å£å·ä¸º 8080ã€‚</p><p>å‰ç«¯å’Œåç«¯å¦‚æœä½¿ç”¨ http è¿›è¡Œäº¤äº’æ—¶ï¼Œè¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå› ä¸ºå­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚æ¥çœ‹çœ‹ï¼Œnginx æ˜¯æ€ä¹ˆè§£å†³çš„å§ï¼š</p><p>é¦–å…ˆï¼Œåœ¨ enable-cors.conf æ–‡ä»¶ä¸­è®¾ç½® cors ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> allow origin list</span></span><br><span class="line">set $ACAO '*';</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> single origin</span></span><br><span class="line">if ($http_origin ~* (www.javastack.cn)$) {</span><br><span class="line"> set $ACAO $http_origin;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">if ($cors = "trueget") {</span><br><span class="line">   add_header 'Access-Control-Allow-Origin' "$http_origin";</span><br><span class="line">   add_header 'Access-Control-Allow-Credentials' 'true';</span><br><span class="line">   add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';</span><br><span class="line">   add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">if ($request_method = 'OPTIONS') {</span><br><span class="line"> set $cors "${cors}options";</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">if ($request_method = 'GET') {</span><br><span class="line"> set $cors "${cors}get";</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">if ($request_method = 'POST') {</span><br><span class="line"> set $cors "${cors}post";</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„æœåŠ¡å™¨ä¸­ include enable-cors.conf æ¥å¼•å…¥è·¨åŸŸé…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># ----------------------------------------------------</span><br><span class="line"># æ­¤æ–‡ä»¶ä¸ºé¡¹ç›® nginx é…ç½®ç‰‡æ®µ</span><br><span class="line"># å¯ä»¥ç›´æ¥åœ¨ nginx config ä¸­ includeï¼ˆæ¨èï¼‰</span><br><span class="line"># æˆ–è€… copy åˆ°ç°æœ‰ nginx ä¸­ï¼Œè‡ªè¡Œé…ç½®</span><br><span class="line"># www.javastack.com åŸŸåéœ€é…åˆ dns hosts è¿›è¡Œé…ç½®</span><br><span class="line"># å…¶ä¸­ï¼Œapi å¼€å¯äº† corsï¼Œéœ€é…åˆæœ¬ç›®å½•ä¸‹å¦ä¸€ä»½é…ç½®æ–‡ä»¶</span><br><span class="line"># ----------------------------------------------------</span><br><span class="line">upstream front_server{</span><br><span class="line"> server www.javastack.cn:9000;</span><br><span class="line">}</span><br><span class="line">upstream api_server{</span><br><span class="line"> server www.javastack.cn:8080;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">server {</span><br><span class="line"> listen       80;</span><br><span class="line"> server_name  www.javastack.cn;</span><br><span class="line"></span><br><span class="line"> location ~ ^/api/ {</span><br><span class="line">   include enable-cors.conf;</span><br><span class="line">   proxy_pass http://api_server;</span><br><span class="line">   rewrite "^/api/(.*)$" /$1 break;</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line"> location ~ ^/ {</span><br><span class="line">   proxy_pass http://front_server;</span><br><span class="line"> }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>åˆ°æ­¤ï¼Œå°±å®Œæˆäº†ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå…«ä¸ªè®©ä½ ç»ˆç”Ÿå—ç”¨çš„æ—¶é—´ç®¡ç†æŠ€å·§</title>
      <link href="/2018/11/09/%E5%8D%81%E5%85%AB%E4%B8%AA%E8%AE%A9%E4%BD%A0%E7%BB%88%E7%94%9F%E5%8F%97%E7%94%A8%E7%9A%84%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%E6%8A%80%E5%B7%A7%20/"/>
      <url>/2018/11/09/%E5%8D%81%E5%85%AB%E4%B8%AA%E8%AE%A9%E4%BD%A0%E7%BB%88%E7%94%9F%E5%8F%97%E7%94%A8%E7%9A%84%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%E6%8A%80%E5%B7%A7%20/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>å¦‚æœä½ æ²¡æœ‰æŒ‰æ—¶å®ŒæˆæŸé¡¹ä»»åŠ¡ï¼Œé‚£æ˜¯å› ä¸ºä½ æ²¡æœ‰æŠŠè¿™ä¸ªä»»åŠ¡çœ‹å¾—éå¸¸ç´§æ€¥</p><p>æ¯å¤©åªè®¡åˆ’4-5å°æ—¶ç”¨äºçœŸæ­£çš„å·¥ä½œ</p><p>å½“ä½ åœ¨çŠ¶æ€æ—¶ï¼Œå°±åŠªåŠ›å·¥ä½œï¼Œä¸åœ¨çŠ¶æ€æ—¶ï¼Œå°±å¥½å¥½ä¼‘æ¯</p><p>åœ¨æœ‰é™çš„æ—¶é—´å†…ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæ›´ä¸“æ³¨ã€æ•ˆç‡æ›´é«˜</p><p>ä¸è¦åŒæ—¶å®‰æ’å¾ˆå¤šä»¶äº‹æƒ…ï¼Œè¿™åªä¼šæ¶ˆè€—æ³¨æ„åŠ›</p><p>å·¥ä½œæ—¶é—´è¶Šé•¿ï¼Œå¹¶ä¸ç­‰äºæ•ˆç‡è¶Šé«˜</p><p>è¿›å…¥å·¥ä½œçŠ¶æ€çš„æœ€ä½³æ–¹å¼å°±æ˜¯å·¥ä½œï¼Œä»å°ä»»åŠ¡å¼€å§‹åšèµ·ï¼Œè®©å·¥ä½œè¿è½¬èµ·æ¥</p><p>åŠ¨æ‰‹åšï¼Œèƒœè¿‡ä»»ä½•å®Œç¾çš„æƒ³è±¡</p><p>æ¸…æ¥šå½“å¤©å¿…é¡»å®Œæˆçš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Œåªå»åšé‚£ä»¶å½±å“æœ€å¤§çš„äº‹</p><p>ç•ªèŒ„å·¥ä½œæ³•ï¼šå·¥ä½œâ€”æ”¾æ¾â€”å·¥ä½œ=é«˜æ•ˆ</p><p>æŠŠä¸åˆ‡å®é™…çš„ä»»åŠ¡åˆ†å‰²æˆåˆç†çš„å°ä»»åŠ¡ï¼Œåªè¦æ¯å¤©éƒ½å®Œæˆå°ä»»åŠ¡ï¼Œä½ å°±ä¼šè¶Šæ¥è¶Šæ¥è¿‘é‚£ä¸ªå¤§ç›®æ ‡</p><p>ç»™æ‰€æœ‰äº‹æƒ…éƒ½è®¾å®šä¸€ä¸ªæœŸé™ï¼Œä¸è¦è®©å·¥ä½œæ— æœŸé™çš„è¿›è¡Œä¸‹å»</p><p>å¦‚æœæŸä»¶äº‹åˆ«äººåšä¹Ÿå¯ä»¥åšåˆ°å…«æˆï¼Œé‚£å°±äº¤ç»™åˆ«äººåšå§ã€‚è¦å­¦ä¼šæˆæƒã€å€Ÿç”¨ä»–äººçš„åŠ›é‡ã€‚</p><p>å¿˜è®°æ˜¨å¤©çš„æˆè´¥ï¼Œåªè€ƒè™‘ä»Šå¤©å’Œæ˜å¤©</p><p>å†™ä¸‹é‚£äº›ä¼šå½±å“ä½ æ³¨æ„åŠ›çš„ä¸œè¥¿ï¼Œèƒ¡æ€ä¹±æƒ³çš„ä¸œè¥¿æˆ–è€…æ–°çš„ç‚¹å­</p><p>å¤šåšç¬”è®°ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´</p><p>ä»æ¥æ²¡æœ‰ä¸¤ä¸ªä»»åŠ¡ä¼šæœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œæ€»æœ‰ä¸€ä¸ªæ›´é‡è¦ã€‚ä»”ç»†è€ƒè™‘å¾…åŠäº‹æƒ…åˆ—è¡¨</p><p>é€‚å½“ä¼‘æ¯ã€‚</p><p>æ–‡ç« å‡ºå¤„ï¼š<a href="http://codefun007.xyz/view/article_detail.htm?id=127&tdsourcetag=s_pcqq_aiomsg" target="_blank" rel="noopener">åå…«ä¸ªè®©ä½ ç»ˆç”Ÿå—ç”¨çš„æ—¶é—´ç®¡ç†æŠ€å·§ </a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</title>
      <link href="/2018/11/09/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F/"/>
      <url>/2018/11/09/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="å¾®ä¿¡æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#å¾®ä¿¡æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="å¾®ä¿¡æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>å¾®ä¿¡æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h1><p>ç½‘é¡µç‰ˆå¾®ä¿¡åˆšæ¨å‡ºæ—¶ï¼Œæ— æ•°äººè¢«å®ƒçš„ç™»å½•æ–¹å¼æƒŠè‰³äº†ä¸€ä¸‹ï¼Œä¸éœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæ‰“å¼€æ‰‹æœºå¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œä¾¿è‡ªåŠ¨ç™»å½•ã€‚ä»åŸç†ä¸Šè®²ï¼ŒäºŒç»´ç åªèƒ½æ˜¯ä¸€æ®µæ–‡æœ¬çš„ç¼–ç ï¼Œå¦‚ä½•ç”¨å®ƒå®ç°å¿«æ·ç™»å½•çš„å‘¢ï¼Ÿ</p><h3 id="æ‰“å¼€ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢ï¼š"><a href="#æ‰“å¼€ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢ï¼š" class="headerlink" title="æ‰“å¼€ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢ï¼š"></a>æ‰“å¼€ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢ï¼š</h3><p><a href="https://i.imgur.com/LnSAGuJ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/LnSAGuJ.jpg" class="lazyload" title></a></p><p>å¾®ä¿¡æ‰«ç ç•Œé¢</p><p>å¦‚æœä½ ç”¨æˆ‘æŸ¥æŸ¥ã€æ”¯ä»˜å®ã€æ–°æµªå¾®åšç­‰è½¯ä»¶æ‰«ç äºŒç»´ç ï¼Œä½ ä¼šå‘ç°æ­¤äºŒç»´ç è§£æå‡ºæ¥æ˜¯å¦‚ä¸‹çš„ç½‘å€ï¼š</p><blockquote></blockquote><p><a href="https://login.weixin.qq.com/l/obsbQ-Dzag==" target="_blank" rel="noopener">https://login.weixin.qq.com/l/obsbQ-Dzag==</a></p><p>æ¥ä¸‹æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹æ‰«ç ç™»å½•å…·ä½“çš„æ¯ä¸ªæ­¥éª¤ï¼š<br><a href="https://i.imgur.com/DIyZ93O.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/DIyZ93O.jpg" class="lazyload" title></a></p><h3 id="æ‰«ç ç™»å½•å®Œæ•´æµç¨‹"><a href="#æ‰«ç ç™»å½•å®Œæ•´æµç¨‹" class="headerlink" title="æ‰«ç ç™»å½•å®Œæ•´æµç¨‹"></a>æ‰«ç ç™»å½•å®Œæ•´æµç¨‹</h3><ul><li><p>â‘ ï¼šç”¨æˆ· A è®¿é—®å¾®ä¿¡ç½‘é¡µç‰ˆï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¸ºè¿™ä¸ªä¼šè¯ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ IDï¼Œä¸Šé¢çš„ URL ä¸­ obsbQ-Dzag== å°±æ˜¯è¿™ä¸ª IDï¼Œæ­¤æ—¶ç³»ç»Ÿå¹¶ä¸çŸ¥é“è®¿é—®è€…æ˜¯è°ã€‚</p></li><li><p>â‘¡ï¼šç”¨æˆ·Aæ‰“å¼€è‡ªå·±çš„æ‰‹æœºå¾®ä¿¡å¹¶æ‰«æè¿™ä¸ªäºŒç»´ç ï¼Œå¹¶æç¤ºç”¨æˆ·æ˜¯å¦ç¡®è®¤ç™»å½•ã€‚</p></li><li><p>â‘¢ï¼šæ‰‹æœºä¸Šçš„å¾®ä¿¡æ˜¯ç™»å½•çŠ¶æ€ï¼Œç”¨æˆ·ç‚¹å‡»ç¡®è®¤ç™»å½•åï¼Œæ‰‹æœºä¸Šçš„å¾®ä¿¡å®¢æˆ·ç«¯å°†å¾®ä¿¡è´¦å·å’Œè¿™ä¸ªæ‰«æå¾—åˆ°çš„ ID ä¸€èµ·æäº¤åˆ°æœåŠ¡å™¨</p></li><li><p>â‘£ï¼šæœåŠ¡å™¨å°†è¿™ä¸ª ID å’Œç”¨æˆ· A çš„å¾®ä¿¡å·ç»‘å®šåœ¨ä¸€èµ·ï¼Œå¹¶é€šçŸ¥ç½‘é¡µç‰ˆå¾®ä¿¡ï¼Œè¿™ä¸ª ID å¯¹åº”çš„å¾®ä¿¡å·ä¸ºç”¨æˆ· Aï¼Œç½‘é¡µç‰ˆå¾®ä¿¡åŠ è½½ç”¨æˆ· A çš„å¾®ä¿¡ä¿¡æ¯ï¼Œè‡³æ­¤ï¼Œæ‰«ç ç™»å½•å…¨éƒ¨æµç¨‹å®Œæˆ</p></li></ul><p>æ‰«ç ç™»å½•çœ‹èµ·æ¥ç¥å¥‡ï¼Œä¸»è¦æ˜¯å› ä¸ºå¾®ä¿¡ APP æ‰«è‡ªå®¶çš„ç ä¼šåšä¸€äº›æ™®é€šäºŒç»´ç è½¯ä»¶ä¸ä¼šåšçš„é¢å¤–çš„æ“ä½œï¼Œé‚£å°±æ˜¯å°†å½“å‰å·²ç™»å½•çš„å¾®ä¿¡å’Œæ‰«å‡ºæ¥çš„ ID æäº¤åˆ°å¾®ä¿¡æœåŠ¡å™¨ï¼Œç±»ä¼¼çš„åº”ç”¨è¿˜æœ‰æ‰«ç æ”¯ä»˜ã€æ‰«ç åŠ å…¬ä¼—å·ç­‰åŠŸèƒ½ã€‚</p><h3 id="æ‰«ç ç™»å½•åŸç†"><a href="#æ‰«ç ç™»å½•åŸç†" class="headerlink" title="æ‰«ç ç™»å½•åŸç†"></a>æ‰«ç ç™»å½•åŸç†</h3><p>æ‰«ç ç™»å½•å¤§æ¦‚çš„æ€è·¯æ˜¯ï¼šå¾®ä¿¡æ‰‹æœºå®¢æˆ·ç«¯ä»ç½‘é¡µäºŒç»´ç é‡Œé¢å¾—åˆ°ä¸€äº›ä¿¡æ¯ï¼Œç„¶åå‘é€ç»™ç½‘é¡µå¾®ä¿¡çš„æœåŠ¡å™¨ï¼Œç½‘é¡µæœåŠ¡å™¨éªŒè¯ä¿¡æ¯å¹¶å“åº”ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å€ŸåŠ©ç«ç‹æµè§ˆå™¨æä¾›çš„Firebugå·¥å…·çœ‹çœ‹ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å„¿å§ï¼</p><p>1.æ¯æ¬¡æ‰“å¼€å¾®ä¿¡ç½‘é¡µç‰ˆçš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå«æœ‰å”¯ä¸€uidçš„äºŒç»´ç ï¼Œè€Œä¸”æ¯æ¬¡åˆ·æ–°åéƒ½ä¼šæ”¹å˜ã€‚è¿™æ ·å¯ä»¥ä¿è¯ä¸€ä¸ªuidåªå¯ä»¥ç»‘å®šä¸€ä¸ªè´¦å·å’Œå¯†ç ï¼Œç¡®å®šç™»å½•ç”¨æˆ·çš„å”¯ä¸€æ€§ã€‚å¯ä»¥é€šè¿‡æ‰‹æœºä¸Šçš„UCæµè§ˆå™¨æä¾›çš„æ‰«ç åŠŸèƒ½æŸ¥çœ‹äºŒç»´ç é‡Œé¢çš„ä¿¡æ¯ï¼Œä½†å¹¶ä¸ä¼šè‡ªåŠ¨æ‰“å¼€è¯¥åœ°å€ã€‚</p><p>æˆ‘åˆ·æ–°ä¸‰æ¬¡ï¼Œæ‰«æç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­æœ€åé¢é‚£ä¸²æ•°å­—å°±æ˜¯uidï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ https://login.weixin.qq.com/l/48e24d66bdbc4f</span><br><span class="line">2ï¼‰ https://login.weixin.qq.com/l/0787fb4fa7ad4c</span><br><span class="line">3ï¼‰ https://login.weixin.qq.com/l/92781a4a7f1c47</span><br></pre></td></tr></tbody></table></figure></div><p>é€šè¿‡æŸ¥çœ‹ç½‘é¡µæºç ï¼Œè¿™ä¸ªé¡µé¢åœ¨åŠ è½½å®Œæ¯•æ—¶ï¼Œå·²ç»æŠŠå¾ˆå¤šç™»å½•åæ‰éœ€è¦çš„ç›¸å…³èµ„æºéƒ½é¢„å…ˆåŠ è½½è¿›æ¥äº†ï¼Œæ‰€ä»¥ç™»å½•ç”¨æˆ·å¾—åˆ°ç¡®è®¤åå±•ç¤ºç”¨æˆ·ä¿¡æ¯çš„é€Ÿåº¦å¾ˆå¿«ã€‚</p><p>2.é™¤äº†è¿”å›å”¯ä¸€çš„uidï¼Œå®é™…ä¸Šæ‰“å¼€è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œæµè§ˆå™¨è·ŸæœåŠ¡å™¨è¿˜åˆ›å»ºäº†ä¸€ä¸ªé•¿è¿æ¥ï¼Œè¯·æ±‚uidçš„æ‰«æè®°å½•ã€‚å¦‚æœæ²¡æœ‰ï¼Œåœ¨ç‰¹å®šæ—¶é•¿åï¼ˆç›®å‰æ˜¯27ç§’å·¦å³ï¼‰ä¼šæ¥åˆ°çŠ¶æ€ç 408ï¼ˆè¯·æ±‚è¶…æ—¶ï¼‰ï¼Œè¡¨ç¤ºåº”è¯¥ç»§ç»­ä¸‹ä¸€æ¬¡è¯·æ±‚ï¼›å¦‚æœæ¥åˆ°çŠ¶æ€ç 201ï¼ˆæœåŠ¡å™¨åˆ›å»ºæ–°èµ„æºæˆåŠŸï¼‰ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ‰«æäº†è¯¥äºŒç»´ç ã€‚</p><p>è¯·æ±‚è¶…æ—¶ï¼šè¿”å›408<br><a href="https://i.imgur.com/qmBqD85.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/qmBqD85.jpg" class="lazyload" title></a></p><p>æ‰«ç æˆåŠŸï¼šè¿”å›201<br><a href="https://i.imgur.com/kFgYI0r.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/kFgYI0r.jpg" class="lazyload" title></a></p><p>é•¿è½®è¯¢ä»£ç ç»“æ„ï¼š<br><a href="https://i.imgur.com/igTk5dR.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/igTk5dR.jpg" class="lazyload" title></a></p><p>3.å½“ç”¨æˆ·ä½¿ç”¨ç™»å½•åçš„å¾®ä¿¡æ‰«æäºŒç»´ç çš„æ—¶å€™ï¼Œä¼šå°†uidå’Œæ‰‹æœºå¾®ä¿¡äº§ç”Ÿçš„tokenè¿›è¡Œç»‘å®šï¼Œå¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæµè§ˆå™¨é€šè¿‡é•¿è½®è¯¢æŸ¥è¯¢åˆ°uidæ‰«æè®°å½•ï¼Œç«‹å³å¾—åˆ°201å“åº”ç ï¼Œç„¶åé€šçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ç”±æ­¤ä¹Ÿè¿›å…¥ä¸€ä¸ªæ–°çš„é¡µé¢ï¼ˆå°±æ˜¯é‚£ä¸ªè¦ä½ ç‚¹ç¡®è®¤çš„æŒ‰é’®ï¼‰ã€‚åœ¨å®¢æˆ·ç«¯ç‚¹å‡»ç¡®è®¤åï¼Œè·å¾—æœåŠ¡å™¨æˆä¿¡çš„ä»¤ç‰Œï¼Œè¿›è¡Œéšåçš„ä¿¡æ¯äº¤äº’è¿‡ç¨‹ã€‚ </p><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>æ€»çš„æ¥è¯´ï¼Œå¾®ä¿¡æ‰«ç ç™»å½•æ ¸å¿ƒè¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼šæµè§ˆå™¨è·å¾—ä¸€ä¸ªå”¯ä¸€çš„ã€ä¸´æ—¶çš„uidï¼Œé€šè¿‡é•¿è¿æ¥ç­‰å¾…å®¢æˆ·ç«¯æ‰«æå¸¦æœ‰æ­¤uidçš„äºŒç»´ç åï¼Œä»é•¿è¿æ¥ä¸­è·å¾—å®¢æˆ·ç«¯ä¸ŠæŠ¥ç»™æœåŠ¡å™¨çš„å¸å·ä¿¡æ¯è¿›è¡Œå±•ç¤ºã€‚å¹¶åœ¨å®¢æˆ·ç«¯ç‚¹å‡»ç¡®è®¤åï¼Œè·å¾—æœåŠ¡å™¨æˆä¿¡çš„ä»¤ç‰Œï¼Œè¿›è¡Œéšåçš„ä¿¡æ¯äº¤äº’è¿‡ç¨‹ã€‚ åœ¨è¶…æ—¶ã€ç½‘ç»œæ–­å¼€ã€å…¶ä»–è®¾å¤‡ä¸Šç™»å½•åï¼Œæ­¤å‰è·å¾—çš„ä»¤ç‰Œæˆ–ä¸¢å¤±ã€æˆ–å¤±æ•ˆï¼Œå¯¹æˆæƒè¿‡ç¨‹å½¢æˆæœ‰æ•ˆçš„å®‰å…¨é˜²æŠ¤ã€‚</p><h3 id="æ•´ç†å‚è€ƒ"><a href="#æ•´ç†å‚è€ƒ" class="headerlink" title="æ•´ç†å‚è€ƒ"></a>æ•´ç†å‚è€ƒ</h3><ul><li><p><a href="http://www.jianshu.com/p/7f072ac61763" target="_blank" rel="noopener">www.jianshu.com/p/7f072ac61763</a></p></li><li><p>justcoding.iteye.com/blog/2213661</p></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºspring bootçš„ç®€å•å®šæ—¶ä»»åŠ¡</title>
      <link href="/2018/11/05/%E5%9F%BA%E4%BA%8Espring%20boot%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2018/11/05/%E5%9F%BA%E4%BA%8Espring%20boot%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-scheduled"><a href="#spring-boot-scheduled" class="headerlink" title="spring-boot-scheduled"></a>spring-boot-scheduled</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä½¿ç”¨è‡ªå¸¦çš„å®šæ—¶ä»»åŠ¡éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰“å¼€å®šæ—¶å™¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-11-5 10:04:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åç¼–å†™æˆ‘ä»¬çš„ä»»åŠ¡å³å¯å®Œæˆä¸€ä¸ªç®€å•çš„å®šæ—¶ä»»åŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-11-5 10:30:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduledTasks</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(ScheduledTasks<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SimpleDateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 5ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(fixedRate = <span class="number">5000</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reportCurrentTime</span><span class="params">()</span> </span>{</span><br><span class="line">        log.info(<span class="string">"ç°åœ¨æ—¶é—´æ˜¯ {}"</span>, dateFormat.format(<span class="keyword">new</span> Date()));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œæ•ˆæœ</p><p><a href="https://i.imgur.com/xbCIXBv.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/xbCIXBv.jpg" class="lazyload" title></a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-scheduled" target="_blank" rel="noopener">æºç </a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Spring Boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Scheduled </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPç½‘ç»œè¯·æ±‚åˆ†ç±»</title>
      <link href="/2018/10/26/HTTP%20%E6%96%B9%E6%B3%95/"/>
      <url>/2018/10/26/HTTP%20%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="HTTP-æ–¹æ³•"><a href="#HTTP-æ–¹æ³•" class="headerlink" title="HTTP æ–¹æ³•"></a>HTTP æ–¹æ³•</h1><p>å®¢æˆ·ç«¯å‘é€çš„  <strong>è¯·æ±‚æŠ¥æ–‡</strong>  ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«äº†æ–¹æ³•å­—æ®µã€‚</p><h2 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h2><blockquote><p>è·å–èµ„æº</p></blockquote><p>å½“å‰ç½‘ç»œè¯·æ±‚ä¸­ï¼Œç»å¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ GET æ–¹æ³•ã€‚</p><h2 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h2><blockquote><p>è·å–æŠ¥æ–‡é¦–éƒ¨</p></blockquote><p>å’Œ GET æ–¹æ³•ä¸€æ ·ï¼Œä½†æ˜¯ä¸è¿”å›æŠ¥æ–‡å®ä½“ä¸»ä½“éƒ¨åˆ†ã€‚</p><p>ä¸»è¦ç”¨äºç¡®è®¤ URL çš„æœ‰æ•ˆæ€§ä»¥åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚</p><h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><blockquote><p>ä¼ è¾“å®ä½“ä¸»ä½“</p></blockquote><p>POST ä¸»è¦ç”¨æ¥ä¼ è¾“æ•°æ®ï¼Œè€Œ GET ä¸»è¦ç”¨æ¥è·å–èµ„æºã€‚</p><p>æ›´å¤š POST ä¸ GET çš„æ¯”è¾ƒè¯·è§ç¬¬ä¹ç« ã€‚</p><h2 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h2><blockquote><p>ä¸Šä¼ æ–‡ä»¶</p></blockquote><p>ç”±äºè‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /new.html HTTP/1.1</span><br><span class="line">Host: example.com</span><br><span class="line">Content-type: text/html</span><br><span class="line">Content-length: 16</span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">p</span>></span>New File<span class="tag"><!--<span class="name"-->p</span>></span><br></pre></td></tr></tbody></table></figure></div><h2 id="PATCH"><a href="#PATCH" class="headerlink" title="PATCH"></a>PATCH</h2><blockquote><p>å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹</p></blockquote><p>PUT ä¹Ÿå¯ä»¥ç”¨äºä¿®æ”¹èµ„æºï¼Œä½†æ˜¯åªèƒ½å®Œå…¨æ›¿ä»£åŸå§‹èµ„æºï¼ŒPATCH å…è®¸éƒ¨åˆ†ä¿®æ”¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PATCH /file.txt HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br><span class="line">Content-Type: application/example</span><br><span class="line">If-Match: "e0023aa4e"</span><br><span class="line">Content-Length: 100</span><br><span class="line"></span><br><span class="line">[description of changes]</span><br></pre></td></tr></tbody></table></figure></div><h2 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h2><blockquote><p>åˆ é™¤æ–‡ä»¶</p></blockquote><p>ä¸ PUT åŠŸèƒ½ç›¸åï¼Œå¹¶ä¸”åŒæ ·ä¸å¸¦éªŒè¯æœºåˆ¶ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /file.html HTTP/1.1</span><br></pre></td></tr></tbody></table></figure></div><h2 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h2><blockquote><p>æŸ¥è¯¢æ”¯æŒçš„æ–¹æ³•</p></blockquote><p>æŸ¥è¯¢æŒ‡å®šçš„ URL èƒ½å¤Ÿæ”¯æŒçš„æ–¹æ³•ã€‚</p><p>ä¼šè¿”å› Allow: GET, POST, HEAD, OPTIONS è¿™æ ·çš„å†…å®¹ã€‚</p><h2 id="CONNECT"><a href="#CONNECT" class="headerlink" title="CONNECT"></a>CONNECT</h2><blockquote><p>è¦æ±‚åœ¨ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“</p></blockquote><p>ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONNECT www.example.com:443 HTTP/1.1</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/5NxoBYf.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/5NxoBYf.jpg" class="lazyload" title></a></p><h2 id="TRACE"><a href="#TRACE" class="headerlink" title="TRACE"></a>TRACE</h2><blockquote><p>è¿½è¸ªè·¯å¾„</p></blockquote><p>æœåŠ¡å™¨ä¼šå°†é€šä¿¡è·¯å¾„è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å°±ä¼šå‡ 1ï¼Œå½“æ•°å€¼ä¸º 0 æ—¶å°±åœæ­¢ä¼ è¾“ã€‚</p><p>é€šå¸¸ä¸ä¼šä½¿ç”¨ TRACEï¼Œå¹¶ä¸”å®ƒå®¹æ˜“å—åˆ° XST æ”»å‡»ï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tomcatæœ€ä½³å®è·µ</title>
      <link href="/2018/10/18/Tomcat%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
      <url>/2018/10/18/Tomcat%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="è¿è¡Œæ¨¡å¼"><a href="#è¿è¡Œæ¨¡å¼" class="headerlink" title="è¿è¡Œæ¨¡å¼"></a>è¿è¡Œæ¨¡å¼</h2><p>Tomcat Connectorä¸‰ç§è¿è¡Œæ¨¡å¼ï¼ˆBIO, NIO, APRï¼‰çš„æ¯”è¾ƒå’Œä¼˜åŒ–ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.apache.coyote.http11.Http11Protocolï¼šBIO</span><br><span class="line">org.apache.coyote.http11.Http11NioProtocolï¼šNIO</span><br><span class="line">org.apache.coyote.http11.Http11Nio2Protocolï¼šNIO2</span><br><span class="line">org.apache.coyote.http11.Http11AprProtocolï¼šAPR</span><br></pre></td></tr></tbody></table></figure></div><h3 id="BIO"><a href="#BIO" class="headerlink" title="BIO"></a>BIO</h3><p>ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚ç¼ºç‚¹ï¼šå¹¶å‘é‡é«˜æ—¶ï¼Œçº¿ç¨‹æ•°è¾ƒå¤šï¼Œæµªè´¹èµ„æºã€‚Tomcat7æˆ–ä»¥ä¸‹ï¼Œåœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><h3 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h3><p>åˆ©ç”¨Javaçš„å¼‚æ­¥IOå¤„ç†ï¼Œå¯ä»¥é€šè¿‡å°‘é‡çš„çº¿ç¨‹å¤„ç†å¤§é‡çš„è¯·æ±‚ã€‚Tomcat8åœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚Tomcat7å¿…é¡»ä¿®æ”¹Connectoré…ç½®æ¥å¯åŠ¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> </span></span><br><span class="line"><span class="tag">           <span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/></span></span><br></pre></td></tr></tbody></table></figure></div><p>Tomcat8ä»¥åNIO2æ¨¡å¼ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Connector</span>  <span class="attr">port</span>=<span class="string">"8080"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11Nio2Protocol"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/></span></span><br></pre></td></tr></tbody></table></figure></div><h3 id="APR"><a href="#APR" class="headerlink" title="APR"></a>APR</h3><p>å³Apache Portable Runtimeï¼Œä»æ“ä½œç³»ç»Ÿå±‚é¢è§£å†³ioé˜»å¡é—®é¢˜ã€‚Tomcat7æˆ–Tomcat8åœ¨Win7æˆ–ä»¥ä¸Šçš„ç³»ç»Ÿä¸­å¯åŠ¨é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚Linuxå¦‚æœå®‰è£…äº†aprå’Œnativeï¼ŒTomcatç›´æ¥å¯åŠ¨å°±æ”¯æŒaprã€‚</p><h2 id="è¿æ¥æ± "><a href="#è¿æ¥æ± " class="headerlink" title="è¿æ¥æ± "></a>è¿æ¥æ± </h2><p>é»˜è®¤å€¼ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Executor</span> <span class="attr">name</span>=<span class="string">"tomcatThreadPool"</span> <span class="attr">namePrefix</span>=<span class="string">"catalina-exec-"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxThreads</span>=<span class="string">"150"</span> <span class="attr">minSpareThreads</span>=<span class="string">"4"</span>/></span></span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹ä¸ºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Executor</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">"tomcatThreadPool"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">namePrefix</span>=<span class="string">"catalina-exec-"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">maxThreads</span>=<span class="string">"500"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">minSpareThreads</span>=<span class="string">"100"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">prestartminSpareThreads</span> = <span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">maxQueueSize</span> = <span class="string">"100"</span></span></span><br><span class="line"><span class="tag">/></span></span><br></pre></td></tr></tbody></table></figure></div><p>å‚æ•°è§£é‡Šï¼š</p><ul><li>maxThreadsï¼Œæœ€å¤§å¹¶å‘æ•°ï¼Œé»˜è®¤è®¾ç½® 200ï¼Œä¸€èˆ¬å»ºè®®åœ¨ 500 ~ 800ï¼Œæ ¹æ®ç¡¬ä»¶è®¾æ–½å’Œä¸šåŠ¡æ¥åˆ¤æ–­</li><li>minSpareThreadsï¼ŒTomcat åˆå§‹åŒ–æ—¶åˆ›å»ºçš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤è®¾ç½® 25</li><li>prestartminSpareThreadsï¼Œåœ¨ Tomcat åˆå§‹åŒ–çš„æ—¶å€™å°±åˆå§‹åŒ– minSpareThreads çš„å‚æ•°å€¼ï¼Œå¦‚æœä¸ç­‰äº trueï¼ŒminSpareThreads çš„å€¼å°±æ²¡å•¥æ•ˆæœäº†</li><li>maxQueueSizeï¼Œæœ€å¤§çš„ç­‰å¾…é˜Ÿåˆ—æ•°ï¼Œè¶…è¿‡åˆ™æ‹’ç»è¯·æ±‚</li></ul><p>é»˜è®¤çš„é“¾æ¥å‚æ•°é…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Connector</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">port</span>=<span class="string">"8080"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">"8443"</span> </span></span><br><span class="line"><span class="tag">/></span></span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹ä¸ºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">Connector</span>  <span class="attr">executor</span>=<span class="string">"tomcatThreadPool"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">port</span>=<span class="string">"8080"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11Nio2Protocol"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/></span></span><br></pre></td></tr></tbody></table></figure></div><p>å‚æ•°è§£é‡Šï¼š</p><ul><li>protocolï¼ŒTomcat 8 è®¾ç½® nio2 æ›´å¥½ï¼šorg.apache.coyote.http11.Http11Nio2Protocol</li><li>protocolï¼ŒTomcat 6ã€7 è®¾ç½® nio æ›´å¥½ï¼šorg.apache.coyote.http11.Http11NioProtocol</li><li>enableLookupsï¼Œç¦ç”¨DNSæŸ¥è¯¢</li><li>acceptCountï¼ŒæŒ‡å®šå½“æ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å¤„ç†è¯·æ±‚çš„çº¿ç¨‹æ•°éƒ½è¢«ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ”¾åˆ°å¤„ç†é˜Ÿåˆ—ä¸­çš„è¯·æ±‚æ•°ï¼Œè¶…è¿‡è¿™ä¸ªæ•°çš„è¯·æ±‚å°†ä¸äºˆå¤„ç†ï¼Œé»˜è®¤è®¾ç½® 100</li><li>maxPostSizeï¼Œä»¥ FORM URL å‚æ•°æ–¹å¼çš„ POST æäº¤æ–¹å¼ï¼Œé™åˆ¶æäº¤æœ€å¤§çš„å¤§å°ï¼Œé»˜è®¤æ˜¯ 2097152(2å…†)ï¼Œå®ƒä½¿ç”¨çš„å•ä½æ˜¯å­—èŠ‚ã€‚10485760 ä¸º 10Mã€‚å¦‚æœè¦ç¦ç”¨é™åˆ¶ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º -1</li><li>acceptorThreadCountï¼Œç”¨äºæ¥æ”¶è¿æ¥çš„çº¿ç¨‹çš„æ•°é‡ï¼Œé»˜è®¤å€¼æ˜¯1ã€‚ä¸€èˆ¬è¿™ä¸ªæŒ‡éœ€è¦æ”¹åŠ¨çš„æ—¶å€™æ˜¯å› ä¸ºè¯¥æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå¤šæ ¸CPUï¼Œå¦‚æœæ˜¯å¤šæ ¸ CPU ä¸€èˆ¬é…ç½®ä¸º 2</li></ul><h2 id="ç«¯å£é…ç½®"><a href="#ç«¯å£é…ç½®" class="headerlink" title="ç«¯å£é…ç½®"></a>ç«¯å£é…ç½®</h2><p>TomcatæœåŠ¡å™¨éœ€é…ç½®ä¸‰ä¸ªç«¯å£æ‰èƒ½å¯åŠ¨ï¼Œå®‰è£…æ—¶é»˜è®¤å¯ç”¨äº†è¿™ä¸‰ä¸ªç«¯å£ï¼Œå½“è¦è¿è¡Œå¤šä¸ªtomcatæœåŠ¡æ—¶éœ€è¦ä¿®æ”¹è¿™ä¸‰ä¸ªç«¯å£ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!-- ç«¯å£-1å³å¯ï¼Œæ ‡è¯†éšæœº --></span></span><br><span class="line"><span class="tag"><<span class="name">Server</span> <span class="attr">port</span>=<span class="string">"-1"</span> <span class="attr">shutdown</span>=<span class="string">"SHUTDOWN"</span>></span></span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!-- è®¿é—®ç«¯å£ï¼Œå¿…é¡»é…ç½® --></span></span><br><span class="line"><span class="tag"><<span class="name">Connector</span>  <span class="attr">port</span>=<span class="string">"8080"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11Nio2Protocol"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">"8443"</span>/></span></span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!-- é…ç½®Apacheä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨Nginxä»£ç†æ³¨é‡Šæ‰å³å¯ --></span></span><br><span class="line"><span class="tag"><<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8009"</span> <span class="attr">protocol</span>=<span class="string">"AJP/1.3"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /></span></span><br></pre></td></tr></tbody></table></figure></div><h2 id="JVM-ä¼˜åŒ–"><a href="#JVM-ä¼˜åŒ–" class="headerlink" title="JVM ä¼˜åŒ–"></a>JVM ä¼˜åŒ–</h2><p>Java çš„å†…å­˜æ¨¡å‹åˆ†ä¸ºï¼š</p><ul><li><p>Youngï¼Œå¹´è½»ä»£ï¼ˆæ˜“è¢« GCï¼‰ã€‚Young åŒºè¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒEden åŒºå’Œä¸¤ä¸ªå¤§å°ä¸¥æ ¼ç›¸åŒçš„ Survivor åŒºï¼Œå…¶ä¸­ Survivor åŒºé—´ä¸­ï¼ŒæŸä¸€æ—¶åˆ»åªæœ‰å…¶ä¸­ä¸€ä¸ªæ˜¯è¢«ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ªç•™åšåƒåœ¾æ”¶é›†æ—¶å¤åˆ¶å¯¹è±¡ç”¨ï¼Œåœ¨ Young åŒºé—´å˜æ»¡çš„æ—¶å€™ï¼Œminor GC å°±ä¼šå°†å­˜æ´»çš„å¯¹è±¡ç§»åˆ°ç©ºé—²çš„Survivor åŒºé—´ä¸­ï¼Œæ ¹æ® JVM çš„ç­–ç•¥ï¼Œåœ¨ç»è¿‡å‡ æ¬¡åƒåœ¾æ”¶é›†åï¼Œä»»ç„¶å­˜æ´»äº Survivor çš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ° Tenured åŒºé—´ã€‚</p></li><li><p>Tenuredï¼Œç»ˆèº«ä»£ã€‚Tenured åŒºä¸»è¦ä¿å­˜ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›è€çš„å¯¹è±¡ï¼Œå½“ä¸€äº›å¯¹è±¡åœ¨ Young å¤åˆ¶è½¬ç§»ä¸€å®šçš„æ¬¡æ•°ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«è½¬ç§»åˆ° Tenured åŒºï¼Œä¸€èˆ¬å¦‚æœç³»ç»Ÿä¸­ç”¨äº† application çº§åˆ«çš„ç¼“å­˜ï¼Œç¼“å­˜ä¸­çš„å¯¹è±¡å¾€å¾€ä¼šè¢«è½¬ç§»åˆ°è¿™ä¸€åŒºé—´ã€‚</p></li><li><p>Permï¼Œæ°¸ä¹…ä»£ã€‚ä¸»è¦ä¿å­˜ class,method,filed å¯¹è±¡ï¼Œè¿™éƒ¨é—¨çš„ç©ºé—´ä¸€èˆ¬ä¸ä¼šæº¢å‡ºï¼Œé™¤éä¸€æ¬¡æ€§åŠ è½½äº†å¾ˆå¤šçš„ç±»ï¼Œä¸è¿‡åœ¨æ¶‰åŠåˆ°çƒ­éƒ¨ç½²çš„åº”ç”¨æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ° java.lang.OutOfMemoryError : PermGen space çš„é”™è¯¯ï¼Œé€ æˆè¿™ä¸ªé”™è¯¯çš„å¾ˆå¤§åŸå› å°±æœ‰å¯èƒ½æ˜¯æ¯æ¬¡éƒ½é‡æ–°éƒ¨ç½²ï¼Œä½†æ˜¯é‡æ–°éƒ¨ç½²åï¼Œç±»çš„ class æ²¡æœ‰è¢«å¸è½½æ‰ï¼Œè¿™æ ·å°±é€ æˆäº†å¤§é‡çš„ class å¯¹è±¡ä¿å­˜åœ¨äº† perm ä¸­ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬é‡æ–°å¯åŠ¨åº”ç”¨æœåŠ¡å™¨å¯ä»¥è§£å†³é—®é¢˜ã€‚</p></li></ul><p>Linux ä¿®æ”¹ /tomcat/bin/catalina.sh æ–‡ä»¶ï¼ŒæŠŠä¸‹é¢ä¿¡æ¯æ·»åŠ åˆ°æ–‡ä»¶ç¬¬ä¸€è¡Œã€‚</p><p>æœºå­å†…å­˜å¦‚æœæ˜¯ 8Gï¼Œä¸€èˆ¬ PermSize é…ç½®æ˜¯ä¸»è¦ä¿è¯ç³»ç»Ÿèƒ½ç¨³å®šèµ·æ¥å°±è¡Œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTS="-Dfile.encoding=UTF-8 -server -Xms6144m -Xmx6144m -XX:NewSize=1024m -XX:MaxNewSize=2048m -XX:PermSize=512m -XX:MaxPermSize=512m -XX:MaxTenuringThreshold=10 -XX:NewRatio=2 -XX:+DisableExplicitGC"</span><br></pre></td></tr></tbody></table></figure></div><p>å‚æ•°è¯´æ˜ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-Dfile.encodingï¼šé»˜è®¤æ–‡ä»¶ç¼–ç </span><br><span class="line">-serverï¼šè¡¨ç¤ºè¿™æ˜¯åº”ç”¨äºæœåŠ¡å™¨çš„é…ç½®ï¼ŒJVM å†…éƒ¨ä¼šæœ‰ç‰¹æ®Šå¤„ç†çš„</span><br><span class="line">-Xmx1024mï¼šè®¾ç½®JVMæœ€å¤§å¯ç”¨å†…å­˜ä¸º1024MB</span><br><span class="line">-Xms1024mï¼šè®¾ç½®JVMæœ€å°å†…å­˜ä¸º1024mã€‚æ­¤å€¼å¯ä»¥è®¾ç½®ä¸-Xmxç›¸åŒï¼Œä»¥é¿å…æ¯æ¬¡åƒåœ¾å›æ”¶å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜ã€‚</span><br><span class="line">-XX:NewSizeï¼šè®¾ç½®å¹´è½»ä»£å¤§å°</span><br><span class="line">-XX:MaxNewSizeï¼šè®¾ç½®æœ€å¤§çš„å¹´è½»ä»£å¤§å°</span><br><span class="line">-XX:PermSizeï¼šè®¾ç½®æ°¸ä¹…ä»£å¤§å°</span><br><span class="line">-XX:MaxPermSizeï¼šè®¾ç½®æœ€å¤§æ°¸ä¹…ä»£å¤§å°</span><br><span class="line">-XX:NewRatio=4ï¼šè®¾ç½®å¹´è½»ä»£ï¼ˆåŒ…æ‹¬ Eden å’Œä¸¤ä¸ª Survivor åŒºï¼‰ä¸ç»ˆèº«ä»£çš„æ¯”å€¼ï¼ˆé™¤å»æ°¸ä¹…ä»£ï¼‰ã€‚è®¾ç½®ä¸º 4ï¼Œåˆ™å¹´è½»ä»£ä¸ç»ˆèº«ä»£æ‰€å æ¯”å€¼ä¸º 1ï¼š4ï¼Œå¹´è½»ä»£å æ•´ä¸ªå †æ ˆçš„ 1/5</span><br><span class="line">-XX:MaxTenuringThreshold=10ï¼šè®¾ç½®åƒåœ¾æœ€å¤§å¹´é¾„ï¼Œé»˜è®¤ä¸ºï¼š15ã€‚å¦‚æœè®¾ç½®ä¸º 0 çš„è¯ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡ Survivor åŒºï¼Œç›´æ¥è¿›å…¥å¹´è€ä»£ã€‚å¯¹äºå¹´è€ä»£æ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¼šåœ¨ Survivor åŒºè¿›è¡Œå¤šæ¬¡å¤åˆ¶ï¼Œè¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡å†å¹´è½»ä»£çš„å­˜æ´»æ—¶é—´ï¼Œå¢åŠ åœ¨å¹´è½»ä»£å³è¢«å›æ”¶çš„æ¦‚è®ºã€‚</span><br><span class="line">-XX:+DisableExplicitGCï¼šè¿™ä¸ªå°†ä¼šå¿½ç•¥æ‰‹åŠ¨è°ƒç”¨ GC çš„ä»£ç ä½¿å¾— System.gc() çš„è°ƒç”¨å°±ä¼šå˜æˆä¸€ä¸ªç©ºè°ƒç”¨ï¼Œå®Œå…¨ä¸ä¼šè§¦å‘ä»»ä½• GC</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆæˆ‘ä»¬åšåˆ†å¸ƒå¼ä½¿ç”¨Redis?</title>
      <link href="/2018/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E5%81%9A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BD%BF%E7%94%A8Redis/"/>
      <url>/2018/10/18/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E5%81%9A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BD%BF%E7%94%A8Redis/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>ç»å¤§éƒ¨åˆ†å†™ä¸šåŠ¡çš„ç¨‹åºå‘˜ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ Redis çš„æ—¶å€™ï¼Œåªä¼š Set Value å’Œ Get Value ä¸¤ä¸ªæ“ä½œï¼Œå¯¹ Redis æ•´ä½“ç¼ºä¹ä¸€ä¸ªè®¤çŸ¥ã€‚è¿™é‡Œå¯¹ Redis å¸¸è§é—®é¢˜åšä¸€ä¸ªæ€»ç»“ï¼Œè§£å†³å¤§å®¶çš„çŸ¥è¯†ç›²ç‚¹ã€‚</p><h2 id="1ã€ä¸ºä»€ä¹ˆä½¿ç”¨-Redis"><a href="#1ã€ä¸ºä»€ä¹ˆä½¿ç”¨-Redis" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Redis"></a>1ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Redis</h2><p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Redisï¼Œä¸»è¦è€ƒè™‘ä¸¤ä¸ªè§’åº¦ï¼šæ€§èƒ½å’Œå¹¶å‘ã€‚å¦‚æœåªæ˜¯ä¸ºäº†åˆ†å¸ƒå¼é”è¿™äº›å…¶ä»–åŠŸèƒ½ï¼Œè¿˜æœ‰å…¶ä»–ä¸­é—´ä»¶ Zookpeer ç­‰ä»£æ›¿ï¼Œå¹¶éä¸€å®šè¦ä½¿ç”¨ Redisã€‚</p><h3 id="æ€§èƒ½ï¼š"><a href="#æ€§èƒ½ï¼š" class="headerlink" title="æ€§èƒ½ï¼š"></a>æ€§èƒ½ï¼š</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç¢°åˆ°éœ€è¦æ‰§è¡Œè€—æ—¶ç‰¹åˆ«ä¹…ï¼Œä¸”ç»“æœä¸é¢‘ç¹å˜åŠ¨çš„ SQLï¼Œå°±ç‰¹åˆ«é€‚åˆå°†è¿è¡Œç»“æœæ”¾å…¥ç¼“å­˜ã€‚è¿™æ ·ï¼Œåé¢çš„è¯·æ±‚å°±å»ç¼“å­˜ä¸­è¯»å–ï¼Œä½¿å¾—è¯·æ±‚èƒ½å¤Ÿè¿…é€Ÿå“åº”ã€‚</p><p>ç‰¹åˆ«æ˜¯åœ¨ç§’æ€ç³»ç»Ÿï¼Œåœ¨åŒä¸€æ—¶é—´ï¼Œå‡ ä¹æ‰€æœ‰äººéƒ½åœ¨ç‚¹ï¼Œéƒ½åœ¨ä¸‹å•ã€‚ã€‚ã€‚æ‰§è¡Œçš„æ˜¯åŒä¸€æ“ä½œâ€”â€”â€”å‘æ•°æ®åº“æŸ¥æ•°æ®ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/0929/090927_1b0c4b61_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/0929/090927_1b0c4b61_87650.png" class="lazyload"></a></p><p>æ ¹æ®äº¤äº’æ•ˆæœçš„ä¸åŒï¼Œå“åº”æ—¶é—´æ²¡æœ‰å›ºå®šæ ‡å‡†ã€‚åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬çš„é¡µé¢è·³è½¬éœ€è¦åœ¨ç¬é—´è§£å†³ï¼Œå¯¹äºé¡µå†…æ“ä½œåˆ™éœ€è¦åœ¨åˆ¹é‚£é—´è§£å†³ã€‚</p><h3 id="å¹¶å‘ï¼š"><a href="#å¹¶å‘ï¼š" class="headerlink" title="å¹¶å‘ï¼š"></a>å¹¶å‘ï¼š</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å¤§å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ•°æ®åº“ä¼šå‡ºç°è¿æ¥å¼‚å¸¸ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ Redis åšä¸€ä¸ªç¼“å†²æ“ä½œï¼Œè®©è¯·æ±‚å…ˆè®¿é—®åˆ° Redisï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚</p><p> <a href="https://images.gitee.com/uploads/images/2018/0929/090934_f875e978_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/0929/090934_f875e978_87650.png" class="lazyload"></a></p><h3 id="ä½¿ç”¨-Redis-çš„å¸¸è§é—®é¢˜"><a href="#ä½¿ç”¨-Redis-çš„å¸¸è§é—®é¢˜" class="headerlink" title="ä½¿ç”¨ Redis çš„å¸¸è§é—®é¢˜"></a>ä½¿ç”¨ Redis çš„å¸¸è§é—®é¢˜</h3><ul><li><p>ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜</p></li><li><p>ç¼“å­˜é›ªå´©é—®é¢˜</p></li><li><p>ç¼“å­˜å‡»ç©¿é—®é¢˜</p></li><li><p>ç¼“å­˜çš„å¹¶å‘ç«äº‰é—®é¢˜</p></li></ul><h2 id="2ã€å•çº¿ç¨‹çš„-Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"><a href="#2ã€å•çº¿ç¨‹çš„-Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«" class="headerlink" title="2ã€å•çº¿ç¨‹çš„ Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«"></a>2ã€å•çº¿ç¨‹çš„ Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</h2><p>è¿™ä¸ªé—®é¢˜æ˜¯å¯¹ Redis å†…éƒ¨æœºåˆ¶çš„ä¸€ä¸ªè€ƒå¯Ÿã€‚å¾ˆå¤šäººéƒ½ä¸çŸ¥é“ Redis æ˜¯å•çº¿ç¨‹å·¥ä½œæ¨¡å‹ã€‚</p><h3 id="åŸå› ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š"><a href="#åŸå› ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š" class="headerlink" title="åŸå› ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š"></a>åŸå› ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š</h3><p>çº¯å†…å­˜æ“ä½œ</p><p>å•çº¿ç¨‹æ“ä½œï¼Œé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</p><p>é‡‡ç”¨äº†éé˜»å¡ I/O å¤šè·¯å¤ç”¨æœºåˆ¶</p><p>ä»”ç»†è¯´ä¸€è¯´ I/O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œæ‰“ä¸€ä¸ªæ¯”æ–¹ï¼šå°ååœ¨ A åŸå¼€äº†ä¸€å®¶å¿«é¤åº—åº—ï¼Œè´Ÿè´£åŒåŸå¿«é¤æœåŠ¡ã€‚å°æ˜å› ä¸ºèµ„é‡‘é™åˆ¶ï¼Œé›‡ä½£äº†ä¸€æ‰¹é…é€å‘˜ï¼Œç„¶åå°æ›²å‘ç°èµ„é‡‘ä¸å¤Ÿäº†ï¼Œåªå¤Ÿä¹°ä¸€è¾†è½¦é€å¿«é€’ã€‚</p><h3 id="ç»è¥æ–¹å¼ä¸€"><a href="#ç»è¥æ–¹å¼ä¸€" class="headerlink" title="ç»è¥æ–¹å¼ä¸€"></a>ç»è¥æ–¹å¼ä¸€</h3><p>å®¢æˆ·æ¯ä¸‹ä¸€ä»½è®¢å•ï¼Œå°æ˜å°±è®©ä¸€ä¸ªé…é€å‘˜ç›¯ç€ï¼Œç„¶åè®©äººå¼€è½¦å»é€ã€‚æ…¢æ…¢çš„å°æ›²å°±å‘ç°äº†è¿™ç§ç»è¥æ–¹å¼å­˜åœ¨ä¸‹è¿°é—®é¢˜ï¼š</p><p>æ—¶é—´éƒ½èŠ±åœ¨äº†æŠ¢è½¦ä¸Šäº†ï¼Œå¤§éƒ¨åˆ†é…é€å‘˜éƒ½å¤„åœ¨é—²ç½®çŠ¶æ€ï¼ŒæŠ¢åˆ°è½¦æ‰èƒ½å»é€ã€‚</p><p>éšç€ä¸‹å•çš„å¢å¤šï¼Œé…é€å‘˜ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå°æ˜å‘ç°å¿«é€’åº—é‡Œè¶Šæ¥è¶ŠæŒ¤ï¼Œæ²¡åŠæ³•é›‡ä½£æ–°çš„é…é€å‘˜äº†ã€‚</p><p>é…é€å‘˜ä¹‹é—´çš„åè°ƒå¾ˆèŠ±æ—¶é—´ã€‚</p><p>ç»¼åˆä¸Šè¿°ç¼ºç‚¹ï¼Œå°æ˜ç—›å®šæ€ç—›ï¼Œæå‡ºäº†ç»è¥æ–¹å¼äºŒã€‚</p><h3 id="ç»è¥æ–¹å¼äºŒ"><a href="#ç»è¥æ–¹å¼äºŒ" class="headerlink" title="ç»è¥æ–¹å¼äºŒ"></a>ç»è¥æ–¹å¼äºŒ</h3><p>å°æ˜åªé›‡ä½£ä¸€ä¸ªé…é€å‘˜ã€‚å½“å®¢æˆ·ä¸‹å•ï¼Œå°æ˜æŒ‰é€è¾¾åœ°ç‚¹æ ‡æ³¨å¥½ï¼Œä¾æ¬¡æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚æœ€åï¼Œè®©é…é€å‘˜ä¾æ¬¡å¼€ç€è½¦å»é€ï¼Œé€å¥½äº†å°±å›æ¥æ‹¿ä¸‹ä¸€ä¸ªã€‚ä¸Šè¿°ä¸¤ç§ç»è¥æ–¹å¼å¯¹æ¯”ï¼Œå¾ˆæ˜æ˜¾ç¬¬äºŒç§æ•ˆç‡æ›´é«˜ã€‚</p><p>åœ¨ä¸Šè¿°æ¯”å–»ä¸­ï¼š</p><p>æ¯ä¸ªé…é€å‘˜â†’æ¯ä¸ªçº¿ç¨‹</p><p>æ¯ä¸ªè®¢å•â†’æ¯ä¸ª Socket(I/O æµ)</p><p>è®¢å•çš„é€è¾¾åœ°ç‚¹â†’Socket çš„ä¸åŒçŠ¶æ€</p><p>å®¢æˆ·é€é¤è¯·æ±‚â†’æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚</p><p>æ˜æ›²çš„ç»è¥æ–¹å¼â†’æœåŠ¡ç«¯è¿è¡Œçš„ä»£ç </p><p>ä¸€è¾†è½¦â†’CPU çš„æ ¸æ•°</p><p>äºæ˜¯æœ‰äº†å¦‚ä¸‹ç»“è®ºï¼š</p><p>ç»è¥æ–¹å¼ä¸€å°±æ˜¯ä¼ ç»Ÿçš„å¹¶å‘æ¨¡å‹ï¼Œæ¯ä¸ª I/O æµ(è®¢å•)éƒ½æœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹(é…é€å‘˜)ç®¡ç†ã€‚</p><p>ç»è¥æ–¹å¼äºŒå°±æ˜¯ I/O å¤šè·¯å¤ç”¨ã€‚åªæœ‰å•ä¸ªçº¿ç¨‹(ä¸€ä¸ªé…é€å‘˜)ï¼Œé€šè¿‡è·Ÿè¸ªæ¯ä¸ª I/O æµçš„çŠ¶æ€(æ¯ä¸ªé…é€å‘˜çš„é€è¾¾åœ°ç‚¹)ï¼Œæ¥ç®¡ç†å¤šä¸ª I/O æµã€‚</p><p>ä¸‹é¢ç±»æ¯”åˆ°çœŸå®çš„ Redis çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://images.gitee.com/uploads/images/2018/0929/090949_68d6f98f_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/0929/090949_68d6f98f_87650.png" class="lazyload"></a></p><p>Redis-client åœ¨æ“ä½œçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå…·æœ‰ä¸åŒäº‹ä»¶ç±»å‹çš„ Socketã€‚åœ¨æœåŠ¡ç«¯ï¼Œæœ‰ä¸€æ®µ I/O å¤šè·¯å¤ç”¨ç¨‹åºï¼Œå°†å…¶ç½®å…¥é˜Ÿåˆ—ä¹‹ä¸­ã€‚ç„¶åï¼Œæ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ï¼Œä¾æ¬¡å»é˜Ÿåˆ—ä¸­å–ï¼Œè½¬å‘åˆ°ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ä¸­ã€‚</p><h2 id="3ã€Redis-çš„æ•°æ®ç±»å‹åŠä½¿ç”¨åœºæ™¯"><a href="#3ã€Redis-çš„æ•°æ®ç±»å‹åŠä½¿ç”¨åœºæ™¯" class="headerlink" title="3ã€Redis çš„æ•°æ®ç±»å‹åŠä½¿ç”¨åœºæ™¯"></a>3ã€Redis çš„æ•°æ®ç±»å‹åŠä½¿ç”¨åœºæ™¯</h2><p>ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜ï¼Œè¿™äº”ç§ç±»å‹éƒ½ä¼šç”¨åˆ°ã€‚</p><p>String</p><p>æœ€å¸¸è§„çš„ set/get æ“ä½œï¼ŒValue å¯ä»¥æ˜¯ String ä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚ä¸€èˆ¬åšä¸€äº›å¤æ‚çš„è®¡æ•°åŠŸèƒ½çš„ç¼“å­˜ã€‚</p><p>Hash</p><p>è¿™é‡Œ Value å­˜æ”¾çš„æ˜¯ç»“æ„åŒ–çš„å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å°±æ˜¯æ“ä½œå…¶ä¸­çš„æŸä¸ªå­—æ®µã€‚æˆ‘åœ¨åšå•ç‚¹ç™»å½•çš„æ—¶å€™ï¼Œå°±æ˜¯ç”¨è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥ CookieId ä½œä¸º Keyï¼Œè®¾ç½® 30 åˆ†é’Ÿä¸ºç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œèƒ½å¾ˆå¥½çš„æ¨¡æ‹Ÿå‡ºç±»ä¼¼ Session çš„æ•ˆæœã€‚</p><p>List</p><p>ä½¿ç”¨ List çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åšç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚å¦å¤–ï¼Œå¯ä»¥åˆ©ç”¨ lrange å‘½ä»¤ï¼ŒåšåŸºäº Redis çš„åˆ†é¡µåŠŸèƒ½ï¼Œæ€§èƒ½æä½³ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚</p><p>Set</p><p>å› ä¸º Set å †æ”¾çš„æ˜¯ä¸€å †ä¸é‡å¤å€¼çš„é›†åˆã€‚æ‰€ä»¥å¯ä»¥åšå…¨å±€å»é‡çš„åŠŸèƒ½ã€‚æˆ‘ä»¬çš„ç³»ç»Ÿä¸€èˆ¬éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œä½¿ç”¨ JVM è‡ªå¸¦çš„ Set æ¯”è¾ƒéº»çƒ¦ã€‚å¦å¤–ï¼Œå°±æ˜¯åˆ©ç”¨äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥è®¡ç®—å…±åŒå–œå¥½ï¼Œå…¨éƒ¨çš„å–œå¥½ï¼Œè‡ªå·±ç‹¬æœ‰çš„å–œå¥½ç­‰åŠŸèƒ½ã€‚</p><p>Sorted Set</p><p>Sorted Set å¤šäº†ä¸€ä¸ªæƒé‡å‚æ•° Scoreï¼Œé›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰ Score è¿›è¡Œæ’åˆ—ã€‚å¯ä»¥åšæ’è¡Œæ¦œåº”ç”¨ï¼Œå– TOP N æ“ä½œã€‚Sorted Set å¯ä»¥ç”¨æ¥åšå»¶æ—¶ä»»åŠ¡ã€‚</p><h2 id="4ã€Redis-çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶"><a href="#4ã€Redis-çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶" class="headerlink" title="4ã€Redis çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶"></a>4ã€Redis çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶</h2><p>Redis æ˜¯å¦ç”¨åˆ°å®¶ï¼Œä»è¿™å°±èƒ½çœ‹å‡ºæ¥ã€‚æ¯”å¦‚ä½  Redis åªèƒ½å­˜ 5G æ•°æ®ï¼Œå¯æ˜¯ä½ å†™äº† 10Gï¼Œé‚£ä¼šåˆ  5G çš„æ•°æ®ã€‚æ€ä¹ˆåˆ çš„ï¼Œè¿™ä¸ªé—®é¢˜æ€è€ƒè¿‡ä¹ˆï¼Ÿ</p><p>æ­£è§£ï¼šRedis é‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ã€‚</p><p>ä¸ºä»€ä¹ˆä¸ç”¨å®šæ—¶åˆ é™¤ç­–ç•¥</p><p>å®šæ—¶åˆ é™¤ï¼Œç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥è´Ÿè´£ç›‘è§† Keyï¼Œè¿‡æœŸåˆ™è‡ªåŠ¨åˆ é™¤ã€‚è™½ç„¶å†…å­˜åŠæ—¶é‡Šæ”¾ï¼Œä½†æ˜¯ååˆ†æ¶ˆè€— CPU èµ„æºã€‚åœ¨å¤§å¹¶å‘è¯·æ±‚ä¸‹ï¼ŒCPU è¦å°†æ—¶é—´åº”ç”¨åœ¨å¤„ç†è¯·æ±‚ï¼Œè€Œä¸æ˜¯åˆ é™¤ Keyï¼Œå› æ­¤æ²¡æœ‰é‡‡ç”¨è¿™ä¸€ç­–ç•¥ã€‚</p><p>å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å¦‚ä½•å·¥ä½œ</p><p>å®šæœŸåˆ é™¤ï¼ŒRedis é»˜è®¤æ¯ä¸ª 100ms æ£€æŸ¥ï¼Œæœ‰è¿‡æœŸ Key åˆ™åˆ é™¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒRedis ä¸æ˜¯æ¯ä¸ª 100ms å°†æ‰€æœ‰çš„ Key æ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤š Key åˆ°æ—¶é—´æ²¡æœ‰åˆ é™¤ã€‚äºæ˜¯ï¼Œæƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºã€‚</p><p>é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å°±æ²¡å…¶ä»–é—®é¢˜äº†ä¹ˆ</p><p>ä¸æ˜¯çš„ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ²¡åˆ é™¤æ‰ Keyã€‚å¹¶ä¸”ä½ ä¹Ÿæ²¡åŠæ—¶å»è¯·æ±‚ Keyï¼Œä¹Ÿå°±æ˜¯è¯´æƒ°æ€§åˆ é™¤ä¹Ÿæ²¡ç”Ÿæ•ˆã€‚è¿™æ ·ï¼ŒRedis çš„å†…å­˜ä¼šè¶Šæ¥è¶Šé«˜ã€‚é‚£ä¹ˆå°±åº”è¯¥é‡‡ç”¨å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚</p><p>åœ¨ redis.conf ä¸­æœ‰ä¸€è¡Œé…ç½®ï¼š</p><h1 id="maxmemory-policy-volatile-lru"><a href="#maxmemory-policy-volatile-lru" class="headerlink" title="maxmemory-policy volatile-lru"></a>maxmemory-policy volatile-lru</h1><p>è¯¥é…ç½®å°±æ˜¯é…å†…å­˜æ·˜æ±°ç­–ç•¥çš„ï¼š</p><ul><li><p>noevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚</p></li><li><p>allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚ï¼ˆæ¨èä½¿ç”¨ï¼Œç›®å‰é¡¹ç›®åœ¨ç”¨è¿™ç§ï¼‰(æœ€è¿‘æœ€ä¹…ä½¿ç”¨ç®—æ³•)</p></li><li><p>allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ï¼ˆåº”è¯¥ä¹Ÿæ²¡äººç”¨å§ï¼Œä½ ä¸åˆ æœ€å°‘ä½¿ç”¨ Keyï¼Œå»éšæœºåˆ ï¼‰</p></li><li><p>volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ Redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™æ‰ç”¨ã€‚ï¼ˆä¸æ¨èï¼‰</p></li><li><p>volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ï¼ˆä¾ç„¶ä¸æ¨èï¼‰</p></li><li><p>volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ Key ä¼˜å…ˆç§»é™¤ã€‚ï¼ˆä¸æ¨èï¼‰</p></li></ul><h2 id="5ã€Redis-å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜"><a href="#5ã€Redis-å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="5ã€Redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜"></a>5ã€Redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜</h2><p>ä¸€è‡´æ€§é—®é¢˜è¿˜å¯ä»¥å†åˆ†ä¸ºæœ€ç»ˆä¸€è‡´æ€§å’Œå¼ºä¸€è‡´æ€§ã€‚æ•°æ®åº“å’Œç¼“å­˜åŒå†™ï¼Œå°±å¿…ç„¶ä¼šå­˜åœ¨ä¸ä¸€è‡´çš„é—®é¢˜ã€‚å‰ææ˜¯å¦‚æœå¯¹æ•°æ®æœ‰å¼ºä¸€è‡´æ€§è¦æ±‚ï¼Œä¸èƒ½æ”¾ç¼“å­˜ã€‚æˆ‘ä»¬æ‰€åšçš„ä¸€åˆ‡ï¼Œåªèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬æ‰€åšçš„æ–¹æ¡ˆä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œåªèƒ½é™ä½ä¸ä¸€è‡´å‘ç”Ÿçš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œæœ‰å¼ºä¸€è‡´æ€§è¦æ±‚çš„æ•°æ®ï¼Œä¸èƒ½æ”¾ç¼“å­˜ã€‚é¦–å…ˆï¼Œé‡‡å–æ­£ç¡®æ›´æ–°ç­–ç•¥ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜ã€‚å…¶æ¬¡ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨åˆ é™¤ç¼“å­˜å¤±è´¥çš„é—®é¢˜ï¼Œæä¾›ä¸€ä¸ªè¡¥å¿æªæ–½å³å¯ï¼Œä¾‹å¦‚åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><h2 id="6ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜"><a href="#6ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜" class="headerlink" title="6ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜"></a>6ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜</h2><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬ä¸­å°å‹ä¼ ç»Ÿè½¯ä»¶ä¼ä¸šå¾ˆéš¾ç¢°åˆ°ã€‚å¦‚æœæœ‰å¤§å¹¶å‘çš„é¡¹ç›®ï¼Œæµé‡æœ‰å‡ ç™¾ä¸‡å·¦å³ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜ä¸€å®šè¦æ·±åˆ»è€ƒè™‘ã€‚ç¼“å­˜ç©¿é€ï¼Œå³é»‘å®¢æ•…æ„å»è¯·æ±‚ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚éƒ½æ€¼åˆ°æ•°æ®åº“ä¸Šï¼Œä»è€Œæ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚</p><h3 id="ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š"><a href="#ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š"></a>ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š</h3><ul><li><p>åˆ©ç”¨äº’æ–¥é”ï¼Œç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œå…ˆå»è·å¾—é”ï¼Œå¾—åˆ°é”äº†ï¼Œå†å»è¯·æ±‚æ•°æ®åº“ã€‚æ²¡å¾—åˆ°é”ï¼Œåˆ™ä¼‘çœ ä¸€æ®µæ—¶é—´é‡è¯•ã€‚</p></li><li><p>é‡‡ç”¨å¼‚æ­¥æ›´æ–°ç­–ç•¥ï¼Œæ— è®º Key æ˜¯å¦å–åˆ°å€¼ï¼Œéƒ½ç›´æ¥è¿”å›ã€‚Value å€¼ä¸­ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼Œç¼“å­˜å¦‚æœè¿‡æœŸï¼Œå¼‚æ­¥èµ·ä¸€ä¸ªçº¿ç¨‹å»è¯»æ•°æ®åº“ï¼Œæ›´æ–°ç¼“å­˜ã€‚éœ€è¦åšç¼“å­˜é¢„çƒ­(é¡¹ç›®å¯åŠ¨å‰ï¼Œå…ˆåŠ è½½ç¼“å­˜)æ“ä½œã€‚</p></li><li><p>æä¾›ä¸€ä¸ªèƒ½è¿…é€Ÿåˆ¤æ–­è¯·æ±‚æ˜¯å¦æœ‰æ•ˆçš„æ‹¦æˆªæœºåˆ¶ï¼Œæ¯”å¦‚ï¼Œåˆ©ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ç³»åˆ—åˆæ³•æœ‰æ•ˆçš„ Keyã€‚è¿…é€Ÿåˆ¤æ–­å‡ºï¼Œè¯·æ±‚æ‰€æºå¸¦çš„ Key æ˜¯å¦åˆæ³•æœ‰æ•ˆã€‚å¦‚æœä¸åˆæ³•ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚</p></li><li><p>ç¼“å­˜é›ªå´©ï¼Œå³ç¼“å­˜åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œè¿™ä¸ªæ—¶å€™åˆæ¥äº†ä¸€æ³¢è¯·æ±‚ï¼Œç»“æœè¯·æ±‚éƒ½æ€¼åˆ°æ•°æ®åº“ä¸Šï¼Œä»è€Œå¯¼è‡´æ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚</p></li></ul><h3 id="ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆï¼š"><a href="#ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆï¼š"></a>ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆï¼š</h3><ul><li><p>ç»™ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œé¿å…é›†ä½“å¤±æ•ˆã€‚</p></li><li><p>ä½¿ç”¨äº’æ–¥é”ï¼Œä½†æ˜¯è¯¥æ–¹æ¡ˆååé‡æ˜æ˜¾ä¸‹é™äº†ã€‚</p></li><li><p>åŒç¼“å­˜ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªç¼“å­˜ï¼Œç¼“å­˜ A å’Œç¼“å­˜ Bã€‚ç¼“å­˜ A çš„å¤±æ•ˆæ—¶é—´ä¸º 20 åˆ†é’Ÿï¼Œç¼“å­˜ B ä¸è®¾å¤±æ•ˆæ—¶é—´ã€‚è‡ªå·±åšç¼“å­˜é¢„çƒ­æ“ä½œã€‚</p></li><li><p>ç„¶åç»†åˆ†ä»¥ä¸‹å‡ ä¸ªå°ç‚¹ï¼šä»ç¼“å­˜ A è¯»æ•°æ®åº“ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ï¼›A æ²¡æœ‰æ•°æ®ï¼Œç›´æ¥ä» B è¯»æ•°æ®ï¼Œç›´æ¥è¿”å›ï¼Œå¹¶ä¸”å¼‚æ­¥å¯åŠ¨ä¸€ä¸ªæ›´æ–°çº¿ç¨‹ï¼Œæ›´æ–°çº¿ç¨‹åŒæ—¶æ›´æ–°ç¼“å­˜ A å’Œç¼“å­˜ Bã€‚</p></li></ul><h2 id="7ã€å¦‚ä½•è§£å†³-Redis-çš„å¹¶å‘ç«äº‰-Key-é—®é¢˜"><a href="#7ã€å¦‚ä½•è§£å†³-Redis-çš„å¹¶å‘ç«äº‰-Key-é—®é¢˜" class="headerlink" title="7ã€å¦‚ä½•è§£å†³ Redis çš„å¹¶å‘ç«äº‰ Key é—®é¢˜"></a>7ã€å¦‚ä½•è§£å†³ Redis çš„å¹¶å‘ç«äº‰ Key é—®é¢˜</h2><p>è¿™ä¸ªé—®é¢˜å¤§è‡´å°±æ˜¯ï¼ŒåŒæ—¶æœ‰å¤šä¸ªå­ç³»ç»Ÿå» Set ä¸€ä¸ª Keyã€‚è¿™ä¸ªæ—¶å€™è¦æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿå¤§å®¶åŸºæœ¬éƒ½æ˜¯æ¨èç”¨ Redis äº‹åŠ¡æœºåˆ¶ã€‚</p><p>ä½†æ˜¯æˆ‘å¹¶ä¸æ¨èä½¿ç”¨ Redis çš„äº‹åŠ¡æœºåˆ¶ã€‚å› ä¸ºæˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒï¼ŒåŸºæœ¬éƒ½æ˜¯ Redis é›†ç¾¤ç¯å¢ƒï¼Œåšäº†æ•°æ®åˆ†ç‰‡æ“ä½œã€‚ä½ ä¸€ä¸ªäº‹åŠ¡ä¸­æœ‰æ¶‰åŠåˆ°å¤šä¸ª Key æ“ä½œçš„æ—¶å€™ï¼Œè¿™å¤šä¸ª Key ä¸ä¸€å®šéƒ½å­˜å‚¨åœ¨åŒä¸€ä¸ª redis-server ä¸Šã€‚å› æ­¤ï¼ŒRedis çš„äº‹åŠ¡æœºåˆ¶ï¼Œååˆ†é¸¡è‚‹ã€‚</p><h3 id="å¦‚æœå¯¹è¿™ä¸ª-Key-æ“ä½œï¼Œä¸è¦æ±‚é¡ºåº"><a href="#å¦‚æœå¯¹è¿™ä¸ª-Key-æ“ä½œï¼Œä¸è¦æ±‚é¡ºåº" class="headerlink" title="å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œä¸è¦æ±‚é¡ºåº"></a>å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œä¸è¦æ±‚é¡ºåº</h3><p>è¿™ç§æƒ…å†µä¸‹ï¼Œå‡†å¤‡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œå¤§å®¶å»æŠ¢é”ï¼ŒæŠ¢åˆ°é”å°±åš set æ“ä½œå³å¯ï¼Œæ¯”è¾ƒç®€å•ã€‚</p><h3 id="å¦‚æœå¯¹è¿™ä¸ª-Key-æ“ä½œï¼Œè¦æ±‚é¡ºåº"><a href="#å¦‚æœå¯¹è¿™ä¸ª-Key-æ“ä½œï¼Œè¦æ±‚é¡ºåº" class="headerlink" title="å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œè¦æ±‚é¡ºåº"></a>å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œè¦æ±‚é¡ºåº</h3><p>å‡è®¾æœ‰ä¸€ä¸ª key1ï¼Œç³»ç»Ÿ A éœ€è¦å°† key1 è®¾ç½®ä¸º valueAï¼Œç³»ç»Ÿ B éœ€è¦å°† key1 è®¾ç½®ä¸º valueBï¼Œç³»ç»Ÿ C éœ€è¦å°† key1 è®¾ç½®ä¸º valueCã€‚</p><p>æœŸæœ›æŒ‰ç…§ key1 çš„ value å€¼æŒ‰ç…§ valueA > valueB > valueC çš„é¡ºåºå˜åŒ–ã€‚è¿™ç§æ—¶å€™æˆ‘ä»¬åœ¨æ•°æ®å†™å…¥æ•°æ®åº“çš„æ—¶å€™ï¼Œéœ€è¦ä¿å­˜ä¸€ä¸ªæ—¶é—´æˆ³ã€‚</p><h3 id="å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š"><a href="#å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š" class="headerlink" title="å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š"></a>å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š</h3><p>ç³»ç»Ÿ A key 1 {valueA  3:00}<br>ç³»ç»Ÿ B key 1 {valueB  3:05}<br>ç³»ç»Ÿ C key 1 {valueC  3:10}</p><p>é‚£ä¹ˆï¼Œå‡è®¾ç³»ç»Ÿ B å…ˆæŠ¢åˆ°é”ï¼Œå°† key1 è®¾ç½®ä¸º{valueB 3:05}ã€‚æ¥ä¸‹æ¥ç³»ç»Ÿ A æŠ¢åˆ°é”ï¼Œå‘ç°è‡ªå·±çš„ valueA çš„æ—¶é—´æˆ³æ—©äºç¼“å­˜ä¸­çš„æ—¶é—´æˆ³ï¼Œé‚£å°±ä¸åš set æ“ä½œäº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚åˆ©ç”¨é˜Ÿåˆ—ï¼Œå°† set æ–¹æ³•å˜æˆä¸²è¡Œè®¿é—®ä¹Ÿå¯ä»¥ã€‚</p><h2 id="8ã€æ€»ç»“"><a href="#8ã€æ€»ç»“" class="headerlink" title="8ã€æ€»ç»“"></a>8ã€æ€»ç»“</h2><p>Redis åœ¨å›½å†…å„å¤§å…¬å¸éƒ½èƒ½çœ‹åˆ°å…¶èº«å½±ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„æ–°æµªï¼Œé˜¿é‡Œï¼Œè…¾è®¯ï¼Œç™¾åº¦ï¼Œç¾å›¢ï¼Œå°ç±³ç­‰ã€‚å­¦ä¹  Redisï¼Œè¿™å‡ æ–¹é¢å°¤å…¶é‡è¦ï¼šRedis å®¢æˆ·ç«¯ã€Redis é«˜çº§åŠŸèƒ½ã€Redis æŒä¹…åŒ–å’Œå¼€å‘è¿ç»´å¸¸ç”¨é—®é¢˜æ¢è®¨ã€Redis å¤åˆ¶çš„åŸç†å’Œä¼˜åŒ–ç­–ç•¥ã€Redis åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆç­‰ã€‚</p><p>è½¬è‡ªï¼š<a href="https://www.cnblogs.com/yaodengyan/p/9717080.html" target="_blank" rel="noopener">https://www.cnblogs.com/yaodengyan/p/9717080.html</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸå‹è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E5%8E%9F%E5%9E%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E5%8E%9F%E5%9E%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="6-åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰"><a href="#6-åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰" class="headerlink" title="6. åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰"></a>6. åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p><a href="https://i.imgur.com/6TBgFjp.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/6TBgFjp.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Prototype</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> Prototype <span class="title">myClone</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype</span> <span class="keyword">extends</span> <span class="title">Prototype</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String filed;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcretePrototype</span><span class="params">(String filed)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.filed = filed;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">Prototype <span class="title">myClone</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcretePrototype(filed);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> filed;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Prototype prototype = <span class="keyword">new</span> ConcretePrototype(<span class="string">"abc"</span>);</span><br><span class="line">        Prototype clone = prototype.myClone();</span><br><span class="line">        System.out.println(clone.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abc</span><br></pre></td></tr></tbody></table></figure></div><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone%28%29" target="_blank" rel="noopener">java.lang.Object#clone()</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å·¥å‚æ–¹æ³•ï¼ˆFactory-Methodï¼‰"><a href="#å·¥å‚æ–¹æ³•ï¼ˆFactory-Methodï¼‰" class="headerlink" title="å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰"></a>å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æŠŠå®ä¾‹åŒ–æ“ä½œæ¨è¿Ÿåˆ°å­ç±»ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p>åœ¨ç®€å•å·¥å‚ä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„æ˜¯å¦ä¸€ä¸ªç±»ï¼Œè€Œåœ¨å·¥å‚æ–¹æ³•ä¸­ï¼Œæ˜¯ç”±å­ç±»æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>ä¸‹å›¾ä¸­ï¼ŒFactory æœ‰ä¸€ä¸ª doSomething() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ç”¨åˆ°ä¸€ä¸ªäº§å“å¯¹è±¡ï¼Œè¿™ä¸ªäº§å“å¯¹è±¡ç”± factoryMethod() æ–¹æ³•åˆ›å»ºã€‚è¯¥æ–¹æ³•æ˜¯æŠ½è±¡çš„ï¼Œéœ€è¦ç”±å­ç±»å»å®ç°ã€‚</p><p><a href="https://i.imgur.com/uvXIKrJ.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/uvXIKrJ.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> Product <span class="title">factoryMethod</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>{</span><br><span class="line">        Product product = factoryMethod();</span><br><span class="line">        <span class="comment">// do something with the product</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°å·¥å‚æŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 10:42:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory</span> <span class="keyword">extends</span> <span class="title">Factory</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">factoryMethod</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> () -> System.out.println(<span class="string">"æˆ‘æ˜¯å·¥å‚ç”Ÿäº§çš„äº§å“ï¼Œå¤§å®¶å¯ä»¥å«æˆ‘å•¦å•¦â™ª(^âˆ‡^*)"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°å·¥å‚æŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 10:42:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">extends</span> <span class="title">Factory</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">factoryMethod</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> () -> System.out.println(<span class="string">"æˆ‘æ˜¯å·¥å‚ç”Ÿäº§çš„äº§å“ï¼Œå¤§å®¶å¯ä»¥å«æˆ‘å˜»å˜»(#^.^#)"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°å·¥å‚æŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 10:42:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">extends</span> <span class="title">Factory</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">factoryMethod</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> () -> System.out.println(<span class="string">"æˆ‘æ˜¯å·¥å‚ç”Ÿäº§çš„äº§å“ï¼Œå¤§å®¶å¯ä»¥å«æˆ‘å“ˆå“ˆ^_^"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#getInstance--" target="_blank" rel="noopener">java.util.Calendar</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/ResourceBundle.html#getBundle-java.lang.String-" target="_blank" rel="noopener">java.util.ResourceBundle</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getInstance--" target="_blank" rel="noopener">java.text.NumberFormat</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#forName-java.lang.String-" target="_blank" rel="noopener">java.nio.charset.Charset</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLStreamHandlerFactory.html#createURLStreamHandler-java.lang.String-" target="_blank" rel="noopener">java.net.URLStreamHandlerFactory</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html#of-E-" target="_blank" rel="noopener">java.util.EnumSet</a></li><li><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/JAXBContext.html#createMarshaller--" target="_blank" rel="noopener">javax.xml.bind.JAXBContext</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å·¥å‚è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="ç®€å•å·¥å‚ï¼ˆSimple-Factoryï¼‰"><a href="#ç®€å•å·¥å‚ï¼ˆSimple-Factoryï¼‰" class="headerlink" title="ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰"></a>ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ä¸å‘å®¢æˆ·æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œå¹¶æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„é€šç”¨æ¥å£ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p>ç®€å•å·¥å‚æŠŠå®ä¾‹åŒ–çš„æ“ä½œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œè¿™ä¸ªç±»å°±æˆä¸ºç®€å•å·¥å‚ç±»ï¼Œè®©ç®€å•å·¥å‚ç±»æ¥å†³å®šåº”è¯¥ç”¨å“ªä¸ªå…·ä½“å­ç±»æ¥å®ä¾‹åŒ–ã€‚</p><p>è¿™æ ·åšèƒ½æŠŠå®¢æˆ·ç±»å’Œå…·ä½“å­ç±»çš„å®ç°è§£è€¦ï¼Œå®¢æˆ·ç±»ä¸å†éœ€è¦çŸ¥é“æœ‰å“ªäº›å­ç±»ä»¥åŠåº”å½“å®ä¾‹åŒ–å“ªä¸ªå­ç±»ã€‚å®¢æˆ·ç±»å¾€å¾€æœ‰å¤šä¸ªï¼Œå¦‚æœä¸ä½¿ç”¨ç®€å•å·¥å‚ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®¢æˆ·ç±»éƒ½è¦çŸ¥é“æ‰€æœ‰å­ç±»çš„ç»†èŠ‚ã€‚è€Œä¸”ä¸€æ—¦å­ç±»å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚å¢åŠ å­ç±»ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®¢æˆ·ç±»éƒ½è¦è¿›è¡Œä¿®æ”¹ã€‚</p><p><a href="https://i.imgur.com/chP5OPu.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/chP5OPu.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"Hello Java"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct1</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"Hello Python"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct2</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"Hello Go"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ä»¥ä¸‹çš„ Client ç±»åŒ…å«äº†å®ä¾‹åŒ–çš„ä»£ç ï¼Œè¿™æ˜¯ä¸€ç§é”™è¯¯çš„å®ç°ã€‚å¦‚æœåœ¨å®¢æˆ·ç±»ä¸­å­˜åœ¨è¿™ç§å®ä¾‹åŒ–ä»£ç ï¼Œå°±éœ€è¦è€ƒè™‘å°†ä»£ç æ”¾åˆ°ç®€å•å·¥å‚ä¸­ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client1</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> type = <span class="number">1</span>;</span><br><span class="line">        Product product;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="number">1</span>) {</span><br><span class="line">            product = <span class="keyword">new</span> ConcreteProduct1();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">2</span>) {</span><br><span class="line">            product = <span class="keyword">new</span> ConcreteProduct2();</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            product = <span class="keyword">new</span> ConcreteProduct();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        product.hello();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ä»¥ä¸‹çš„ SimpleFactory æ˜¯ç®€å•å·¥å‚å®ç°ï¼Œå®ƒè¢«æ‰€æœ‰éœ€è¦è¿›è¡Œå®ä¾‹åŒ–çš„å®¢æˆ·ç±»è°ƒç”¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(<span class="keyword">int</span> type)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct1();</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">2</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct2();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client2</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SimpleFactory simpleFactory = <span class="keyword">new</span> SimpleFactory();</span><br><span class="line"></span><br><span class="line">        Product product = simpleFactory.createProduct(<span class="number">1</span>);</span><br><span class="line">        product.hello();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”Ÿæˆå™¨è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E7%94%9F%E6%88%90%E5%99%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E7%94%9F%E6%88%90%E5%99%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="ç”Ÿæˆå™¨ï¼ˆBuilderï¼‰"><a href="#ç”Ÿæˆå™¨ï¼ˆBuilderï¼‰" class="headerlink" title="ç”Ÿæˆå™¨ï¼ˆBuilderï¼‰"></a>ç”Ÿæˆå™¨ï¼ˆBuilderï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>å°è£…ä¸€ä¸ªå¯¹è±¡çš„æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p><a href="https://i.imgur.com/ACUSEcw.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/ACUSEcw.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€æ˜“çš„ StringBuilder å®ç°ï¼Œå‚è€ƒäº† JDK 1.8 æºç ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractStringBuilder</span> </span>{</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">char</span>[] value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractStringBuilder</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>{</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        value = <span class="keyword">new</span> <span class="keyword">char</span>[capacity];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">append</span><span class="params">(<span class="keyword">char</span> c)</span> </span>{</span><br><span class="line">        ensureCapacityInternal(count + <span class="number">1</span>);</span><br><span class="line">        value[count++] = c;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minimumCapacity)</span> </span>{</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="keyword">if</span> (minimumCapacity - value.length > <span class="number">0</span>)</span><br><span class="line">            expandCapacity(minimumCapacity);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">expandCapacity</span><span class="params">(<span class="keyword">int</span> minimumCapacity)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> newCapacity = value.length * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minimumCapacity < <span class="number">0</span>)</span><br><span class="line">            newCapacity = minimumCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity < <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">if</span> (minimumCapacity < <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">            newCapacity = Integer.MAX_VALUE;</span><br><span class="line">        }</span><br><span class="line">        value = Arrays.copyOf(value, newCapacity);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuilder</span> <span class="keyword">extends</span> <span class="title">AbstractStringBuilder</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StringBuilder</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(<span class="number">16</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">// Create a copy, don't share the array</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(value, <span class="number">0</span>, count);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> count = <span class="number">26</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < count; i++) {</span><br><span class="line">            sb.append((<span class="keyword">char</span>) (<span class="string">'a'</span> + i));</span><br><span class="line">        }</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abcdefghijklmnopqrstuvwxyz</span><br></pre></td></tr></tbody></table></figure></div><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html" target="_blank" rel="noopener">java.lang.StringBuilder</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-" target="_blank" rel="noopener">java.nio.ByteBuffer</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-" target="_blank" rel="noopener">java.lang.StringBuffer</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html" target="_blank" rel="noopener">java.lang.Appendable</a></li><li><a href="https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder" target="_blank" rel="noopener">Apache Camel builders</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´£ä»»é“¾è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E8%B4%A3%E4%BB%BB%E9%93%BE%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E8%B4%A3%E4%BB%BB%E9%93%BE%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="è´£ä»»é“¾ï¼ˆChain-Of-Responsibilityï¼‰"><a href="#è´£ä»»é“¾ï¼ˆChain-Of-Responsibilityï¼‰" class="headerlink" title="è´£ä»»é“¾ï¼ˆChain Of Responsibilityï¼‰"></a>è´£ä»»é“¾ï¼ˆChain Of Responsibilityï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾å‘é€è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><ul><li>Handlerï¼šå®šä¹‰å¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œå¹¶ä¸”å®ç°åç»§é“¾ï¼ˆsuccessorï¼‰</li></ul><p><a href="https://i.imgur.com/yrqMQH2.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/yrqMQH2.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Handler successor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Handler successor)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.successor = successor;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request request)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandler1</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteHandler1</span><span class="params">(Handler successor)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(successor);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request request)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (request.getType() == RequestType.TYPE1) {</span><br><span class="line">            System.out.println(request.getName() + <span class="string">" is handle by ConcreteHandler1"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (successor != <span class="keyword">null</span>) {</span><br><span class="line">            successor.handleRequest(request);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandler2</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteHandler2</span><span class="params">(Handler successor)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>(successor);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request request)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (request.getType() == RequestType.TYPE2) {</span><br><span class="line">            System.out.println(request.getName() + <span class="string">" is handle by ConcreteHandler2"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (successor != <span class="keyword">null</span>) {</span><br><span class="line">            successor.handleRequest(request);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Request</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RequestType type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Request</span><span class="params">(RequestType type, String name)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RequestType <span class="title">getType</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> RequestType {</span><br><span class="line">    TYPE1, TYPE2</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">        Handler handler1 = <span class="keyword">new</span> ConcreteHandler1(<span class="keyword">null</span>);</span><br><span class="line">        Handler handler2 = <span class="keyword">new</span> ConcreteHandler2(handler1);</span><br><span class="line"></span><br><span class="line">        Request request1 = <span class="keyword">new</span> Request(RequestType.TYPE1, <span class="string">"request1"</span>);</span><br><span class="line">        handler2.handleRequest(request1);</span><br><span class="line"></span><br><span class="line">        Request request2 = <span class="keyword">new</span> Request(RequestType.TYPE2, <span class="string">"request2"</span>);</span><br><span class="line">        handler2.handleRequest(request2);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request1 is handle by ConcreteHandler1</span><br><span class="line">request2 is handle by ConcreteHandler2</span><br></pre></td></tr></tbody></table></figure></div><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Logger.html#log%28java.util.logging.Level,%20java.lang.String%29" target="_blank" rel="noopener">java.util.logging.Logger#log()</a></li><li><a href="https://commons.apache.org/proper/commons-chain/index.html" target="_blank" rel="noopener">Apache Commons Chain</a></li><li><a href="http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html#doFilter-javax.servlet.ServletRequest-javax.servlet.ServletResponse-javax.servlet.FilterChain-" target="_blank" rel="noopener">javax.servlet.Filter#doFilter()</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•ä¾‹è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å•ä¾‹ï¼ˆSingletonï¼‰"><a href="#å•ä¾‹ï¼ˆSingletonï¼‰" class="headerlink" title="å•ä¾‹ï¼ˆSingletonï¼‰"></a>å•ä¾‹ï¼ˆSingletonï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p>ä½¿ç”¨ä¸€ä¸ªç§æœ‰æ„é€ å‡½æ•°ã€ä¸€ä¸ªç§æœ‰é™æ€å˜é‡ä»¥åŠä¸€ä¸ªå…¬æœ‰é™æ€å‡½æ•°æ¥å®ç°ã€‚</p><p>ç§æœ‰æ„é€ å‡½æ•°ä¿è¯äº†ä¸èƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œåªèƒ½é€šè¿‡å…¬æœ‰é™æ€å‡½æ•°è¿”å›å”¯ä¸€çš„ç§æœ‰é™æ€å˜é‡ã€‚</p><p><a href="https://i.imgur.com/zJiI9m5.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/zJiI9m5.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><h4 id="â… -æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨"><a href="#â… -æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="â…  æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨"></a>â…  æ‡’æ±‰å¼-çº¿ç¨‹ä¸å®‰å…¨</h4><p>ä»¥ä¸‹å®ç°ä¸­ï¼Œç§æœ‰é™æ€å˜é‡ uniqueInstance è¢«å»¶è¿Ÿå®ä¾‹åŒ–ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ç”¨åˆ°è¯¥ç±»ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå®ä¾‹åŒ– uniqueInstanceï¼Œä»è€ŒèŠ‚çº¦èµ„æºã€‚</p><p>è¿™ä¸ªå®ç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶è¿›å…¥ <code>if (uniqueInstance == null)</code> ï¼Œå¹¶ä¸”æ­¤æ—¶ uniqueInstance ä¸º nullï¼Œé‚£ä¹ˆä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ‰§è¡Œ <code>uniqueInstance = new Singleton();</code> è¯­å¥ï¼Œè¿™å°†å¯¼è‡´å®ä¾‹åŒ–å¤šæ¬¡ uniqueInstanceã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) {</span><br><span class="line">            uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h4 id="â…¡-é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨"><a href="#â…¡-é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨" class="headerlink" title="â…¡ é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨"></a>â…¡ é¥¿æ±‰å¼-çº¿ç¨‹å®‰å…¨</h4><p>çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ä¸»è¦æ˜¯ç”±äº uniqueInstance è¢«å®ä¾‹åŒ–å¤šæ¬¡ï¼Œé‡‡å–ç›´æ¥å®ä¾‹åŒ– uniqueInstance çš„æ–¹å¼å°±ä¸ä¼šäº§ç”Ÿçº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚</p><p>ä½†æ˜¯ç›´æ¥å®ä¾‹åŒ–çš„æ–¹å¼ä¹Ÿä¸¢å¤±äº†å»¶è¿Ÿå®ä¾‹åŒ–å¸¦æ¥çš„èŠ‚çº¦èµ„æºçš„å¥½å¤„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance = <span class="keyword">new</span> Singleton();</span><br></pre></td></tr></tbody></table></figure></div><h4 id="â…¢-æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨"><a href="#â…¢-æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨" class="headerlink" title="â…¢ æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨"></a>â…¢ æ‡’æ±‰å¼-çº¿ç¨‹å®‰å…¨</h4><p>åªéœ€è¦å¯¹ getUniqueInstance() æ–¹æ³•åŠ é”ï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥è¯¥æ–¹æ³•ï¼Œä»è€Œé¿å…äº†å®ä¾‹åŒ–å¤šæ¬¡ uniqueInstanceã€‚</p><p>ä½†æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¯¥æ–¹æ³•ä¹‹åï¼Œå…¶å®ƒè¯•å›¾è¿›å…¥è¯¥æ–¹æ³•çš„çº¿ç¨‹éƒ½å¿…é¡»ç­‰å¾…ï¼Œå³ä½¿ uniqueInstance å·²ç»è¢«å®ä¾‹åŒ–äº†ã€‚è¿™ä¼šè®©çº¿ç¨‹é˜»å¡æ—¶é—´è¿‡é•¿ï¼Œå› æ­¤è¯¥æ–¹æ³•æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸æ¨èä½¿ç”¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) {</span><br><span class="line">        uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h4 id="â…£-åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨"><a href="#â…£-åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨" class="headerlink" title="â…£ åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨"></a>â…£ åŒé‡æ ¡éªŒé”-çº¿ç¨‹å®‰å…¨</h4><p>uniqueInstance åªéœ€è¦è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚åŠ é”æ“ä½œåªéœ€è¦å¯¹å®ä¾‹åŒ–é‚£éƒ¨åˆ†çš„ä»£ç è¿›è¡Œï¼Œåªæœ‰å½“ uniqueInstance æ²¡æœ‰è¢«å®ä¾‹åŒ–æ—¶ï¼Œæ‰éœ€è¦è¿›è¡ŒåŠ é”ã€‚</p><p>åŒé‡æ ¡éªŒé”å…ˆåˆ¤æ–­ uniqueInstance æ˜¯å¦å·²ç»è¢«å®ä¾‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰è¢«å®ä¾‹åŒ–ï¼Œé‚£ä¹ˆæ‰å¯¹å®ä¾‹åŒ–è¯­å¥è¿›è¡ŒåŠ é”ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>{</span><br><span class="line">                <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) {</span><br><span class="line">                    uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è€ƒè™‘ä¸‹é¢çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯åªä½¿ç”¨äº†ä¸€ä¸ª if è¯­å¥ã€‚åœ¨ uniqueInstance == null çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº† if è¯­å¥ï¼Œé‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šè¿›å…¥ if è¯­å¥å—å†…ã€‚è™½ç„¶åœ¨ if è¯­å¥å—å†…æœ‰åŠ é”æ“ä½œï¼Œä½†æ˜¯ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šæ‰§è¡Œ <code>uniqueInstance = new Singleton();</code> è¿™æ¡è¯­å¥ï¼Œåªæ˜¯å…ˆåçš„é—®é¢˜ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸¤æ¬¡å®ä¾‹åŒ–ã€‚å› æ­¤å¿…é¡»ä½¿ç”¨åŒé‡æ ¡éªŒé”ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä½¿ç”¨ä¸¤ä¸ª if è¯­å¥ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) {</span><br><span class="line">    <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>{</span><br><span class="line">        uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>uniqueInstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ <code>uniqueInstance = new Singleton();</code> è¿™æ®µä»£ç å…¶å®æ˜¯åˆ†ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š</p><ol><li>ä¸º uniqueInstance åˆ†é…å†…å­˜ç©ºé—´</li><li>åˆå§‹åŒ– uniqueInstance</li><li>å°† uniqueInstance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€</li></ol><p>ä½†æ˜¯ç”±äº JVM å…·æœ‰æŒ‡ä»¤é‡æ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1>3>2ã€‚æŒ‡ä»¤é‡æ’åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸ä¼šå‡ºå…ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹è·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T<sub>1</sub> æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T<sub>2</sub> è°ƒç”¨ getUniqueInstance() åå‘ç° uniqueInstance ä¸ä¸ºç©ºï¼Œå› æ­¤è¿”å› uniqueInstanceï¼Œä½†æ­¤æ—¶ uniqueInstance è¿˜æœªè¢«åˆå§‹åŒ–ã€‚</p><p>ä½¿ç”¨ volatile å¯ä»¥ç¦æ­¢ JVM çš„æŒ‡ä»¤é‡æ’ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</p><h4 id="â…¤-é™æ€å†…éƒ¨ç±»å®ç°"><a href="#â…¤-é™æ€å†…éƒ¨ç±»å®ç°" class="headerlink" title="â…¤ é™æ€å†…éƒ¨ç±»å®ç°"></a>â…¤ é™æ€å†…éƒ¨ç±»å®ç°</h4><p>å½“ Singleton ç±»åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰è¢«åŠ è½½è¿›å†…å­˜ã€‚åªæœ‰å½“è°ƒç”¨ <code>getUniqueInstance()</code> æ–¹æ³•ä»è€Œè§¦å‘ <code>SingletonHolder.INSTANCE</code> æ—¶ SingletonHolder æ‰ä¼šè¢«åŠ è½½ï¼Œæ­¤æ—¶åˆå§‹åŒ– INSTANCE å®ä¾‹ï¼Œå¹¶ä¸” JVM èƒ½ç¡®ä¿ INSTANCE åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p><p>è¿™ç§æ–¹å¼ä¸ä»…å…·æœ‰å»¶è¿Ÿåˆå§‹åŒ–çš„å¥½å¤„ï¼Œè€Œä¸”ç”± JVM æä¾›äº†å¯¹çº¿ç¨‹å®‰å…¨çš„æ”¯æŒã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>{</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h4 id="â…¥-æšä¸¾å®ç°"><a href="#â…¥-æšä¸¾å®ç°" class="headerlink" title="â…¥ æšä¸¾å®ç°"></a>â…¥ æšä¸¾å®ç°</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton {</span><br><span class="line"></span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String objName;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getObjName</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> objName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObjName</span><span class="params">(String objName)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.objName = objName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å•ä¾‹æµ‹è¯•</span></span><br><span class="line">        Singleton firstSingleton = Singleton.INSTANCE;</span><br><span class="line">        firstSingleton.setObjName(<span class="string">"firstName"</span>);</span><br><span class="line">        System.out.println(firstSingleton.getObjName());</span><br><span class="line">        Singleton secondSingleton = Singleton.INSTANCE;</span><br><span class="line">        secondSingleton.setObjName(<span class="string">"secondName"</span>);</span><br><span class="line">        System.out.println(firstSingleton.getObjName());</span><br><span class="line">        System.out.println(secondSingleton.getObjName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åå°„è·å–å®ä¾‹æµ‹è¯•</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Singleton[] enumConstants = Singleton<span class="class">.<span class="keyword">class</span>.<span class="title">getEnumConstants</span>()</span>;</span><br><span class="line">            <span class="keyword">for</span> (Singleton enumConstant : enumConstants) {</span><br><span class="line">                System.out.println(enumConstant.getObjName());</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firstName</span><br><span class="line">secondName</span><br><span class="line">secondName</span><br><span class="line">secondName</span><br></pre></td></tr></tbody></table></figure></div><p>è¯¥å®ç°åœ¨å¤šæ¬¡åºåˆ—åŒ–å†è¿›è¡Œååºåˆ—åŒ–ä¹‹åï¼Œä¸ä¼šå¾—åˆ°å¤šä¸ªå®ä¾‹ã€‚è€Œå…¶å®ƒå®ç°éœ€è¦ä½¿ç”¨ transient ä¿®é¥°æ‰€æœ‰å­—æ®µï¼Œå¹¶ä¸”å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ³•ã€‚</p><p>è¯¥å®ç°å¯ä»¥é˜²æ­¢åå°„æ”»å‡»ã€‚åœ¨å…¶å®ƒå®ç°ä¸­ï¼Œé€šè¿‡ setAccessible() æ–¹æ³•å¯ä»¥å°†ç§æœ‰æ„é€ å‡½æ•°çš„è®¿é—®çº§åˆ«è®¾ç½®ä¸º publicï¼Œç„¶åè°ƒç”¨æ„é€ å‡½æ•°ä»è€Œå®ä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æœè¦é˜²æ­¢è¿™ç§æ”»å‡»ï¼Œéœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–çš„ä»£ç ã€‚è¯¥å®ç°æ˜¯ç”± JVM ä¿è¯åªä¼šå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤ä¸ä¼šå‡ºç°ä¸Šè¿°çš„åå°„æ”»å‡»ã€‚</p><h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><ul><li>Logger Classes</li><li>Configuration Classes</li><li>Accesing resources in shared mode</li><li>Factories implemented as Singletons</li></ul><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#getRuntime%28%29" target="_blank" rel="noopener">java.lang.Runtime#getRuntime()</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#getDesktop--" target="_blank" rel="noopener">java.awt.Desktop#getDesktop()</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getSecurityManager--" target="_blank" rel="noopener">java.lang.System#getSecurityManager()</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼</title>
      <link href="/2018/10/11/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/11/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="æŠ½è±¡å·¥å‚ï¼ˆAbstract-Factoryï¼‰"><a href="#æŠ½è±¡å·¥å‚ï¼ˆAbstract-Factoryï¼‰" class="headerlink" title="æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰"></a>æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰</h2><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º  <strong>ç›¸å…³çš„å¯¹è±¡å®¶æ—</strong> ã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p>æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºçš„æ˜¯å¯¹è±¡å®¶æ—ï¼Œä¹Ÿå°±æ˜¯å¾ˆå¤šå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡æ˜¯ç›¸å…³çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»ä¸€èµ·åˆ›å»ºå‡ºæ¥ã€‚è€Œå·¥å‚æ–¹æ³•æ¨¡å¼åªæ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¾ˆå¤§ä¸åŒã€‚</p><p>æŠ½è±¡å·¥å‚æ¨¡å¼ç”¨åˆ°äº†å·¥å‚æ–¹æ³•æ¨¡å¼æ¥åˆ›å»ºå•ä¸€å¯¹è±¡ï¼ŒAbstractFactory ä¸­çš„ createProductA() å’Œ createProductB() æ–¹æ³•éƒ½æ˜¯è®©å­ç±»æ¥å®ç°ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å•ç‹¬æ¥çœ‹å°±æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç¬¦åˆå·¥å‚æ–¹æ³•æ¨¡å¼çš„å®šä¹‰ã€‚</p><p>è‡³äºåˆ›å»ºå¯¹è±¡çš„å®¶æ—è¿™ä¸€æ¦‚å¿µæ˜¯åœ¨ Client ä½“ç°ï¼ŒClient è¦é€šè¿‡ AbstractFactory åŒæ—¶è°ƒç”¨ä¸¤ä¸ªæ–¹æ³•æ¥åˆ›å»ºå‡ºä¸¤ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™é‡Œè¿™ä¸¤ä¸ªå¯¹è±¡å°±æœ‰å¾ˆå¤§çš„ç›¸å…³æ€§ï¼ŒClient éœ€è¦åŒæ—¶åˆ›å»ºå‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p><p>ä»é«˜å±‚æ¬¡æ¥çœ‹ï¼ŒæŠ½è±¡å·¥å‚ä½¿ç”¨äº†ç»„åˆï¼Œå³ Cilent ç»„åˆäº† AbstractFactoryï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨äº†ç»§æ‰¿ã€‚</p><p><a href="https://i.imgur.com/rHg602N.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/rHg602N.jpg" class="lazyload" title></a></p><h3 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractProductA</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloA</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HelloA "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractProductB</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloB</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HelloB "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductA1</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiA1</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HiA1 "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductA2</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiA2</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HiA2 "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductB1</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiB1</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HiB1 "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductB2</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiB2</span><span class="params">(String h)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"HiB2 "</span> + h);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ½è±¡ç±»å·¥å‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 11:01:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactory</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> AbstractProductA <span class="title">createProductA</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> AbstractProductB <span class="title">createProductB</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°å·¥å‚ä¸€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 11:01:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">AbstractProductA <span class="title">createProductA</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA1();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">AbstractProductB <span class="title">createProductB</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB1();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°å·¥å‚äºŒ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 11:01:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">AbstractProductA <span class="title">createProductA</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA2();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">AbstractProductB <span class="title">createProductB</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB2();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ä¸åŒçš„å·¥å‚è·å–ä¸åŒçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YI</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-10-11 11:03:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        AbstractFactory abstractFactory = <span class="keyword">new</span> ConcreteFactory1();</span><br><span class="line"></span><br><span class="line">        AbstractProductA productA = abstractFactory.createProductA();</span><br><span class="line">        AbstractProductB productB = abstractFactory.createProductB();</span><br><span class="line">        productA.helloA(<span class="string">"ç¾å¥³"</span>);</span><br><span class="line">        productB.helloB(<span class="string">"æ ¡èŠ±"</span>);</span><br><span class="line">        <span class="comment">// do something with productA and productB</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html" target="_blank" rel="noopener">javax.xml.parsers.DocumentBuilderFactory</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--" target="_blank" rel="noopener">javax.xml.transform.TransformerFactory</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--" target="_blank" rel="noopener">javax.xml.xpath.XPathFactory</a></li></ul><p>æºç ï¼š<a href="https://github.com/HWYWL/design-patterns" target="_blank" rel="noopener">https://github.com/HWYWL/design-patterns</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ä¼˜é›…ä½¿ç”¨Docker</title>
      <link href="/2018/09/25/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E4%BD%BF%E7%94%A8Docker/"/>
      <url>/2018/09/25/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E4%BD%BF%E7%94%A8Docker/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="è¯·æ”¶ä¸‹è¿™15ä¸ªå°æŠ€å·§"><a href="#è¯·æ”¶ä¸‹è¿™15ä¸ªå°æŠ€å·§" class="headerlink" title="è¯·æ”¶ä¸‹è¿™15ä¸ªå°æŠ€å·§"></a>è¯·æ”¶ä¸‹è¿™15ä¸ªå°æŠ€å·§</h1><h2 id="Tip-1"><a href="#Tip-1" class="headerlink" title="Tip 1"></a><code>Tip 1</code></h2><p>è·å–æœ€è¿‘è¿è¡Œå®¹å™¨çš„id è¿™æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€ä¸ªæ“ä½œï¼ŒæŒ‰ç…§å®˜æ–¹ç¤ºä¾‹ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼ˆç¯å¢ƒubuntuï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ID=$(docker run ubuntu echo hello world)</span><br><span class="line">hello world</span><br><span class="line">$ docker commit $ID helloworld</span><br><span class="line">fd08a884dc79</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™ç§æ–¹å¼åœ¨ç¼–å†™è„šæœ¬çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ä½ æƒ³åœ¨è„šæœ¬ä¸­æ‰¹é‡è·å–idï¼Œç„¶åè¿›ä¸€æ­¥æ“ä½œã€‚ä½†æ˜¯è¿™ç§æ–¹å¼è¦æ±‚ä½ å¿…é¡»ç»™IDèµ‹å€¼ï¼Œå¦‚æœæ˜¯ç›´æ¥æ•²å‘½ä»¤ï¼Œè¿™æ ·åšå°±ä¸å¤ªæ–¹ä¾¿äº†ã€‚ è¿™æ—¶ï¼Œä½ å¯ä»¥æ¢ä¸€ç§æ–¹å¼ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ alias dl=â€™docker ps -l -qâ€™</span><br><span class="line">$ docker run ubuntu echo hello world</span><br><span class="line">hello world</span><br><span class="line">$ dl</span><br><span class="line">1904cf045887</span><br><span class="line">$ docker commit `dl` helloworld</span><br><span class="line">fd08a884dc79</span><br></pre></td></tr></tbody></table></figure></div><p>docker ps -l -qå‘½ä»¤å°†è¿”å›æœ€è¿‘è¿è¡Œçš„å®¹å™¨çš„idï¼Œé€šè¿‡è®¾ç½®åˆ«åï¼ˆaliasï¼‰ï¼Œdlå‘½ä»¤å°±æ˜¯è·å–æœ€è¿‘å®¹å™¨çš„idã€‚è¿™æ ·ï¼Œå°±æ— éœ€å†è¾“å…¥å†—é•¿çš„docker ps -l -qå‘½ä»¤äº†ã€‚é€šè¿‡ä¸¤ä¸ªæ–œå¼•å·â€œï¼Œå¯ä»¥è·å–dlå‘½ä»¤çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘è¿è¡Œçš„å®¹å™¨çš„idã€‚</p><h2 id="Tip-2"><a href="#Tip-2" class="headerlink" title="Tip 2"></a><code>Tip 2</code></h2><p>å°½é‡åœ¨Dockerfileä¸­æŒ‡å®šè¦å®‰è£…çš„è½¯ä»¶ï¼Œè€Œä¸ç”¨Dockerå®¹å™¨çš„shellç›´æ¥å®‰è£…è½¯ä»¶ã€‚ è¯´å®è¯ï¼Œæˆ‘æœ‰æ—¶å€™ä¹Ÿå–œæ¬¢åœ¨shellä¸­å®‰è£…è½¯ä»¶ï¼Œä¹Ÿè®¸ä½ ä¹Ÿä¸€æ ·ï¼Œå–œæ¬¢åœ¨shellä¸­æŠŠæ‰€æœ‰è½¯ä»¶å®‰è£…éƒ½æå®šã€‚ä½†æ˜¯ï¼Œææ¥æå»ï¼Œæœ€åè¿˜æ˜¯å‘ç°ï¼Œä½ è¿˜æ˜¯éœ€è¦åœ¨Doockerfileä¸­æŒ‡å®šå®‰è£…æ–‡ä»¶ã€‚åœ¨shellä¸­å®‰è£…è½¯ä»¶ï¼Œä½ è¦è¿™æ ·åšï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -i -t ubuntu bash #ç™»é™†åˆ°dockerå®¹å™¨</span><br><span class="line">root@db0c3967abf8:/#</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…æ–‡ä»¶ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install postgresql</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åå†è°ƒç”¨exitï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@db0c3978abf8:/# exit</span><br></pre></td></tr></tbody></table></figure></div><p>é€€å‡ºdockerå®¹å™¨ï¼Œå†ç»™docker commitå‘½ä»¤ä¼ é€’ä¸€ä¸ªå¤æ‚çš„JSONå­—ç¬¦ä¸²æ¥æäº¤æ–°çš„é•œåƒï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker commit -run=â€{â€œCmdâ€:[â€œpostgresâ€,â€-too -many -optsâ€] }â€ `dl` postgres</span><br></pre></td></tr></tbody></table></figure></div><p>å¤ªéº»çƒ¦äº†ï¼Œä¸æ˜¯å—ï¼Ÿè¿˜æ˜¯åœ¨Dockerfileä¸­æŒ‡å®šå®‰è£…æ–‡ä»¶å§ï¼Œåªè¦ä¸¤ä¸ªæ­¥éª¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨ä¸€ä¸ªå°å·§çš„Dockerfileä¸­ï¼ŒæŒ‡å®šå½“å‰æ“ä½œçš„é•œåƒä¸ºFROMå‘½ä»¤çš„å‚æ•°</span><br><span class="line">2.ç„¶ååœ¨Dockerfileä¸­æŒ‡å®šä¸€äº›dockerçš„å‘½ä»¤ï¼Œå¦‚CMD, ENTERPOINT, VOLUMEç­‰ç­‰æ¥æŒ‡å®šå®‰è£…çš„è½¯ä»¶</span><br></pre></td></tr></tbody></table></figure></div><h2 id="Tip-3"><a href="#Tip-3" class="headerlink" title="Tip 3"></a><code>Tip 3</code></h2><p>è¶…-è¶…-è¶…çº§ç”¨æˆ·</p><p>ä½ å¯èƒ½éœ€è¦ä¸€ç›´ç”¨è¶…çº§ç”¨æˆ·æ¥æ“ä½œdockerï¼Œå°±åƒæ—©æœŸç¤ºä¾‹é‡Œä¸€ç›´æç¤ºçš„ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ·»åŠ dockerç”¨æˆ·ç»„</span><br><span class="line">$ sudo groupadd docker</span><br><span class="line"># æŠŠè‡ªå·±åŠ åˆ°dockerç”¨æˆ·ç»„ä¸­</span><br><span class="line">$ sudo gpasswd -a myusername docker</span><br><span class="line"># é‡å¯dockeråå°æœåŠ¡</span><br><span class="line">$ sudo service docker restart</span><br><span class="line"># æ³¨é”€ï¼Œç„¶åå†ç™»é™†</span><br><span class="line">$ exit</span><br></pre></td></tr></tbody></table></figure></div><p>Wowï¼è¿ç»­ä¸‰ä¸ªsudoï¼ä¸‰æ¬¡åŒ–èº«â€œè¶…çº§ç”¨æˆ·â€ï¼ŒçœŸå¯è°“æ˜¯â€œè¶…-è¶…-è¶…çº§ç”¨æˆ·â€å•Šï¼åˆ«æ‹…å¿ƒï¼Œè®¾ç½®å®Œæ¯•ï¼Œä»¥åä½ å°±å†ä¹Ÿä¸ç”¨æ‰“é‚£ä¹ˆå¤šsudoäº†ï¼</p><h2 id="Tip-4"><a href="#Tip-4" class="headerlink" title="Tip 4"></a><code>Tip 4</code></h2><p>æ¸…ç†åƒåœ¾</p><p>å¦‚æœä½ æƒ³åˆ é™¤æ‰€æœ‰åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker rm $(docker ps -a -q)</span><br></pre></td></tr></tbody></table></figure></div><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œdocker pså‘½ä»¤å¾ˆæ…¢ï¼Œä¸çŸ¥é“ä¸ºå•¥è¿™ä¹ˆæ…¢ï¼ŒæŒ‰ç†è¯´Goè¯­è¨€æ˜¯å¾ˆå¿«çš„å•Šã€‚docker ps -a -qå‘½ä»¤åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„idï¼Œç„¶åæ ¹æ®idåˆ é™¤å®¹å™¨ã€‚docker rmå‘½ä»¤é‡åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨å°±ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥è¿™ä¸ªå‘½ä»¤å®Œç¾çš„åˆ é™¤äº†æ‰€æœ‰æ²¡åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</p><h2 id="Tip-5"><a href="#Tip-5" class="headerlink" title="Tip 5"></a><code>Tip 5</code></h2><p>docker inspectè¾“å‡ºç»“æœçš„è§£æåˆ©å™¨ï¼šjq è¦å¯¹docker inspectçš„è¾“å‡ºç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨grepå‘½ä»¤ï¼Œä½ éœ€è¦è¿™æ ·æ“ä½œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker inspect `dl` | grep IPAddress | cut -d '"' -f 4</span><br></pre></td></tr></tbody></table></figure></div><p>å“¦ï¼çœ‹ä¸Šå»å¾ˆå¤æ‚ï¼Œç”¨jqå§ï¼Œä¸“ä¸šè§£ædocker inspectè¾“å‡ºç»“æœï¼Œå…·æœ‰æ›´å¼ºçš„å¯è¯»æ€§ï¼Œæ–¹ä¾¿æ˜“ç”¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker inspect `dl` | jq -r '.[0].NetworkSettings.IPAddress'</span><br></pre></td></tr></tbody></table></figure></div><p>å…¶ä¸­ç¬¬ä¸€ä¸ªâ€™.â€™ä»£è¡¨æ‰€æœ‰çš„ç»“æœã€‚â€™[0]â€™ä»£è¡¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å°±åƒJavaScriptè®¿é—®ä¸€ä¸ªJSONå¯¹è±¡ä¸€æ ·ï¼Œç®€å•æ–¹ä¾¿ã€‚</p><h2 id="Tip-6"><a href="#Tip-6" class="headerlink" title="Tip 6"></a><code>Tip 6</code></h2><p>é•œåƒæœ‰å“ªäº›ç¯å¢ƒå˜é‡ï¼Ÿ æœ‰æ—¶å€™ï¼Œä½ éœ€è¦çŸ¥é“è‡ªå·±åˆ›å»ºçš„é•œåƒæœ‰å“ªäº›ç¯å¢ƒå˜é‡ã€‚ç®€å•ï¼åªè¦è¿™æ ·ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run ubuntu env</span><br></pre></td></tr></tbody></table></figure></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HOME=/</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line">container=lxc</span><br><span class="line">HOSTNAME=5e1560b7f757</span><br></pre></td></tr></tbody></table></figure></div><p>è°ƒç”¨envæŸ¥çœ‹ç¯å¢ƒå˜é‡ï¼Œå¯¹äºåé¢è¦è®²åˆ°çš„â€œé“¾æ¥â€(-link)å¾ˆæœ‰ç”¨ï¼Œåœ¨è¿æ¥ä¸¤ä¸ªå®¹å™¨æ—¶å€™éœ€è¦ç”¨åˆ°è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå…·ä½“è¯·çœ‹æœ€åä¸€ä¸ªè¦ç‚¹â€œé“¾æ¥â€ã€‚</p><h2 id="Tip-7"><a href="#Tip-7" class="headerlink" title="Tip 7"></a><code>Tip 7</code></h2><p>RUNå‘½ä»¤ vs CMDå‘½ä»¤</p><p>Dockerçš„æ–°æ‰‹ç”¨æˆ·æ¯”è¾ƒå®¹æ˜“æ··æ·†RUNå’ŒCMDè¿™ä¸¤ä¸ªå‘½ä»¤ã€‚ RUNå‘½ä»¤åœ¨æ„å»ºï¼ˆBuildï¼‰Dockeræ—¶æ‰§è¡Œï¼Œè¿™æ—¶CMDå‘½ä»¤ä¸æ‰§è¡Œã€‚CMDå‘½ä»¤åœ¨RUNå‘½ä»¤æ‰§è¡Œæ—¶æ‰æ‰§è¡Œã€‚æˆ‘ä»¬æ¥ç†æ¸…å…³ç³»ï¼Œå‡è®¾Dockerfileå†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM thelanddownunder</span><br><span class="line">MAINTAINER crocdundee</span><br></pre></td></tr></tbody></table></figure></div><p>æˆ‘ä»¬è¦å‘ç³»ç»Ÿä¸­å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œé‚£ä¹ˆï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># docker buildå°†ä¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</span><br><span class="line">RUN apt-get update</span><br><span class="line">RUN apt-get install softwares</span><br><span class="line"># dokcer runé»˜è®¤æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</span><br><span class="line">CMD [â€œsoftwaresâ€]</span><br></pre></td></tr></tbody></table></figure></div><p>Buildæ—¶æ‰§è¡ŒRUNï¼ŒRUNæ—¶æ‰§è¡ŒCMDï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒCMDæ‰æ˜¯é•œåƒæœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤ã€‚</p><h2 id="Tip-8"><a href="#Tip-8" class="headerlink" title="Tip 8"></a><code>Tip 8</code></h2><p>CMDå‘½ä»¤ vs ENTRYPOINTå‘½ä»¤</p><p>åˆæ˜¯ä¸¤æ¡å®¹æ˜“æ··æ·†çš„å‘½ä»¤ï¼å…·ä½“ç»†èŠ‚æˆ‘ä»¬å°±ä¸è¯´äº†ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªå®¹å™¨çš„DockerfileæŒ‡å®šCMDå‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line">CMD [â€œechoâ€]</span><br></pre></td></tr></tbody></table></figure></div><p>å¦ä¸€ä¸ªå®¹å™¨çš„DockerfileæŒ‡å®šENTRYPOINTå‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line">ENTRYPOINT [â€œechoâ€]</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç¬¬ä¸€ä¸ªå®¹å™¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run image1 echo hello</span><br></pre></td></tr></tbody></table></figure></div><p>å¾—åˆ°çš„ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç¬¬äºŒä¸ªå®¹å™¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run image2 echo hello</span><br></pre></td></tr></tbody></table></figure></div><p>å¾—åˆ°çš„ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo hello</span><br></pre></td></tr></tbody></table></figure></div><p>çœ‹åˆ°ä¸åŒäº†å§ï¼Ÿå®é™…ä¸Šï¼ŒCMDå‘½ä»¤æ˜¯å¯è¦†ç›–çš„ï¼Œdocker runåé¢è¾“å…¥çš„å‘½ä»¤ä¸CMDæŒ‡å®šçš„å‘½ä»¤åŒ¹é…æ—¶ï¼Œä¼šæŠŠCMDæŒ‡å®šçš„å‘½ä»¤æ›¿æ¢æˆdocker runä¸­å¸¦çš„å‘½ä»¤ã€‚è€ŒENTRYPOINTæŒ‡å®šçš„å‘½ä»¤åªæ˜¯ä¸€ä¸ªâ€œå…¥å£â€ï¼Œdocker runåé¢çš„å†…å®¹ä¼šå…¨éƒ¨ä¼ ç»™è¿™ä¸ªâ€œå…¥å£â€ï¼Œè€Œä¸æ˜¯è¿›è¡Œå‘½ä»¤çš„æ›¿æ¢ï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœå°±æ˜¯â€œecho helloâ€ã€‚</p><h2 id="Tip-9"><a href="#Tip-9" class="headerlink" title="Tip 9"></a><code>Tip 9</code></h2><p>Dockerå®¹å™¨æœ‰è‡ªå·±çš„IPåœ°å€å—ï¼Ÿ </p><p>åˆšæ¥è§¦Dockerçš„äººæˆ–è®¸ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šDockerå®¹å™¨æœ‰è‡ªå·±çš„IPåœ°å€å—ï¼ŸDockerå®¹å™¨æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Ÿè¿˜æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼Ÿå—¯â€¦ä¹Ÿè®¸ä¸¤è€…å…¼å…·ï¼Ÿå“ˆå“ˆï¼Œå…¶å®ï¼ŒDockerå®¹å™¨ç¡®å®æœ‰è‡ªå·±çš„IPï¼Œå°±åƒä¸€ä¸ªå…·æœ‰IPçš„è¿›ç¨‹ã€‚åªè¦åˆ†åˆ«åœ¨ä¸»æœºå’ŒDockerå®¹å™¨ä¸­æ‰§è¡ŒæŸ¥çœ‹ipçš„å‘½ä»¤å°±çŸ¥é“äº†ã€‚</p><p>æŸ¥çœ‹ä¸»æœºçš„ipï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ip -4 -o addr show eth0</span><br></pre></td></tr></tbody></table></figure></div><p>å¾—åˆ°ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2: eth0 inet 162.243.139.222/24</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥çœ‹Dockerå®¹å™¨çš„ipï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run ubuntu ip -r -o addr show eth0</span><br></pre></td></tr></tbody></table></figure></div><p>å¾—åˆ°ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">149: eth0   inet 172.17.0.43/16</span><br></pre></td></tr></tbody></table></figure></div><p>ä¸¤è€…å¹¶ä¸ç›¸åŒï¼Œè¯´æ˜Dockerå®¹å™¨æœ‰è‡ªå·±çš„ipã€‚</p><h2 id="Tip-10"><a href="#Tip-10" class="headerlink" title="Tip 10"></a><code>Tip 10</code></h2><p>åŸºäºå‘½ä»¤è¡Œçš„ç˜¦å®¢æˆ·ç«¯ï¼Œä½¿ç”¨UNIX Socketå’ŒDockeråå°æœåŠ¡çš„RESTæ¥å£è¿›è¡Œé€šä¿¡ã€‚Dockeré»˜è®¤æ˜¯ç”¨UNIX socketé€šä¿¡çš„ï¼Œä¸€ç›´åˆ°å¤§æ¦‚0.5ã€0.6çš„ç‰ˆæœ¬è¿˜æ˜¯ç”¨ç«¯å£æ¥é€šä¿¡ï¼Œä½†ç°åœ¨åˆ™æ”¹æˆUNIX socketï¼Œæ‰€ä»¥ä»å¤–éƒ¨æ— æ³•æ§åˆ¶Dockerå®¹å™¨çš„å†…éƒ¨ç»†èŠ‚ã€‚ä¸‹é¢æˆ‘ä»¬æ¥æç‚¹æœ‰è¶£çš„äº‹æƒ…ï¼Œä»ä¸»æœºé“¾æ¥åˆ°dockerçš„UNIX socketï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åƒHTTPå®¢æˆ·ç«¯ä¸€æ ·è¿æ¥åˆ°UNIX socket</span><br><span class="line">$ nc -U / /var/run/docker.sock</span><br></pre></td></tr></tbody></table></figure></div><p>è¿æ¥æˆåŠŸåï¼Œè¾“å…¥ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /images/json HTTP/1.1</span><br></pre></td></tr></tbody></table></figure></div><p>è¾“å…¥åè¿æ•²ä¸¤ä¸ªå›è½¦ï¼Œç¬¬äºŒä¸ªå›è½¦è¡¨ç¤ºè¾“å…¥ç»“æŸã€‚ç„¶åï¼Œå¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Date: Tue, 05 Nov 2013 23:18:09 GMT</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">16aa</span><br><span class="line">[{â€œRepositoryâ€:â€postgresâ€,â€Tagâ€:â€......</span><br></pre></td></tr></tbody></table></figure></div><p>æœ‰ä¸€å¤©ï¼Œæˆ‘ä¸å°å¿ƒæŠŠæäº¤çš„åç§°æ‰“é”™äº†ï¼Œåå­—å¼€å¤´æ‰“æˆâ€-xxxâ€ï¼ˆæˆ‘æŠŠå‘½ä»¤å’Œé€‰é¡¹çš„é¡ºåºææ··äº†ï¼‰ï¼Œæ‰€ä»¥å½“æˆ‘åˆ é™¤çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œdocker rm -xxxï¼Œä¼šæŠŠ-xxxå½“æˆå‚æ•°è€Œä¸æ˜¯é•œåƒçš„åç§°ã€‚æ‰€ä»¥æˆ‘åªå¾—é€šè¿‡socketç›´æ¥è¿åˆ°å®¹å™¨æ¥è°ƒç”¨REST ServeræŠŠé”™è¯¯çš„ä¸œè¥¿åˆ æ‰ã€‚</p><h2 id="Tip-11"><a href="#Tip-11" class="headerlink" title="Tip 11"></a><code>Tip 11</code></h2><p>æŠŠé•œåƒçš„ä¾èµ–å…³ç³»ç»˜åˆ¶æˆå›¾</p><p>docker imageså‘½ä»¤æœ‰ä¸€ä¸ªå¾ˆæ‹‰é£çš„é€‰é¡¹ï¼š-vizï¼Œå¯ä»¥æŠŠé•œåƒçš„ä¾èµ–å…³ç³»ç»˜åˆ¶æˆå›¾å¹¶é€šè¿‡ç®¡é“ç¬¦å·ä¿å­˜åˆ°å›¾ç‰‡æ–‡ä»¶ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆä¸€ä¸ªä¾èµ–å…³ç³»çš„å›¾è¡¨</span><br><span class="line">$ docker images -viz | dot -T png -o docker.png</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™æ ·ï¼Œä¸»æœºçš„å½“å‰è·¯å¾„ä¸‹å°±ç”Ÿæˆäº†ä¸€å¼ pngå›¾ï¼Œç„¶åï¼Œç”¨pythonå¼€å¯ä¸€ä¸ªå¾®å‹çš„HTTPæœåŠ¡å™¨ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶ååœ¨åˆ«çš„æœºå™¨ä¸Šç”¨æµè§ˆå™¨æ‰“å¼€ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://machinename:8000/docker.png</span><br></pre></td></tr></tbody></table></figure></div><p>OKï¼Œä¾èµ–å…³ç³»ä¸€ç›®äº†ç„¶ï¼</p><p>ï¼ˆè¯‘è€…æ³¨ï¼šè¦ä½¿ç”¨dotå‘½ä»¤ï¼Œä¸»æœºè¦å®‰è£…graphvizåŒ…ã€‚å¦å¤–ï¼Œå¦‚æœä¸»æœºipæ²¡æœ‰ç»‘å®šåŸŸåï¼Œmachinenameæ¢æˆä¸»æœºçš„ipå³å¯ã€‚ï¼‰</p><h2 id="Tip-12"><a href="#Tip-12" class="headerlink" title="Tip 12"></a><code>Tip 12</code></h2><p>DockeræŠŠä¸œè¥¿éƒ½å­˜åˆ°å“ªé‡Œå»äº†ï¼Ÿ Dockerå®é™…ä¸ŠæŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ”¾åˆ°/var/lib/dockerè·¯å¾„ä¸‹äº†ã€‚åˆ‡æ¢æˆsuperç”¨æˆ·ï¼Œåˆ°/var/lib/dockerä¸‹çœ‹çœ‹ï¼Œä½ èƒ½å­¦åˆ°å¾ˆå¤šæœ‰è¶£çš„ä¸œè¥¿ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo su</span><br><span class="line"># cd /var/lib/docker</span><br><span class="line"># ls -F</span><br><span class="line">containers/ graph/ repositories volumes/</span><br></pre></td></tr></tbody></table></figure></div><p>å¯ä»¥çœ‹åˆ°ä¸å°‘ç›®å½•ï¼Œcontainersç›®å½•å½“ç„¶å°±æ˜¯å­˜æ”¾å®¹å™¨ï¼ˆcontainerï¼‰äº†ï¼Œgraphç›®å½•å­˜æ”¾é•œåƒï¼Œæ–‡ä»¶å±‚ï¼ˆfile system layerï¼‰å­˜æ”¾åœ¨graph/imageid/layerè·¯å¾„ä¸‹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥çœ‹çœ‹æ–‡ä»¶å±‚é‡Œåˆ°åº•æœ‰å“ªäº›ä¸œè¥¿ï¼Œåˆ©ç”¨è¿™ç§å±‚çº§ç»“æ„å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°æ–‡ä»¶å±‚æ˜¯å¦‚ ä½•ä¸€å±‚ä¸€å±‚å åŠ èµ·æ¥çš„ã€‚</p><h2 id="Tip-13"><a href="#Tip-13" class="headerlink" title="Tip 13"></a><code>Tip 13</code></h2><p>Dockeræºä»£ç ï¼šGo, Go, Go, Golang! Dockerçš„æºä»£ç å…¨éƒ¨æ˜¯ç”¨Goè¯­è¨€å†™çš„ã€‚Goæ˜¯ä¸€é—¨éå¸¸é…·çš„è¯­è¨€ã€‚å…¶å®ï¼Œä¸åªæ˜¯Dockerï¼Œå¾ˆå¤šä¼˜ç§€çš„è½¯ä»¶éƒ½æ˜¯ç”¨Goå†™çš„ã€‚å¯¹æˆ‘æ¥è¯´ï¼ŒDockeræºæ–‡ä»¶ä¸­ï¼Œæœ‰4ä¸ªæ˜¯æˆ‘éå¸¸å–œæ¬¢é˜…è¯»çš„ï¼š</p><p>commands.go dockerçš„å‘½ä»¤è¡Œæ¥å£ï¼Œæ˜¯å¯¹REST APIçš„ä¸€ä¸ªè½»é‡çº§å°è£…ã€‚Dockerå›¢é˜Ÿä¸å¸Œæœ›åœ¨å‘½ä»¤ä¸­å‡ºç°é€»è¾‘ï¼Œå› æ­¤commands.goåªæ˜¯å‘REST APIå‘é€æŒ‡ä»¤ï¼Œç¡®ä¿å…¶è¾ƒå°çš„é¢—ç²’æ€§ã€‚</p><p>api.go REST APIçš„è·¯ç”±ï¼ˆæ¥å—commands.goä¸­çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°server.goï¼‰</p><p>server.go å¤§éƒ¨åˆ†REST APIçš„å®ç°</p><p>buildfile.go Dockerfileçš„è§£æå™¨</p><p>æœ‰çš„ä¼™è®¡æƒŠå¹â€Wow!Dockeræ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼æˆ‘æ— æ³•ç†è§£ï¼â€æ²¡å…³ç³»ï¼ŒDockeræ˜¯å¼€æºè½¯ä»¶ï¼Œå»çœ‹å®ƒçš„æºä»£ç å°±å¯ä»¥äº†ã€‚å¦‚æœä½ ä¸å¤ªæ¸…æ¥šDockerfileä¸­çš„å‘½ä»¤æ˜¯æ€ä¹ˆå›äº‹ï¼Œç›´æ¥å»çœ‹buildfile.goå°±æ˜ç™½äº†ã€‚</p><h2 id="Tip-14"><a href="#Tip-14" class="headerlink" title="Tip 14"></a><code>Tip 14</code></h2><p>è¿è¡Œå‡ ä¸ªDockeråå°ç¨‹åºï¼Œå†é€€å‡ºå®¹å™¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ OKï¼Œå€’æ•°ç¬¬äºŒä¸ªè¦ç‚¹ã€‚å¦‚æœåœ¨Dockerä¸­è¿è¡Œå‡ ä¸ªåå°ç¨‹åºï¼Œå†é€€å‡ºDockerå®¹å™¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸è¦è¿™ä¹ˆåšï¼å› ä¸ºè¿™æ ·åšåå°ç¨‹åºå°±å…¨ä¸¢äº†ã€‚</p><p>Dockerfileä¸­ç”¨RUNå‘½ä»¤å»å¼€å¯ä¸€ä¸ªåå°ç¨‹åºï¼Œå¦‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN pg_ctl start</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™æ ·çš„è¯ï¼ŒRUNå‘½ä»¤å¼€å¯çš„åå°ç¨‹åºå°±ä¼šä¸¢å¤±ã€‚è°ƒç”¨å®¹å™¨çš„bashè¿åˆ°å®¹å™¨çš„shellï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -i -t postgresimage bash</span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åè°ƒç”¨ ps auxæŸ¥çœ‹è¿›ç¨‹ï¼Œä½ ä¼šå‘ç°postgresçš„è¿›ç¨‹å¹¶æ²¡æœ‰è·‘èµ·æ¥ã€‚ RUNå‘½ä»¤ä¼šå½±å“æ–‡ä»¶ç³»ç»Ÿã€‚å› æ­¤ï¼Œä¸è¦å†Dockerfileä¸­ç”¨å¯åŠ¨åå°ç¨‹åºï¼Œè¦æŠŠåå°ç¨‹åºå¯åŠ¨æˆå‰å°è¿›ç¨‹ã€‚æˆ–è€…ï¼Œåƒä¸€äº›é«˜æ‰‹æè®®çš„é‚£æ ·ï¼Œå†™ä¸€ä¸ªå¯åŠ¨è„š æœ¬ï¼Œåœ¨è„šæœ¬ä¸­å¯åŠ¨è¿™äº›åå°ç¨‹åºæˆ–è¿›ç¨‹ã€‚</p><h2 id="Tip-15"><a href="#Tip-15" class="headerlink" title="Tip 15"></a><code>Tip 15</code></h2><p>å®¹å™¨ä¹‹é—´è¿›è¡Œå‹å¥½æ²Ÿé€šï¼šé“¾æ¥ </p><p>è¿™æ˜¯æœ€æ‹‰é£çš„åŠŸèƒ½ï¼æˆ‘æŠŠå®ƒç•™åˆ°æœ€åå‹è½´ï¼è¿™æ˜¯0.6.5ä¸­æœ€é‡è¦çš„æ–°åŠŸèƒ½ï¼Œæˆ‘ä»¬å‰é¢å·²ç»æè¿‡ä¸¤æ¬¡äº†ã€‚è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œç»™å®ƒä¸€ä¸ªåç§°ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡-nameå‚æ•°ç»™å®¹å™¨æŒ‡å®šåç§°â€loldbâ€ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -name loldb loldbimage</span><br></pre></td></tr></tbody></table></figure></div><p>å†è¿è¡Œå¦ä¸€ä¸ªå®¹å™¨ï¼ŒåŠ ä¸Š-linkå‚æ•°æ¥è¿æ¥åˆ°ç¬¬ä¸€ä¸ªå®¹å™¨ï¼ˆåˆ«åä¸ºloldbï¼‰ï¼Œå¹¶ç»™ç¬¬äºŒä¸ªå®¹å™¨ä¹ŸæŒ‡å®šä¸€ä¸ªåˆ«åï¼ˆè¿™é‡Œç”¨çš„æ˜¯cheezï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -link /loldb:cheez otherimage env</span><br></pre></td></tr></tbody></table></figure></div><p>é¡ºä¾¿å¾—åˆ°cheezçš„ç¯å¢ƒå˜é‡ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CHEEZ_PORT=tcp://172.17.0.8:6379</span><br><span class="line">CHEEZ_PORT_1337_TCP=tcp://172.17.0.8.6379</span><br><span class="line">CHEEZ_PORT_1337_TCP_ADDR=tcp://172.17.0.12</span><br><span class="line">CHEEZ_PORT_1337_TCP_PORT=6379</span><br><span class="line">CHEEZ_PORT_1337_TCP_PROTO=tcp</span><br></pre></td></tr></tbody></table></figure></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±åœ¨ä¸¤ä¸ªå®¹å™¨é—´å»ºç«‹èµ·ä¸€ä¸ªç½‘ç»œé€šé“ï¼ˆbridgeï¼‰ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªç±»ä¼¼railsçš„ç¨‹åºï¼šä¸€ä¸ªå®¹å™¨å¯ä»¥è®¿é—®æ•°æ®åº“å®¹å™¨è€Œä¸å¯¹å¤–æš´éœ²å…¶ä»–æ¥å£ã€‚éå¸¸é…·ï¼æ•°æ®åº“å®¹å™¨åªéœ€è¦çŸ¥é“ç¬¬ä¸€ä¸ªå®¹å™¨çš„åˆ«åï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºcheezï¼‰å’Œè¦æ‰“å¼€çš„ç«¯å£å·ã€‚æ‰€ä»¥æ•°æ®åº“å®¹å™¨ä¹Ÿå¯ä»¥envå‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸ªç«¯å£æ˜¯å¦æ‰“å¼€ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•å‡»é¼ æ ‡æ‰€å±•ç¤ºçš„æµ®åŠ¨æ–‡å­—ç‰¹æ•ˆçš„js</title>
      <link href="/2018/09/12/%E5%8D%95%E5%87%BB%E9%BC%A0%E6%A0%87%E6%89%80%E5%B1%95%E7%A4%BA%E7%9A%84%E6%B5%AE%E5%8A%A8%E6%96%87%E5%AD%97%E7%89%B9%E6%95%88%E7%9A%84js/"/>
      <url>/2018/09/12/%E5%8D%95%E5%87%BB%E9%BC%A0%E6%A0%87%E6%89%80%E5%B1%95%E7%A4%BA%E7%9A%84%E6%B5%AE%E5%8A%A8%E6%96%87%E5%AD%97%E7%89%B9%E6%95%88%E7%9A%84js/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å•å‡»é¼ æ ‡æ‰€å±•ç¤ºçš„æµ®åŠ¨æ–‡å­—ç‰¹æ•ˆçš„js"><a href="#å•å‡»é¼ æ ‡æ‰€å±•ç¤ºçš„æµ®åŠ¨æ–‡å­—ç‰¹æ•ˆçš„js" class="headerlink" title="å•å‡»é¼ æ ‡æ‰€å±•ç¤ºçš„æµ®åŠ¨æ–‡å­—ç‰¹æ•ˆçš„js"></a>å•å‡»é¼ æ ‡æ‰€å±•ç¤ºçš„æµ®åŠ¨æ–‡å­—ç‰¹æ•ˆçš„js</h2><p><a href="https://i.imgur.com/r3XQ6NK.gif" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/r3XQ6NK.gif" class="lazyload" title></a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><script type="text/javascript"></span><br><span class="line">/*é¼ æ ‡ç‰¹æ•ˆ */</span><br><span class="line">  /*è¿™ä¸ªæ–¹æ³•ç”¨æ¥éšæœºä¸€ä¸ªåå…­è¿›åˆ¶é¢œè‰²ä»£ç ï¼Œè®©æ¯ä¸€æ¬¡ç‚¹å‡»æµ®åŠ¨æ–‡å­—çš„æ¨è‰²ä¸åŒ*/</span><br><span class="line">  function co(){</span><br><span class="line">        var colorElements = "0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";</span><br><span class="line">    var colorArray = colorElements.split(",");</span><br><span class="line">    var color ="#";</span><br><span class="line">    for(var i =0;i<6;i++){</span><br><span class="line">    color+=colorArray[Math.floor(Math.random()*16)];</span><br><span class="line">    }</span><br><span class="line">    return color;</span><br><span class="line">};</span><br><span class="line">var a_idx = 0;</span><br><span class="line">jQuery(document).ready(function($) {</span><br><span class="line">$("body").click(function(e) {</span><br><span class="line">    /*è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦æ˜¯ä½ è¦æµ®åŠ¨æ˜¾ç¤ºçš„è¯æˆ–å¥å­ï¼Œæ¯æ¬¡ç‚¹å‡»é¼ æ ‡åæŒ‰é¡ºåºå‡ºç°*/</span><br><span class="line">    var a = new Array("HelloåŸºä½¬","ä½ å†ç‚¹", "ä½ ç»§ç»­ç‚¹", "ä½ æœ‰æœ¬äº‹æ¥ç€ç‚¹", "æœ‰ç§ä½ è¿˜ç‚¹", "å¿«åˆ«ä»–å¦ˆç‚¹äº†", "å¥½å¥½çœ‹æ–‡ç« ä¸è¡Œå—");</span><br><span class="line">    var $i = $("<span/>").text(a[a_idx]);</span><br><span class="line">    a_idx = (a_idx + 1) % a.length;</span><br><span class="line">    var x = e.pageX,</span><br><span class="line">    y = e.pageY;</span><br><span class="line">    $i.css({</span><br><span class="line">        "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,</span><br><span class="line">        "top": y - 20,</span><br><span class="line">        "left": x,</span><br><span class="line">        "position": "absolute",</span><br><span class="line">        "font-weight": "bold",</span><br><span class="line">        "color": co()</span><br><span class="line">    });</span><br><span class="line">    $("body").append($i);</span><br><span class="line">    $i.animate({</span><br><span class="line">        "top": y - 180,</span><br><span class="line">        "opacity": 0</span><br><span class="line">    },</span><br><span class="line">    1500,</span><br><span class="line">    function() {</span><br><span class="line">        $i.remove();</span><br><span class="line">    });</span><br><span class="line">});</span><br><span class="line">});</span><br><span class="line"></script></span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DubboçŸ¥è¯†ç²¾å ä¸Š</title>
      <link href="/2018/09/11/Dubbo%E7%9F%A5%E8%AF%86%E7%B2%BE%E5%8D%8E/"/>
      <url>/2018/09/11/Dubbo%E7%9F%A5%E8%AF%86%E7%B2%BE%E5%8D%8E/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h4 id="1ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—"><a href="#1ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—" class="headerlink" title="1ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—?"></a>1ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—?</h4><p>é»˜è®¤ä¹Ÿæ¨èä½¿ç”¨nettyæ¡†æ¶ï¼Œè¿˜æœ‰minaã€‚</p><h4 id="2ã€æœåŠ¡è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ"><a href="#2ã€æœåŠ¡è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ" class="headerlink" title="2ã€æœåŠ¡è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ"></a>2ã€æœåŠ¡è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ</h4><p>é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œå¯ä»¥å¼‚æ­¥è°ƒç”¨ï¼Œæ²¡æœ‰è¿”å›å€¼çš„å¯ä»¥è¿™ä¹ˆåšã€‚</p><h4 id="3ã€ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Ÿè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"><a href="#3ã€ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Ÿè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ" class="headerlink" title="3ã€ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Ÿè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"></a>3ã€ä¸€èˆ¬ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Ÿè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ</h4><p>æ¨èä½¿ç”¨zookeeperæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰redisç­‰ä¸æ¨èã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/0831/153501_9a059fcf_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/0831/153501_9a059fcf_87650.png" class="lazyload"></a></p><h4 id="4ã€é»˜è®¤ä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ"><a href="#4ã€é»˜è®¤ä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="4ã€é»˜è®¤ä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ"></a>4ã€é»˜è®¤ä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ</h4><p>é»˜è®¤ä½¿ç”¨Hessianåºåˆ—åŒ–ï¼Œè¿˜æœ‰Duddoã€FastJsonã€Javaè‡ªå¸¦åºåˆ—åŒ–ã€‚</p><h4 id="5ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ"><a href="#5ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ" class="headerlink" title="5ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ"></a>5ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ</h4><p>æœåŠ¡å¤±æ•ˆè¸¢å‡ºåŸºäºzookeeperçš„ä¸´æ—¶èŠ‚ç‚¹åŸç†ã€‚</p><h4 id="6ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆä¸å½±å“æ—§ç‰ˆæœ¬ï¼Ÿ"><a href="#6ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆä¸å½±å“æ—§ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="6ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆä¸å½±å“æ—§ç‰ˆæœ¬ï¼Ÿ"></a>6ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆä¸å½±å“æ—§ç‰ˆæœ¬ï¼Ÿ</h4><p>é‡‡ç”¨å¤šç‰ˆæœ¬å¼€å‘ï¼Œä¸å½±å“æ—§ç‰ˆæœ¬ã€‚</p><h4 id="7ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ"><a href="#7ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="7ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ"></a>7ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ</h4><p>å¯ä»¥ç»“åˆzipkinå®ç°åˆ†å¸ƒå¼æœåŠ¡è¿½è¸ªã€‚</p><h4 id="8ã€è¯´è¯´æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ"><a href="#8ã€è¯´è¯´æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="8ã€è¯´è¯´æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ"></a>8ã€è¯´è¯´æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ</h4><p>æ ¸å¿ƒé…ç½®æœ‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dubbo:service/</span><br><span class="line"></span><br><span class="line">dubbo:reference/</span><br><span class="line"></span><br><span class="line">dubbo:protocol/</span><br><span class="line"></span><br><span class="line">dubbo:registry/</span><br><span class="line"></span><br><span class="line">dubbo:application/</span><br><span class="line"></span><br><span class="line">dubbo:provider/</span><br><span class="line"></span><br><span class="line">dubbo:consumer/</span><br><span class="line"></span><br><span class="line">dubbo:method/</span><br></pre></td></tr></tbody></table></figure></div><h4 id="9ã€dubboæ¨èç”¨ä»€ä¹ˆåè®®ï¼Ÿ"><a href="#9ã€dubboæ¨èç”¨ä»€ä¹ˆåè®®ï¼Ÿ" class="headerlink" title="9ã€dubboæ¨èç”¨ä»€ä¹ˆåè®®ï¼Ÿ"></a>9ã€dubboæ¨èç”¨ä»€ä¹ˆåè®®ï¼Ÿ</h4><p>é»˜è®¤ä½¿ç”¨dubboåè®®ã€‚</p><h4 id="10ã€åŒä¸€ä¸ªæœåŠ¡å¤šä¸ªæ³¨å†Œçš„æƒ…å†µä¸‹å¯ä»¥ç›´è¿æŸä¸€ä¸ªæœåŠ¡å—ï¼Ÿ"><a href="#10ã€åŒä¸€ä¸ªæœåŠ¡å¤šä¸ªæ³¨å†Œçš„æƒ…å†µä¸‹å¯ä»¥ç›´è¿æŸä¸€ä¸ªæœåŠ¡å—ï¼Ÿ" class="headerlink" title="10ã€åŒä¸€ä¸ªæœåŠ¡å¤šä¸ªæ³¨å†Œçš„æƒ…å†µä¸‹å¯ä»¥ç›´è¿æŸä¸€ä¸ªæœåŠ¡å—ï¼Ÿ"></a>10ã€åŒä¸€ä¸ªæœåŠ¡å¤šä¸ªæ³¨å†Œçš„æƒ…å†µä¸‹å¯ä»¥ç›´è¿æŸä¸€ä¸ªæœåŠ¡å—ï¼Ÿ</h4><p>å¯ä»¥ç›´è¿ï¼Œä¿®æ”¹é…ç½®å³å¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡telnetç›´æ¥æŸä¸ªæœåŠ¡ã€‚</p><h4 id="11ã€Dubboé›†ç¾¤å®¹é”™æ€ä¹ˆåšï¼Ÿ"><a href="#11ã€Dubboé›†ç¾¤å®¹é”™æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="11ã€Dubboé›†ç¾¤å®¹é”™æ€ä¹ˆåšï¼Ÿ"></a>11ã€Dubboé›†ç¾¤å®¹é”™æ€ä¹ˆåšï¼Ÿ</h4><p>è¯»æ“ä½œå»ºè®®ä½¿ç”¨Failoverå¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œé»˜è®¤é‡è¯•ä¸¤æ¬¡å…¶ä»–æœåŠ¡å™¨ã€‚å†™æ“ä½œå»ºè®®ä½¿ç”¨Failfastå¿«é€Ÿå¤±è´¥ï¼Œå‘ä¸€æ¬¡è°ƒç”¨å¤±è´¥å°±ç«‹å³æŠ¥é”™ã€‚</p><h4 id="12ã€dubboå’Œdubboxä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"><a href="#12ã€dubboå’Œdubboxä¹‹é—´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="12ã€dubboå’Œdubboxä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"></a>12ã€dubboå’Œdubboxä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h4><p>dubboxæ˜¯å½“å½“ç½‘åŸºäºdubboä¸Šåšäº†ä¸€äº›æ‰©å±•ï¼Œå¦‚åŠ äº†æœåŠ¡å¯restfulè°ƒç”¨ï¼Œæ›´æ–°äº†å¼€æºç»„ä»¶ç­‰ã€‚</p><h4 id="13ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ"><a href="#13ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ" class="headerlink" title="13ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ"></a>13ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ</h4><p>åˆ«çš„è¿˜æœ‰springçš„spring cloudï¼Œfacebookçš„thriftï¼Œtwitterçš„finagleç­‰ã€‚</p><h4 id="14ã€dubboä¸­zookeeperåšæ³¨å†Œä¸­å¿ƒï¼Œå¦‚æœæ³¨å†Œä¸­å¿ƒé›†ç¾¤éƒ½æŒ‚æ‰ï¼Œé‚£å‘å¸ƒè€…å’Œè®¢é˜…è€…è¿˜èƒ½é€šä¿¡å—"><a href="#14ã€dubboä¸­zookeeperåšæ³¨å†Œä¸­å¿ƒï¼Œå¦‚æœæ³¨å†Œä¸­å¿ƒé›†ç¾¤éƒ½æŒ‚æ‰ï¼Œé‚£å‘å¸ƒè€…å’Œè®¢é˜…è€…è¿˜èƒ½é€šä¿¡å—" class="headerlink" title="14ã€dubboä¸­zookeeperåšæ³¨å†Œä¸­å¿ƒï¼Œå¦‚æœæ³¨å†Œä¸­å¿ƒé›†ç¾¤éƒ½æŒ‚æ‰ï¼Œé‚£å‘å¸ƒè€…å’Œè®¢é˜…è€…è¿˜èƒ½é€šä¿¡å—?"></a>14ã€dubboä¸­zookeeperåšæ³¨å†Œä¸­å¿ƒï¼Œå¦‚æœæ³¨å†Œä¸­å¿ƒé›†ç¾¤éƒ½æŒ‚æ‰ï¼Œé‚£å‘å¸ƒè€…å’Œè®¢é˜…è€…è¿˜èƒ½é€šä¿¡å—?</h4><p>å¯ä»¥çš„ï¼Œzookeeperçš„ä¿¡æ¯ä¼šç¼“å­˜åˆ°æœ¬åœ°ä½œä¸ºä¸€ä¸ªç¼“å­˜æ–‡ä»¶ï¼Œå¹¶ä¸”è½¬æ¢æˆpropertieså¯¹è±¡æ–¹ä¾¿ä½¿ç”¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><!-- ä½¿ç”¨zookeeperæ³¨å†Œä¸­å¿ƒæš´éœ²æœåŠ¡åœ°å€ subscribe é»˜è®¤ï¼štrue æ˜¯å¦å‘æ­¤æ³¨å†Œä¸­å¿ƒè®¢é˜…æœåŠ¡ï¼Œå¦‚æœè®¾ä¸ºfalseï¼Œå°†åªæ³¨å†Œï¼Œä¸è®¢é˜… check é»˜è®¤ï¼štrue æ³¨å†Œä¸­å¿ƒä¸å­˜åœ¨æ—¶ï¼Œæ˜¯å¦æŠ¥é”™    --></span><br><span class="line"><dubbo:registry protocol="zookeeper" address="${dubbo.registry.address}" file="${dubbo.registry.file}" check="false"></dubbo:registry></span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dubbo.registry.address=172.16.1.130:2181,172.16.1.133:2181,172.16.1.120:2181</span><br><span class="line">dubbo.registry.file=/root/.dubbo/pay/dubbo.cache</span><br></pre></td></tr></tbody></table></figure></div><h4 id="15ã€é¡¹ç›®ä¸­æœ‰ä½¿ç”¨è¿‡å¤šçº¿ç¨‹å—-æœ‰çš„è¯è®²è®²ä½ åœ¨å“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹"><a href="#15ã€é¡¹ç›®ä¸­æœ‰ä½¿ç”¨è¿‡å¤šçº¿ç¨‹å—-æœ‰çš„è¯è®²è®²ä½ åœ¨å“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹" class="headerlink" title="15ã€é¡¹ç›®ä¸­æœ‰ä½¿ç”¨è¿‡å¤šçº¿ç¨‹å—?æœ‰çš„è¯è®²è®²ä½ åœ¨å“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹?"></a>15ã€é¡¹ç›®ä¸­æœ‰ä½¿ç”¨è¿‡å¤šçº¿ç¨‹å—?æœ‰çš„è¯è®²è®²ä½ åœ¨å“ªé‡Œç”¨åˆ°äº†å¤šçº¿ç¨‹?</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><!-- </span><br><span class="line">  ç”Ÿäº§è€…é…ç½® ç”Ÿäº§è€…  è¿œç¨‹é»˜è®¤è°ƒç”¨3æ¬¡ å‚æ•° retries="2" async="true" å¼‚æ­¥è¿”å›ç»“æœ é»˜è®¤æ˜¯åŒæ­¥ timeout="10000" æ¯«ç§’</span><br><span class="line">  ç”¨dubboåè®®åœ¨20882ç«¯å£æš´éœ²æœåŠ¡  å›ºå®šçº¿ç¨‹æ±  10 å¯åŠ¨æ—¶å»ºç«‹çº¿ç¨‹ï¼Œä¸å…³é—­ï¼Œä¸€ç›´æŒæœ‰  è´Ÿè½½å‡è¡¡ç­–ç•¥ è½®è¯¢</span><br><span class="line"> --></span><br><span class="line"><dubbo:provider timeout="10000" threads="10" threadpool="fixed" loadbalance="roundrobin"></dubbo:provider></span><br></pre></td></tr></tbody></table></figure></div><h4 id="16ã€Zookeeperçš„Javaå®¢æˆ·ç«¯ä½ ä½¿ç”¨è¿‡å“ªäº›"><a href="#16ã€Zookeeperçš„Javaå®¢æˆ·ç«¯ä½ ä½¿ç”¨è¿‡å“ªäº›" class="headerlink" title="16ã€Zookeeperçš„Javaå®¢æˆ·ç«¯ä½ ä½¿ç”¨è¿‡å“ªäº›?"></a>16ã€Zookeeperçš„Javaå®¢æˆ·ç«¯ä½ ä½¿ç”¨è¿‡å“ªäº›?</h4><p><a href="https://images.gitee.com/uploads/images/2018/0831/154522_65ef08bd_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/0831/154522_65ef08bd_87650.png" class="lazyload"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DubboçŸ¥è¯†ç²¾å ä¸‹</title>
      <link href="/2018/09/11/Dubbo%E7%9F%A5%E8%AF%86%E7%B2%BE%E5%8D%8E-%E7%BB%AD/"/>
      <url>/2018/09/11/Dubbo%E7%9F%A5%E8%AF%86%E7%B2%BE%E5%8D%8E-%E7%BB%AD/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h4 id="1ã€äº†è§£Dubboä¹ˆï¼Ÿ"><a href="#1ã€äº†è§£Dubboä¹ˆï¼Ÿ" class="headerlink" title="1ã€äº†è§£Dubboä¹ˆï¼Ÿ"></a>1ã€äº†è§£Dubboä¹ˆï¼Ÿ</h4><p>Dubboæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åŸºäº Java çš„é«˜æ€§èƒ½ RPC åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œç°å·²æˆä¸º Apache åŸºé‡‘ä¼šå­µåŒ–é¡¹ç›®ã€‚</p><p>å®˜ç½‘ï¼š<a href="http://dubbo.apache.org" target="_blank" rel="noopener">http://dubbo.apache.org</a></p><h4 id="2ã€ä¸ºä»€ä¹ˆè¦ç”¨Dubboï¼Ÿ"><a href="#2ã€ä¸ºä»€ä¹ˆè¦ç”¨Dubboï¼Ÿ" class="headerlink" title="2ã€ä¸ºä»€ä¹ˆè¦ç”¨Dubboï¼Ÿ"></a>2ã€ä¸ºä»€ä¹ˆè¦ç”¨Dubboï¼Ÿ</h4><p>å› ä¸ºæ˜¯é˜¿é‡Œå¼€æºé¡¹ç›®ï¼Œå›½å†…å¾ˆå¤šäº’è”ç½‘å…¬å¸éƒ½åœ¨ç”¨ï¼Œå·²ç»ç»è¿‡å¾ˆå¤šçº¿ä¸Šè€ƒéªŒã€‚å†…éƒ¨ä½¿ç”¨äº† Nettyã€Zookeeperï¼Œä¿è¯äº†é«˜æ€§èƒ½é«˜å¯ç”¨æ€§ã€‚</p><p>ä½¿ç”¨ Dubbo å¯ä»¥å°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œå¯ç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨çµæ´»æ‰©å±•ï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å¯ä»¥å¾ˆæ¸…æ¥šçš„è¯ é‡Šï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œåˆ†å¸ƒå¼æ¶æ„å¯ä»¥æ‰¿å—æ›´å¤§è§„æ¨¡çš„å¹¶å‘æµé‡ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091310_cddc13a2_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091310_cddc13a2_87650.png" class="lazyload"></a></p><p>ä¸‹é¢æ˜¯ Dubbo çš„æœåŠ¡æ²»ç†å›¾ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091331_b0418750_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091331_b0418750_87650.png" class="lazyload"></a></p><h4 id="3ã€Dubbo-å’Œ-Spring-Cloud-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#3ã€Dubbo-å’Œ-Spring-Cloud-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="3ã€Dubbo å’Œ Spring Cloud æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>3ã€Dubbo å’Œ Spring Cloud æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>ä¸¤ä¸ªæ²¡å…³è”ï¼Œå¦‚æœç¡¬è¦è¯´åŒºåˆ«ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ã€‚</p><p>1ï¼‰é€šä¿¡æ–¹å¼ä¸åŒ</p><p>Dubbo ä½¿ç”¨çš„æ˜¯ RPC é€šä¿¡ï¼Œè€Œ Spring Cloud ä½¿ç”¨çš„æ˜¯ HTTP RESTFul æ–¹å¼ã€‚</p><p>2ï¼‰ç»„æˆéƒ¨åˆ†ä¸åŒ</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091354_cbe8c962_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091354_cbe8c962_87650.png" class="lazyload"></a></p><h4 id="4ã€dubboéƒ½æ”¯æŒä»€ä¹ˆåè®®ï¼Œæ¨èç”¨å“ªç§ï¼Ÿ"><a href="#4ã€dubboéƒ½æ”¯æŒä»€ä¹ˆåè®®ï¼Œæ¨èç”¨å“ªç§ï¼Ÿ" class="headerlink" title="4ã€dubboéƒ½æ”¯æŒä»€ä¹ˆåè®®ï¼Œæ¨èç”¨å“ªç§ï¼Ÿ"></a>4ã€dubboéƒ½æ”¯æŒä»€ä¹ˆåè®®ï¼Œæ¨èç”¨å“ªç§ï¼Ÿ</h4><p>dubbo://ï¼ˆæ¨èï¼‰</p><p>rmi://</p><p>hessian://</p><p>http://</p><p>webservice://</p><p>thrift://</p><p>memcached://</p><p>redis://</p><p>rest://</p><p>####/5ã€Dubboéœ€è¦ Web å®¹å™¨å—ï¼Ÿ</p><p>ä¸éœ€è¦ï¼Œå¦‚æœç¡¬è¦ç”¨ Web å®¹å™¨ï¼Œåªä¼šå¢åŠ å¤æ‚æ€§ï¼Œä¹Ÿæµªè´¹èµ„æºã€‚</p><h4 id="6ã€Dubboå†…ç½®äº†å“ªå‡ ç§æœåŠ¡å®¹å™¨ï¼Ÿ"><a href="#6ã€Dubboå†…ç½®äº†å“ªå‡ ç§æœåŠ¡å®¹å™¨ï¼Ÿ" class="headerlink" title="6ã€Dubboå†…ç½®äº†å“ªå‡ ç§æœåŠ¡å®¹å™¨ï¼Ÿ"></a>6ã€Dubboå†…ç½®äº†å“ªå‡ ç§æœåŠ¡å®¹å™¨ï¼Ÿ</h4><p>Spring Container</p><p>Jetty Container</p><p>Log4j Container</p><p>Dubbo çš„æœåŠ¡å®¹å™¨åªæ˜¯ä¸€ä¸ªç®€å•çš„ Main æ–¹æ³•ï¼Œå¹¶åŠ è½½ä¸€ä¸ªç®€å•çš„ Spring å®¹å™¨ï¼Œç”¨äºæš´éœ²æœåŠ¡ã€‚</p><h4 id="7ã€Dubboé‡Œé¢æœ‰å“ªå‡ ç§èŠ‚ç‚¹è§’è‰²ï¼Ÿ"><a href="#7ã€Dubboé‡Œé¢æœ‰å“ªå‡ ç§èŠ‚ç‚¹è§’è‰²ï¼Ÿ" class="headerlink" title="7ã€Dubboé‡Œé¢æœ‰å“ªå‡ ç§èŠ‚ç‚¹è§’è‰²ï¼Ÿ"></a>7ã€Dubboé‡Œé¢æœ‰å“ªå‡ ç§èŠ‚ç‚¹è§’è‰²ï¼Ÿ</h4><p><a href="https://images.gitee.com/uploads/images/2018/1012/091452_fa47f6a4_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091452_fa47f6a4_87650.png" class="lazyload"></a></p><h4 id="8ã€ç”»ä¸€ç”»æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å›¾"><a href="#8ã€ç”»ä¸€ç”»æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å›¾" class="headerlink" title="8ã€ç”»ä¸€ç”»æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å›¾"></a>8ã€ç”»ä¸€ç”»æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å›¾</h4><p><a href="https://images.gitee.com/uploads/images/2018/1012/091500_08e53014_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091500_08e53014_87650.png" class="lazyload"></a></p><p>è¯¥å›¾æ¥è‡ª Dubbo å®˜ç½‘ï¼Œä¾›ä½ å‚è€ƒï¼Œå¦‚æœä½ è¯´ä½ ç†Ÿæ‚‰ Dubbo, é¢è¯•å®˜ç»å¸¸ä¼šè®©ä½ ç”»è¿™ä¸ªå›¾ï¼Œè®°å¥½äº†ã€‚</p><h4 id="9ã€Dubboé»˜è®¤ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"><a href="#9ã€Dubboé»˜è®¤ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ" class="headerlink" title="9ã€Dubboé»˜è®¤ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"></a>9ã€Dubboé»˜è®¤ä½¿ç”¨ä»€ä¹ˆæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ</h4><p>æ¨èä½¿ç”¨ Zookeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œè¿˜æœ‰ Redisã€Multicastã€Simple æ³¨å†Œä¸­å¿ƒï¼Œä½†ä¸æ¨èã€‚</p><h4 id="10ã€Dubboæœ‰å“ªå‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"><a href="#10ã€Dubboæœ‰å“ªå‡ ç§é…ç½®æ–¹å¼ï¼Ÿ" class="headerlink" title="10ã€Dubboæœ‰å“ªå‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"></a>10ã€Dubboæœ‰å“ªå‡ ç§é…ç½®æ–¹å¼ï¼Ÿ</h4><p>1ï¼‰Spring é…ç½®æ–¹å¼<br>2ï¼‰Java API é…ç½®æ–¹å¼</p><h4 id="11ã€Dubbo-æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ"><a href="#11ã€Dubbo-æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="11ã€Dubbo æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ"></a>11ã€Dubbo æ ¸å¿ƒçš„é…ç½®æœ‰å“ªäº›ï¼Ÿ</h4><p>æˆ‘æ›¾ç»é¢è¯•å°±é‡åˆ°è¿‡é¢è¯•å®˜è®©ä½ å†™è¿™äº›é…ç½®ï¼Œæˆ‘ä¹Ÿæ˜¯è’™é€¼ã€‚ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091611_ae608c02_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091611_ae608c02_87650.png" class="lazyload"></a></p><p>é…ç½®ä¹‹é—´çš„å…³ç³»è§ä¸‹å›¾ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091630_3b2a0e41_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091630_3b2a0e41_87650.png" class="lazyload"></a></p><h4 id="12ã€åœ¨-Provider-ä¸Šå¯ä»¥é…ç½®çš„-Consumer-ç«¯çš„å±æ€§æœ‰å“ªäº›ï¼Ÿ"><a href="#12ã€åœ¨-Provider-ä¸Šå¯ä»¥é…ç½®çš„-Consumer-ç«¯çš„å±æ€§æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="12ã€åœ¨ Provider ä¸Šå¯ä»¥é…ç½®çš„ Consumer ç«¯çš„å±æ€§æœ‰å“ªäº›ï¼Ÿ"></a>12ã€åœ¨ Provider ä¸Šå¯ä»¥é…ç½®çš„ Consumer ç«¯çš„å±æ€§æœ‰å“ªäº›ï¼Ÿ</h4><p>1ï¼‰timeoutï¼šæ–¹æ³•è°ƒç”¨è¶…æ—¶<br>2ï¼‰retriesï¼šå¤±è´¥é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤é‡è¯• 2 æ¬¡<br>3ï¼‰loadbalanceï¼šè´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé»˜è®¤éšæœº<br>4ï¼‰actives æ¶ˆè´¹è€…ç«¯ï¼Œæœ€å¤§å¹¶å‘è°ƒç”¨é™åˆ¶</p><h4 id="13ã€Dubboå¯åŠ¨æ—¶å¦‚æœä¾èµ–çš„æœåŠ¡ä¸å¯ç”¨ä¼šæ€æ ·ï¼Ÿ"><a href="#13ã€Dubboå¯åŠ¨æ—¶å¦‚æœä¾èµ–çš„æœåŠ¡ä¸å¯ç”¨ä¼šæ€æ ·ï¼Ÿ" class="headerlink" title="13ã€Dubboå¯åŠ¨æ—¶å¦‚æœä¾èµ–çš„æœåŠ¡ä¸å¯ç”¨ä¼šæ€æ ·ï¼Ÿ"></a>13ã€Dubboå¯åŠ¨æ—¶å¦‚æœä¾èµ–çš„æœåŠ¡ä¸å¯ç”¨ä¼šæ€æ ·ï¼Ÿ</h4><p>Dubbo ç¼ºçœä¼šåœ¨å¯åŠ¨æ—¶æ£€æŸ¥ä¾èµ–çš„æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œä¸å¯ç”¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢ Spring åˆå§‹åŒ–å®Œæˆï¼Œé»˜è®¤ check=â€trueâ€ï¼Œå¯ä»¥é€šè¿‡ check=â€falseâ€ å…³é—­æ£€æŸ¥ã€‚</p><h4 id="14ã€Dubboæ¨èä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ"><a href="#14ã€Dubboæ¨èä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="14ã€Dubboæ¨èä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ"></a>14ã€Dubboæ¨èä½¿ç”¨ä»€ä¹ˆåºåˆ—åŒ–æ¡†æ¶ï¼Œä½ çŸ¥é“çš„è¿˜æœ‰å“ªäº›ï¼Ÿ</h4><p>æ¨èä½¿ç”¨Hessianåºåˆ—åŒ–ï¼Œè¿˜æœ‰Duddoã€FastJsonã€Javaè‡ªå¸¦åºåˆ—åŒ–ã€‚</p><h4 id="15ã€Dubboé»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"><a href="#15ã€Dubboé»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ" class="headerlink" title="15ã€Dubboé»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ"></a>15ã€Dubboé»˜è®¤ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé€šä¿¡æ¡†æ¶ï¼Œè¿˜æœ‰åˆ«çš„é€‰æ‹©å—ï¼Ÿ</h4><p>Dubbo é»˜è®¤ä½¿ç”¨ Netty æ¡†æ¶ï¼Œä¹Ÿæ˜¯æ¨èçš„é€‰æ‹©ï¼Œå¦å¤–å†…å®¹è¿˜é›†æˆæœ‰Minaã€Grizzlyã€‚</p><h4 id="16ã€Dubboæœ‰å“ªå‡ ç§é›†ç¾¤å®¹é”™æ–¹æ¡ˆï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ"><a href="#16ã€Dubboæœ‰å“ªå‡ ç§é›†ç¾¤å®¹é”™æ–¹æ¡ˆï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ" class="headerlink" title="16ã€Dubboæœ‰å“ªå‡ ç§é›†ç¾¤å®¹é”™æ–¹æ¡ˆï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ"></a>16ã€Dubboæœ‰å“ªå‡ ç§é›†ç¾¤å®¹é”™æ–¹æ¡ˆï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ</h4><p><a href="https://images.gitee.com/uploads/images/2018/1012/091659_5a59aa66_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091659_5a59aa66_87650.png" class="lazyload"></a></p><h4 id="17ã€Dubboæœ‰å“ªå‡ ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ"><a href="#17ã€Dubboæœ‰å“ªå‡ ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ" class="headerlink" title="17ã€Dubboæœ‰å“ªå‡ ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ"></a>17ã€Dubboæœ‰å“ªå‡ ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé»˜è®¤æ˜¯å“ªç§ï¼Ÿ</h4><p><a href="https://images.gitee.com/uploads/images/2018/1012/091705_af4a9144_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091705_af4a9144_87650.png" class="lazyload"></a></p><h4 id="18ã€æ³¨å†Œäº†å¤šä¸ªåŒä¸€æ ·çš„æœåŠ¡ï¼Œå¦‚æœæµ‹è¯•æŒ‡å®šçš„æŸä¸€ä¸ªæœåŠ¡å‘¢ï¼Ÿ"><a href="#18ã€æ³¨å†Œäº†å¤šä¸ªåŒä¸€æ ·çš„æœåŠ¡ï¼Œå¦‚æœæµ‹è¯•æŒ‡å®šçš„æŸä¸€ä¸ªæœåŠ¡å‘¢ï¼Ÿ" class="headerlink" title="18ã€æ³¨å†Œäº†å¤šä¸ªåŒä¸€æ ·çš„æœåŠ¡ï¼Œå¦‚æœæµ‹è¯•æŒ‡å®šçš„æŸä¸€ä¸ªæœåŠ¡å‘¢ï¼Ÿ"></a>18ã€æ³¨å†Œäº†å¤šä¸ªåŒä¸€æ ·çš„æœåŠ¡ï¼Œå¦‚æœæµ‹è¯•æŒ‡å®šçš„æŸä¸€ä¸ªæœåŠ¡å‘¢ï¼Ÿ</h4><p>å¯ä»¥é…ç½®ç¯å¢ƒç‚¹å¯¹ç‚¹ç›´è¿ï¼Œç»•è¿‡æ³¨å†Œä¸­å¿ƒï¼Œå°†ä»¥æœåŠ¡æ¥å£ä¸ºå•ä½ï¼Œå¿½ç•¥æ³¨å†Œä¸­å¿ƒçš„æä¾›è€…åˆ—è¡¨ã€‚</p><h4 id="19ã€Dubboæ”¯æŒæœåŠ¡å¤šåè®®å—ï¼Ÿ"><a href="#19ã€Dubboæ”¯æŒæœåŠ¡å¤šåè®®å—ï¼Ÿ" class="headerlink" title="19ã€Dubboæ”¯æŒæœåŠ¡å¤šåè®®å—ï¼Ÿ"></a>19ã€Dubboæ”¯æŒæœåŠ¡å¤šåè®®å—ï¼Ÿ</h4><p>Dubbo å…è®¸é…ç½®å¤šåè®®ï¼Œåœ¨ä¸åŒæœåŠ¡ä¸Šæ”¯æŒä¸åŒåè®®æˆ–è€…åŒä¸€æœåŠ¡ä¸ŠåŒæ—¶æ”¯æŒå¤šç§åè®®ã€‚</p><h4 id="20ã€å½“ä¸€ä¸ªæœåŠ¡æ¥å£æœ‰å¤šç§å®ç°æ—¶æ€ä¹ˆåšï¼Ÿ"><a href="#20ã€å½“ä¸€ä¸ªæœåŠ¡æ¥å£æœ‰å¤šç§å®ç°æ—¶æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="20ã€å½“ä¸€ä¸ªæœåŠ¡æ¥å£æœ‰å¤šç§å®ç°æ—¶æ€ä¹ˆåšï¼Ÿ"></a>20ã€å½“ä¸€ä¸ªæœåŠ¡æ¥å£æœ‰å¤šç§å®ç°æ—¶æ€ä¹ˆåšï¼Ÿ</h4><p>å½“ä¸€ä¸ªæ¥å£æœ‰å¤šç§å®ç°æ—¶ï¼Œå¯ä»¥ç”¨ group å±æ€§æ¥åˆ†ç»„ï¼ŒæœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹éƒ½æŒ‡å®šåŒä¸€ä¸ª group å³å¯ã€‚</p><h4 id="21ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼Ÿ"><a href="#21ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="21ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼Ÿ"></a>21ã€æœåŠ¡ä¸Šçº¿æ€ä¹ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼Ÿ</h4><p>å¯ä»¥ç”¨ç‰ˆæœ¬å·ï¼ˆversionï¼‰è¿‡æ¸¡ï¼Œå¤šä¸ªä¸åŒç‰ˆæœ¬çš„æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œç‰ˆæœ¬å·ä¸åŒçš„æœåŠ¡ç›¸äº’é—´ä¸å¼•ç”¨ã€‚è¿™ä¸ªå’ŒæœåŠ¡åˆ†ç»„çš„æ¦‚å¿µæœ‰ä¸€ç‚¹ç±»ä¼¼ã€‚</p><h4 id="22ã€Dubboå¯ä»¥å¯¹ç»“æœè¿›è¡Œç¼“å­˜å—ï¼Ÿ"><a href="#22ã€Dubboå¯ä»¥å¯¹ç»“æœè¿›è¡Œç¼“å­˜å—ï¼Ÿ" class="headerlink" title="22ã€Dubboå¯ä»¥å¯¹ç»“æœè¿›è¡Œç¼“å­˜å—ï¼Ÿ"></a>22ã€Dubboå¯ä»¥å¯¹ç»“æœè¿›è¡Œç¼“å­˜å—ï¼Ÿ</h4><p>å¯ä»¥ï¼ŒDubbo æä¾›äº†å£°æ˜å¼ç¼“å­˜ï¼Œç”¨äºåŠ é€Ÿçƒ­é—¨æ•°æ®çš„è®¿é—®é€Ÿåº¦ï¼Œä»¥å‡å°‘ç”¨æˆ·åŠ ç¼“å­˜çš„å·¥ä½œé‡ã€‚</p><h4 id="23ã€DubboæœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ"><a href="#23ã€DubboæœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ" class="headerlink" title="23ã€DubboæœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ"></a>23ã€DubboæœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯é˜»å¡çš„å—ï¼Ÿ</h4><p>é»˜è®¤æ˜¯åŒæ­¥ç­‰å¾…ç»“æœé˜»å¡çš„ï¼Œæ”¯æŒå¼‚æ­¥è°ƒç”¨ã€‚</p><p>Dubbo æ˜¯åŸºäº NIO çš„éé˜»å¡å®ç°å¹¶è¡Œè°ƒç”¨ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å¯åŠ¨å¤šçº¿ç¨‹å³å¯å®Œæˆå¹¶è¡Œè°ƒç”¨å¤šä¸ªè¿œç¨‹æœåŠ¡ï¼Œç›¸å¯¹å¤šçº¿ç¨‹å¼€é”€è¾ƒå°ï¼Œå¼‚æ­¥è°ƒç”¨ä¼šè¿”å›ä¸€ä¸ª Future å¯¹è±¡ã€‚</p><p>å¼‚æ­¥è°ƒç”¨æµç¨‹å›¾å¦‚ä¸‹ã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091746_e678a0d8_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091746_e678a0d8_87650.png" class="lazyload"></a></p><h4 id="24ã€Dubboæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ"><a href="#24ã€Dubboæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ" class="headerlink" title="24ã€Dubboæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ"></a>24ã€Dubboæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å—ï¼Ÿ</h4><p>ç›®å‰æš‚æ—¶ä¸æ”¯æŒï¼Œåç»­å¯èƒ½é‡‡ç”¨åŸºäº JTA/XA è§„èŒƒå®ç°ï¼Œå¦‚ä»¥å›¾æ‰€ç¤ºã€‚</p><p><a href="https://images.gitee.com/uploads/images/2018/1012/091756_c686ae87_87650.png" data-fancybox="group" data-caption="è¾“å…¥å›¾ç‰‡è¯´æ˜" class="fancybox"><img alt="è¾“å…¥å›¾ç‰‡è¯´æ˜" title="è¾“å…¥å›¾ç‰‡è¯´æ˜" data-src="https://images.gitee.com/uploads/images/2018/1012/091756_c686ae87_87650.png" class="lazyload"></a></p><h4 id="25ã€Dubbo-telnet-å‘½ä»¤èƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#25ã€Dubbo-telnet-å‘½ä»¤èƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="25ã€Dubbo telnet å‘½ä»¤èƒ½åšä»€ä¹ˆï¼Ÿ"></a>25ã€Dubbo telnet å‘½ä»¤èƒ½åšä»€ä¹ˆï¼Ÿ</h4><p>dubbo é€šè¿‡ telnet å‘½ä»¤æ¥è¿›è¡ŒæœåŠ¡æ²»ç†ï¼Œå…·ä½“ä½¿ç”¨çœ‹è¿™ç¯‡æ–‡ç« ã€ŠdubboæœåŠ¡è°ƒè¯•ç®¡ç†å®ç”¨å‘½ä»¤ã€‹ã€‚</p><p>telnet localhost 8090</p><h4 id="26ã€Dubboæ”¯æŒæœåŠ¡é™çº§å—ï¼Ÿ"><a href="#26ã€Dubboæ”¯æŒæœåŠ¡é™çº§å—ï¼Ÿ" class="headerlink" title="26ã€Dubboæ”¯æŒæœåŠ¡é™çº§å—ï¼Ÿ"></a>26ã€Dubboæ”¯æŒæœåŠ¡é™çº§å—ï¼Ÿ</h4><p>Dubbo 2.2.0 ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒã€‚</p><h4 id="27ã€Dubboå¦‚ä½•ä¼˜é›…åœæœºï¼Ÿ"><a href="#27ã€Dubboå¦‚ä½•ä¼˜é›…åœæœºï¼Ÿ" class="headerlink" title="27ã€Dubboå¦‚ä½•ä¼˜é›…åœæœºï¼Ÿ"></a>27ã€Dubboå¦‚ä½•ä¼˜é›…åœæœºï¼Ÿ</h4><p>Dubbo æ˜¯é€šè¿‡ JDK çš„ ShutdownHook æ¥å®Œæˆä¼˜é›…åœæœºçš„ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ kill -9 PID ç­‰å¼ºåˆ¶å…³é—­æŒ‡ä»¤ï¼Œæ˜¯ä¸ä¼šæ‰§è¡Œä¼˜é›…åœæœºçš„ï¼Œåªæœ‰é€šè¿‡ kill PID æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚</p><h4 id="28ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ"><a href="#28ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ" class="headerlink" title="28ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ"></a>28ã€æœåŠ¡æä¾›è€…èƒ½å®ç°å¤±æ•ˆè¸¢å‡ºæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ</h4><p>æœåŠ¡å¤±æ•ˆè¸¢å‡ºåŸºäº Zookeeper çš„ä¸´æ—¶èŠ‚ç‚¹åŸç†ã€‚</p><h4 id="29ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ"><a href="#29ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="29ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ"></a>29ã€å¦‚ä½•è§£å†³æœåŠ¡è°ƒç”¨é“¾è¿‡é•¿çš„é—®é¢˜ï¼Ÿ</h4><p>Dubbo å¯ä»¥ä½¿ç”¨ Pinpoint å’Œ Apache Skywalking(Incubator) å®ç°åˆ†å¸ƒå¼æœåŠ¡è¿½è¸ªï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–å¾ˆå¤šæ–¹æ¡ˆã€‚</p><h4 id="30ã€æœåŠ¡è¯»å†™æ¨èçš„å®¹é”™ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#30ã€æœåŠ¡è¯»å†™æ¨èçš„å®¹é”™ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="30ã€æœåŠ¡è¯»å†™æ¨èçš„å®¹é”™ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Ÿ"></a>30ã€æœåŠ¡è¯»å†™æ¨èçš„å®¹é”™ç­–ç•¥æ˜¯æ€æ ·çš„ï¼Ÿ</h4><p>è¯»æ“ä½œå»ºè®®ä½¿ç”¨ Failover å¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œé»˜è®¤é‡è¯•ä¸¤æ¬¡å…¶ä»–æœåŠ¡å™¨ã€‚</p><p>å†™æ“ä½œå»ºè®®ä½¿ç”¨ Failfast å¿«é€Ÿå¤±è´¥ï¼Œå‘ä¸€æ¬¡è°ƒç”¨å¤±è´¥å°±ç«‹å³æŠ¥é”™ã€‚</p><h4 id="31ã€Dubboå¿…é¡»ä¾èµ–çš„åŒ…æœ‰å“ªäº›ï¼Ÿ"><a href="#31ã€Dubboå¿…é¡»ä¾èµ–çš„åŒ…æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="31ã€Dubboå¿…é¡»ä¾èµ–çš„åŒ…æœ‰å“ªäº›ï¼Ÿ"></a>31ã€Dubboå¿…é¡»ä¾èµ–çš„åŒ…æœ‰å“ªäº›ï¼Ÿ</h4><p>Dubbo å¿…é¡»ä¾èµ– JDKï¼Œå…¶ä»–ä¸ºå¯é€‰ã€‚</p><h4 id="32ã€Dubboçš„ç®¡ç†æ§åˆ¶å°èƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#32ã€Dubboçš„ç®¡ç†æ§åˆ¶å°èƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="32ã€Dubboçš„ç®¡ç†æ§åˆ¶å°èƒ½åšä»€ä¹ˆï¼Ÿ"></a>32ã€Dubboçš„ç®¡ç†æ§åˆ¶å°èƒ½åšä»€ä¹ˆï¼Ÿ</h4><p>ç®¡ç†æ§åˆ¶å°ä¸»è¦åŒ…å«ï¼šè·¯ç”±è§„åˆ™ï¼ŒåŠ¨æ€é…ç½®ï¼ŒæœåŠ¡é™çº§ï¼Œè®¿é—®æ§åˆ¶ï¼Œæƒé‡è°ƒæ•´ï¼Œè´Ÿè½½å‡è¡¡ï¼Œç­‰ç®¡ç†åŠŸèƒ½ã€‚</p><h4 id="33ã€è¯´è¯´-Dubbo-æœåŠ¡æš´éœ²çš„è¿‡ç¨‹ã€‚"><a href="#33ã€è¯´è¯´-Dubbo-æœåŠ¡æš´éœ²çš„è¿‡ç¨‹ã€‚" class="headerlink" title="33ã€è¯´è¯´ Dubbo æœåŠ¡æš´éœ²çš„è¿‡ç¨‹ã€‚"></a>33ã€è¯´è¯´ Dubbo æœåŠ¡æš´éœ²çš„è¿‡ç¨‹ã€‚</h4><p>Dubbo ä¼šåœ¨ Spring å®ä¾‹åŒ–å®Œ bean ä¹‹åï¼Œåœ¨åˆ·æ–°å®¹å™¨æœ€åä¸€æ­¥å‘å¸ƒ ContextRefreshEvent äº‹ä»¶çš„æ—¶å€™ï¼Œé€šçŸ¥å®ç°äº† ApplicationListener çš„ ServiceBean ç±»è¿›è¡Œå›è°ƒ onApplicationEvent äº‹ä»¶æ–¹æ³•ï¼ŒDubbo ä¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨ ServiceBean çˆ¶ç±» ServiceConfig çš„ export æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•çœŸæ­£å®ç°äº†æœåŠ¡çš„ï¼ˆå¼‚æ­¥æˆ–è€…éå¼‚æ­¥ï¼‰å‘å¸ƒã€‚</p><h4 id="34ã€Dubbo-åœæ­¢ç»´æŠ¤äº†å—ï¼Ÿ"><a href="#34ã€Dubbo-åœæ­¢ç»´æŠ¤äº†å—ï¼Ÿ" class="headerlink" title="34ã€Dubbo åœæ­¢ç»´æŠ¤äº†å—ï¼Ÿ"></a>34ã€Dubbo åœæ­¢ç»´æŠ¤äº†å—ï¼Ÿ</h4><p>2014 å¹´å¼€å§‹åœæ­¢ç»´æŠ¤è¿‡å‡ å¹´ï¼Œ17 å¹´å¼€å§‹é‡æ–°ç»´æŠ¤ï¼Œå¹¶è¿›å…¥äº† Apache é¡¹ç›®ã€‚</p><h4 id="35ã€Dubbo-å’Œ-Dubbox-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#35ã€Dubbo-å’Œ-Dubbox-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="35ã€Dubbo å’Œ Dubbox æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>35ã€Dubbo å’Œ Dubbox æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>Dubbox æ˜¯ç»§ Dubbo åœæ­¢ç»´æŠ¤åï¼Œå½“å½“ç½‘åŸºäº Dubbo åšçš„ä¸€ä¸ªæ‰©å±•é¡¹ç›®ï¼Œå¦‚åŠ äº†æœåŠ¡å¯ Restful è°ƒç”¨ï¼Œæ›´æ–°äº†å¼€æºç»„ä»¶ç­‰ã€‚</p><h4 id="36ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ"><a href="#36ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ" class="headerlink" title="36ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ"></a>36ã€ä½ è¿˜äº†è§£åˆ«çš„åˆ†å¸ƒå¼æ¡†æ¶å—ï¼Ÿ</h4><p>åˆ«çš„è¿˜æœ‰ Spring cloudã€Facebook çš„ Thriftã€Twitter çš„ Finagle ç­‰ã€‚</p><h4 id="37ã€Dubbo-èƒ½é›†æˆ-Spring-Boot-å—ï¼Ÿ"><a href="#37ã€Dubbo-èƒ½é›†æˆ-Spring-Boot-å—ï¼Ÿ" class="headerlink" title="37ã€Dubbo èƒ½é›†æˆ Spring Boot å—ï¼Ÿ"></a>37ã€Dubbo èƒ½é›†æˆ Spring Boot å—ï¼Ÿ</h4><p>å¯ä»¥çš„ï¼Œé¡¹ç›®åœ°å€å¦‚ä¸‹ã€‚</p><p><a href="https://github.com/apache/incubator-dubbo-spring-boot-project" target="_blank" rel="noopener">https://github.com/apache/incubator-dubbo-spring-boot-project</a></p><h4 id="38ã€åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éƒ½é‡åˆ°äº†äº›ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#38ã€åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éƒ½é‡åˆ°äº†äº›ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="38ã€åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éƒ½é‡åˆ°äº†äº›ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>38ã€åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éƒ½é‡åˆ°äº†äº›ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><p>Dubbo çš„è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†æ»¡è¶³é«˜å¹¶å‘å°æ•°æ®é‡çš„ rpc è°ƒç”¨ï¼Œåœ¨å¤§æ•°æ®é‡ä¸‹çš„æ€§èƒ½è¡¨ç°å¹¶ä¸å¥½ï¼Œå»ºè®®ä½¿ç”¨ rmi æˆ– http åè®®ã€‚</p><h4 id="39ã€ä½ è¯»è¿‡-Dubbo-çš„æºç å—ï¼Ÿ"><a href="#39ã€ä½ è¯»è¿‡-Dubbo-çš„æºç å—ï¼Ÿ" class="headerlink" title="39ã€ä½ è¯»è¿‡ Dubbo çš„æºç å—ï¼Ÿ"></a>39ã€ä½ è¯»è¿‡ Dubbo çš„æºç å—ï¼Ÿ</h4><p>è¦äº†è§£ Dubbo å°±å¿…é¡»çœ‹å…¶æºç ï¼Œäº†è§£å…¶åŸç†ï¼ŒèŠ±ç‚¹æ—¶é—´çœ‹ä¸‹å§ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œåç»­æœ‰æ—¶é—´æˆ‘ä¹Ÿä¼šåœ¨å…¬ä¼—å·ä¸Šåˆ†äº« Dubbo çš„æºç ã€‚</p><h4 id="40ã€ä½ è§‰å¾—ç”¨-Dubbo-å¥½è¿˜æ˜¯-Spring-Cloud-å¥½ï¼Ÿ"><a href="#40ã€ä½ è§‰å¾—ç”¨-Dubbo-å¥½è¿˜æ˜¯-Spring-Cloud-å¥½ï¼Ÿ" class="headerlink" title="40ã€ä½ è§‰å¾—ç”¨ Dubbo å¥½è¿˜æ˜¯ Spring Cloud å¥½ï¼Ÿ"></a>40ã€ä½ è§‰å¾—ç”¨ Dubbo å¥½è¿˜æ˜¯ Spring Cloud å¥½ï¼Ÿ</h4><p>æ‰©å±•æ€§çš„é—®é¢˜ï¼Œæ²¡æœ‰å¥½åï¼Œåªæœ‰é€‚åˆä¸é€‚åˆï¼Œä¸è¿‡æˆ‘å¥½åƒæ›´å€¾å‘äºä½¿ç”¨ Dubbo, Spring Cloud ç‰ˆæœ¬å‡çº§å¤ªå¿«ï¼Œç»„ä»¶æ›´æ–°æ›¿æ¢å¤ªé¢‘ç¹ï¼Œé…ç½®å¤ªç¹çï¼Œè¿˜æœ‰å¾ˆå¤šæˆ‘è§‰å¾—æ˜¯æ²¡æœ‰ Dubbo é¡ºæ‰‹çš„åœ°æ–¹â€¦â€¦</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ZooKeeper æ¦‚å¿µ</title>
      <link href="/2018/09/11/ZooKeeper%20%E6%A6%82%E5%BF%B5/"/>
      <url>/2018/09/11/ZooKeeper%20%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="å¯èƒ½æ˜¯å…¨ç½‘æŠŠ-ZooKeeper-æ¦‚å¿µè®²çš„æœ€æ¸…æ¥šçš„ä¸€ç¯‡æ–‡ç« "><a href="#å¯èƒ½æ˜¯å…¨ç½‘æŠŠ-ZooKeeper-æ¦‚å¿µè®²çš„æœ€æ¸…æ¥šçš„ä¸€ç¯‡æ–‡ç« " class="headerlink" title="å¯èƒ½æ˜¯å…¨ç½‘æŠŠ ZooKeeper æ¦‚å¿µè®²çš„æœ€æ¸…æ¥šçš„ä¸€ç¯‡æ–‡ç« "></a>å¯èƒ½æ˜¯å…¨ç½‘æŠŠ ZooKeeper æ¦‚å¿µè®²çš„æœ€æ¸…æ¥šçš„ä¸€ç¯‡æ–‡ç« </h1><p><a href="https://i.imgur.com/XGmR20f.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/XGmR20f.jpg" class="lazyload" title></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç›¸ä¿¡å¤§å®¶å¯¹ ZooKeeper åº”è¯¥ä¸ç®—é™Œç”Ÿã€‚ä½†æ˜¯ä½ çœŸçš„äº†è§£ ZooKeeper æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å—ï¼Ÿå¦‚æœåˆ«äºº/é¢è¯•å®˜è®©ä½ ç»™ä»–è®²è®²  ZooKeeper æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œä½ èƒ½å›ç­”åˆ°ä»€ä¹ˆåœ°æ­¥å‘¢ï¼Ÿ</p><p>æˆ‘æœ¬äººæ›¾ç»ä½¿ç”¨è¿‡ ZooKeeper ä½œä¸º Dubbo çš„æ³¨å†Œä¸­å¿ƒï¼Œå¦å¤–åœ¨æ­å»º solr é›†ç¾¤çš„æ—¶å€™ï¼Œæˆ‘ä½¿ç”¨åˆ°äº†  ZooKeeper ä½œä¸º solr é›†ç¾¤çš„ç®¡ç†å·¥å…·ã€‚å‰å‡ å¤©ï¼Œæ€»ç»“é¡¹ç›®ç»éªŒçš„æ—¶å€™ï¼Œæˆ‘çªç„¶é—®è‡ªå·± ZooKeeper åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿæƒ³äº†åŠå¤©ï¼Œè„‘æµ·ä¸­åªæ˜¯ç®€å•çš„èƒ½æµ®ç°å‡ºå‡ å¥è¯ï¼šâ€œâ‘ Zookeeper å¯ä»¥è¢«ç”¨ä½œæ³¨å†Œä¸­å¿ƒã€‚ â‘¡Zookeeper æ˜¯ Hadoop ç”Ÿæ€ç³»ç»Ÿçš„ä¸€å‘˜ï¼›â‘¢æ„å»º Zookeeper é›†ç¾¤çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æœåŠ¡å™¨æœ€å¥½æ˜¯å¥‡æ•°å°ã€‚â€ å¯è§ï¼Œæˆ‘å¯¹äº Zookeeper çš„ç†è§£ä»…ä»…æ˜¯åœç•™åœ¨äº†è¡¨é¢ã€‚</p><p>æ‰€ä»¥ï¼Œé€šè¿‡æœ¬æ–‡ï¼Œå¸Œæœ›å¸¦å¤§å®¶ç¨å¾®è¯¦ç»†çš„äº†è§£ä¸€ä¸‹ ZooKeeper ã€‚å¦‚æœæ²¡æœ‰å­¦è¿‡ ZooKeeper ï¼Œé‚£ä¹ˆæœ¬æ–‡å°†ä¼šæ˜¯ä½ è¿›å…¥ ZooKeeper å¤§é—¨çš„å«è„šç –ã€‚å¦‚æœä½ å·²ç»æ¥è§¦è¿‡ ZooKeeper ï¼Œé‚£ä¹ˆæœ¬æ–‡å°†å¸¦ä½ å›é¡¾ä¸€ä¸‹ ZooKeeper çš„ä¸€äº›åŸºç¡€æ¦‚å¿µã€‚</p><p>æœ€åï¼Œæœ¬æ–‡åªæ¶‰åŠ ZooKeeper çš„ä¸€äº›æ¦‚å¿µï¼Œå¹¶ä¸æ¶‰åŠ ZooKeeper çš„ä½¿ç”¨ä»¥åŠ ZooKeeper é›†ç¾¤çš„æ­å»ºã€‚ ç½‘ä¸Šæœ‰ä»‹ç» ZooKeeper çš„ä½¿ç”¨ä»¥åŠæ­å»º ZooKeeper é›†ç¾¤çš„æ–‡ç« ï¼Œå¤§å®¶æœ‰éœ€è¦å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚</p><h2 id="ä¸€-ä»€ä¹ˆæ˜¯-ZooKeeper"><a href="#ä¸€-ä»€ä¹ˆæ˜¯-ZooKeeper" class="headerlink" title="ä¸€ ä»€ä¹ˆæ˜¯ ZooKeeper"></a>ä¸€ ä»€ä¹ˆæ˜¯ ZooKeeper</h2><h3 id="ZooKeeper-çš„ç”±æ¥"><a href="#ZooKeeper-çš„ç”±æ¥" class="headerlink" title="ZooKeeper çš„ç”±æ¥"></a>ZooKeeper çš„ç”±æ¥</h3><p>ä¸‹é¢è¿™æ®µå†…å®¹æ‘˜è‡ªã€Šä»Paxosåˆ°Zookeeper ã€‹ç¬¬å››ç« ç¬¬ä¸€èŠ‚çš„æŸæ®µå†…å®¹ï¼Œæ¨èå¤§å®¶é˜…è¯»ä»¥ä¸‹ï¼š</p><blockquote><p>Zookeeperæœ€æ—©èµ·æºäºé›…è™ç ”ç©¶é™¢çš„ä¸€ä¸ªç ”ç©¶å°ç»„ã€‚åœ¨å½“æ—¶ï¼Œç ”ç©¶äººå‘˜å‘ç°ï¼Œåœ¨é›…è™å†…éƒ¨å¾ˆå¤šå¤§å‹ç³»ç»ŸåŸºæœ¬éƒ½éœ€è¦ä¾èµ–ä¸€ä¸ªç±»ä¼¼çš„ç³»ç»Ÿæ¥è¿›è¡Œåˆ†å¸ƒå¼åè°ƒï¼Œä½†æ˜¯è¿™äº›ç³»ç»Ÿå¾€å¾€éƒ½å­˜åœ¨åˆ†å¸ƒå¼å•ç‚¹é—®é¢˜ã€‚æ‰€ä»¥ï¼Œé›…è™çš„å¼€å‘äººå‘˜å°±è¯•å›¾å¼€å‘ä¸€ä¸ªé€šç”¨çš„æ— å•ç‚¹é—®é¢˜çš„åˆ†å¸ƒå¼åè°ƒæ¡†æ¶ï¼Œä»¥ä¾¿è®©å¼€å‘äººå‘˜å°†ç²¾åŠ›é›†ä¸­åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸Šã€‚</p></blockquote><blockquote><p>å…³äºâ€œZooKeeperâ€è¿™ä¸ªé¡¹ç›®çš„åå­—ï¼Œå…¶å®ä¹Ÿæœ‰ä¸€æ®µè¶£é—»ã€‚åœ¨ç«‹é¡¹åˆæœŸï¼Œè€ƒè™‘åˆ°ä¹‹å‰å†…éƒ¨å¾ˆå¤šé¡¹ç›®éƒ½æ˜¯ä½¿ç”¨åŠ¨ç‰©çš„åå­—æ¥å‘½åçš„ï¼ˆä¾‹å¦‚è‘—åçš„Pigé¡¹ç›®),é›…è™çš„å·¥ç¨‹å¸ˆå¸Œæœ›ç»™è¿™ä¸ªé¡¹ç›®ä¹Ÿå–ä¸€ä¸ªåŠ¨ç‰©çš„åå­—ã€‚æ—¶ä»»ç ”ç©¶é™¢çš„é¦–å¸­ç§‘å­¦å®¶RaghuRamakrishnanå¼€ç©ç¬‘åœ°è¯´ï¼šâ€œåœ¨è¿™æ ·ä¸‹å»ï¼Œæˆ‘ä»¬è¿™å„¿å°±å˜æˆåŠ¨ç‰©å›­äº†ï¼â€æ­¤è¯ä¸€å‡ºï¼Œå¤§å®¶çº·çº·è¡¨ç¤ºå°±å«åŠ¨ç‰©å›­ç®¡ç†å‘˜å§ä¸€ä¸€ä¸€å› ä¸ºå„ä¸ªä»¥åŠ¨ç‰©å‘½åçš„åˆ†å¸ƒå¼ç»„ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œé›…è™çš„æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçœ‹ä¸Šå»å°±åƒä¸€ä¸ªå¤§å‹çš„åŠ¨ç‰©å›­äº†ï¼Œè€ŒZookeeperæ­£å¥½è¦ç”¨æ¥è¿›è¡Œåˆ†å¸ƒå¼ç¯å¢ƒçš„åè°ƒä¸€ä¸€äºæ˜¯ï¼ŒZookeeperçš„åå­—ä¹Ÿå°±ç”±æ­¤è¯ç”Ÿäº†ã€‚</p></blockquote><h3 id="1-1-ZooKeeper-æ¦‚è§ˆ"><a href="#1-1-ZooKeeper-æ¦‚è§ˆ" class="headerlink" title="1.1 ZooKeeper æ¦‚è§ˆ"></a>1.1 ZooKeeper æ¦‚è§ˆ</h3><p>ZooKeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼ŒZooKeeperæ¡†æ¶æœ€åˆæ˜¯åœ¨â€œYahoo!â€ä¸Šæ„å»ºçš„ï¼Œç”¨äºä»¥ç®€å•è€Œç¨³å¥çš„æ–¹å¼è®¿é—®ä»–ä»¬çš„åº”ç”¨ç¨‹åºã€‚ åæ¥ï¼ŒApache ZooKeeperæˆä¸ºHadoopï¼ŒHBaseå’Œå…¶ä»–åˆ†å¸ƒå¼æ¡†æ¶ä½¿ç”¨çš„æœ‰ç»„ç»‡æœåŠ¡çš„æ ‡å‡†ã€‚ ä¾‹å¦‚ï¼ŒApache HBaseä½¿ç”¨ZooKeeperè·Ÿè¸ªåˆ†å¸ƒå¼æ•°æ®çš„çŠ¶æ€ã€‚ZooKeeper çš„è®¾è®¡ç›®æ ‡æ˜¯å°†é‚£äº›å¤æ‚ä¸”å®¹æ˜“å‡ºé”™çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§æœåŠ¡å°è£…èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªé«˜æ•ˆå¯é çš„åŸè¯­é›†ï¼Œå¹¶ä»¥ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„æ¥å£æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åŸè¯­ï¼š æ“ä½œç³»ç»Ÿæˆ–è®¡ç®—æœºç½‘ç»œç”¨è¯­èŒƒç•´ã€‚æ˜¯ç”±è‹¥å¹²æ¡æŒ‡ä»¤ç»„æˆçš„ï¼Œç”¨äºå®Œæˆä¸€å®šåŠŸèƒ½çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚å…·æœ‰ä¸å¯åˆ†å‰²æ€§Â·å³åŸè¯­çš„æ‰§è¡Œå¿…é¡»æ˜¯è¿ç»­çš„ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸å…è®¸è¢«ä¸­æ–­ã€‚</span><br></pre></td></tr></tbody></table></figure></div><p><strong>ZooKeeper æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥åŸºäº ZooKeeper å®ç°è¯¸å¦‚æ•°æ®å‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½åæœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ã€‚</strong></p><p>*<em>Zookeeper ä¸€ä¸ªæœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ç”¨äºæ‹…ä»»æœåŠ¡ç”Ÿäº§è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…çš„æ³¨å†Œä¸­å¿ƒã€‚ *</em>æœåŠ¡ç”Ÿäº§è€…å°†è‡ªå·±æä¾›çš„æœåŠ¡æ³¨å†Œåˆ°Zookeeperä¸­å¿ƒï¼ŒæœåŠ¡çš„æ¶ˆè´¹è€…åœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„æ—¶å€™å…ˆåˆ°Zookeeperä¸­æŸ¥æ‰¾æœåŠ¡ï¼Œè·å–åˆ°æœåŠ¡ç”Ÿäº§è€…çš„è¯¦ç»†ä¿¡æ¯ä¹‹åï¼Œå†å»è°ƒç”¨æœåŠ¡ç”Ÿäº§è€…çš„å†…å®¹ä¸æ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ Dubboæ¶æ„ä¸­ Zookeeper å°±æ‹…ä»»äº†æ³¨å†Œä¸­å¿ƒè¿™ä¸€è§’è‰²ã€‚<br><a href="https://i.imgur.com/CI6iA98.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/CI6iA98.jpg" class="lazyload" title></a></p><h3 id="1-2-ç»“åˆä¸ªäººä½¿ç”¨æƒ…å†µçš„è®²ä¸€ä¸‹-ZooKeeper"><a href="#1-2-ç»“åˆä¸ªäººä½¿ç”¨æƒ…å†µçš„è®²ä¸€ä¸‹-ZooKeeper" class="headerlink" title="1.2 ç»“åˆä¸ªäººä½¿ç”¨æƒ…å†µçš„è®²ä¸€ä¸‹ ZooKeeper"></a>1.2 ç»“åˆä¸ªäººä½¿ç”¨æƒ…å†µçš„è®²ä¸€ä¸‹ ZooKeeper</h3><p>åœ¨æˆ‘è‡ªå·±åšè¿‡çš„é¡¹ç›®ä¸­ï¼Œä¸»è¦ä½¿ç”¨åˆ°äº† ZooKeeper ä½œä¸º Dubbo çš„æ³¨å†Œä¸­å¿ƒ(Dubbo å®˜æ–¹æ¨èä½¿ç”¨ ZooKeeperæ³¨å†Œä¸­å¿ƒ)ã€‚å¦å¤–åœ¨æ­å»º solr é›†ç¾¤çš„æ—¶å€™ï¼Œæˆ‘ä½¿ç”¨  ZooKeeper ä½œä¸º solr é›†ç¾¤çš„ç®¡ç†å·¥å…·ã€‚è¿™æ—¶ï¼ŒZooKeeper ä¸»è¦æä¾›ä¸‹é¢å‡ ä¸ªåŠŸèƒ½ï¼š1ã€é›†ç¾¤ç®¡ç†ï¼šå®¹é”™ã€è´Ÿè½½å‡è¡¡ã€‚2ã€é…ç½®æ–‡ä»¶çš„é›†ä¸­ç®¡ç†3ã€é›†ç¾¤çš„å…¥å£ã€‚</p><p>æˆ‘ä¸ªäººè§‰å¾—åœ¨ä½¿ç”¨ ZooKeeper çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ é›†ç¾¤ç‰ˆçš„ ZooKeeper è€Œä¸æ˜¯å•æœºç‰ˆçš„ã€‚å®˜ç½‘ç»™å‡ºçš„æ¶æ„å›¾å°±æè¿°çš„æ˜¯ä¸€ä¸ªé›†ç¾¤ç‰ˆçš„ ZooKeeper ã€‚é€šå¸¸ 3 å°æœåŠ¡å™¨å°±å¯ä»¥æ„æˆä¸€ä¸ª  ZooKeeper  é›†ç¾¤äº†ã€‚</p><p><strong>ä¸ºä»€ä¹ˆæœ€å¥½ä½¿ç”¨å¥‡æ•°å°æœåŠ¡å™¨æ„æˆ ZooKeeper é›†ç¾¤ï¼Ÿ</strong></p><p>æˆ‘ä»¬çŸ¥é“åœ¨Zookeeperä¸­ Leader é€‰ä¸¾ç®—æ³•é‡‡ç”¨äº†Zabåè®®ã€‚Zabæ ¸å¿ƒæ€æƒ³æ˜¯å½“å¤šæ•° Server å†™æˆåŠŸï¼Œåˆ™ä»»åŠ¡æ•°æ®å†™æˆåŠŸã€‚</p><ul><li><p>â‘ å¦‚æœæœ‰3ä¸ªServerï¼Œåˆ™æœ€å¤šå…è®¸1ä¸ªServer æŒ‚æ‰ã€‚</p></li><li><p>â‘¡å¦‚æœæœ‰4ä¸ªServerï¼Œåˆ™åŒæ ·æœ€å¤šå…è®¸1ä¸ªServeræŒ‚æ‰ã€‚</p></li></ul><p>æ—¢ç„¶3ä¸ªæˆ–è€…4ä¸ªServerï¼ŒåŒæ ·æœ€å¤šå…è®¸1ä¸ªServeræŒ‚æ‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å¯é æ€§æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥é€‰æ‹©å¥‡æ•°ä¸ªZooKeeper Serverå³å¯ï¼Œè¿™é‡Œé€‰æ‹©3ä¸ªServerã€‚</p><h2 id="äºŒ-å…³äº-ZooKeeper-çš„ä¸€äº›é‡è¦æ¦‚å¿µ"><a href="#äºŒ-å…³äº-ZooKeeper-çš„ä¸€äº›é‡è¦æ¦‚å¿µ" class="headerlink" title="äºŒ å…³äº ZooKeeper  çš„ä¸€äº›é‡è¦æ¦‚å¿µ"></a>äºŒ å…³äº ZooKeeper  çš„ä¸€äº›é‡è¦æ¦‚å¿µ</h2><h3 id="2-1-é‡è¦æ¦‚å¿µæ€»ç»“"><a href="#2-1-é‡è¦æ¦‚å¿µæ€»ç»“" class="headerlink" title="2.1 é‡è¦æ¦‚å¿µæ€»ç»“"></a>2.1 é‡è¦æ¦‚å¿µæ€»ç»“</h3><ul><li><p>ZooKeeper  æœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç¨‹åºï¼ˆåªè¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZooKeeper  å°±èƒ½æ­£å¸¸æœåŠ¡ï¼‰ã€‚</p></li><li><p>ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œæœ€å¥½æ˜¯ä»¥é›†ç¾¤å½¢æ€æ¥éƒ¨ç½² ZooKeeperï¼Œè¿™æ ·åªè¦é›†ç¾¤ä¸­å¤§éƒ¨åˆ†æœºå™¨æ˜¯å¯ç”¨çš„ï¼ˆèƒ½å¤Ÿå®¹å¿ä¸€å®šçš„æœºå™¨æ•…éšœï¼‰ï¼Œé‚£ä¹ˆ ZooKeeper æœ¬èº«ä»ç„¶æ˜¯å¯ç”¨çš„ã€‚</p></li><li><p>ZooKeeper  å°†æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™ä¹Ÿå°±ä¿è¯äº† é«˜ååé‡å’Œä½å»¶è¿Ÿï¼ˆä½†æ˜¯å†…å­˜é™åˆ¶äº†èƒ½å¤Ÿå­˜å‚¨çš„å®¹é‡ä¸å¤ªå¤§ï¼Œæ­¤é™åˆ¶ä¹Ÿæ˜¯ä¿æŒznodeä¸­å­˜å‚¨çš„æ•°æ®é‡è¾ƒå°çš„è¿›ä¸€æ­¥åŸå› ï¼‰ã€‚</p></li><li><p>ZooKeeper æ˜¯é«˜æ€§èƒ½çš„ã€‚ åœ¨â€œè¯»â€å¤šäºâ€œå†™â€çš„åº”ç”¨ç¨‹åºä¸­å°¤å…¶åœ°é«˜æ€§èƒ½ï¼Œå› ä¸ºâ€œå†™â€ä¼šå¯¼è‡´æ‰€æœ‰çš„æœåŠ¡å™¨é—´åŒæ­¥çŠ¶æ€ã€‚ï¼ˆâ€œè¯»â€å¤šäºâ€œå†™â€æ˜¯åè°ƒæœåŠ¡çš„å…¸å‹åœºæ™¯ã€‚ï¼‰</p></li><li><p>ZooKeeperæœ‰ä¸´æ—¶èŠ‚ç‚¹çš„æ¦‚å¿µã€‚ å½“åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ä¼šè¯ä¸€ç›´ä¿æŒæ´»åŠ¨ï¼Œç¬æ—¶èŠ‚ç‚¹å°±ä¸€ç›´å­˜åœ¨ã€‚è€Œå½“ä¼šè¯ç»ˆç»“æ—¶ï¼Œç¬æ—¶èŠ‚ç‚¹è¢«åˆ é™¤ã€‚æŒä¹…èŠ‚ç‚¹æ˜¯æŒ‡ä¸€æ—¦è¿™ä¸ªZNodeè¢«åˆ›å»ºäº†ï¼Œé™¤éä¸»åŠ¨è¿›è¡ŒZNodeçš„ç§»é™¤æ“ä½œï¼Œå¦åˆ™è¿™ä¸ªZNodeå°†ä¸€ç›´ä¿å­˜åœ¨Zookeeperä¸Šã€‚</p></li><li><p>ZooKeeper åº•å±‚å…¶å®åªæä¾›äº†ä¸¤ä¸ªåŠŸèƒ½ï¼šâ‘ ç®¡ç†ï¼ˆå­˜å‚¨ã€è¯»å–ï¼‰ç”¨æˆ·ç¨‹åºæäº¤çš„æ•°æ®ï¼›â‘¡ä¸ºç”¨æˆ·ç¨‹åºæäº¤æ•°æ®èŠ‚ç‚¹ç›‘å¬æœåŠ¡ã€‚</p></li></ul><p>ä¸‹é¢å…³äºä¼šè¯ï¼ˆSessionï¼‰ã€ Znodeã€ç‰ˆæœ¬ã€Watcherã€ACLæ¦‚å¿µçš„æ€»ç»“éƒ½åœ¨ã€Šä»Paxosåˆ°Zookeeper ã€‹ç¬¬å››ç« ç¬¬ä¸€èŠ‚ä»¥åŠç¬¬ä¸ƒç« ç¬¬å…«èŠ‚æœ‰æåˆ°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹ï¼</p><h3 id="2-2-ä¼šè¯ï¼ˆSessionï¼‰"><a href="#2-2-ä¼šè¯ï¼ˆSessionï¼‰" class="headerlink" title="2.2 ä¼šè¯ï¼ˆSessionï¼‰"></a>2.2 ä¼šè¯ï¼ˆSessionï¼‰</h3><p>Session æŒ‡çš„æ˜¯ ZooKeeper  æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¼šè¯ã€‚<strong>åœ¨ ZooKeeper ä¸­ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æ˜¯æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸€ä¸ª TCP é•¿è¿æ¥ã€‚</strong>å®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼Œä»ç¬¬ä¸€æ¬¡è¿æ¥å»ºç«‹å¼€å§‹ï¼Œå®¢æˆ·ç«¯ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå¼€å§‹äº†ã€‚<strong>é€šè¿‡è¿™ä¸ªè¿æ¥ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡å¿ƒè·³æ£€æµ‹ä¸æœåŠ¡å™¨ä¿æŒæœ‰æ•ˆçš„ä¼šè¯ï¼Œä¹Ÿèƒ½å¤Ÿå‘ZookeeperæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶æ¥å—å“åº”ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿé€šè¿‡è¯¥è¿æ¥æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„Watchäº‹ä»¶é€šçŸ¥ã€‚ **Sessionçš„sessionTimeoutå€¼ç”¨æ¥è®¾ç½®ä¸€ä¸ªå®¢æˆ·ç«¯ä¼šè¯çš„è¶…æ—¶æ—¶é—´ã€‚å½“ç”±äºæœåŠ¡å™¨å‹åŠ›å¤ªå¤§ã€ç½‘ç»œæ•…éšœæˆ–æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€è¿æ¥ç­‰å„ç§åŸå› å¯¼è‡´å®¢æˆ·ç«¯è¿æ¥æ–­å¼€æ—¶ï¼Œ</strong>åªè¦åœ¨sessionTimeoutè§„å®šçš„æ—¶é—´å†…èƒ½å¤Ÿé‡æ–°è¿æ¥ä¸Šé›†ç¾¤ä¸­ä»»æ„ä¸€å°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¹‹å‰åˆ›å»ºçš„ä¼šè¯ä»ç„¶æœ‰æ•ˆã€‚**</p><p><strong>åœ¨ä¸ºå®¢æˆ·ç«¯åˆ›å»ºä¼šè¯ä¹‹å‰ï¼ŒæœåŠ¡ç«¯é¦–å…ˆä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯éƒ½åˆ†é…ä¸€ä¸ªsessionIDã€‚ç”±äº sessionID æ˜¯ Zookeeper ä¼šè¯çš„ä¸€ä¸ªé‡è¦æ ‡è¯†ï¼Œè®¸å¤šä¸ä¼šè¯ç›¸å…³çš„è¿è¡Œæœºåˆ¶éƒ½æ˜¯åŸºäºè¿™ä¸ª sessionID çš„ï¼Œå› æ­¤ï¼Œæ— è®ºæ˜¯å“ªå°æœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯åˆ†é…çš„ sessionIDï¼Œéƒ½åŠ¡å¿…ä¿è¯å…¨å±€å”¯ä¸€ã€‚</strong></p><h3 id="2-3-Znode"><a href="#2-3-Znode" class="headerlink" title="2.3 Znode"></a>2.3 Znode</h3><p><strong>åœ¨è°ˆåˆ°åˆ†å¸ƒå¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸è¯´çš„â€œèŠ‚ç‚¹â€æ˜¯æŒ‡ç»„æˆé›†ç¾¤çš„æ¯ä¸€å°æœºå™¨ã€‚ç„¶è€Œï¼Œåœ¨Zookeeperä¸­ï¼Œâ€œèŠ‚ç‚¹â€åˆ†ä¸ºä¸¤ç±»ï¼Œç¬¬ä¸€ç±»åŒæ ·æ˜¯æŒ‡æ„æˆé›†ç¾¤çš„æœºå™¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæœºå™¨èŠ‚ç‚¹ï¼›ç¬¬äºŒç±»åˆ™æ˜¯æŒ‡æ•°æ®æ¨¡å‹ä¸­çš„æ•°æ®å•å…ƒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°æ®èŠ‚ç‚¹ä¸€ä¸€ZNodeã€‚</strong></p><p>Zookeeperå°†æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®æ¨¡å‹æ˜¯ä¸€æ£µæ ‘ï¼ˆZnode Tree)ï¼Œç”±æ–œæ ï¼ˆ/ï¼‰çš„è¿›è¡Œåˆ†å‰²çš„è·¯å¾„ï¼Œå°±æ˜¯ä¸€ä¸ªZnodeï¼Œä¾‹å¦‚/foo/path1ã€‚æ¯ä¸ªä¸Šéƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å†…å®¹ï¼ŒåŒæ—¶è¿˜ä¼šä¿å­˜ä¸€ç³»åˆ—å±æ€§ä¿¡æ¯ã€‚</p><p><strong>åœ¨Zookeeperä¸­ï¼Œnodeå¯ä»¥åˆ†ä¸ºæŒä¹…èŠ‚ç‚¹å’Œä¸´æ—¶èŠ‚ç‚¹ä¸¤ç±»ã€‚æ‰€è°“æŒä¹…èŠ‚ç‚¹æ˜¯æŒ‡ä¸€æ—¦è¿™ä¸ªZNodeè¢«åˆ›å»ºäº†ï¼Œé™¤éä¸»åŠ¨è¿›è¡ŒZNodeçš„ç§»é™¤æ“ä½œï¼Œå¦åˆ™è¿™ä¸ªZNodeå°†ä¸€ç›´ä¿å­˜åœ¨Zookeeperä¸Šã€‚è€Œä¸´æ—¶èŠ‚ç‚¹å°±ä¸ä¸€æ ·äº†ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œå®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚</strong>å¦å¤–ï¼ŒZooKeeperè¿˜å…è®¸ç”¨æˆ·ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼šSEQUENTIAL.ä¸€æ—¦èŠ‚ç‚¹è¢«æ ‡è®°ä¸Šè¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŠ‚ç‚¹è¢«åˆ›å»ºçš„æ—¶å€™ï¼ŒZookeeperä¼šè‡ªåŠ¨åœ¨å…¶èŠ‚ç‚¹ååé¢è¿½åŠ ä¸Šä¸€ä¸ªæ•´å‹æ•°å­—ï¼Œè¿™ä¸ªæ•´å‹æ•°å­—æ˜¯ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•°å­—ã€‚</p><h3 id="2-4-ç‰ˆæœ¬"><a href="#2-4-ç‰ˆæœ¬" class="headerlink" title="2.4 ç‰ˆæœ¬"></a>2.4 ç‰ˆæœ¬</h3><p>åœ¨å‰é¢æˆ‘ä»¬å·²ç»æåˆ°ï¼ŒZookeeper çš„æ¯ä¸ª ZNode ä¸Šéƒ½ä¼šå­˜å‚¨æ•°æ®ï¼Œå¯¹åº”äºæ¯ä¸ªZNodeï¼ŒZookeeper éƒ½ä¼šä¸ºå…¶ç»´æŠ¤ä¸€ä¸ªå«ä½œ Stat çš„æ•°æ®ç»“æ„ï¼ŒStatä¸­è®°å½•äº†è¿™ä¸ª ZNode çš„ä¸‰ä¸ªæ•°æ®ç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯versionï¼ˆå½“å‰ZNodeçš„ç‰ˆæœ¬ï¼‰ã€cversionï¼ˆå½“å‰ZNodeå­èŠ‚ç‚¹çš„ç‰ˆæœ¬ï¼‰å’Œ cversionï¼ˆå½“å‰ZNodeçš„ACLç‰ˆæœ¬ï¼‰ã€‚</p><h3 id="2-5-Watcher"><a href="#2-5-Watcher" class="headerlink" title="2.5 Watcher"></a>2.5 Watcher</h3><p>Watcherï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰ï¼Œæ˜¯Zookeeperä¸­çš„ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ã€‚Zookeeperå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼ŒZooKeeperæœåŠ¡ç«¯ä¼šå°†äº‹ä»¶é€šçŸ¥åˆ°æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ä¸Šå»ï¼Œè¯¥æœºåˆ¶æ˜¯Zookeeperå®ç°åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„é‡è¦ç‰¹æ€§ã€‚</p><h3 id="2-6-ACL"><a href="#2-6-ACL" class="headerlink" title="2.6 ACL"></a>2.6 ACL</h3><p>Zookeeperé‡‡ç”¨ACLï¼ˆAccessControlListsï¼‰ç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶ï¼Œç±»ä¼¼äº UNIX æ–‡ä»¶ç³»ç»Ÿçš„æƒé™æ§åˆ¶ã€‚Zookeeper å®šä¹‰äº†å¦‚ä¸‹5ç§æƒé™ã€‚<br><a href="https://i.imgur.com/Bo3jpfg.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Bo3jpfg.jpg" class="lazyload" title></a></p><p>å…¶ä¸­å°¤å…¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCREATEå’ŒDELETEè¿™ä¸¤ç§æƒé™éƒ½æ˜¯é’ˆå¯¹å­èŠ‚ç‚¹çš„æƒé™æ§åˆ¶ã€‚</p><h2 id="ä¸‰-ZooKeeper-ç‰¹ç‚¹"><a href="#ä¸‰-ZooKeeper-ç‰¹ç‚¹" class="headerlink" title="ä¸‰ ZooKeeper ç‰¹ç‚¹"></a>ä¸‰ ZooKeeper ç‰¹ç‚¹</h2><ul><li><p>é¡ºåºä¸€è‡´æ€§ï¼š ä»åŒä¸€å®¢æˆ·ç«¯å‘èµ·çš„äº‹åŠ¡è¯·æ±‚ï¼Œæœ€ç»ˆå°†ä¼šä¸¥æ ¼åœ°æŒ‰ç…§é¡ºåºè¢«åº”ç”¨åˆ° ZooKeeper ä¸­å»ã€‚</p></li><li><p>åŸå­æ€§ï¼š æ‰€æœ‰äº‹åŠ¡è¯·æ±‚çš„å¤„ç†ç»“æœåœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¸Šçš„åº”ç”¨æƒ…å†µæ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¹ˆæ•´ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰çš„æœºå™¨éƒ½æˆåŠŸåº”ç”¨äº†æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰åº”ç”¨ã€‚</p></li><li><p>å•ä¸€ç³»ç»Ÿæ˜ åƒ ï¼š æ— è®ºå®¢æˆ·ç«¯è¿åˆ°å“ªä¸€ä¸ª ZooKeeper æœåŠ¡å™¨ä¸Šï¼Œå…¶çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p></li><li><p>å¯é æ€§ï¼š ä¸€æ—¦ä¸€æ¬¡æ›´æ”¹è¯·æ±‚è¢«åº”ç”¨ï¼Œæ›´æ”¹çš„ç»“æœå°±ä¼šè¢«æŒä¹…åŒ–ï¼Œç›´åˆ°è¢«ä¸‹ä¸€æ¬¡æ›´æ”¹è¦†ç›–ã€‚</p></li></ul><h2 id="å››-ZooKeeper-è®¾è®¡ç›®æ ‡"><a href="#å››-ZooKeeper-è®¾è®¡ç›®æ ‡" class="headerlink" title="å›› ZooKeeper è®¾è®¡ç›®æ ‡"></a>å›› ZooKeeper è®¾è®¡ç›®æ ‡</h2><h3 id="4-1-ç®€å•çš„æ•°æ®æ¨¡å‹"><a href="#4-1-ç®€å•çš„æ•°æ®æ¨¡å‹" class="headerlink" title="4.1 ç®€å•çš„æ•°æ®æ¨¡å‹"></a>4.1 ç®€å•çš„æ•°æ®æ¨¡å‹</h3><p>ZooKeeper å…è®¸åˆ†å¸ƒå¼è¿›ç¨‹é€šè¿‡å…±äº«çš„å±‚æ¬¡ç»“æ„å‘½åç©ºé—´è¿›è¡Œç›¸äº’åè°ƒï¼Œè¿™ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ã€‚ åç§°ç©ºé—´ç”± ZooKeeper ä¸­çš„æ•°æ®å¯„å­˜å™¨ç»„æˆ - ç§°ä¸ºznodeï¼Œè¿™äº›ç±»ä¼¼äºæ–‡ä»¶å’Œç›®å½•ã€‚ ä¸ä¸ºå­˜å‚¨è®¾è®¡çš„å…¸å‹æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼ŒZooKeeperæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ„å‘³ç€ZooKeeperå¯ä»¥å®ç°é«˜ååé‡å’Œä½å»¶è¿Ÿã€‚<br><a href="https://i.imgur.com/mkx16Ds.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/mkx16Ds.jpg" class="lazyload" title></a></p><h3 id="4-2-å¯æ„å»ºé›†ç¾¤"><a href="#4-2-å¯æ„å»ºé›†ç¾¤" class="headerlink" title="4.2 å¯æ„å»ºé›†ç¾¤"></a>4.2 å¯æ„å»ºé›†ç¾¤</h3><p>ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œæœ€å¥½æ˜¯ä»¥é›†ç¾¤å½¢æ€æ¥éƒ¨ç½² ZooKeeperï¼Œè¿™æ ·åªè¦é›†ç¾¤ä¸­å¤§éƒ¨åˆ†æœºå™¨æ˜¯å¯ç”¨çš„ï¼ˆèƒ½å¤Ÿå®¹å¿ä¸€å®šçš„æœºå™¨æ•…éšœï¼‰ï¼Œé‚£ä¹ˆzookeeperæœ¬èº«ä»ç„¶æ˜¯å¯ç”¨çš„ã€‚ å®¢æˆ·ç«¯åœ¨ä½¿ç”¨ ZooKeeper æ—¶ï¼Œéœ€è¦çŸ¥é“é›†ç¾¤æœºå™¨åˆ—è¡¨ï¼Œé€šè¿‡ä¸é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨å»ºç«‹ TCP è¿æ¥æ¥ä½¿ç”¨æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨è¿™ä¸ªTCPé“¾æ¥æ¥å‘é€è¯·æ±‚ã€è·å–ç»“æœã€è·å–ç›‘å¬äº‹ä»¶ä»¥åŠå‘é€å¿ƒè·³åŒ…ã€‚å¦‚æœè¿™ä¸ªè¿æ¥å¼‚å¸¸æ–­å¼€äº†ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿æ¥åˆ°å¦å¤–çš„æœºå™¨ä¸Šã€‚</p><p>ZooKeeper å®˜æ–¹æä¾›çš„æ¶æ„å›¾ï¼š<br><a href="https://i.imgur.com/zN2ufDy.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/zN2ufDy.jpg" class="lazyload" title></a></p><p>ä¸Šå›¾ä¸­æ¯ä¸€ä¸ªServerä»£è¡¨ä¸€ä¸ªå®‰è£…ZookeeperæœåŠ¡çš„æœåŠ¡å™¨ã€‚ç»„æˆ ZooKeeper æœåŠ¡çš„æœåŠ¡å™¨éƒ½ä¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤å½“å‰çš„æœåŠ¡å™¨çŠ¶æ€ï¼Œå¹¶ä¸”æ¯å°æœåŠ¡å™¨ä¹‹é—´éƒ½äº’ç›¸ä¿æŒç€é€šä¿¡ã€‚é›†ç¾¤é—´é€šè¿‡ Zab åè®®ï¼ˆZookeeper Atomic Broadcastï¼‰æ¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h3 id="4-3-é¡ºåºè®¿é—®"><a href="#4-3-é¡ºåºè®¿é—®" class="headerlink" title="4.3 é¡ºåºè®¿é—®"></a>4.3 é¡ºåºè®¿é—®</h3><p>å¯¹äºæ¥è‡ªå®¢æˆ·ç«¯çš„æ¯ä¸ªæ›´æ–°è¯·æ±‚ï¼ŒZooKeeper éƒ½ä¼šåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„é€’å¢ç¼–å·ï¼Œè¿™ä¸ªç¼–å·ååº”äº†æ‰€æœ‰äº‹åŠ¡æ“ä½œçš„å…ˆåé¡ºåºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ ZooKeeper è¿™ä¸ªç‰¹æ€§æ¥å®ç°æ›´é«˜å±‚æ¬¡çš„åŒæ­¥åŸè¯­ã€‚ è¿™ä¸ªç¼–å·ä¹Ÿå«åšæ—¶é—´æˆ³â€”â€”zxidï¼ˆZookeeper Transaction Idï¼‰</p><h3 id="4-4-é«˜æ€§èƒ½"><a href="#4-4-é«˜æ€§èƒ½" class="headerlink" title="4.4 é«˜æ€§èƒ½"></a>4.4 é«˜æ€§èƒ½</h3><p>ZooKeeper æ˜¯é«˜æ€§èƒ½çš„ã€‚ åœ¨â€œè¯»â€å¤šäºâ€œå†™â€çš„åº”ç”¨ç¨‹åºä¸­å°¤å…¶åœ°é«˜æ€§èƒ½ï¼Œå› ä¸ºâ€œå†™â€ä¼šå¯¼è‡´æ‰€æœ‰çš„æœåŠ¡å™¨é—´åŒæ­¥çŠ¶æ€ã€‚ï¼ˆâ€œè¯»â€å¤šäºâ€œå†™â€æ˜¯åè°ƒæœåŠ¡çš„å…¸å‹åœºæ™¯ã€‚ï¼‰</p><h2 id="äº”-ZooKeeper-é›†ç¾¤è§’è‰²ä»‹ç»"><a href="#äº”-ZooKeeper-é›†ç¾¤è§’è‰²ä»‹ç»" class="headerlink" title="äº” ZooKeeper é›†ç¾¤è§’è‰²ä»‹ç»"></a>äº” ZooKeeper é›†ç¾¤è§’è‰²ä»‹ç»</h2><p>æœ€å…¸å‹é›†ç¾¤æ¨¡å¼ï¼š Master/Slave æ¨¡å¼ï¼ˆä¸»å¤‡æ¨¡å¼ï¼‰ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸ MasteræœåŠ¡å™¨ä½œä¸ºä¸»æœåŠ¡å™¨æä¾›å†™æœåŠ¡ï¼Œå…¶ä»–çš„ Slave æœåŠ¡å™¨ä»æœåŠ¡å™¨é€šè¿‡å¼‚æ­¥å¤åˆ¶çš„æ–¹å¼è·å– Master æœåŠ¡å™¨æœ€æ–°çš„æ•°æ®æä¾›è¯»æœåŠ¡ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨ ZooKeeper ä¸­æ²¡æœ‰é€‰æ‹©ä¼ ç»Ÿçš„  Master/Slave æ¦‚å¿µï¼Œè€Œæ˜¯å¼•å…¥äº†Leaderã€Follower å’Œ Observer ä¸‰ç§è§’è‰²ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º<br><a href="https://i.imgur.com/Nmi992Z.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/Nmi992Z.jpg" class="lazyload" title></a></p><p>ZooKeeper é›†ç¾¤ä¸­çš„æ‰€æœ‰æœºå™¨é€šè¿‡ä¸€ä¸ª Leader é€‰ä¸¾è¿‡ç¨‹æ¥é€‰å®šä¸€å°ç§°ä¸º â€œLeaderâ€ çš„æœºå™¨ï¼ŒLeader æ—¢å¯ä»¥ä¸ºå®¢æˆ·ç«¯æä¾›å†™æœåŠ¡åˆèƒ½æä¾›è¯»æœåŠ¡ã€‚é™¤äº† Leader å¤–ï¼ŒFollower å’Œ  Observer éƒ½åªèƒ½æä¾›è¯»æœåŠ¡ã€‚Follower å’Œ  Observer å”¯ä¸€çš„åŒºåˆ«åœ¨äº Observer æœºå™¨ä¸å‚ä¸ Leader çš„é€‰ä¸¾è¿‡ç¨‹ï¼Œä¹Ÿä¸å‚ä¸å†™æ“ä½œçš„â€œè¿‡åŠå†™æˆåŠŸâ€ç­–ç•¥ï¼Œå› æ­¤ Observer æœºå™¨å¯ä»¥åœ¨ä¸å½±å“å†™æ€§èƒ½çš„æƒ…å†µä¸‹æå‡é›†ç¾¤çš„è¯»æ€§èƒ½ã€‚<br><a href="https://i.imgur.com/xoqFywM.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/xoqFywM.jpg" class="lazyload" title></a></p><h2 id="å…­-ZooKeeper-amp-ZAB-åè®®-amp-Paxosç®—æ³•"><a href="#å…­-ZooKeeper-amp-ZAB-åè®®-amp-Paxosç®—æ³•" class="headerlink" title="å…­ ZooKeeper &ZAB åè®®&Paxosç®—æ³•"></a>å…­ ZooKeeper &ZAB åè®®&Paxosç®—æ³•</h2><h3 id="6-1-ZAB-åè®®-amp-Paxosç®—æ³•"><a href="#6-1-ZAB-åè®®-amp-Paxosç®—æ³•" class="headerlink" title="6.1 ZAB åè®®&Paxosç®—æ³•"></a>6.1 ZAB åè®®&Paxosç®—æ³•</h3><p>Paxos ç®—æ³•åº”è¯¥å¯ä»¥è¯´æ˜¯  ZooKeeper çš„çµé­‚äº†ã€‚ä½†æ˜¯ï¼ŒZooKeeper å¹¶æ²¡æœ‰å®Œå…¨é‡‡ç”¨ Paxosç®—æ³• ï¼Œè€Œæ˜¯ä½¿ç”¨ ZAB åè®®ä½œä¸ºå…¶ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒç®—æ³•ã€‚å¦å¤–ï¼Œåœ¨ZooKeeperçš„å®˜æ–¹æ–‡æ¡£ä¸­ä¹ŸæŒ‡å‡ºï¼ŒZABåè®®å¹¶ä¸åƒ Paxos ç®—æ³•é‚£æ ·ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹åˆ«ä¸ºZookeeperè®¾è®¡çš„å´©æºƒå¯æ¢å¤çš„åŸå­æ¶ˆæ¯å¹¿æ’­ç®—æ³•ã€‚</p><h3 id="6-2-ZAB-åè®®ä»‹ç»"><a href="#6-2-ZAB-åè®®ä»‹ç»" class="headerlink" title="6.2 ZAB åè®®ä»‹ç»"></a>6.2 ZAB åè®®ä»‹ç»</h3><p>ZABï¼ˆZooKeeper Atomic Broadcast åŸå­å¹¿æ’­ï¼‰ åè®®æ˜¯ä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒå´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®ã€‚ åœ¨ ZooKeeper ä¸­ï¼Œä¸»è¦ä¾èµ– ZAB åè®®æ¥å®ç°åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§ï¼ŒåŸºäºè¯¥åè®®ï¼ŒZooKeeper å®ç°äº†ä¸€ç§ä¸»å¤‡æ¨¡å¼çš„ç³»ç»Ÿæ¶æ„æ¥ä¿æŒé›†ç¾¤ä¸­å„ä¸ªå‰¯æœ¬ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p><h3 id="6-3-ZAB-åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­"><a href="#6-3-ZAB-åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­" class="headerlink" title="6.3 ZAB åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­"></a>6.3 ZAB åè®®ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­</h3><p>ZABåè®®åŒ…æ‹¬ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ å´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­ã€‚å½“æ•´ä¸ªæœåŠ¡æ¡†æ¶åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œæˆ–æ˜¯å½“ Leader æœåŠ¡å™¨å‡ºç°ç½‘ç»œä¸­æ–­ã€å´©æºƒé€€å‡ºä¸é‡å¯ç­‰å¼‚å¸¸æƒ…å†µæ—¶ï¼ŒZAB åè®®å°±ä¼šè¿›äººæ¢å¤æ¨¡å¼å¹¶é€‰ä¸¾äº§ç”Ÿæ–°çš„LeaderæœåŠ¡å™¨ã€‚å½“é€‰ä¸¾äº§ç”Ÿäº†æ–°çš„ Leader æœåŠ¡å™¨ï¼ŒåŒæ—¶é›†ç¾¤ä¸­å·²ç»æœ‰è¿‡åŠçš„æœºå™¨ä¸è¯¥LeaderæœåŠ¡å™¨å®Œæˆäº†çŠ¶æ€åŒæ­¥ä¹‹åï¼ŒZABåè®®å°±ä¼šé€€å‡ºæ¢å¤æ¨¡å¼ã€‚å…¶ä¸­ï¼Œæ‰€è°“çš„çŠ¶æ€åŒæ­¥æ˜¯æŒ‡æ•°æ®åŒæ­¥ï¼Œç”¨æ¥ä¿è¯é›†ç¾¤ä¸­å­˜åœ¨è¿‡åŠçš„æœºå™¨èƒ½å¤Ÿå’ŒLeaderæœåŠ¡å™¨çš„æ•°æ®çŠ¶æ€ä¿æŒä¸€è‡´ã€‚</p><p>å½“é›†ç¾¤ä¸­å·²ç»æœ‰è¿‡åŠçš„FolloweræœåŠ¡å™¨å®Œæˆäº†å’ŒLeaderæœåŠ¡å™¨çš„çŠ¶æ€åŒæ­¥ï¼Œé‚£ä¹ˆæ•´ä¸ªæœåŠ¡æ¡†æ¶å°±å¯ä»¥è¿›äººæ¶ˆæ¯å¹¿æ’­æ¨¡å¼äº†ã€‚ å½“ä¸€å°åŒæ ·éµå®ˆZABåè®®çš„æœåŠ¡å™¨å¯åŠ¨ååŠ äººåˆ°é›†ç¾¤ä¸­æ—¶ï¼Œå¦‚æœæ­¤æ—¶é›†ç¾¤ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªLeaderæœåŠ¡å™¨åœ¨è´Ÿè´£è¿›è¡Œæ¶ˆæ¯å¹¿æ’­ï¼Œé‚£ä¹ˆæ–°åŠ äººçš„æœåŠ¡å™¨å°±ä¼šè‡ªè§‰åœ°è¿›äººæ•°æ®æ¢å¤æ¨¡å¼ï¼šæ‰¾åˆ°Leaderæ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸å…¶è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œç„¶åä¸€èµ·å‚ä¸åˆ°æ¶ˆæ¯å¹¿æ’­æµç¨‹ä¸­å»ã€‚æ­£å¦‚ä¸Šæ–‡ä»‹ç»ä¸­æ‰€è¯´çš„ï¼ŒZooKeeperè®¾è®¡æˆåªå…è®¸å”¯ä¸€çš„ä¸€ä¸ªLeaderæœåŠ¡å™¨æ¥è¿›è¡Œäº‹åŠ¡è¯·æ±‚çš„å¤„ç†ã€‚LeaderæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚åï¼Œä¼šç”Ÿæˆå¯¹åº”çš„äº‹åŠ¡ææ¡ˆå¹¶å‘èµ·ä¸€è½®å¹¿æ’­åè®®ï¼›è€Œå¦‚æœé›†ç¾¤ä¸­çš„å…¶ä»–æœºå™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™äº›éLeaderæœåŠ¡å™¨ä¼šé¦–å…ˆå°†è¿™ä¸ªäº‹åŠ¡è¯·æ±‚è½¬å‘ç»™LeaderæœåŠ¡å™¨ã€‚</p><p>å…³äº ZAB åè®®&Paxosç®—æ³• éœ€è¦è®²å’Œç†è§£çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œè¯´å®è¯ï¼Œç¬”ä¸»åˆ°ç°åœ¨ä¸å¤ªæ¸…æ¥šè¿™ä¿©å…„å¼Ÿçš„å…·ä½“åŸç†å’Œå®ç°è¿‡ç¨‹ã€‚æ¨èé˜…è¯»ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p><ul><li><p>å›¾è§£ Paxos ä¸€è‡´æ€§åè®®:</p><p>  <a href="http://blog.xiaohansong.com/2016/09/30/Paxos/" target="_blank" rel="noopener">http://blog.xiaohansong.com/2016/09/30/Paxos/</a></p></li><li><p>Zookeeper ZAB åè®®åˆ†æ:</p><p>  <a href="http://blog.xiaohansong.com/2016/08/25/zab/" target="_blank" rel="noopener">http://blog.xiaohansong.com/2016/08/25/zab/</a></p></li></ul><p>å…³äºå¦‚ä½•ä½¿ç”¨ zookeeper å®ç°åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š</p><p>Zookeeper ZAB åè®®åˆ†æ:</p><p><a href="https://blog.csdn.net/qiangcuo6087/article/details/79067136" target="_blank" rel="noopener">https://blog.csdn.net/qiangcuo6087/article/details/79067136</a></p><h2 id="å…­-æ€»ç»“"><a href="#å…­-æ€»ç»“" class="headerlink" title="å…­ æ€»ç»“"></a>å…­ æ€»ç»“</h2><p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œæƒ³å¿…å¤§å®¶å·²ä» ï¼š</p><ul><li>â‘ ZooKeeperçš„ç”±æ¥ã€‚ </li><li>â‘¡ZooKeeper åˆ°åº•æ˜¯ä»€ä¹ˆ ã€‚</li><li>â‘¢ ZooKeeper çš„ä¸€äº›é‡è¦æ¦‚å¿µï¼ˆä¼šè¯ï¼ˆSessionï¼‰ã€ Znodeã€ç‰ˆæœ¬ã€Watcherã€ACLï¼‰</li><li>â‘£ZooKeeper çš„ç‰¹ç‚¹ã€‚</li><li>â‘¤ZooKeeper çš„è®¾è®¡ç›®æ ‡ã€‚</li><li>â‘¥ ZooKeeper é›†ç¾¤è§’è‰²ä»‹ç» ï¼ˆLeaderã€Follower å’Œ Observer ä¸‰ç§è§’è‰²ï¼‰</li><li>â‘¦ZooKeeper &ZAB åè®®&Paxosç®—æ³•ã€‚ è¿™ä¸ƒç‚¹äº†è§£äº† ZooKeeper ã€‚</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>ã€Šä»Paxosåˆ°Zookeeper ã€‹</p><p><a href="https://cwiki.apache.org/confluence/display/ZOOKEEPER/ProjectDescription" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/ZOOKEEPER/ProjectDescription</a></p><p><a href="https://cwiki.apache.org/confluence/display/ZOOKEEPER/Index" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/ZOOKEEPER/Index</a></p><p><a href="https://www.cnblogs.com/raphael5200/p/5285583.html" target="_blank" rel="noopener">https://www.cnblogs.com/raphael5200/p/5285583.html</a></p><p><a href="https://zhuanlan.zhihu.com/p/30024403" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/30024403</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å¤šçº¿ç¨‹åŸºç¡€</title>
      <link href="/2018/09/11/%E7%AE%80%E5%8D%95%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
      <url>/2018/09/11/%E7%AE%80%E5%8D%95%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="ç®€å•å¤šçº¿ç¨‹åŸºç¡€"><a href="#ç®€å•å¤šçº¿ç¨‹åŸºç¡€" class="headerlink" title="ç®€å•å¤šçº¿ç¨‹åŸºç¡€"></a>ç®€å•å¤šçº¿ç¨‹åŸºç¡€</h1><p>ä¸»è¦å†…å®¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç®€è¿°çº¿ç¨‹ï¼Œç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€ï¼Ÿè¿™äº›çŠ¶æ€æ˜¯å¦‚ä½•å®šä¹‰çš„?</span><br><span class="line"></span><br><span class="line">ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿ</span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Ÿ</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨å¤šçº¿ç¨‹å¸¸è§çš„ä¸‰ç§æ–¹å¼</span><br><span class="line"></span><br><span class="line">çº¿ç¨‹çš„ä¼˜å…ˆçº§</span><br><span class="line"></span><br><span class="line">Javaå¤šçº¿ç¨‹åˆ†ç±»</span><br><span class="line"></span><br><span class="line">sleep()æ–¹æ³•å’Œwait()æ–¹æ³•ç®€å•å¯¹æ¯”</span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨start()æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun()æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨run()æ–¹æ³•ï¼Ÿ</span><br></pre></td></tr></tbody></table></figure></div><h2 id="1-ç®€è¿°çº¿ç¨‹ï¼Œç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-ç®€è¿°çº¿ç¨‹ï¼Œç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. ç®€è¿°çº¿ç¨‹ï¼Œç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. ç®€è¿°çº¿ç¨‹ï¼Œç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>çº¿ç¨‹</strong>ä¸è¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸è¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨äº§ç”Ÿä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½œåˆ‡æ¢å·¥ä½œæ—¶ï¼Œè´Ÿæ‹…è¦æ¯”è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚</p><p><strong>ç¨‹åº</strong>æ˜¯å«æœ‰æŒ‡ä»¤å’Œæ•°æ®çš„æ–‡ä»¶ï¼Œè¢«å­˜å‚¨åœ¨ç£ç›˜æˆ–å…¶ä»–çš„æ•°æ®å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ç¨‹åºæ˜¯é™æ€çš„ä»£ç ã€‚</p><p><strong>è¿›ç¨‹</strong>æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»åˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œä¸­çš„ç¨‹åºï¼Œå®ƒåœ¨è®¡ç®—æœºä¸­ä¸€ä¸ªæŒ‡ä»¤æ¥ç€ä¸€ä¸ªæŒ‡ä»¤åœ°æ‰§è¡Œç€ï¼ŒåŒæ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹è¿˜å æœ‰æŸäº›ç³»ç»Ÿèµ„æºå¦‚CPUæ—¶é—´ï¼Œå†…å­˜ç©ºé—´ï¼Œæ–‡ä»¶ï¼Œæ–‡ä»¶ï¼Œè¾“å…¥è¾“å‡ºè®¾å¤‡çš„ä½¿ç”¨æƒç­‰ç­‰ã€‚æ¢å¥è¯è¯´ï¼Œå½“ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†ä¼šè¢«æ“ä½œç³»ç»Ÿè½½å…¥å†…å­˜ä¸­ã€‚</p><p><strong>çº¿ç¨‹</strong> æ˜¯ <strong>è¿›ç¨‹</strong> åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚ä»å¦ä¸€è§’åº¦æ¥è¯´ï¼Œè¿›ç¨‹å±äºæ“ä½œç³»ç»Ÿçš„èŒƒç•´ï¼Œä¸»è¦æ˜¯åŒä¸€æ®µæ—¶é—´å†…ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºï¼Œè€Œçº¿ç¨‹åˆ™æ˜¯åœ¨åŒä¸€ç¨‹åºå†…å‡ ä¹åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºæ®µã€‚</p><p><strong>çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢è¦å¿«å¾ˆå¤š</strong></p><p>è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œæ¶‰åŠåˆ°å½“å‰è¿›ç¨‹çš„CPUç¯å¢ƒçš„ä¿å­˜å’Œæ–°è¢«è°ƒåº¦è¿è¡Œè¿›ç¨‹çš„CPUç¯å¢ƒçš„è®¾ç½®ã€‚</p><p>çº¿ç¨‹åˆ‡æ¢ä»…éœ€è¦ä¿å­˜å’Œè®¾ç½®å°‘é‡çš„å¯„å­˜å™¨å†…å®¹ï¼Œä¸æ¶‰åŠå­˜å‚¨ç®¡ç†æ–¹é¢çš„æ“ä½œã€‚</p><h2 id="2-çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€ï¼Ÿè¿™äº›çŠ¶æ€æ˜¯å¦‚ä½•å®šä¹‰çš„"><a href="#2-çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€ï¼Ÿè¿™äº›çŠ¶æ€æ˜¯å¦‚ä½•å®šä¹‰çš„" class="headerlink" title="2. çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€ï¼Ÿè¿™äº›çŠ¶æ€æ˜¯å¦‚ä½•å®šä¹‰çš„?"></a>2. çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€ï¼Ÿè¿™äº›çŠ¶æ€æ˜¯å¦‚ä½•å®šä¹‰çš„?</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æ–°å»º(new)ï¼šæ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">å¯è¿è¡Œ(runnable)ï¼šçº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹(æ¯”å¦‚mainçº¿ç¨‹ï¼‰è°ƒç”¨äº†è¯¥å¯¹è±¡çš„start()æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œç­‰å¾…è¢«çº¿ç¨‹è°ƒåº¦é€‰ä¸­ï¼Œè· å–cpuçš„ä½¿ç”¨æƒã€‚</span><br><span class="line"></span><br><span class="line">è¿è¡Œ(running)ï¼šå¯è¿è¡ŒçŠ¶æ€(runnable)çš„çº¿ç¨‹è·å¾—äº†cpuæ—¶é—´ç‰‡ï¼ˆtimesliceï¼‰ï¼Œæ‰§è¡Œç¨‹åºä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">é˜»å¡(block)ï¼šé˜»å¡çŠ¶æ€æ˜¯æŒ‡çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒäº†cpuä½¿ç”¨æƒï¼Œä¹Ÿå³è®©å‡ºäº†cpu timesliceï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å¯è¿è¡Œ(runnable)çŠ¶æ€ï¼Œæ‰æœ‰ æœºä¼šå†æ¬¡è·å¾—cpu timesliceè½¬åˆ°è¿è¡Œ(running)çŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š</span><br><span class="line"></span><br><span class="line">    (ä¸€). ç­‰å¾…é˜»å¡ï¼šè¿è¡Œ(running)çš„çº¿ç¨‹æ‰§è¡Œo.wait()æ–¹æ³•ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾ å…¥ç­‰å¾…é˜Ÿåˆ—(waitting queue)ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">    (äºŒ). åŒæ­¥é˜»å¡ï¼šè¿è¡Œ(running)çš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡çš„åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥ é” è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥é”æ± (lock pool)ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">    (ä¸‰). å…¶ä»–é˜»å¡: è¿è¡Œ(running)çš„çº¿ç¨‹æ‰§è¡ŒThread.sleep(long ms)æˆ–t.join()æ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºäº†I/Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹ç½®ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“sleep()çŠ¶æ€è¶…æ—¶join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I/Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å¯è¿è¡Œ(runnable)çŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line">æ­»äº¡(dead)ï¼šçº¿ç¨‹run()ã€main()æ–¹æ³•æ‰§è¡Œç»“æŸï¼Œæˆ–è€…å› å¼‚å¸¸é€€å‡ºäº†run()æ–¹æ³•ï¼Œåˆ™è¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚æ­»äº¡çš„çº¿ç¨‹ä¸å¯å†æ¬¡å¤ç”Ÿã€‚</span><br></pre></td></tr></tbody></table></figure></div><p>å¤‡æ³¨ï¼š å¯ä»¥ç”¨æ—©èµ·ååœ°é“æ¥æ¯”å–»è¿™ä¸ªè¿‡ç¨‹ï¼ˆä¸‹é¢å‚è€ƒè‡ªç‰›å®¢ç½‘æŸä½åŒå­¦çš„å›ç­”ï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">è¿˜æ²¡èµ·åºŠï¼šsleeping</span><br><span class="line"></span><br><span class="line">èµ·åºŠæ”¶æ‹¾å¥½äº†ï¼Œéšæ—¶å¯ä»¥ååœ°é“å‡ºå‘ï¼šRunnable</span><br><span class="line"></span><br><span class="line">ç­‰åœ°é“æ¥ï¼šWaiting</span><br><span class="line"></span><br><span class="line">åœ°é“æ¥äº†ï¼Œä½†è¦æ’é˜Ÿä¸Šåœ°é“ï¼šI/Oé˜»å¡</span><br><span class="line"></span><br><span class="line">ä¸Šäº†åœ°é“ï¼Œå‘ç°æš‚æ—¶æ²¡åº§ä½ï¼šsynchronizedé˜»å¡</span><br><span class="line"></span><br><span class="line">åœ°é“ä¸Šæ‰¾åˆ°åº§ä½ï¼šRunning</span><br><span class="line"></span><br><span class="line">åˆ°è¾¾ç›®çš„åœ°ï¼šDead</span><br></pre></td></tr></tbody></table></figure></div><h2 id="3-ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿ"><a href="#3-ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="3. ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿ"></a>3. ä½•ä¸ºå¤šçº¿ç¨‹ï¼Ÿ</h2><p>å¤šçº¿ç¨‹å°±æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæˆ–äº¤æ›¿è¿è¡Œã€‚å•æ ¸CPUçš„è¯æ˜¯é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯äº¤æ›¿è¿è¡Œã€‚å¤šæ ¸CPUçš„è¯ï¼Œå› ä¸ºæ¯ä¸ªCPUæœ‰è‡ªå·±çš„è¿ç®—å™¨ï¼Œæ‰€ä»¥åœ¨å¤šä¸ªCPUä¸­å¯ä»¥åŒæ—¶è¿è¡Œã€‚</p><h2 id="4-ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Ÿ"></a>4. ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Ÿ</h2><ul><li><p>ä½¿ç”¨çº¿ç¨‹å¯ä»¥æŠŠå æ®é•¿æ—¶é—´çš„ç¨‹åºä¸­çš„ä»»åŠ¡æ”¾åˆ°åå°å»å¤„ç†ã€‚</p></li><li><p>ç”¨æˆ·ç•Œé¢å¯ä»¥æ›´åŠ å¸å¼•äººï¼Œè¿™æ ·æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®å»è§¦å‘æŸäº›äº‹ä»¶çš„å¤„ç†ï¼Œå¯ä»¥å¼¹å‡ºä¸€ä¸ªè¿›åº¦æ¡æ¥æ˜¾ç¤ºå¤„ç†çš„è¿›åº¦ã€‚</p></li><li><p>ç¨‹åºçš„è¿è¡Œé€Ÿåº¦å¯èƒ½åŠ å¿«ã€‚</p></li></ul><h1 id="5-ä½¿ç”¨å¤šçº¿ç¨‹å¸¸è§çš„ä¸‰ç§æ–¹å¼"><a href="#5-ä½¿ç”¨å¤šçº¿ç¨‹å¸¸è§çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="5 ä½¿ç”¨å¤šçº¿ç¨‹å¸¸è§çš„ä¸‰ç§æ–¹å¼"></a>5 ä½¿ç”¨å¤šçº¿ç¨‹å¸¸è§çš„ä¸‰ç§æ–¹å¼</h1><h3 id="â‘ ç»§æ‰¿Threadç±»"><a href="#â‘ ç»§æ‰¿Threadç±»" class="headerlink" title="â‘ ç»§æ‰¿Threadç±»"></a>â‘ ç»§æ‰¿Threadç±»</h3><p>MyThread.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class MyThread extends Thread {</span><br><span class="line">    @Override</span><br><span class="line">    public void run() {</span><br><span class="line">        super.run();</span><br><span class="line"></span><br><span class="line">        System.out.println("MyThread");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>Run.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Run {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        MyThread mythread = new MyThread();</span><br><span class="line"></span><br><span class="line">        mythread.start();</span><br><span class="line"></span><br><span class="line">        System.out.println("è¿è¡Œç»“æŸ");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyThread</span><br><span class="line">è¿è¡Œç»“æŸ</span><br></pre></td></tr></tbody></table></figure></div><p>ä»ä¸Šé¢çš„è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼šçº¿ç¨‹æ˜¯ä¸€ä¸ªå­ä»»åŠ¡ï¼ŒCPUä»¥ä¸ç¡®å®šçš„æ–¹å¼ï¼Œæˆ–è€…è¯´æ˜¯ä»¥éšæœºçš„æ—¶é—´æ¥è°ƒç”¨çº¿ç¨‹ä¸­çš„runæ–¹æ³•ã€‚</p><h3 id="â‘¡å®ç°Runnableæ¥å£"><a href="#â‘¡å®ç°Runnableæ¥å£" class="headerlink" title="â‘¡å®ç°Runnableæ¥å£"></a>â‘¡å®ç°Runnableæ¥å£</h3><p>æ¨èå®ç°Runnableæ¥å£æ–¹å¼å¼€å‘å¤šçº¿ç¨‹ï¼Œå› ä¸ºJavaå•ç»§æ‰¿ä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class MyRunnable implements Runnable {</span><br><span class="line">    @Override</span><br><span class="line">    public void run() {</span><br><span class="line">        System.out.println("MyRunnable");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>Run.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Run {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        Runnable runnable = new MyRunnable();</span><br><span class="line"></span><br><span class="line">        Thread thread = new Thread(runnable);</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        System.out.println("è¿è¡Œç»“æŸï¼");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyThread</span><br><span class="line">è¿è¡Œç»“æŸ</span><br></pre></td></tr></tbody></table></figure></div><h3 id="â‘¢ä½¿ç”¨çº¿ç¨‹æ± "><a href="#â‘¢ä½¿ç”¨çº¿ç¨‹æ± " class="headerlink" title="â‘¢ä½¿ç”¨çº¿ç¨‹æ± "></a>â‘¢ä½¿ç”¨çº¿ç¨‹æ± </h3><p>åœ¨<strong>ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹</strong>â€œå¹¶å‘å¤„ç†â€è¿™ä¸€ç« èŠ‚ï¼Œæ˜ç¡®æŒ‡å‡ºçº¿ç¨‹èµ„æºå¿…é¡»é€šè¿‡çº¿ç¨‹æ± æä¾›ï¼Œä¸å…è®¸åœ¨åº”ç”¨ä¸­è‡ªè¡Œæ˜¾ç¤ºåˆ›å»ºçº¿ç¨‹ã€‚</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„æ˜¯å‡å°‘åœ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸Šæ‰€æ¶ˆè€—çš„æ—¶é—´ä»¥åŠç³»ç»Ÿèµ„æºå¼€é”€ï¼Œè§£å†³èµ„æºä¸è¶³çš„é—®é¢˜ã€‚å¦‚æœä¸ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆç³»ç»Ÿåˆ›å»ºå¤§é‡åŒç±»çº¿ç¨‹è€Œå¯¼è‡´æ¶ˆè€—å®Œå†…å­˜æˆ–è€…â€œè¿‡åº¦åˆ‡æ¢â€çš„é—®é¢˜ã€‚</p></blockquote><p>å¦å¤–ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­å¼ºåˆ¶çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©</p><blockquote><p>Executors è¿”å›çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š</p></blockquote><blockquote><p>FixedThreadPool å’Œ SingleThreadExecutor ï¼š å…è®¸è¯·æ±‚çš„é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUE,å¯èƒ½å †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´OOMã€‚</p></blockquote><blockquote><p>CachedThreadPool å’Œ ScheduledThreadPool ï¼š å…è®¸åˆ›å»ºçš„çº¿ç¨‹æ•°é‡ä¸º Integer.MAX_VALUE ï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´OOMã€‚</p></blockquote><h2 id="6-çº¿ç¨‹çš„ä¼˜å…ˆçº§"><a href="#6-çº¿ç¨‹çš„ä¼˜å…ˆçº§" class="headerlink" title="6 çº¿ç¨‹çš„ä¼˜å…ˆçº§"></a>6 çº¿ç¨‹çš„ä¼˜å…ˆçº§</h2><p>æ¯ä¸ªçº¿ç¨‹éƒ½å…·æœ‰å„è‡ªçš„ä¼˜å…ˆçº§ï¼Œ<strong>çº¿ç¨‹çš„ä¼˜å…ˆçº§å¯ä»¥åœ¨ç¨‹åºä¸­è¡¨æ˜è¯¥çº¿ç¨‹çš„é‡è¦æ€§ï¼Œå¦‚æœæœ‰å¾ˆå¤šçº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€ï¼Œç³»ç»Ÿä¼šæ ¹æ®ä¼˜å…ˆçº§æ¥å†³å®šé¦–å…ˆä½¿å“ªä¸ªçº¿ç¨‹è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</strong>ä½†è¿™ä¸ªå¹¶ä¸æ„å‘³ç€ä½<br>ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—ä¸åˆ°è¿è¡Œï¼Œè€Œåªæ˜¯å®ƒè¿è¡Œçš„å‡ ç‡æ¯”è¾ƒå°ï¼Œå¦‚åƒåœ¾å›æ”¶æœºåˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§å°±æ¯”è¾ƒä½ã€‚æ‰€ä»¥å¾ˆå¤šåƒåœ¾å¾—ä¸åˆ°åŠæ—¶çš„å›æ”¶å¤„ç†ã€‚</p><p><strong>çº¿ç¨‹ä¼˜å…ˆçº§å…·æœ‰ç»§æ‰¿ç‰¹æ€§ã€‚</strong> æ¯”å¦‚Açº¿ç¨‹å¯åŠ¨Bçº¿ç¨‹ï¼Œåˆ™Bçº¿ç¨‹çš„ä¼˜å…ˆçº§å’ŒAæ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>çº¿ç¨‹ä¼˜å…ˆçº§å…·æœ‰éšæœºæ€§ã€‚</strong> ä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹ä¼˜å…ˆçº§é«˜çš„ä¸ä¸€å®šæ¯ä¸€æ¬¡éƒ½å…ˆæ‰§è¡Œå®Œã€‚</p><p>Threadç±»ä¸­åŒ…å«çš„æˆå‘˜å˜é‡ä»£è¡¨äº†çº¿ç¨‹çš„æŸäº›ä¼˜å…ˆçº§ã€‚å¦‚Thread.MINPRIORITYï¼ˆå¸¸æ•°1ï¼‰ï¼ŒThread.NORMPRIORITYï¼ˆå¸¸æ•°5ï¼‰,Thread.MAXPRIORITYï¼ˆå¸¸æ•°10ï¼‰ã€‚å…¶ä¸­æ¯ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§éƒ½åœ¨Thread.MINPRIORITYï¼ˆå¸¸æ•°1ï¼‰ åˆ°Thread.MAXPRIORITYï¼ˆå¸¸æ•°10ï¼‰ ä¹‹é—´ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä¼˜å…ˆçº§éƒ½æ˜¯Thread.NORMPRIORITYï¼ˆå¸¸æ•°5ï¼‰ã€‚</p><p>å­¦è¿‡æ“ä½œç³»ç»Ÿè¿™é—¨è¯¾ç¨‹çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§æˆ–å¤šæˆ–å°‘å€Ÿé‰´äº†æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹çš„ç®¡ç†ã€‚</p><h2 id="7-Javaå¤šçº¿ç¨‹åˆ†ç±»"><a href="#7-Javaå¤šçº¿ç¨‹åˆ†ç±»" class="headerlink" title="7 Javaå¤šçº¿ç¨‹åˆ†ç±»"></a>7 Javaå¤šçº¿ç¨‹åˆ†ç±»</h2><h3 id="ç”¨æˆ·çº¿ç¨‹"><a href="#ç”¨æˆ·çº¿ç¨‹" class="headerlink" title="ç”¨æˆ·çº¿ç¨‹"></a>ç”¨æˆ·çº¿ç¨‹</h3><p>è¿è¡Œåœ¨å‰å°ï¼Œæ‰§è¡Œå…·ä½“çš„ä»»åŠ¡ï¼Œå¦‚ç¨‹åºçš„ä¸»çº¿ç¨‹ã€è¿æ¥ç½‘ç»œçš„å­çº¿ç¨‹ç­‰éƒ½æ˜¯ç”¨æˆ·çº¿ç¨‹</p><h3 id="å®ˆæŠ¤çº¿ç¨‹"><a href="#å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹"></a>å®ˆæŠ¤çº¿ç¨‹</h3><p>è¿è¡Œåœ¨åå°ï¼Œä¸ºå…¶ä»–å‰å°çº¿ç¨‹æœåŠ¡.ä¹Ÿå¯ä»¥è¯´å®ˆæŠ¤çº¿ç¨‹æ˜¯JVMä¸­éå®ˆæŠ¤çº¿ç¨‹çš„ â€œä½£äººâ€ã€‚</p><ul><li><p>ç‰¹ç‚¹ï¼š ä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸè¿è¡Œï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéšJVMä¸€èµ·ç»“æŸå·¥ä½œ</p></li><li><p>åº”ç”¨ï¼š æ•°æ®åº“è¿æ¥æ± ä¸­çš„æ£€æµ‹çº¿ç¨‹ï¼ŒJVMè™šæ‹Ÿæœºå¯åŠ¨åçš„æ£€æµ‹çº¿ç¨‹</p></li><li><p>æœ€å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼š åƒåœ¾å›æ”¶çº¿ç¨‹</p></li></ul><h3 id="å¦‚ä½•è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ"><a href="#å¦‚ä½•è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ"></a>å¦‚ä½•è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ</h3><p>å¯ä»¥é€šè¿‡è°ƒç”¨ Thead ç±»çš„ setDaemon(true) æ–¹æ³•è®¾ç½®å½“å‰çš„çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹>ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>1.setDaemon(true)å¿…é¡»åœ¨startï¼ˆï¼‰æ–¹æ³•å‰æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalThreadStateExceptioå¼‚å¸¸</p></li><li><p>2.åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯å®ˆæŠ¤çº¿ç¨‹</p></li><li><p>3.ä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘</p></li></ul><h3 id="8-sleep-æ–¹æ³•å’Œwait-æ–¹æ³•ç®€å•å¯¹æ¯”"><a href="#8-sleep-æ–¹æ³•å’Œwait-æ–¹æ³•ç®€å•å¯¹æ¯”" class="headerlink" title="8 sleep()æ–¹æ³•å’Œwait()æ–¹æ³•ç®€å•å¯¹æ¯”"></a>8 sleep()æ–¹æ³•å’Œwait()æ–¹æ³•ç®€å•å¯¹æ¯”</h3><ul><li><p>ä¸¤è€…æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼šsleepæ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œwaitæ–¹æ³•é‡Šæ”¾äº†é” ã€‚</p></li><li><p>ä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œã€‚</p></li><li><p>Waité€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleepé€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚</p></li><li><p>wait()æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„notify()æˆ–è€…nofifyAl()æ–¹æ³•ã€‚sleep()æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚</p></li></ul><h3 id="9-ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨run-æ–¹æ³•ï¼Ÿ"><a href="#9-ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨run-æ–¹æ³•ï¼Ÿ" class="headerlink" title="9 ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨start()æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun()æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨run()æ–¹æ³•ï¼Ÿ"></a>9 ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨start()æ–¹æ³•æ—¶ä¼šæ‰§è¡Œrun()æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨run()æ–¹æ³•ï¼Ÿ</h3><p>è¿™æ˜¯å¦ä¸€ä¸ªéå¸¸ç»å…¸çš„javaå¤šçº¿ç¨‹é¢è¯•é—®é¢˜ï¼Œè€Œä¸”åœ¨é¢è¯•ä¸­ä¼šç»å¸¸è¢«é—®åˆ°ã€‚å¾ˆç®€å•ï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½ä¼šç­”ä¸ä¸Šæ¥ï¼</p><p>newä¸€ä¸ªThreadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€;è°ƒç”¨start()æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚<br>start()ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œrun()æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚ è€Œç›´æ¥æ‰§è¡Œrun()æ–¹æ³•ï¼Œä¼šæŠŠrunæ–¹æ³•å½“æˆä¸€ä¸ªmiançº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚</p><p><strong>æ€»ç»“ï¼š è°ƒç”¨startæ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œè€Œrunæ–¹æ³•åªæ˜¯threadçš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œæ‰§è¡Œã€‚</strong></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å¤šçº¿ç¨‹åŸºç¡€</title>
      <link href="/2018/09/11/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%90%88%E9%9B%86/"/>
      <url>/2018/09/11/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%90%88%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ–°æ‰‹è§å®ƒçš„æ„Ÿè§‰å°±æ˜¯â€œè¿™éƒ½ä»€ä¹ˆç©æ„ï¼Œä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œå®Œå…¨ä¸çŸ¥æ‰€äº‘â€ï¼Œä½†å­¦ä¼šå®ƒå°±ä¼šä½“éªŒé‚£ç§ä¸€è¡Œä»£ç æŠµæ•°åä¸Šç™¾è¡Œï¼Œæ•ˆç‡é£èµ·çš„æ„Ÿè§‰ï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ã€‚ä»Šå¤©å°è‚†å…ˆæŠŠæˆ‘è‡ªå·±æ”¶è—çš„ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼å†™æ³•åˆ†äº«ç»™å¤§å®¶ï¼Œå½“ç„¶æƒ³æ·±å…¥å­¦ä¹ å¦‚ä½•å†™æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥å»w3cçœ‹çœ‹æ•™ç¨‹ã€‚</p><h2 id="å¹²è´§"><a href="#å¹²è´§" class="headerlink" title="å¹²è´§"></a>å¹²è´§</h2><h3 id="ä¸€-æ ¡éªŒæ•°å­—"><a href="#ä¸€-æ ¡éªŒæ•°å­—" class="headerlink" title="ä¸€.æ ¡éªŒæ•°å­—"></a>ä¸€.æ ¡éªŒæ•°å­—</h3><ul><li>æ•°å­—ï¼š^[0-9]*$</li><li>nä½çš„æ•°å­—ï¼š^\d{n}$</li><li>è‡³å°‘nä½çš„æ•°å­—ï¼š^\d{n,}$</li><li>m-nä½çš„æ•°å­—ï¼š^\d{m,n}$</li><li>é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$</li><li>éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]{1,2})?$</li><li>å¸¦1-2ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(-)?\d+(.\d{1,2})?$</li><li>æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(-|+)?\d+(.\d+)?$</li><li>æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{2})?$</li><li>æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{1,3})?$</li><li>éé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\d*$</li><li>éé›¶çš„è´Ÿæ•´æ•°ï¼š^-[1-9][]0-9â€*$</li><li>éè´Ÿæ•´æ•°ï¼š^\d+$</li><li>éæ­£æ•´æ•°ï¼š^-[1-9]\d*|0$</li><li>éè´Ÿæµ®ç‚¹æ•°ï¼š^\d+(.\d+)?$</li><li>éæ­£æµ®ç‚¹æ•°ï¼š^((-\d+(.\d+)?)|(0+(.0+)?))$</li><li>æ­£æµ®ç‚¹æ•°ï¼š^[1-9]d.d|0.d[1-9]d$</li><li>è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>)$</li><li>æµ®ç‚¹æ•°ï¼š^(-?\d+)(.\d+)?$</li></ul><h3 id="äºŒ-æ•ˆéªŒå­—ç¬¦"><a href="#äºŒ-æ•ˆéªŒå­—ç¬¦" class="headerlink" title="äºŒ.æ•ˆéªŒå­—ç¬¦"></a>äºŒ.æ•ˆéªŒå­—ç¬¦</h3><ul><li>æ±‰å­—ï¼š^[\u4e00-\u9fa5]{0,}$</li><li>è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$</li><li>é•¿åº¦ä¸º3-20çš„æ‰€æœ‰å­—ç¬¦ï¼š^.{3,20}$</li><li>ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$</li><li>ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$</li><li>ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$</li><li>ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$</li><li>ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\w+$</li><li>ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\u4E00-\u9FA5A-Za-z0-9_]+$</li><li>ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\u4E00-\u9FA5A-Za-z0-9]+$</li><li>å¯ä»¥è¾“å…¥å«æœ‰^%&â€™,;=?$"ç­‰å­—ç¬¦ï¼š[^%&â€™,;=?$\x22]+</li><li>ç¦æ­¢è¾“å…¥å«æœ‰<del>çš„å­—ç¬¦ï¼š[^</del>\x22]+</li></ul><h3 id="ä¸‰-ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"><a href="#ä¸‰-ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼" class="headerlink" title="ä¸‰.ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"></a>ä¸‰.ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼</h3><ul><li>Emailåœ°å€ï¼š^\w+([-+.]\w+)<em>@\w+([-.]\w+)*.\w+([-.]\w+)</em>$</li><li>æ‰‹æœºå·ç ï¼š^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$(å›½å†… 13ã€15ã€18å¼€å¤´çš„æ‰‹æœºå·æ­£åˆ™è¡¨è¾¾å¼,å¯æ ¹æ®ç›®å‰å›½å†…æ”¶é›†å·æ‰©å±•å‰ä¸¤ä½å¼€å¤´å·ç ï¼‰</li><li>ç”µè¯å·ç (â€œXXX-XXXXXXXâ€ã€â€XXXX-XXXXXXXXâ€ã€â€XXX-XXXXXXXâ€ã€â€XXX-XXXXXXXXâ€ã€â€XXXXXXXâ€å’Œâ€XXXXXXXX)ï¼š^((\d{3,4}-)|\d{3.4}-)?\d{7,8}$</li><li>å›½å†…ç”µè¯å·ç (0511-4405222ã€021-87888822)ï¼š\d{3}-\d{8}|\d{4}-\d{7}</li><li>èº«ä»½è¯å·(15ä½ï¼‰ï¼š^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$</li><li>èº«ä»½è¯å·ç (18ä½)ï¼š^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$</li><li>å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]{4,15}$</li><li>å¯†ç (ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿)ï¼š^[a-zA-Z]\w{5,17}$</li><li>å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-16ä¹‹é—´)ï¼š^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,16}$</li><li>æ—¥æœŸæ ¼å¼ï¼š^\d{4}-\d{1,2}-\d{1,2}</li><li>ä¸€å¹´çš„12ä¸ªæœˆ(01ï½09å’Œ1ï½12)ï¼š^(0?[1-9]|1[0-2])$</li><li>ä¸€ä¸ªæœˆçš„31å¤©(01ï½09å’Œ1ï½31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$</li><li>xmlæ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</li><li>ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\u4e00-\u9fa5]</li><li>åŒå­—èŠ‚å­—ç¬¦ï¼š[^\x00-\xff] (åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1))</li><li>ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\s*\r (å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ)</li><li>é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\s<em>|\s</em>$æˆ–(^\s<em>)|(\s</em>$) (å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼)</li><li>è…¾è®¯QQå·ï¼š[1-9][0-9]{4,11} (è…¾è®¯QQå·ä»10000å¼€å§‹)</li><li>ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\d{5}(?!\d) (ä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—)</li><li>IP-v4åœ°å€ï¼š\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b (æå–IPåœ°å€æ—¶æœ‰ç”¨)</li><li>æ ¡éªŒIP-v6åœ°å€ï¼š(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))</li><li>å­ç½‘æ©ç ï¼š((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</li><li>æ ¡éªŒæ—¥æœŸ:^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$(â€œyyyy-mm-ddâ€œ æ ¼å¼çš„æ—¥æœŸæ ¡éªŒï¼Œå·²è€ƒè™‘å¹³é—°å¹´ã€‚)</li><li>æŠ½å–æ³¨é‡Šï¼š<!--(.*?)--></li><li>æŸ¥æ‰¾CSSå±æ€§:^\s<em>[a-zA-Z\-]+\s</em>[:]{1}\s[a-zA-Z0-9\s.#]+[;]{1}</li><li>æå–é¡µé¢è¶…é“¾æ¥:(<a\s<em>(?!.*\brel=)[^>])(href=â€https?:\/\/)((?!(?:(?:www\.)?â€™.implode(â€˜|(?:www\.)?â€™, $follow_list).â€™))[^â€]+)â€((?!.<em>\brel=)[^>]</em>)(?:[^>]*)></a\s<em></li><li>æå–ç½‘é¡µå›¾ç‰‡:\< <em>[img][^\\>]</em>[src] <em>= *[\â€œ\â€˜]{0,1}([^\â€œ\â€˜\ >]</em>)</li><li>æå–ç½‘é¡µé¢œè‰²ä»£ç :^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$</li><li>æ–‡ä»¶æ‰©å±•åæ•ˆéªŒ:^([a-zA-Z]\:|\\)\\([^\\]+\\)<em>[^\/:</em>?â€<>|]+\.txt(l)?$</li><li>åˆ¤æ–­IEç‰ˆæœ¬ï¼š^.<em>MSIE <a href="?:\.[0-9]+">5-8</a>?(?!.*Trident\/[5-9]\.0).</em>$</li></ul><p>æ–‡ç« å‡ºå¤„ï¼š<a href="https://segmentfault.com/a/1190000017834831" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017834831</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhystrixä¸ºspring-boot+dubbo+zookeeperæä¾›ç†”æ–­æœºåˆ¶</title>
      <link href="/2018/09/08/%E5%9F%BA%E4%BA%8Ehystrix%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E5%BC%8F%E4%B8%BAspring-boot+dubbo+zookeeper%E6%8F%90%E4%BE%9B%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/"/>
      <url>/2018/09/08/%E5%9F%BA%E4%BA%8Ehystrix%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E5%BC%8F%E4%B8%BAspring-boot+dubbo+zookeeper%E6%8F%90%E4%BE%9B%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-dubbo-zookeeper-hystrix-annotation"><a href="#spring-boot-dubbo-zookeeper-hystrix-annotation" class="headerlink" title="spring-boot-dubbo-zookeeper-hystrix-annotation"></a>spring-boot-dubbo-zookeeper-hystrix-annotation</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä½¿ç”¨æ³¨è§£çš„æ–¹å¼ä½¿ç”¨hystrix</p><p>æˆ‘éœ€è¦å¼•å…¥å‡ ä¸ªå¿…è¦çš„jar</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><dependency></dependency></span><br><span class="line">            <groupid>com.netflix.hystrix</groupid></span><br><span class="line">            <artifactid>hystrix-core</artifactid></span><br><span class="line">            <version>1.5.12</version></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <dependency></dependency></span><br><span class="line">            <groupid>com.netflix.hystrix</groupid></span><br><span class="line">            <artifactid>hystrix-metrics-event-stream</artifactid></span><br><span class="line">            <version>1.5.12</version></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <dependency></dependency></span><br><span class="line">            <groupid>com.netflix.hystrix</groupid></span><br><span class="line">            <artifactid>hystrix-javanica</artifactid></span><br><span class="line">            <version>1.5.12</version></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <dependency></dependency></span><br><span class="line">            <groupid>javax</groupid></span><br><span class="line">            <artifactid>javaee-api</artifactid></span><br><span class="line">            <version>7.0</version></span><br><span class="line">        </span><br></pre></td></tr></tbody></table></figure></div><p>ç„¶åæ˜¯æ‹¦æˆªä¸­å¿ƒ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ‹¦æˆªä¸­å¿ƒ</span><br><span class="line"> * @author YI</span><br><span class="line"> * @date 2018-9-8 16:37:01</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class HystrixConfig {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç”¨æ¥æ‹¦æˆªå¤„ç†HystrixCommandæ³¨è§£</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @Bean</span><br><span class="line">    public HystrixCommandAspect hystrixAspect() {</span><br><span class="line">        return new HystrixCommandAspect();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç”¨æ¥åƒç›‘æ§ä¸­å¿ƒDashboardå‘é€streamä¿¡æ¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @Bean</span><br><span class="line">    public ServletRegistrationBean hystrixMetricsStreamServlet() {</span><br><span class="line">        ServletRegistrationBean registration = new ServletRegistrationBean(new HystrixMetricsStreamServlet());</span><br><span class="line">        registration.addUrlMappings("/hystrix.stream");</span><br><span class="line">        return registration;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æ­¤ç®€å•æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æä¾›ç†”æ–­é™çº§æœåŠ¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ¶ˆè´¹è€…</span><br><span class="line"> * @author YI</span><br><span class="line"> * @date 2018-8-20 17:05:30</span><br><span class="line"> */</span><br><span class="line">@RestController</span><br><span class="line">public class HelloController {</span><br><span class="line"></span><br><span class="line">    @Reference(</span><br><span class="line">            version = "${hello.service.version}",</span><br><span class="line">            application = "${dubbo.application.id}",</span><br><span class="line">            registry = "${dubbo.registry.id}"</span><br><span class="line">    )</span><br><span class="line">    private HelloService helloService;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‡ºé”™æ—¶å›è°ƒsayHelloFallback æ–¹æ³•</span><br><span class="line">     * @param name</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @GetMapping("hello/{name}")</span><br><span class="line">    @HystrixCommand(fallbackMethod = "sayHelloFallback",</span><br><span class="line">            commandProperties = {</span><br><span class="line">                    @HystrixProperty(name = "execution.isolation.strategy", value = "THREAD"),</span><br><span class="line">                    @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds", value = "1000"),</span><br><span class="line">                    @HystrixProperty(name = "circuitBreaker.enabled", value = "true"),</span><br><span class="line">                    @HystrixProperty(name = "circuitBreaker.requestVolumeThreshold", value = "2")},</span><br><span class="line">            threadPoolProperties = {</span><br><span class="line">                    @HystrixProperty(name = "coreSize", value = "5"),</span><br><span class="line">                    @HystrixProperty(name = "maximumSize", value = "5"),</span><br><span class="line">                    @HystrixProperty(name = "maxQueueSize", value = "10")</span><br><span class="line">            })</span><br><span class="line">    public String sayHello(@PathVariable String name){</span><br><span class="line">        return helloService.sayHello(name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‡ºé”™æ—¶å›è°ƒsayGoodbyeFallback æ–¹æ³•</span><br><span class="line">     * @param name</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @HystrixCommand(fallbackMethod = "sayGoodbyeFallback")</span><br><span class="line">    @GetMapping("goodbye/{name}")</span><br><span class="line">    public String sayGoodbye(@PathVariable String name){</span><br><span class="line">        return helloService.sayGoodbye(name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String sayHelloFallback(String name){</span><br><span class="line">        System.out.println("sayHelloå›è°ƒå‡½æ•°");</span><br><span class="line"></span><br><span class="line">        return "OK";</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String sayGoodbyeFallback(String name){</span><br><span class="line">        System.out.println("sayGoodbyeå›è°ƒå‡½æ•°");</span><br><span class="line"></span><br><span class="line">        return "OK";</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å…·ä½“å®ç°è¯·çœ‹æºç </p><h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><p><a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-dubbo-zookeeper-hystrix-annotation" target="_blank" rel="noopener">spring-boot-dubbo-zookeeper-hystrix-annotation</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Spring Boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhystrixä¸ºspring-boot+dubbo+zookeeperæä¾›ç†”æ–­æœºåˆ¶</title>
      <link href="/2018/09/06/%E5%9F%BA%E4%BA%8Ehystrix%E4%B8%BAspring-boot+dubbo+zookeeper%E6%8F%90%E4%BE%9B%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/"/>
      <url>/2018/09/06/%E5%9F%BA%E4%BA%8Ehystrix%E4%B8%BAspring-boot+dubbo+zookeeper%E6%8F%90%E4%BE%9B%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="spring-boot-dubbo-zookeeper-hystrix"><a href="#spring-boot-dubbo-zookeeper-hystrix" class="headerlink" title="spring-boot-dubbo-zookeeper-hystrix"></a>spring-boot-dubbo-zookeeper-hystrix</h1><p>å¼•å…¥<strong>spring-boot-dubbo-zookeeper-hystrix-base</strong>åä¼šé€šè¿‡Dubboçš„Activateæœºåˆ¶è‡ªåŠ¨æ¿€æ´»HystrixFilter,å¯¹dubbo:referenceè¿›è¡Œèµ„æºéš”ç¦»å’Œç†”æ–­ä¿æŠ¤ã€‚</p><h1 id="çº¿ç¨‹æ± éš”ç¦»"><a href="#çº¿ç¨‹æ± éš”ç¦»" class="headerlink" title="çº¿ç¨‹æ± éš”ç¦»"></a>çº¿ç¨‹æ± éš”ç¦»</h1><p>é»˜è®¤æŒ‰dubbo:referenceè¿›è¡Œçº¿ç¨‹æ± èµ„æºéš”ç¦»ï¼Œå¯ä»¥è®¤ä¸ºä¸€ä¸ªdubbo:referenceä¸ºä¸€ä¸ªé¢†åŸŸæœåŠ¡ï¼Œreferenceé‡Œçš„æ‰€æœ‰æ–¹æ³•åœ¨ä¸€ä¸ªçº¿ç¨‹æ± èµ„æºé‡Œè¿è¡Œï¼Œå¤šä¸ªreferenceä¹‹é—´çº¿ç¨‹æ± èµ„æºæ˜¯éš”ç¦»çš„ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å¯¹ä¸åŒçš„referenceè®¾ç½®ä¸åŒçš„çº¿ç¨‹æ± èµ„æºï¼Œå¹¶ä¸”å½“æŸä¸ªreferenceå‡ºç°é˜»å¡æ•…éšœæ—¶ä¸ä¼šå¯¼è‡´å®¹å™¨çº¿ç¨‹èµ„æºè¢«è€—å°½ï¼Œä»è€Œå½±å“å…¶ä»–æœåŠ¡ã€‚</p><p>é»˜è®¤çº¿ç¨‹æ± é…ç½®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><dubbo:parameter key="coreSize" value="10"></dubbo:parameter></span><br><span class="line"><dubbo:parameter key="maximumSize" value="20"></dubbo:parameter></span><br><span class="line"><dubbo:parameter key="keepAliveTimeMinutes" value="1"></dubbo:parameter></span><br></pre></td></tr></tbody></table></figure></div><table><thead><tr><th>å‚æ•°</th><th align="center">è¯´æ˜</th><th align="right">é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>coreSize</td><td align="center">æ ¸å¿ƒçº¿ç¨‹æ•°å¤§å°</td><td align="right">10</td></tr><tr><td>maximumSize</td><td align="center">ç©ºé—²çº¿ç¨‹æŒæœ‰æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</td><td align="right">20</td></tr><tr><td>keepAliveTimeMinutes</td><td align="center">æœ€å¤§çº¿ç¨‹æ•°å¤§å°</td><td align="right">1</td></tr></tbody></table><h1 id="ä¿¡å·é‡éš”ç¦»"><a href="#ä¿¡å·é‡éš”ç¦»" class="headerlink" title="ä¿¡å·é‡éš”ç¦»"></a>ä¿¡å·é‡éš”ç¦»</h1><p>å°†è‡ªå®šä¹‰å±æ€§ isolation ä¸ºè®¾ç½® SEMAPHORE è¿›è¡Œä¿¡å·é‡éš”ç¦»</p><p><code><dubbo:parameter key="isolation" value="SEMAPHORE"></dubbo:parameter></code> </p><p>isolationå±æ€§ï¼š</p><table><thead><tr><th>å±æ€§å€¼</th><th align="center">è¯´æ˜</th><th align="left">å¤‡æ³¨</th></tr></thead><tbody><tr><td>SEMAPHORE</td><td align="center">ä¿¡å·é‡éš”ç¦»</td><td align="left">é€‚ç”¨äºæœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼Œæˆ–è€…QPSéå¸¸é«˜çš„è°ƒç”¨</td></tr><tr><td>THREAD</td><td align="center">çº¿ç¨‹æ± éš”ç¦» -é»˜è®¤å€¼</td><td align="left"></td></tr></tbody></table><h3 id="æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é‡"><a href="#æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é‡" class="headerlink" title="æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é‡"></a>æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é‡</h3><p>è®¾ç½®å±æ€§ maxConcurrentRequests é»˜è®¤å€¼ä¸º 10</p><p><code><dubbo:parameter key="maxConcurrentRequests" value="10"></dubbo:parameter></code></p><h1 id="ç†”æ–­ä¿æŠ¤"><a href="#ç†”æ–­ä¿æŠ¤" class="headerlink" title="ç†”æ–­ä¿æŠ¤"></a>ç†”æ–­ä¿æŠ¤</h1><p>æ¯ä¸ªdubbo:referenceçš„æœåŠ¡æ–¹æ³•ä¼šå°è£…æˆcommand,æä¾›ç†”æ–­ä¿æŠ¤å’Œä¼˜é›…é™çº§åŠŸèƒ½ã€‚</p><p>é»˜è®¤ç†”æ–­é…ç½®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><dubbo:parameter key="requestVolumeThreshold" value="20"></dubbo:parameter></span><br><span class="line"><dubbo:parameter key="sleepWindowInMilliseconds" value="5000"></dubbo:parameter></span><br><span class="line"><dubbo:parameter key="errorThresholdPercentage" value="50"></dubbo:parameter></span><br><span class="line"><dubbo:parameter key="timeoutInMilliseconds" value="1000"></dubbo:parameter></span><br></pre></td></tr></tbody></table></figure></div><table><thead><tr><th>å‚æ•°</th><th align="left">è¯´æ˜</th><th align="left">é»˜è®¤å€¼</th><th align="left">å¤‡æ³¨</th></tr></thead><tbody><tr><td>requestVolumeThreshold</td><td align="left">ç†”æ–­åˆ¤æ–­è¯·æ±‚æ•°é˜ˆå€¼</td><td align="left">20</td><td align="left">ä¸€ä¸ªç»Ÿè®¡å‘¨æœŸå†…ï¼ˆé»˜è®¤10ç§’ï¼‰è¯·æ±‚ä¸å°‘äºrequestVolumeThresholdæ‰ä¼šè¿›è¡Œç†”æ–­åˆ¤æ–­</td></tr><tr><td>sleepWindowInMilliseconds</td><td align="left">ç†”æ–­è§¦å‘é”™è¯¯ç‡é˜ˆå€¼</td><td align="left">5000</td><td align="left">è¶…è¿‡50%é”™è¯¯è§¦å‘ç†”æ–­</td></tr><tr><td>errorThresholdPercentage</td><td align="left">ç†”æ–­è§¦å‘åå¤šä¹…æ¢å¤half-opençŠ¶æ€</td><td align="left">50</td><td align="left">ç†”æ–­åsleepWindowInMillisecondsæ¯«ç§’ä¼šæ”¾å…¥ä¸€ä¸ªè¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚å¤„ç†æˆåŠŸï¼Œç†”æ–­å™¨å…³é—­ï¼Œå¦åˆ™ç†”æ–­å™¨æ‰“å¼€ï¼Œç»§ç»­ç­‰å¾…sleepWindowInMilliseconds</td></tr><tr><td>timeoutInMilliseconds</td><td align="left">ä»»åŠ¡æ‰§è¡Œè¶…æ—¶æ—¶é—´</td><td align="left">1000</td><td align="left">æ³¨æ„è¯¥æ—¶é—´å’Œdubboè‡ªå·±çš„è¶…æ—¶æ—¶é—´ä¸è¦å†²çªï¼Œä»¥è¿™ä¸ªæ—¶é—´ä¼˜å…ˆï¼Œæ¯”å¦‚consumerè®¾ç½®3ç§’ï¼Œé‚£ä¹ˆå½“æ‰§è¡Œæ—¶hystrixä¼šæå‰è¶…æ—¶</td></tr></tbody></table><h1 id="æœåŠ¡é™çº§"><a href="#æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡é™çº§"></a>æœåŠ¡é™çº§</h1><p>é™çº§è§¦å‘æ¡ä»¶å¦‚ä¸‹ï¼š</p><ol><li>è¿œç¨‹æœåŠ¡è°ƒç”¨è¶…æ—¶</li><li>è¿œç¨‹æœåŠ¡å†…éƒ¨æ‰§è¡Œè¿”å›å¼‚å¸¸ç»“æœï¼ˆå¦‚å†…éƒ¨æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼‰</li><li>Hystrix will execute this fallback for all types of failure such as run() failure, timeout, thread pool or semaphore rejection, and circuit-breaker short-circuiting</li></ol><p>æœåŠ¡é™çº§æ–¹æ³•é€šè¿‡SPIæ‰©å±•çš„æ–¹å¼åŠ è½½ã€è¿è¡Œï¼Œå®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p><h3 id="1ã€ç»§æ‰¿å®ç°Fallbackæ¥å£ï¼Œæä¾›é™çº§å®ç°ï¼Œå¦‚ä¸‹ï¼š"><a href="#1ã€ç»§æ‰¿å®ç°Fallbackæ¥å£ï¼Œæä¾›é™çº§å®ç°ï¼Œå¦‚ä¸‹ï¼š" class="headerlink" title="1ã€ç»§æ‰¿å®ç°Fallbackæ¥å£ï¼Œæä¾›é™çº§å®ç°ï¼Œå¦‚ä¸‹ï¼š"></a>1ã€ç»§æ‰¿å®ç°Fallbackæ¥å£ï¼Œæä¾›é™çº§å®ç°ï¼Œå¦‚ä¸‹ï¼š</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.fallback;</span><br><span class="line"></span><br><span class="line">import com.netease.hystrix.dubbo.rpc.filter.Fallback;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å›è°ƒå‡½æ•°</span><br><span class="line"> * @author YI</span><br><span class="line"> * @date 2018-9-5 21:16:31</span><br><span class="line"> */</span><br><span class="line">public class DemoFallback implements Fallback {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object invoke() {</span><br><span class="line">        System.out.println("sayHello æ–¹æ³•å›è°ƒã€‚ã€‚ã€‚");</span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="2ã€æŒ‰dubbo-SPIæ‰©å±•è§„åˆ™è¿›è¡Œé…ç½®"><a href="#2ã€æŒ‰dubbo-SPIæ‰©å±•è§„åˆ™è¿›è¡Œé…ç½®" class="headerlink" title="2ã€æŒ‰dubbo SPIæ‰©å±•è§„åˆ™è¿›è¡Œé…ç½®"></a>2ã€æŒ‰dubbo SPIæ‰©å±•è§„åˆ™è¿›è¡Œé…ç½®</h3><ol><li>resourcesç›®å½•å¢åŠ æ–‡ä»¶/META-INF/dubbo/com.netease.hystrix.dubbo.rpc.filter.Fallbackï¼ˆæ­¤æ–‡ä»¶åå¿…é¡»æ˜¯Fallbackç±»çš„åŒ…åï¼Œä¸ç„¶ä¼šæ‰¾ä¸åˆ°ï¼‰</li><li>demoFallback=com.netease.urs.dubbo.rpc.DemoFallback</li></ol><h3 id="3ã€dubbo-referenceå¢åŠ method-fallbacké…ç½®"><a href="#3ã€dubbo-referenceå¢åŠ method-fallbacké…ç½®" class="headerlink" title="3ã€dubbo:referenceå¢åŠ method fallbacké…ç½®"></a>3ã€dubbo:referenceå¢åŠ method fallbacké…ç½®</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><dubbo:method name="demo"></dubbo:method></span><br><span class="line">    <dubbo:parameter key="fallback" value="demoFallback"></dubbo:parameter></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><h2 id="Fallbackå¹¶å‘è°ƒç”¨é‡æ§åˆ¶"><a href="#Fallbackå¹¶å‘è°ƒç”¨é‡æ§åˆ¶" class="headerlink" title="Fallbackå¹¶å‘è°ƒç”¨é‡æ§åˆ¶"></a>Fallbackå¹¶å‘è°ƒç”¨é‡æ§åˆ¶</h2><p>è®¾ç½®å±æ€§ fallbackMaxConcurrentRequests é»˜è®¤å€¼ä¸º 50</p><p><code><dubbo:parameter key="fallbackMaxConcurrentRequests" value="50"></dubbo:parameter></code></p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>é¡¹ç›®å¯åŠ¨åè®¿é—®:localhost:8012/hello/xiaoming<br><a href="https://i.imgur.com/BKQ0YYz.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/BKQ0YYz.jpg" class="lazyload" title></a></p><h1 id="ç”»é‡ç‚¹-æ•²é»‘æ¿"><a href="#ç”»é‡ç‚¹-æ•²é»‘æ¿" class="headerlink" title="ç”»é‡ç‚¹,æ•²é»‘æ¿"></a>ç”»é‡ç‚¹,æ•²é»‘æ¿</h1><p>åœ¨æˆ‘çš„æºç ä¸­æˆ‘åˆ é™¤äº†xmlé…ç½®æ–‡ä»¶,dubboå…¨éƒ¨æ˜¯ä½¿ç”¨æ³¨è§£å’Œé…ç½®å®Œæˆ,è®©æˆ‘ä»¬æ›´ç®€å•çš„å®Œæˆæ“ä½œ,æˆ‘ä»¬æ¥çœ‹çœ‹å§:</p><p>ç”Ÿäº§è€…æš´éœ²æœåŠ¡</p><p><a href="https://i.imgur.com/L9Emelb.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/L9Emelb.jpg" class="lazyload" title></a></p><p>æ¶ˆè´¹è€…ä½¿ç”¨</p><p><a href="https://i.imgur.com/iA2xVxq.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/iA2xVxq.jpg" class="lazyload" title></a></p><p>æ³¨è§£ parameters ä¸­å¯¹åº”çš„å‚æ•°å°±æ˜¯ä¸Šæ–‡æåˆ°çš„<strong>ç†”æ–­ä¿æŠ¤</strong>çš„å‚æ•°ï¼Œå¥½äº†ï¼Œå¿«ä¹çš„å†™ä»£ç å§ï¼</p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p><a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-dubbo-zookeeper-hystrix" target="_blank" rel="noopener">spring-boot-dubbo-zookeeper-hystrix</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> dubbo </tag>
            
            <tag> zookeeper </tag>
            
            <tag> Spring boot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆJavaä¸­1000==1000ä¸ºfalseè€Œ100==100ä¸ºtrueï¼Ÿ</title>
      <link href="/2018/08/28/%E4%B8%BA%E4%BB%80%E4%B9%88Java%E4%B8%AD1000==1000%E4%B8%BAfalse%E8%80%8C100==100%E4%B8%BAtrue%EF%BC%9F/"/>
      <url>/2018/08/28/%E4%B8%BA%E4%BB%80%E4%B9%88Java%E4%B8%AD1000==1000%E4%B8%BAfalse%E8%80%8C100==100%E4%B8%BAtrue%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>è¿™æ˜¯ä¸€ä¸ªæŒºæœ‰æ„æ€çš„è®¨è®ºè¯é¢˜ã€‚</p><p>å¦‚æœä½ è¿è¡Œä¸‹é¢çš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer a = 1000, b = 1000;</span><br><span class="line">Integer c = 100, d = 100;</span><br><span class="line">System.out.println(a == b);//1   </span><br><span class="line">System.out.println(c == d);//2</span><br></pre></td></tr></tbody></table></figure></div><p>ä½ ä¼šå¾—åˆ°ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></tbody></table></figure></div><p><strong>åŸºæœ¬çŸ¥è¯†</strong>ï¼šæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœä¸¤ä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œç”¨==è¡¨ç¤ºå®ƒä»¬æ˜¯ç›¸ç­‰çš„ã€‚å¦‚æœä¸¤ä¸ªå¼•ç”¨æŒ‡å‘ä¸åŒçš„å¯¹è±¡ï¼Œç”¨==è¡¨ç¤ºå®ƒä»¬æ˜¯ä¸ç›¸ç­‰çš„ï¼Œå³ä½¿å®ƒä»¬çš„å†…å®¹ç›¸åŒã€‚</p><p>å› æ­¤ï¼Œåé¢ä¸€æ¡è¯­å¥ä¹Ÿåº”è¯¥æ˜¯false ã€‚</p><p>è¿™å°±æ˜¯å®ƒæœ‰è¶£çš„åœ°æ–¹äº†ã€‚å¦‚æœä½ çœ‹å»çœ‹ Integer.Java ç±»ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªå†…éƒ¨ç§æœ‰ç±»ï¼ŒIntegerCache.javaï¼Œå®ƒç¼“å­˜äº†ä»-128åˆ°127ä¹‹é—´çš„æ‰€æœ‰çš„æ•´æ•°å¯¹è±¡ã€‚</p><p><strong>æ‰€ä»¥äº‹æƒ…å°±æˆäº†ï¼Œæ‰€æœ‰çš„å°æ•´æ•°åœ¨å†…éƒ¨ç¼“å­˜ï¼Œç„¶åå½“æˆ‘ä»¬å£°æ˜ç±»ä¼¼â€”â€”</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer c = 100;</span><br></pre></td></tr></tbody></table></figure></div><p>çš„æ—¶å€™ï¼Œå®ƒå®é™…ä¸Šåœ¨å†…éƒ¨åšçš„æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer i = Integer.valueOf(100);</span><br></pre></td></tr></tbody></table></figure></div><p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å»çœ‹valueOf()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static Integer valueOf(int i) {</span><br><span class="line">    if (i >= IntegerCache.low && i</span><br><span class="line">    return IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">    return new Integer(i);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœå€¼çš„èŒƒå›´åœ¨-128åˆ°127ä¹‹é—´ï¼Œå®ƒå°±ä»é«˜é€Ÿç¼“å­˜è¿”å›å®ä¾‹ã€‚<br>æ‰€ä»¥â€¦</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer c = 100, d = 100;</span><br></pre></td></tr></tbody></table></figure></div><p>æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å†™ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(c == d);</span><br></pre></td></tr></tbody></table></figure></div><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°trueã€‚</p><p><strong>ç°åœ¨ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ç¼“å­˜ï¼Ÿ</strong><br>åˆä¹é€»è¾‘çš„ç†ç”±æ˜¯ï¼Œåœ¨æ­¤èŒƒå›´å†…çš„â€œå°â€æ•´æ•°ä½¿ç”¨ç‡æ¯”å¤§æ•´æ•°è¦é«˜ï¼Œå› æ­¤ï¼Œä½¿ç”¨ç›¸åŒçš„åº•å±‚å¯¹è±¡æ˜¯æœ‰ä»·å€¼çš„ï¼Œå¯ä»¥å‡å°‘æ½œåœ¨çš„å†…å­˜å ç”¨ã€‚</p><p>ç„¶è€Œï¼Œé€šè¿‡åå°„APIä½ ä¼šè¯¯ç”¨æ­¤åŠŸèƒ½ã€‚</p><p><strong>è¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œäº«å—å®ƒçš„é­…åŠ›å§</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException {</span><br><span class="line">    Class cache = Integer.class.getDeclaredClasses()[0]; //1 </span><br><span class="line">    Field myCache = cache.getDeclaredField("cache"); //2 </span><br><span class="line">    myCache.setAccessible(true);//3 </span><br><span class="line">    Integer[] newCache = (Integer[]) myCache.get(cache); //4 </span><br><span class="line">    newCache[132] = newCache[133]; //5 </span><br><span class="line">    int a = 2;</span><br><span class="line">    int b = a + a;</span><br><span class="line">    System.out.printf("%d + %d = %d", a, a, b); // </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Javaä¸­å¦‚ä½•é«˜æ•ˆåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </title>
      <link href="/2018/08/28/%E5%9C%A8Java%E4%B8%AD%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%88%A4%E6%96%AD%E6%95%B0%E7%BB%84%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E6%9F%90%E4%B8%AA%E5%85%83%E7%B4%A0/"/>
      <url>/2018/08/28/%E5%9C%A8Java%E4%B8%AD%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%88%A4%E6%96%AD%E6%95%B0%E7%BB%84%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E6%9F%90%E4%B8%AA%E5%85%83%E7%B4%A0/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ•°ç»„(æ— åº)æ˜¯å¦åŒ…å«ä¸€ä¸ªç‰¹å®šçš„å€¼ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåœ¨Javaä¸­ç»å¸¸ç”¨åˆ°çš„å¹¶ä¸”éå¸¸æœ‰ç”¨çš„æ“ä½œã€‚</p><p>åŒæ—¶ï¼Œè¿™ä¸ªé—®é¢˜åœ¨Stack Overflowä¸­ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸çƒ­é—¨çš„é—®é¢˜ã€‚åœ¨æŠ•ç¥¨æ¯”è¾ƒé«˜çš„å‡ ä¸ªç­”æ¡ˆä¸­ç»™å‡ºäº†å‡ ç§ä¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯ä»–ä»¬çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯å„ä¸ç›¸åŒçš„ã€‚æœ¬æ–‡å°†åˆ†æå‡ ç§å¸¸è§ç”¨æ³•åŠå…¶æ—¶é—´æˆæœ¬ã€‚</p><h3 id="ä½¿ç”¨List"><a href="#ä½¿ç”¨List" class="headerlink" title="ä½¿ç”¨List"></a>ä½¿ç”¨List</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">useList</span><span class="params">(String[] arr, String targetValue)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> Arrays.asList(arr).contains(targetValue);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="ä½¿ç”¨Set"><a href="#ä½¿ç”¨Set" class="headerlink" title="ä½¿ç”¨Set"></a>ä½¿ç”¨Set</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">useSet</span><span class="params">(String[] arr, String targetValue)</span> </span>{</span><br><span class="line">    Set<string> set = <span class="keyword">new</span> HashSet<string>(Arrays.asList(arr));</string></string></span><br><span class="line">    <span class="keyword">return</span> set.contains(targetValue);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="ä½¿ç”¨å¾ªç¯åˆ¤æ–­"><a href="#ä½¿ç”¨å¾ªç¯åˆ¤æ–­" class="headerlink" title="ä½¿ç”¨å¾ªç¯åˆ¤æ–­"></a>ä½¿ç”¨å¾ªç¯åˆ¤æ–­</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">useLoop</span><span class="params">(String[] arr, String targetValue)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span>(String s: arr){</span><br><span class="line">        <span class="keyword">if</span>(s.equals(targetValue))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ä½¿ç”¨Arrays.binarySearch()</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.binarySearch()æ–¹æ³•åªèƒ½ç”¨äºæœ‰åºæ•°ç»„ï¼ï¼ï¼å¦‚æœæ•°ç»„æ— åºçš„è¯å¾—åˆ°çš„ç»“æœå°±ä¼šå¾ˆå¥‡æ€ªã€‚</span><br></pre></td></tr></tbody></table></figure></div><p>æŸ¥æ‰¾æœ‰åºæ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static boolean useArraysBinarySearch(String[] arr, String targetValue) { </span><br><span class="line">    int a =  Arrays.binarySearch(arr, targetValue);</span><br><span class="line">    if(a > 0)</span><br><span class="line">        return true;</span><br><span class="line">    else</span><br><span class="line">        return false;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h1 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h1><p>ä¸‹é¢çš„ä»£ç å¯ä»¥å¤§æ¦‚çš„å¾—å‡ºå„ç§æ–¹æ³•çš„æ—¶é—´æˆæœ¬ã€‚åŸºæœ¬æ€æƒ³å°±æ˜¯ä»æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸ªå€¼ï¼Œæ•°ç»„çš„å¤§å°åˆ†åˆ«æ˜¯5ã€1kã€10kã€‚è¿™ç§æ–¹æ³•å¾—åˆ°çš„ç»“æœå¯èƒ½å¹¶ä¸ç²¾ç¡®ï¼Œä½†æ˜¯æ˜¯æœ€ç®€å•æ¸…æ™°çš„æ–¹å¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) {</span><br><span class="line">    String[] arr = new String[] {  "CD",  "BC", "EF", "DE", "AB"};</span><br><span class="line"></span><br><span class="line">    //use list</span><br><span class="line">    long startTime = System.nanoTime();</span><br><span class="line">    for (int i = 0; i < 100000; i++) {</span><br><span class="line">        useList(arr, "A");</span><br><span class="line">    }</span><br><span class="line">    long endTime = System.nanoTime();</span><br><span class="line">    long duration = endTime - startTime;</span><br><span class="line">    System.out.println("useList:  " + duration / 1000000);</span><br><span class="line"></span><br><span class="line">    //use set</span><br><span class="line">    startTime = System.nanoTime();</span><br><span class="line">    for (int i = 0; i < 100000; i++) {</span><br><span class="line">        useSet(arr, "A");</span><br><span class="line">    }</span><br><span class="line">    endTime = System.nanoTime();</span><br><span class="line">    duration = endTime - startTime;</span><br><span class="line">    System.out.println("useSet:  " + duration / 1000000);</span><br><span class="line"></span><br><span class="line">    //use loop</span><br><span class="line">    startTime = System.nanoTime();</span><br><span class="line">    for (int i = 0; i < 100000; i++) {</span><br><span class="line">        useLoop(arr, "A");</span><br><span class="line">    }</span><br><span class="line">    endTime = System.nanoTime();</span><br><span class="line">    duration = endTime - startTime;</span><br><span class="line">    System.out.println("useLoop:  " + duration / 1000000);</span><br><span class="line"></span><br><span class="line">    //use Arrays.binarySearch()</span><br><span class="line">    startTime = System.nanoTime();</span><br><span class="line">    for (int i = 0; i < 100000; i++) {</span><br><span class="line">        useArraysBinarySearch(arr, "A");</span><br><span class="line">    }</span><br><span class="line">    endTime = System.nanoTime();</span><br><span class="line">    duration = endTime - startTime;</span><br><span class="line">    System.out.println("useArrayBinary:  " + duration / 1000000);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>è¿è¡Œç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useList:  13useSet:  72useLoop:  5useArraysBinarySearch:  9</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º1kçš„æ•°ç»„"><a href="#ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º1kçš„æ•°ç»„" class="headerlink" title="ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º1kçš„æ•°ç»„"></a>ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º1kçš„æ•°ç»„</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] arr = new String[1000];Random s = new Random();for(int i=0; i< 1000; i++){</span><br><span class="line">    arr[i] = String.valueOf(s.nextInt());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useList:  112useSet:  2055useLoop:  99useArrayBinary:  12</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º10kçš„æ•°ç»„"><a href="#ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º10kçš„æ•°ç»„" class="headerlink" title="ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º10kçš„æ•°ç»„"></a>ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º10kçš„æ•°ç»„</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] arr = new String[10000];Random s = new Random();for(int i=0; i< 10000; i++){</span><br><span class="line">    arr[i] = String.valueOf(s.nextInt());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ç»“æœï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useList:  1590useSet:  23819useLoop:  1526useArrayBinary:  12</span><br></pre></td></tr></tbody></table></figure></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ˜¾ç„¶ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„å¾ªç¯æ–¹æ³•æ¯”ä½¿ç”¨ä»»ä½•é›†åˆéƒ½æ›´åŠ é«˜æ•ˆã€‚è®¸å¤šå¼€å‘äººå‘˜ä¸ºäº†æ–¹ä¾¿ï¼Œéƒ½ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä½†æ˜¯ä»–çš„æ•ˆç‡ä¹Ÿç›¸å¯¹è¾ƒä½ã€‚å› ä¸ºå°†æ•°ç»„å‹å…¥Collectionç±»å‹ä¸­ï¼Œé¦–å…ˆè¦å°†æ•°ç»„å…ƒç´ éå†ä¸€éï¼Œç„¶åå†ä½¿ç”¨é›†åˆç±»åšå…¶ä»–æ“ä½œã€‚</p><p>å¦‚æœä½¿ç”¨Arrays.binarySearch()æ–¹æ³•ï¼Œæ•°ç»„å¿…é¡»æ˜¯å·²æ’åºçš„ã€‚ç”±äºä¸Šé¢çš„æ•°ç»„å¹¶æ²¡æœ‰è¿›è¡Œæ’åºï¼Œæ‰€ä»¥è¯¥æ–¹æ³•ä¸å¯ä½¿ç”¨ã€‚</p><p>å®é™…ä¸Šï¼Œå¦‚æœä½ éœ€è¦å€ŸåŠ©æ•°ç»„æˆ–è€…é›†åˆç±»é«˜æ•ˆåœ°æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šå€¼ï¼Œä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨æˆ–æ ‘å¯ä»¥åšåˆ°æ—¶é—´å¤æ‚åº¦ä¸ºO(log(n))ï¼Œhashsetå¯ä»¥è¾¾åˆ°O(1)ã€‚</p><p><strong>ï¼ˆè‹±æ–‡åŸæ–‡ç»“æŸï¼Œä»¥ä¸‹æ˜¯è¯‘è€…æ³¨ï¼‰</strong></p><h3 id="ä½¿ç”¨ArrayUtils"><a href="#ä½¿ç”¨ArrayUtils" class="headerlink" title="ä½¿ç”¨ArrayUtils"></a>ä½¿ç”¨ArrayUtils</h3><p>é™¤äº†ä»¥ä¸Šå‡ ç§ä»¥å¤–ï¼ŒApache Commonsç±»åº“ä¸­è¿˜æä¾›äº†ä¸€ä¸ªArrayUtilsç±»ï¼Œå¯ä»¥ä½¿ç”¨å…¶containsæ–¹æ³•åˆ¤æ–­æ•°ç»„å’Œå€¼çš„å…³ç³»ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static boolean useArrayUtils(String[] arr, String targetValue) {</span><br><span class="line">    return ArrayUtils.contains(arr,targetValue);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>åŒæ ·ä½¿ç”¨ä»¥ä¸Šå‡ ç§é•¿åº¦çš„æ•°ç»„è¿›è¡Œæµ‹è¯•ï¼Œå¾—å‡ºçš„ç»“æœæ˜¯è¯¥æ–¹æ³•çš„æ•ˆç‡ä»‹äºä½¿ç”¨é›†åˆå’Œä½¿ç”¨å¾ªç¯åˆ¤æ–­ä¹‹é—´ï¼ˆæœ‰çš„æ—¶å€™ç»“æœç”šè‡³æ¯”ä½¿ç”¨å¾ªç¯è¦ç†æƒ³ï¼‰ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useList:  323useSet:  3028useLoop:  141useArrayBinary:  12useArrayUtils:  181-------useList:  3703useSet:  35183useLoop:  3218useArrayBinary:  14useArrayUtils:  3125</span><br></pre></td></tr></tbody></table></figure></div><p>å…¶å®ï¼Œå¦‚æœæŸ¥çœ‹ArrayUtils.containsçš„æºç å¯ä»¥å‘ç°ï¼Œä»–åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åŒ…å«åœ¨æ•°ç»„ä¸­å…¶å®ä¹Ÿæ˜¯ä½¿ç”¨å¾ªç¯åˆ¤æ–­çš„æ–¹å¼ã€‚</p><p>éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">if(array == null) {</span><br><span class="line">    return -1;</span><br><span class="line">} else {</span><br><span class="line">    if(startIndex < 0) {</span><br><span class="line">        startIndex = 0;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    int i;</span><br><span class="line">    if(objectToFind == null) {</span><br><span class="line">        for(i = startIndex; i < array.length; ++i) {</span><br><span class="line">            if(array[i] == null) {</span><br><span class="line">                return i;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    } else if(array.getClass().getComponentType().isInstance(objectToFind)) {</span><br><span class="line">        for(i = startIndex; i < array.length; ++i) {</span><br><span class="line">            if(objectToFind.equals(array[i])) {</span><br><span class="line">                return i;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return -1;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ‰€ä»¥ï¼Œç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ArrayUtilså·¥å…·ç±»æ¥è¿›è¡Œä¸€äº›åˆæ•°ç¥–ç›¸å…³çš„æ“ä½œã€‚æ¯•ç«Ÿä»–å¯ä»¥è®©æˆ‘å°‘å†™å¾ˆå¤šä»£ç ï¼ˆå› ä¸ºè‡ªå·±å†™ä»£ç éš¾å…æœ‰Bugï¼Œæ¯•ç«Ÿapacheæä¾›çš„å¼€æºå·¥å…·ç±»åº“éƒ½æ˜¯ç»è¿‡æ— æ•°å¼€å‘è€…è€ƒéªŒè¿‡çš„ï¼‰ï¼Œè€Œä¸”ï¼Œæ•ˆç‡ä¸Šä¹Ÿå¹¶ä¸ä½å¤ªå¤šã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…FastDFSï¼Œé›†æˆSpring Bootæ“ä½œ</title>
      <link href="/2018/08/26/Docker%E5%AE%89%E8%A3%85FastDFS%EF%BC%8C%E9%9B%86%E6%88%90Spring%20Boot%E6%93%8D%E4%BD%9C/"/>
      <url>/2018/08/26/Docker%E5%AE%89%E8%A3%85FastDFS%EF%BC%8C%E9%9B%86%E6%88%90Spring%20Boot%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Dockerå®‰è£…FastDFSï¼Œé›†æˆSpring Bootæ“ä½œ</p><ol><li>è·å–é•œåƒ</li><li>è¿è¡Œtracker</li><li>è¿è¡Œstorage</li></ol><a id="more"></a><h2 id="1-è·å–é•œåƒ"><a href="#1-è·å–é•œåƒ" class="headerlink" title="1. è·å–é•œåƒ"></a>1. è·å–é•œåƒ</h2><p>å¯ä»¥åˆ©ç”¨å·²æœ‰çš„FastDFS Dockeré•œåƒæ¥è¿è¡ŒFastDFSã€‚</p><p>ä½¿ç”¨Centos æœ€å¥½ä½¿ç”¨7.2çš„ç‰ˆæœ¬ï¼Œä¸ç„¶å¯èƒ½ä¼šæ— æ³•å¯åŠ¨ï¼Œæˆ–è€…ç¼ºå°‘å„ç§ä¾èµ–ã€‚</p><p>è·å–é•œåƒå¯ä»¥é€šè¿‡ä¸‹è½½</p><pre><code>docker image pull delron/fastdfs</code></pre><p>ä¹Ÿå¯æ˜¯ç›´æ¥ä½¿ç”¨æä¾›çš„é•œåƒå¤‡ä»½æ–‡ä»¶</p><pre><code>docker load -i æ–‡ä»¶è·¯å¾„/fastdfs_docker.tarï¼ˆæå‰æ‰“åŒ…å¥½çš„ï¼‰</code></pre><p>åŠ è½½å¥½é•œåƒåï¼Œå°±å¯ä»¥å¼€å¯è¿è¡ŒFastDFSçš„trackerå’Œstorageäº†ã€‚</p><h2 id="2-è¿è¡Œtracker"><a href="#2-è¿è¡Œtracker" class="headerlink" title="2. è¿è¡Œtracker"></a><a name="t1" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>2. è¿è¡Œtracker</h2><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¼€å¯tracker æœåŠ¡</p><pre><code>docker run -dti --network=host --name tracker -v /var/fdfs/tracker:/var/fdfs delron/fastdfs tracker</code></pre><ul><li>æˆ‘ä»¬å°†fastDFS trackerè¿è¡Œç›®å½•æ˜ å°„åˆ°æœ¬æœºçš„ /var/fdfs/trackerç›®å½•ä¸­ã€‚</li></ul><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹trackeræ˜¯å¦è¿è¡Œèµ·æ¥</p><pre><code>docker container ls</code></pre><p>å¦‚æœæƒ³åœæ­¢trackeræœåŠ¡ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code>docker container stop tracker</code></pre><p>åœæ­¢åï¼Œé‡æ–°è¿è¡Œtrackerï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code>docker container start tracker</code></pre><h2 id="3-è¿è¡Œstorage"><a href="#3-è¿è¡Œstorage" class="headerlink" title="3. è¿è¡Œstorage"></a><a name="t2" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>3. è¿è¡Œstorage</h2><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¼€å¯storageæœåŠ¡</p><pre><code>docker run -dti --network=host --name storage -e TRACKER_SERVER=192.168.99.100:22122 -v /var/fdfs/storage:/var/fdfs delron/fastdfs storage</code></pre><ul><li>TRACKER_SERVER=æœ¬æœºçš„ipåœ°å€:22122 æœ¬æœºipåœ°å€ä¸è¦ä½¿ç”¨127.0.0.1</li><li>æˆ‘ä»¬å°†fastDFS storageè¿è¡Œç›®å½•æ˜ å°„åˆ°æœ¬æœºçš„/var/fdfs/storageç›®å½•ä¸­</li></ul><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹storageæ˜¯å¦è¿è¡Œèµ·æ¥</p><pre><code>docker container ls</code></pre><p>å¦‚æœæƒ³åœæ­¢storageæœåŠ¡ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code>docker container stop storage</code></pre><p>åœæ­¢åï¼Œé‡æ–°è¿è¡Œstorageï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code>docker container start storage</code></pre><p><span style="outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700;">æ³¨æ„ï¼šå¦‚æœæ— æ³•é‡æ–°è¿è¡Œï¼Œå¯ä»¥åˆ é™¤<code>/var/fdfs/storage/data</code>ç›®å½•ä¸‹çš„<code>fdfs_storaged.pid</code> æ–‡ä»¶ï¼Œç„¶åé‡æ–°è¿è¡Œstorageã€‚</span></p><p><span style="outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700;"><span style="letter-spacing: 0.2px;"><font color="#ff0000">è­¦å‘Šï¼šæˆ‘æ­¤å¤„ä½¿ç”¨çš„æ˜¯win10å®‰è£…çš„dockerï¼Œå¦‚æœä½ ä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œè®°å¾—åœ¨å®‰å…¨ç»„å¼€æ”¾22122å’Œ8888è¿™ä¸¤ä¸ªç«¯å£ï¼Œå¦åˆ™å°†ä»£ç å°†æ— æ³•è¿æ¥ã€‚</font></span></span></p><p><span style="outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700;">é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/HWYWL/spring-boot-docker-fsatdfs" target="_blank" rel="noopener">https://github.com/HWYWL/spring-boot-docker-fsatdfs</a></span></p><p><span style="outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700;">æ•ˆæœå›¾ï¼š</span><a href="http://www.hwy.ac.cn/upload/2018/08/72qoojamq0iicr4lobc95ijmpo.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/08/72qoojamq0iicr4lobc95ijmpo.png" class="lazyload" title></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Spring Boot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Spring Boot </tag>
            
            <tag> FastDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå†…å­˜æ¨¡å‹å’ŒJavaå¹¶å‘</title>
      <link href="/2018/08/24/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8CJava%E5%B9%B6%E5%8F%91/"/>
      <url>/2018/08/24/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8CJava%E5%B9%B6%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Semaphoreï¼ˆä¿¡å·é‡ï¼‰<br>Semaphoreï¼ˆä¿¡å·é‡ï¼‰æ˜¯ä¸€ä¸ªçº¿ç¨‹åŒæ­¥ç»“æ„ï¼Œç”¨äºåœ¨çº¿ç¨‹é—´ä¼ é€’ä¿¡å·ï¼Œä»¥é¿å…å‡ºç°ä¿¡å·ä¸¢å¤±ï¼Œæˆ–è€…åƒé”ä¸€æ ·ç”¨äºä¿æŠ¤ä¸€ä¸ªå…³é”®åŒºåŸŸã€‚</p><a id="more"></a><h1 id="Semaphoreï¼ˆä¿¡å·é‡ï¼‰"><a href="#Semaphoreï¼ˆä¿¡å·é‡ï¼‰" class="headerlink" title="Semaphoreï¼ˆä¿¡å·é‡ï¼‰"></a>Semaphoreï¼ˆä¿¡å·é‡ï¼‰</h1><p>Semaphoreï¼ˆä¿¡å·é‡ï¼‰æ˜¯ä¸€ä¸ªçº¿ç¨‹åŒæ­¥ç»“æ„ï¼Œç”¨äºåœ¨çº¿ç¨‹é—´ä¼ é€’ä¿¡å·ï¼Œä»¥é¿å…å‡ºç°ä¿¡å·ä¸¢å¤±ï¼Œæˆ–è€…åƒé”ä¸€æ ·ç”¨äºä¿æŠ¤ä¸€ä¸ªå…³é”®åŒºåŸŸã€‚</p><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>é¢è¯•Javaï¼Œå¿…ç„¶è¦è¢«é—®Javaå†…å­˜æ¨¡å‹å’ŒJavaå¹¶å‘å¼€å‘ã€‚æˆ‘è¢«é—®åˆ°çš„æ—¶å€™ï¼Œå¿ƒé‡Œæ…Œå¾—ä¸€æ‰¹ï¼Œâ€œé¢ï¼Œæ˜¯åœ¨ã€ŠThinking in Javaã€‹é‡Œé¢å†™çš„å—ï¼Ÿæœç„¶æ¯å¤©å¢åˆ æ”¹å¤ªlowäº†â€ã€‚</p><p><a href="https://i.imgur.com/HU4Wb7j.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/HU4Wb7j.jpg" class="lazyload" title></a><br><a href="https://i.imgur.com/nekdQFv.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/nekdQFv.jpg" class="lazyload" title></a><br><a href="https://i.imgur.com/UKXLLTh.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/UKXLLTh.jpg" class="lazyload" title></a><br><a href="https://i.imgur.com/ahXyP3Q.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/ahXyP3Q.jpg" class="lazyload" title></a></p><p>æˆ‘å¸Œæœ›èƒ½è§£é‡Šçš„å†ç®€å•ä¸€äº›ï¼Œä»¥ä¸Šéƒ½ä¸ç”¨</p><p>Java å¹¶å‘ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Example1 {</span><br><span class="line">    public static int count = 0;</span><br><span class="line">    public static int clientTotal = 5000;</span><br><span class="line">    public static void main(String[] args) throws Exception {</span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">        for (int i = 0; i < clientTotal ; i++) {</span><br><span class="line">            executorService.execute(() -> {</span><br><span class="line">                try {</span><br><span class="line">                    add();</span><br><span class="line">                } catch (Exception e) {</span><br><span class="line">                    log.error("exception", e);</span><br><span class="line">                }</span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    private static void add() {</span><br><span class="line">        count++;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¦‚æœä¸Šé¢ä»£ç æ‰§è¡Œï¼Œcountçš„å€¼æ˜¯å¤šå°‘ï¼Ÿï¼ˆä¸ºäº†è¯´æ˜é‡ç‚¹é—®é¢˜ï¼Œæ²¡æœ‰å†™æœ€åæ‰“å°çš„ä»£ç ï¼‰5000ï¼Ÿå¤šæ¬¡è¿è¡Œçš„ç»“æœï¼Œcountçš„å€¼æ˜¯å°äº5000çš„ã€‚</p><p>è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„ç¨‹åºï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¯åŠ¨5000ä¸ªçº¿ç¨‹æ‰§è¡Œadd()æ“ä½œï¼Œaddå‡½æ•°å¤„ç†é™æ€æˆå‘˜å˜é‡countã€‚</p><p>å¦‚æœç¨‹åºé¡ºåºè°ƒç”¨ï¼Œcountçš„å€¼åº”è¯¥æ˜¯5000ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(int i=0;i<5000;i++){</span><br><span class="line">    add();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å¤åˆ¶ä»£ç ä½†æ˜¯çº¿ç¨‹æ± å¯åŠ¨å¤šçº¿ç¨‹ï¼Œæ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚æ¯ä¸ªçº¿ç¨‹å¯åŠ¨ä¹‹åï¼Œä¸ç®¡æ˜¯å¦è¿è¡Œç»“æŸï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹ä¼šé©¬ä¸Šå¯åŠ¨ã€‚</p><p>å¯åŠ¨çº¿ç¨‹çš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œå¯åŠ¨çº¿ç¨‹ç«‹å³è¿”å›ï¼Œå¯åŠ¨ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå˜é‡addè¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå°±ä¼šå‘ç”Ÿå†™å†™å†²çªã€‚</p><p>çº¿ç¨‹1ã€çº¿ç¨‹2 åŒæ—¶å¯¹å€¼ä¸º0çš„å˜é‡è¿›è¡Œæ“ä½œï¼Œç»“æœè¿”å›1ï¼Œè€Œä¸æ˜¯2ã€‚å¦‚æœè¿™ä¸ªåœ°æ–¹æƒ³ä¸æ˜ç™½ï¼Œå°±è¯·ç•™è¨€ï¼Œæˆ–è€…çœ‹çœ‹æ–‡ç« é¡¶éƒ¨é‚£äº›åŸç†å›¾ã€‚</p><p><strong>è¦ä¸ç®€å•ç‚¹ï¼Œè®°ä½â€œå¤šçº¿ç¨‹å¯¹å…¨å±€å˜é‡çš„å†™æ“ä½œä¼šå‘ç”Ÿå†²çªâ€ã€‚</strong><br><strong>ç­”æ¡ˆï¼Œå£°æ˜åŸå­å˜é‡ AtomicInteger count</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class ConcurrentSemaphore {</span><br><span class="line">    // è¯·æ±‚æ€»æ•°</span><br><span class="line">    public static int clientTotal = 5000;</span><br><span class="line"></span><br><span class="line">    // åŒæ—¶å¹¶å‘æ‰§è¡Œçš„çº¿ç¨‹æ•°</span><br><span class="line">    public static int threadTotal = 200;</span><br><span class="line"></span><br><span class="line">    public static AtomicInteger count = new AtomicInteger(0);</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception {</span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">        final Semaphore semaphore = new Semaphore(threadTotal);</span><br><span class="line">        final CountDownLatch countDownLatch = new CountDownLatch(clientTotal);</span><br><span class="line">        for (int i = 0; i < clientTotal ; i++) {</span><br><span class="line">            executorService.execute(() -> {</span><br><span class="line">                try {</span><br><span class="line">                    semaphore.acquire();</span><br><span class="line">                    add();</span><br><span class="line">                    semaphore.release();</span><br><span class="line">                } catch (Exception e) {</span><br><span class="line">                    log.error("exception", e);</span><br><span class="line">                }</span><br><span class="line">                countDownLatch.countDown();</span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line">        countDownLatch.await();</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">        log.info("count:{}", count.get());</span><br><span class="line">    }</span><br><span class="line">    private static void add() {</span><br><span class="line">        count.incrementAndGet();</span><br><span class="line">        log.info(" çº¿ç¨‹:[" + Thread.currentThread().getName() + "] " + count.get());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨ï¼Œä¸Šé¢çš„ä»£ç ç”¨äº†ç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œ5000ä¸ªç”Ÿäº§è€…ï¼Œ200ä¸ªæ¶ˆè´¹è€…ï¼Œå¯¹ç¨‹åºå¹¶å‘åšä¸€å®šé™åˆ¶ï¼Œé˜²æ­¢5000ä¸ªçº¿ç¨‹å¡æ­»è®¡ç®—æœºã€‚</p><p>å†…å­˜æ¨¡å‹ï¼Œä¹Ÿè¯´ç‚¹ç®€å•çš„</p><p><strong>æ ˆï¼ˆheapï¼‰ï¼Œå‡½æ•°åŠ è½½çš„æ—¶å€™ï¼Œä¸ºå‡½æ•°å†…éƒ¨å˜é‡åˆ†é…çš„ç©ºé—´ã€‚å’Œçˆ¶å‡½æ•°çš„å†…éƒ¨å˜é‡å’Œè¿è¡ŒæŒ‡é’ˆå…±äº«åŒä¸€å—åŒºåŸŸã€‚</strong></p><p><strong>å‡½æ•°è¿è¡Œæ—¶ï¼Œnewçš„ç©ºé—´ï¼Œéƒ½æ˜¯æ”¾åœ¨å †ä¸­çš„ã€‚</strong></p><p>è¿™ä¸ªå°±æ˜¯Cçš„å†…å­˜æ¨¡å‹ï¼Œåšshellcodeçš„åŸºç¡€çŸ¥è¯†ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NginxåŸºç¡€é…ç½®</title>
      <link href="/2018/08/24/Nginx%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/08/24/Nginx%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="NginxåŸºç¡€é…ç½®"><a href="#NginxåŸºç¡€é…ç½®" class="headerlink" title="NginxåŸºç¡€é…ç½®"></a>NginxåŸºç¡€é…ç½®</h1><p>ä»¥æˆ‘çš„åšå®¢ä¸ºä¾‹æˆ‘ä»¬åˆ†ä¸ºä¸¤ç§é…ç½®ï¼Œä¸€ç§æ™®é€šçš„åå‘ä»£ç†httpï¼Œå¦ä¸€ç§æ˜¯https</p><h3 id="é…ç½®http"><a href="#é…ç½®http" class="headerlink" title="é…ç½®http"></a>é…ç½®http</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">server {</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.hwy.ac.cn; #å°† www.yourdomain.com æ›¿æ¢ä¸ºä¹‹å‰æ³¨å†Œå¹¶è§£æçš„åŸŸå</span><br><span class="line">    root /root/firekylin;</span><br><span class="line">    set $node_port æ­¤å¤„æ›¿æ¢ä¸ºé¡¹ç›®ç«¯å£å·;</span><br><span class="line"></span><br><span class="line">    index index.js index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location ^~ /.well-known/acme-challenge/ {</span><br><span class="line">      alias /root/firekylin/ssl/challenges/;</span><br><span class="line">      try_files $uri = 404;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location / {</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection "upgrade";</span><br><span class="line">        proxy_pass http://127.0.0.1:$node_port$request_uri;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location = /development.js {</span><br><span class="line">        deny all;</span><br><span class="line">    }</span><br><span class="line">    location = /testing.js {</span><br><span class="line">        deny all;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location = /production.js {</span><br><span class="line">        deny all;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="é…ç½®https"><a href="#é…ç½®https" class="headerlink" title="é…ç½®https"></a>é…ç½®https</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">server{</span><br><span class="line">    listen 443;</span><br><span class="line">    server_name hwy.ac.cn www.hwy.ac.cn;</span><br><span class="line">    root /root/firekylin;</span><br><span class="line">    set $node_port æ­¤å¤„æ›¿æ¢ä¸ºé¡¹ç›®ç«¯å£å·;</span><br><span class="line"></span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate  /xxx/xxx/xxx.crt;</span><br><span class="line">    ssl_certificate_key /xxx/xxx/xxx.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA;</span><br><span class="line">    ssl_session_cache shared:SSL:50m;</span><br><span class="line">    ssl_dhparam %path/ssl/dhparams.pem;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    index index.js index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location ^~ /.well-known/acme-challenge/ {</span><br><span class="line">      alias /root/firekylin/ssl/challenges/;</span><br><span class="line">      try_files $uri = 404;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">   location / {</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection "upgrade";</span><br><span class="line">        proxy_pass http://127.0.0.1:$node_port$request_uri;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location = /development.js {</span><br><span class="line">        deny all;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location = /testing.js {</span><br><span class="line">        deny all;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    location = /production.js {</span><br><span class="line">        deny all;</span><br><span class="line">   }</span><br><span class="line">}</span><br><span class="line">server {</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name hwy.ac.cn www.hwy.ac.cn;</span><br><span class="line">    rewrite ^(.*) https://hwy.ac.cn$1 permanent;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>å…¶ä»–é¡¹ç›®å¯ä»¥å‚è€ƒé…ç½®ï¼Œå¤§éƒ¨åˆ†é…ç½®æ˜¯ä¸€æ ·çš„ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxåå‘ä»£ç†æœ¬åœ°ç›®å½•</title>
      <link href="/2018/08/24/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95/"/>
      <url>/2018/08/24/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server {</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.avenger.com;    //åœ¨hostä¸­æŠŠè¿™ä¸ªåœ°å€è®¾ç½®ä¸º127.0.0.1</span><br><span class="line">    index index.html index.htm;</span><br><span class="line"></span><br><span class="line">    autoindex on;</span><br><span class="line">    autoindex_exact_size on;</span><br><span class="line">    autoindex_localtime on;</span><br><span class="line"></span><br><span class="line">    location / {</span><br><span class="line">        root D:/work/code/fed-static;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºSpring Boot 2.x çš„solr-7.3.1ä½¿ç”¨</title>
      <link href="/2018/08/21/%E5%9F%BA%E4%BA%8ESpring%20Boot%202.x%20%E7%9A%84solr-7.3.1%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/08/21/%E5%9F%BA%E4%BA%8ESpring%20Boot%202.x%20%E7%9A%84solr-7.3.1%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>ä¸‹è½½å®‰è£…Apache Solr 7.3.1<br>ä¸‹è½½åœ°å€ï¼š<a href="http://archive.apache.org/dist/lucene/solr/7.3.1/" target="_blank" rel="noopener">http://archive.apache.org/dist/lucene/solr/7.3.1/</a></p><a id="more"></a><h1 id="spring-boot-solr"><a href="#spring-boot-solr" class="headerlink" title="spring-boot-solr"></a>spring-boot-solr</h1><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä¸‹è½½å®‰è£…Apache Solr 7.3.1<br>ä¸‹è½½åœ°å€ï¼š<a href="http://archive.apache.org/dist/lucene/solr/7.3.1/" target="_blank" rel="noopener">http://archive.apache.org/dist/lucene/solr/7.3.1/</a><br><a href="https://i.imgur.com/wq4835Z.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/wq4835Z.png" class="lazyload" title></a><br>è§£å‹åï¼Œåœ¨binæ–‡ä»¶å¤¹ä¸‹ç¼–å†™ä¸€ä¸ªåä¸º å¯åŠ¨.batçš„å¯åŠ¨æ–‡ä»¶ï¼ŒæŠŠä¸€ä¸‹å‘½ä»¤ç²˜è´´è¿›å»</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solr.cmd start -p 8888</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/MGahKjM.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/MGahKjM.png" class="lazyload" title></a></p><p>åˆ°è¿™é‡Œä¸€èˆ¬åŒå‡»å°±å¯ä»¥å¯åŠ¨äº†<br><a href="https://i.imgur.com/9RP8mxS.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/9RP8mxS.png" class="lazyload" title></a></p><p>è®¿é—®<a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a><br><a href="https://i.imgur.com/9Ojl3sx.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/9Ojl3sx.png" class="lazyload" title></a></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªcoreç”¨äºå­˜å‚¨æˆ‘ä»¬çš„æ•°æ®<br><a href="https://i.imgur.com/1pOoWaG.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/1pOoWaG.png" class="lazyload" title></a><br>æˆ‘ä»¬ä¼šå‘ç°æ— å‘åˆ›å»ºcore</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">solr-7.3.1/server/solr/configsets/_default/</span><br><span class="line">æ­¤æ—¶æˆ‘ä»¬éœ€è¦æ‹·è´ä»¥ä¸Šè·¯å¾„ä¸‹çš„confæ–‡ä»¶å¤¹åˆ°ä»¥ä¸‹è·¯å¾„ä¸­</span><br><span class="line">solr-7.3.1/server/solr/baike_core</span><br></pre></td></tr></tbody></table></figure></div><p>å…³é—­å‘½ä»¤çª—å£ã€‚é‡æ–°åŒå‡»å¯åŠ¨ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºè¿™ä¸ªcoreäº†<br><a href="https://i.imgur.com/fQ2kwLt.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/fQ2kwLt.png" class="lazyload" title></a></p><p>æˆ‘ä»¬å…³é—­å‘½ä»¤çª—å£ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜éœ€è¦é…ç½®ä¸€ä¸‹ä¸­æ–‡åˆ†è¯å™¨ï¼Œæ²¡åˆ†è¯ä¹‹å‰<br><a href="https://i.imgur.com/jasGf5k.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/jasGf5k.png" class="lazyload" title></a></p><p>ä¸ºäº†æ–¹ä¾¿ä¸­æ–‡åˆ†è¯ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ik-analyzeråˆ†è¯å™¨<br>ä¸‹è½½åœ°å€ï¼š<a href="http://central.maven.org/maven2/com/github/magese/ik-analyzer/7.4.0/ik-analyzer-7.4.0.jar" target="_blank" rel="noopener">http://central.maven.org/maven2/com/github/magese/ik-analyzer/7.4.0/ik-analyzer-7.4.0.jar</a><br>æŠŠä¸‹è½½çš„jaråŒ…å¤åˆ¶åˆ°ä»¥ä¸‹è·¯å¾„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solr-7.3.1/server/solr-webapp/webapp/WEB-INF/lib</span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/1KUcb5T.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/1KUcb5T.png" class="lazyload" title></a></p><p>ç„¶ååˆ°ä»¥ä¸‹ç›®å½•ä¸­æ‰“å¼€managed-schemaæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solr-7.3.1/server/solr/baike_core/conf</span><br></pre></td></tr></tbody></table></figure></div><p>åœ¨åé¢åŠ ä¸Šä»¥ä¸‹é…ç½®ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><!-- ikåˆ†è¯å™¨ --></span><br><span class="line"><fieldtype name="text_ik" class="solr.TextField"></fieldtype></span><br><span class="line">  <analyzer type="index"></analyzer></span><br><span class="line">      <tokenizer class="org.wltea.analyzer.lucene.IKTokenizerFactory" usesmart="false" conf="ik.conf"></tokenizer></span><br><span class="line">      <filter class="solr.LowerCaseFilterFactory"></filter></span><br><span class="line">  </span><br><span class="line">  <analyzer type="query"></analyzer></span><br><span class="line">      <tokenizer class="org.wltea.analyzer.lucene.IKTokenizerFactory" usesmart="true" conf="ik.conf"></tokenizer></span><br><span class="line">      <filter class="solr.LowerCaseFilterFactory"></filter></span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://i.imgur.com/7rYbKKl.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/7rYbKKl.png" class="lazyload" title></a></p><p>æˆ‘ä»¬é‡æ–°å¯åŠ¨solrï¼Œå†åˆ†è¯æµ‹è¯•<br><a href="https://i.imgur.com/d8yr3ys.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/d8yr3ys.png" class="lazyload" title></a></p><p>å¥½äº†æ¥ä¸‹æ¥å°±æ˜¯å†™æµ‹è¯•ä»£ç äº†,è¿è¡Œæ•ˆæœï¼š<br><a href="https://i.imgur.com/uG9F7Aa.jpg" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://i.imgur.com/uG9F7Aa.jpg" class="lazyload" title></a></p><p>ä»£ç ï¼š<a href="https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-solr" target="_blank" rel="noopener">https://github.com/HWYWL/spring-boot-2.x-examples/tree/master/spring-boot-solr</a></p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://www.hwy.ac.cn" target="_blank" rel="noopener">http://www.hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://github.com/HWYWL" target="_blank" rel="noopener">https://github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> æœç´¢å¼•æ“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Solr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockerå®‰è£…RabbitMQ</title>
      <link href="/2018/08/18/%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85RabbitMQ/"/>
      <url>/2018/08/18/%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85RabbitMQ/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>è·å–rabbité•œåƒï¼š<br>docker pull rabbitmq:management</p><a id="more"></a><p>è·å–rabbité•œåƒï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">docker pull rabbitmq:management</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ï¼š</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">docker run -d --hostname my-rabbit --name rabbit -p <span class="number">8080</span>:<span class="number">15672</span> rabbitmq:management  </span><br><span class="line">--hostnameï¼šæŒ‡å®šå®¹å™¨ä¸»æœºåç§°  </span><br><span class="line">--name:æŒ‡å®šå®¹å™¨åç§°  </span><br><span class="line">-p:å°†mqç«¯å£å·æ˜ å°„åˆ°æœ¬åœ°  </span><br><span class="line"></span><br><span class="line">æˆ–åœ¨è¿è¡Œæ—¶è®¾ç½®ç”¨æˆ·å’Œå¯†ç </span><br><span class="line">docker run -d --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin -p <span class="number">15672</span>:<span class="number">15672</span> -p <span class="number">5672</span>:<span class="number">5672</span> -p <span class="number">25672</span>:<span class="number">25672</span> -p <span class="number">61613</span>:<span class="number">61613</span> -p <span class="number">1883</span>:<span class="number">1883</span> rabbitmq:management</span><br><span class="line"></span><br><span class="line"><span class="number">15672</span>ï¼šæ§åˆ¶å°ç«¯å£å·</span><br><span class="line"></span><br><span class="line"><span class="number">5672</span>ï¼šåº”ç”¨è®¿é—®ç«¯å£å·</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æŸ¥çœ‹rabbitè¿è¡ŒçŠ¶å†µï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">![](https://images2017.cnblogs.com/blog/1081448/201710/1081448-20171027152847117-1098449262.png)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">å®¹å™¨è¿è¡Œæ­£å¸¸ï¼Œä½¿ç”¨http:<span class="comment">//192.168.99.100:15672è®¿é—®RabbitMQæ§åˆ¶å°</span></span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> æ¶ˆæ¯é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx ç®€æ˜æ•™ç¨‹</title>
      <link href="/2018/08/15/Nginx%20%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/"/>
      <url>/2018/08/15/Nginx%20%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>NGINX æ˜¯ä¸€æ¬¾æ¥è‡ªä¿„ç½—æ–¯çš„HTTP å’Œåå‘ä»£ç†ï¼ˆreverse proxyï¼‰æœåŠ¡å™¨ã€é‚®ä»¶æœåŠ¡å™¨ï¼Œä»¥åŠé€šç”¨çš„ TCP/UDP ä»£ç†æœåŠ¡å™¨ï¼Œä»¥å…¶é«˜æ€§èƒ½è¢«ä¸šç•Œå¹¿æ³›é‡‡ç”¨ã€‚æœ¬æ–‡é€šè¿‡æœ€ç®€æ´çš„æ–¹å¼ï¼Œå°† NGINX æ ¸å¿ƒåº”ç”¨åšä¸‹ä»‹ç»ã€‚</p><a id="more"></a><p>NGINX æ˜¯ä¸€æ¬¾æ¥è‡ªä¿„ç½—æ–¯çš„HTTP å’Œåå‘ä»£ç†ï¼ˆreverse proxyï¼‰æœåŠ¡å™¨ã€é‚®ä»¶æœåŠ¡å™¨ï¼Œä»¥åŠé€šç”¨çš„ TCP/UDP ä»£ç†æœåŠ¡å™¨ï¼Œä»¥å…¶é«˜æ€§èƒ½è¢«ä¸šç•Œå¹¿æ³›é‡‡ç”¨ã€‚æœ¬æ–‡é€šè¿‡æœ€ç®€æ´çš„æ–¹å¼ï¼Œå°† NGINX æ ¸å¿ƒåº”ç”¨åšä¸‹ä»‹ç»ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-NGINX"><a href="#ä»€ä¹ˆæ˜¯-NGINX" class="headerlink" title="ä»€ä¹ˆæ˜¯ NGINX"></a>ä»€ä¹ˆæ˜¯ NGINX</h2><p>NGINXæ˜¯ä¸€ä¸ªå…è´¹çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„ HTTP æœåŠ¡å™¨å’Œåå‘ä»£ç†ï¼Œä»¥åŠä¸€ä¸ª IMAP/POP3 ä»£ç†æœåŠ¡å™¨ã€‚ NGINXä»¥å…¶é«˜æ€§èƒ½ã€ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç®€å•çš„é…ç½®å’Œä½èµ„æºæ¶ˆè€—è€Œé—»åã€‚</p><p>NGINX æ˜¯ä¸ºè§£å†³<a href="http://www.kegel.com/c10k.html" target="_blank" rel="noopener">C10K</a> é—®é¢˜è€Œç¼–å†™çš„å°‘æ•°æœåŠ¡å™¨ä¹‹ä¸€ã€‚ä¸ä¼ ç»ŸæœåŠ¡å™¨ä¸åŒï¼ŒNGINX ä¸ä¾èµ–äºçº¿ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚ç›¸åï¼Œå®ƒä½¿ç”¨æ›´åŠ å¯æ‰©å±•çš„äº‹ä»¶é©±åŠ¨ï¼ˆå¼‚æ­¥ï¼‰æ¶æ„ã€‚è¿™ç§æ¶æ„åœ¨è´Ÿè½½ä¸‹ä½¿ç”¨å°çš„ä½†æ›´é‡è¦çš„æ˜¯å¯é¢„æµ‹çš„å†…å­˜é‡ã€‚å³ä½¿æ‚¨ä¸å¸Œæœ›å¤„ç†æ•°åƒä¸ªå¹¶å‘è¯·æ±‚ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä» NGINX çš„é«˜æ€§èƒ½å’Œå°å†…å­˜ä¸­è·ç›Šã€‚ NGINX åœ¨å„ä¸ªæ–¹å‘æ‰©å±•ï¼šä»æœ€å°çš„ VPS ä¸€ç›´åˆ°å¤§å‹æœåŠ¡å™¨é›†ç¾¤ã€‚</p><h2 id="æ§åˆ¶è¯­å¥"><a href="#æ§åˆ¶è¯­å¥" class="headerlink" title="æ§åˆ¶è¯­å¥"></a>æ§åˆ¶è¯­å¥</h2><p>NGINX å¯åŠ¨åï¼Œæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹ï¼ˆmaster processï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼ˆworker processï¼‰ï¼Œä¸»è¿›ç¨‹çš„ä½œç”¨ä¸»è¦æ˜¯è¯»å…¥å’Œæ£€æŸ¥NGINXçš„é…ç½®ä¿¡æ¯ï¼Œä»¥åŠç»´æŠ¤å·¥ä½œè¿›ç¨‹ï¼›å·¥ä½œè¿›ç¨‹æ‰æ˜¯çœŸæ­£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„è¿›ç¨‹ã€‚å…·ä½“è¦å¯åŠ¨å¤šå°‘ä¸ªå·¥ä½œè¿›ç¨‹ï¼Œå¯ä»¥åœ¨ NGINX çš„é…ç½®æ–‡ä»¶<code>nginx.conf</code>ä¸­é€šè¿‡<code>worker_processes</code>æŒ‡ä»¤æŒ‡å®šã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹è¿™äº›å‘½ä»¤æ¥æ§åˆ¶ NGINXï¼š</p><pre><code class="js">nginx -s [ stop | quit | reopen | reload ]</code></pre><p>å…¶ä¸­ï¼š</p><ul><li><code>nginx -s stop</code>ï¼š å¼ºåˆ¶åœæ­¢NGINXï¼Œä¸ç®¡å·¥ä½œè¿›ç¨‹å½“å‰æ˜¯å¦æ­£åœ¨å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œéƒ½ä¼šç«‹å³é€€å‡ºã€‚</li><li><code>nginx -s quit</code>ï¼šâ€œä¼˜é›…åœ°â€é€€å‡ºNGINXï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œå·¥ä½œè¿›ç¨‹ä¼šå°†å½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚å¤„ç†å®Œæ¯•åï¼Œå†é€€å‡ºã€‚</li><li><code>nginx -s reload</code>ï¼šé‡è½½é…ç½®ä¿¡æ¯ã€‚å½“NGINXçš„é…ç½®æ–‡ä»¶æ”¹å˜ä¹‹åï¼ŒåŒè¿‡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä½¿æ›´æ”¹çš„é…ç½®ä¿¡æ¯ç”Ÿæ•ˆï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨nginx.</li><li><code>nginx -s reopen</code>ï¼šé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ã€‚</li></ul><h2 id="é…ç½®æœåŠ¡å™¨åç§°"><a href="#é…ç½®æœåŠ¡å™¨åç§°" class="headerlink" title="é…ç½®æœåŠ¡å™¨åç§°"></a>é…ç½®æœåŠ¡å™¨åç§°</h2><p>æœåŠ¡å™¨åç§°æ˜¯ç”¨<code>server_name</code>æŒ‡ä»¤æ¥å®šä¹‰çš„ï¼Œå¹¶ä¸”å®ƒå†³å®šäº†å“ªä¸€ä¸ª<code>server</code>å—å°†ç”¨æ¥å¤„ç†ç»™å®šçš„è¯·æ±‚ã€‚å¯ä»¥ä½¿ç”¨ç²¾ç¡®åç§°ã€é€šé…ç¬¦ã€æ­£åˆ™è¡¨è¾¾å¼æ¥å®šä¹‰æœåŠ¡å™¨åç§°ã€‚</p><pre><code class="js">server {    listen <span class="number">80</span>;    server_name example.org www.example.org;    ...  }  server {    listen <span class="number">80</span>;    server_name _.example.org;    ...  }  server {    listen <span class="number">80</span>;    server_name mail._;    ...  }  server {    listen <span class="number">80</span>;    server_name ~^(?<span class="xml"><span class="tag"><<span class="name">user</span>></span>.+).example.net$;  </span><span class="xml">  ...  </span><span class="xml">}</span></code></pre><p>å½“å¯»æ‰¾ä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨çš„åå­—ï¼Œå¦‚æœæŒ‡å®šçš„åç§°åŒ¹é…å¤šä¸ªå˜ä½“ï¼Œä¾‹å¦‚ï¼Œé€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼éƒ½åŒ¹é…ï¼Œå°†ä¼šæŒ‰ç…§ä»¥ä¸‹çš„é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªåŒ¹é…çš„å˜ä½“ï¼š</p><ul><li>ç²¾ç¡®åç§°</li><li>ä»¥æ˜Ÿå·ï¼ˆ<em>ï¼‰å¼€å¤´çš„æœ€é•¿çš„é€šé…ç¬¦ï¼Œä¾‹å¦‚â€œ</em>.example.orgâ€</li><li>ä»¥æ˜Ÿå·ï¼ˆ_ï¼‰ç»“å°¾çš„æœ€é•¿çš„é€šé…ç¬¦ï¼Œä¾‹å¦‚â€œmail._â€</li><li>ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ ¹æ®åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼‰</li></ul><h2 id="é…ç½®-HTTPS-æœåŠ¡å™¨"><a href="#é…ç½®-HTTPS-æœåŠ¡å™¨" class="headerlink" title="é…ç½® HTTPS æœåŠ¡å™¨"></a>é…ç½® HTTPS æœåŠ¡å™¨</h2><p>ä¿®æ”¹ <code>conf/nginx.conf</code> æ–‡ä»¶ï¼Œå¿…é¡»åœ¨é…ç½®æ–‡ä»¶ server å—ä¸­çš„ç›‘å¬æŒ‡ä»¤ listen åå¯ç”¨ ssl å‚æ•°ï¼Œå¹¶ä¸”æŒ‡å®šæœåŠ¡å™¨è¯ä¹¦ <code>ssl_certificate</code> å’Œç§é’¥ <code>ssl_certificate_key</code> çš„ä½ç½®ï¼š</p><pre><code class="js">server {    listen <span class="number">443</span> ssl;    server_name www.example.com;    ssl_certificate www.example.com.crt;    ssl_certificate_key www.example.com.key;    ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;    ssl_ciphers HIGH:!aNULL:!MD5;    ...  }</code></pre><p>æœåŠ¡å™¨è¯ä¹¦æ˜¯ä¸€ä¸ªå…¬å…±å®ä½“ï¼Œå®ƒè¢«å‘é€ç»™è¿æ¥åˆ°æœåŠ¡å™¨çš„æ¯ä¸€ä¸ªå®¢æˆ·æœºã€‚ç§é’¥æ˜¯ä¸€ä¸ªå®‰å…¨å®ä½“ï¼Œåº”è¯¥å­˜å‚¨åœ¨å…·æœ‰å—é™è®¿é—®çš„æ–‡ä»¶ä¸­ï¼Œä½†å®ƒå¿…é¡»å¯è¢«nginxä¸»è¿›ç¨‹è¯»å–ã€‚ç§é’¥ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ä¸æœåŠ¡å™¨è¯ä¹¦ç›¸åŒçš„æ–‡ä»¶ä¸­ï¼š</p><pre><code class="js">ssl_certificate www.example.com.cert;  ssl_certificate_key www.example.com.cert;</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¯ä¹¦æ–‡ä»¶çš„è®¿é—®æƒé™ä¹Ÿåº”å—åˆ°é™åˆ¶ã€‚è™½ç„¶è¯ä¹¦å’Œå¯†é’¥å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†åªæœ‰è¯ä¹¦è¢«å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p><p>æŒ‡ä»¤ <code>ssl_protocols</code> å’Œ <code>ssl_ciphers</code> å¯ç”¨äºé™åˆ¶ä»…åŒ…æ‹¬å¼ºç‰ˆæœ¬å’Œå¯†ç çš„ SSL/TLS è¿æ¥ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINX ä½¿ ç”¨<code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2</code>ç‰ˆæœ¬å’Œ<code>ssl_ciphers HIGH:!aNULL:!MD5</code>å¯†ç ï¼Œå› æ­¤é€šå¸¸ä¸éœ€è¦æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æŒ‡ä»¤çš„é»˜è®¤å€¼åœ¨ä¸åŒçš„ç‰ˆæœ¬é‡Œé¢å·²ç»å˜æ›´å¥½å‡ æ¬¡äº†ã€‚</p><h2 id="ä½œä¸º-HTTP-è´Ÿè½½å‡è¡¡å™¨"><a href="#ä½œä¸º-HTTP-è´Ÿè½½å‡è¡¡å™¨" class="headerlink" title="ä½œä¸º HTTP è´Ÿè½½å‡è¡¡å™¨"></a>ä½œä¸º HTTP è´Ÿè½½å‡è¡¡å™¨</h2><p>è·¨å¤šä¸ªåº”ç”¨ç¨‹åºå®ä¾‹çš„è´Ÿè½½å‡è¡¡æ˜¯ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œæœ€å¤§é™åº¦åœ°æé«˜ååé‡ï¼Œé™ä½å»¶è¿Ÿï¼Œå¹¶ç¡®ä¿å®¹é”™é…ç½®ä¸€ä¸ªå¸¸ç”¨çš„æŠ€æœ¯ã€‚</p><p>NGINX æ”¯æŒå¦‚ä¸‹è´Ÿè½½å‡è¡¡çš„æœºåˆ¶ï¼ˆæˆ–æ–¹æ³•ï¼‰ï¼š</p><h3 id="1-è½®è¯¢"><a href="#1-è½®è¯¢" class="headerlink" title="1. è½®è¯¢"></a>1. è½®è¯¢</h3><p>å¦‚æœæ²¡æœ‰æŒ‡å®šè´Ÿè½½å‡è¡¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆ NGINX é»˜è®¤é‡‡ç”¨çš„æ˜¯è½®è¯¢çš„æ–¹å¼ã€‚æœ€ç®€å•çš„è´Ÿè½½å‡è¡¡é…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="js">http {    upstream myapp1 {      server srv1.example.com;      server srv2.example.com;      server srv3.example.com;    }    server {      listen <span class="number">80</span>;      location / {        proxy_pass [http:<span class="comment">//myapp1](http://myapp1);  </span>    }    }  }</code></pre><p>3ä¸ªåŒæ ·å®ä¾‹çš„åº”ç”¨ï¼ˆsrv1-srv3ï¼‰æ˜¯é‡‡ç”¨è½®è¯¢æ–¹å¼ã€‚æ‰€æœ‰è¯·æ±‚è¢«ä»£ç†åˆ°ä¸€ç»„æœåŠ¡<code>myapp1</code>ï¼ŒåŒæ—¶ï¼ŒNGINX è¿ç”¨ HTTP è´Ÿè½½å‡è¡¡æ¥åˆ†å‘è¯·æ±‚ã€‚</p><p>åå‘ä»£ç†è¢«åº”ç”¨åœ¨ NGINX å†…ï¼ŒåŒ…æ‹¬è´Ÿè½½å‡è¡¡é’ˆå¯¹ HTTPã€HTTPSã€FASTCGIã€uwsgiã€SCGI ä»¥åŠ memcachedã€‚</p><p>é…ç½®è´Ÿè½½å‡è¡¡é’ˆå¯¹ HTTPS æ›¿ä»£ HTTP çš„è¯ï¼Œä»…ä»…ä½¿ç”¨ https åè®®å³å¯ï¼ˆproxy_pass <a href="https://myapp1ï¼‰ã€‚" target="_blank" rel="noopener">https://myapp1ï¼‰ã€‚</a></p><p>åœ¨ä¸º FASTCGIã€uwsgiã€SCGI æˆ– memcached è®¾ç½®è´Ÿè½½å‡è¡¡æ—¶ï¼Œåˆ†åˆ«ä½¿ç”¨ fastcgi_passã€uwsgi_passã€scgi_pass å’Œ memcached_pass æŒ‡ä»¤ã€‚</p><h3 id="2-æœ€å°‘è¿æ¥"><a href="#2-æœ€å°‘è¿æ¥" class="headerlink" title="2. æœ€å°‘è¿æ¥"></a>2. æœ€å°‘è¿æ¥</h3><p>åœ¨ä¸€äº›è¯·æ±‚éœ€è¦æ›´é•¿æ—¶é—´æ‰èƒ½å®Œæˆçš„æƒ…å†µä¸‹ï¼Œæœ€å°‘è¿æ¥å¯ä»¥æ›´å…¬æ­£åœ°æ§åˆ¶åº”ç”¨ç¨‹åºå®ä¾‹çš„è´Ÿè½½ã€‚</p><p>ä½¿ç”¨æœ€å°‘è¿æ¥çš„è´Ÿè½½å¹³è¡¡ï¼ŒNGINX å°†ä¸ä¼šåŠ é‡ä¸€ä¸ªæœ‰è¿‡å¤šè¯·æ±‚çš„åº”ç”¨æœåŠ¡è´Ÿæ‹…ï¼Œè€Œæ˜¯å°†å®ƒåˆ†å‘æ–°çš„è¯·æ±‚ç»™æœ€ä¸ç¹å¿™çš„æœåŠ¡å™¨ã€‚</p><p>åœ¨ NGINX ä¸­éœ€è¦é€šè¿‡è®¾ç½®<code>least_conn</code>æ¥æ¿€æ´»æœ€å°‘è¿æ¥çš„è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®ï¼š</p><pre><code class="js">upstream myapp1 {    least_conn;    server srv1.example.com;    server srv2.example.com;    server srv3.example.com;  }</code></pre><h3 id="3-IP-å“ˆå¸Œï¼ˆä¼šè¯æŒä¹…ï¼‰"><a href="#3-IP-å“ˆå¸Œï¼ˆä¼šè¯æŒä¹…ï¼‰" class="headerlink" title="3. IP å“ˆå¸Œï¼ˆä¼šè¯æŒä¹…ï¼‰"></a>3. IP å“ˆå¸Œï¼ˆä¼šè¯æŒä¹…ï¼‰</h3><p>æ³¨æ„ï¼Œé‡‡ç”¨è½®è¯¢æˆ–è€…æœ€å°‘è¿æ¥çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯çš„åç»­è¯·æ±‚å¯èƒ½è¢«åˆ†é…å¸¦ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¸èƒ½ä¿è¯åŒä¸€ä¸ªå®¢æˆ·ç«¯æ€»æ˜¯æŒ‡å‘åŒä¸€ä¸ªæœåŠ¡ã€‚å¦‚æœéœ€è¦å‘Šè¯‰å®¢æˆ·ç«¯åˆ†é…åˆ°ä¸€ä¸ªç‰¹å®šçš„åº”ç”¨æœåŠ¡ï¼Œæ¢å¥è¯ï¼Œå°±æ˜¯ä¿æŒå®¢æˆ·ç«¯çš„ä¼šè¯ç²˜æ€§ï¼ˆstickyï¼‰æˆ–è€…ä¼šè¯æŒä¹…æ€§ï¼ˆpersitentï¼‰ï¼Œå³æ€»æ˜¯å°è¯•é€‰ç€åŒä¸€ä¸ªç‰¹å®šçš„æœåŠ¡å™¨ï¼ŒIP å“ˆå¸Œ è´Ÿè½½å‡è¡¡æœºåˆ¶å¯ä»¥è¢«ä½¿ç”¨ã€‚</p><p>é‡‡ç”¨ IP å“ˆå¸Œçš„ç­–ç•¥ï¼Œå®¢æˆ·ç«¯çš„ IP åœ°å€è¢«ç”¨ä½œä¸€ä¸ªå“ˆå¸Œ keyï¼Œå†³å®šå“ªä¸ªæœåŠ¡åº”è¯¥è¢«é€‰ä¸­æ¥æœåŠ¡å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚è¿™ç§æ–¹å¼ï¼Œç¡®ä¿äº†åŒä¸€ä¸ªå®¢æˆ·ç«¯æ¥çš„è¯·æ±‚å°†æ€»æ˜¯è¢«æŒ‡å‘åŒä¸€ä¸ªæœåŠ¡ï¼Œé™¤éè¿™ä¸ªæœåŠ¡ä¸å¯ç”¨äº†ã€‚</p><p>é…ç½®IP å“ˆå¸Œè´Ÿè½½å‡è¡¡ï¼Œåªéœ€è¦é€šè¿‡è®¾ç½®<code>ip_hash</code>æ¥æ¿€æ´»ï¼š</p><pre><code class="js">upstream myapp1 {    ip_hash;    server srv1.example.com;    server srv2.example.com;    server srv3.example.com;  }</code></pre><h3 id="æƒé‡ï¼ˆweightï¼‰"><a href="#æƒé‡ï¼ˆweightï¼‰" class="headerlink" title="æƒé‡ï¼ˆweightï¼‰"></a>æƒé‡ï¼ˆweightï¼‰</h3><p>å¯ä»¥é€šè¿‡ä½¿ç”¨æœåŠ¡å™¨çš„æƒé‡æ¥å½±å“ NGINX çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåœ¨ä¸Šè¿°è½®è¯¢ã€æœ€å°‘è¯·æ±‚ã€åŸºäºIP å“ˆå¸Œè´Ÿè½½å‡è¡¡é…ç½®ä¸­ï¼ŒæœåŠ¡å™¨çš„æƒé‡æ²¡æœ‰é…ç½®ï¼Œæ„å‘³ç€æ‰€æœ‰æœåŠ¡å™¨çš„æƒé‡éƒ½æ˜¯ä¸€æ ·çš„ã€‚ç‰¹åˆ«æ˜¯è½®è¯¢ï¼Œå®ƒæ„å‘³ç€æˆ–å¤šæˆ–å°‘å¹³ç­‰çš„åˆ†å‘è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ˆè¯·æ±‚å¤Ÿå¤šï¼Œå¹¶ä¸”è¯·æ±‚ä»¥å‡åŒ€æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå¹¶å®Œæˆå¤Ÿå¿«ï¼‰</p><p>å½“é…ç½®äº†ä¸€ä¸ª weight å˜é‡åˆ°ä¸€ä¸ªæŒ‡å®šçš„æœåŠ¡åï¼Œæƒé‡è¢«ä½œä¸ºä¸€ä¸ª NGINX çš„è´Ÿè½½å‡è¡¡çš„å†³å®šçš„ä¸€éƒ¨åˆ†ï¼š</p><pre><code class="js">upstream myapp1 {    server srv1.example.com weight=<span class="number">3</span>;    server srv2.example.com;    server srv3.example.com;  }</code></pre><p>é‡‡ç”¨ä¸Šé¢çš„é…ç½®ï¼Œå¦‚æœæ¥äº†5ä¸ªè¯·æ±‚ï¼Œ3ä¸ªåˆ°srv1ï¼Œ1ä¸ªåˆ°srv2,1ä¸ªåˆ°srv3ã€‚åœ¨æœ€è¿‘çš„NGINXç‰ˆæœ¬ä¸­ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨æƒé‡é’ˆå¯¹æœ€å°‘è¿æ¥å’ŒIP å“ˆå¸Œçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><h3 id="å¥åº·ç›‘æµ‹"><a href="#å¥åº·ç›‘æµ‹" class="headerlink" title="å¥åº·ç›‘æµ‹"></a>å¥åº·ç›‘æµ‹</h3><p>åå‘ä»£ç†åœ¨ NGINX ä¸­å®ç°äº†è¢«åŠ¨çš„å¥åº·ç›‘æµ‹ï¼Œå¦‚æœå“åº”ä»ä¸€ä¸ªç‰¹å®šçš„æœåŠ¡å™¨å¤±è´¥ï¼Œæºå¸¦ç€é”™è¯¯ï¼ŒNGINX å°†æ ‡è®°è¿™ä¸ªæœåŠ¡å™¨æ˜¯å¤±è´¥çš„ï¼Œå¹¶å°†å°è¯•ä¸€æ®µæ—¶é—´é¿å…é€‰æ‹©è¿™ä¸ªæœåŠ¡å™¨ä½œä¸ºåç»­è¯·æ±‚çš„æœåŠ¡å™¨ã€‚</p><p><code>fail_timeout</code> å’Œ <code>max_fails</code> ç”¨äºè®¾å®šæŒ‡å®šæ—¶é—´å†…ï¼Œåº”è¯¥å‘ç”Ÿè¿ç»­ä¸æˆåŠŸçš„æ•°ç›®ã€‚é»˜è®¤<code>max_fail</code>ç­‰äº1ï¼Œå¦‚æœè®¾ç½®æˆ0ï¼Œç›¸å½“äºå…³é—­è¿™ä¸ªæœåŠ¡å™¨çš„å¥åº·ç›‘æµ‹ã€‚<code>fail_timeout</code>å‚æ•°ï¼Œå®šä¹‰å¤šä¹…æœåŠ¡å™¨è¢«æ ‡è¯†å¤±è´¥ã€‚è¿‡äº†æœåŠ¡å™¨<code>fail_timeout</code>å¤±è´¥è¶…æ—¶é—´éš”åï¼ŒNGINX å°†å¼€å§‹æ¢æµ‹å­˜æ´»çš„å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æœæ¢æµ‹æˆåŠŸï¼ŒæœåŠ¡è¢«æ ‡è¯†æˆå­˜æ´»çŠ¶æ€ã€‚</p><h2 id="å‹ç¼©ä¸è§£å‹"><a href="#å‹ç¼©ä¸è§£å‹" class="headerlink" title="å‹ç¼©ä¸è§£å‹"></a>å‹ç¼©ä¸è§£å‹</h2><p>å‹ç¼©å“åº”é€šå¸¸ä¼šæ˜¾ç€å‡å°‘ä¼ è¾“æ•°æ®çš„å¤§å°ã€‚ ç„¶è€Œï¼Œç”±äºå‹ç¼©åœ¨è¿è¡Œæ—¶å‘ç”Ÿï¼Œæ‰€ä»¥ä¼šå¢åŠ å¤„ç†å¼€é”€ï¼Œè¿™å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p><p>åœ¨å‘å®¢æˆ·ç«¯å‘é€å“åº”ä¹‹å‰ï¼ŒNGINX ä¼šæ‰§è¡Œå‹ç¼©ï¼Œä½†ä¸ä¼šâ€œé‡å¤å‹ç¼©â€å·²ç»å‹ç¼©è¿‡çš„å“åº”ã€‚</p><h3 id="å¯ç”¨å‹ç¼©"><a href="#å¯ç”¨å‹ç¼©" class="headerlink" title="å¯ç”¨å‹ç¼©"></a>å¯ç”¨å‹ç¼©</h3><p>è¦å¯ç”¨å‹ç¼©ï¼Œåœ¨ gzip æŒ‡ä»¤ä¸Šè¯·ä½¿ç”¨<code>on</code>å‚æ•°:</p><pre><code class="js">gzip on;</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINX ä»…å‹ç¼©ä½¿ç”¨MIME ç±»å‹ ä¸º <code>text/html</code>çš„å“åº”ã€‚è¦å‹ç¼©å…¶ä»– MIME ç±»å‹çš„å“åº”ï¼Œè¯·åŒ…å«<code>gzip_types</code>æŒ‡ä»¤å¹¶åˆ—å‡ºç›¸åº”çš„ç±»å‹ã€‚</p><pre><code class="js">gzip_types text/plain application/xml;</code></pre><p>è¦æŒ‡å®šè¦å‹ç¼©çš„å“åº”çš„æœ€å°é•¿åº¦ï¼Œè¯·ä½¿ç”¨<code>gzip_min_length</code>æŒ‡ä»¤ã€‚é»˜è®¤å€¼ä¸º20å­—èŠ‚ï¼Œä¸‹é¢ç¤ºä¾‹è°ƒæ•´ä¸º1000ï¼š</p><pre><code class="js">gzip_min_length <span class="number">1000</span>;</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINX ä¸ä¼šå‹ç¼©å¯¹ä»£ç†è¯·æ±‚çš„å“åº”ï¼ˆæ¥è‡ªä»£ç†æœåŠ¡å™¨çš„è¯·æ±‚ï¼‰ã€‚è¯·æ±‚æ˜¯å¦æ¥è‡ªä»£ç†æœåŠ¡å™¨æ˜¯ç”±è¯·æ±‚ä¸­<code>Via</code>å¤´å­—æ®µçš„æ˜¯å¦å­˜æ¥ç¡®å®šçš„ã€‚è¦é…ç½®è¿™äº›å“åº”çš„å‹ç¼©ï¼Œè¯·ä½¿ç”¨<code>gzip_proxied</code>æŒ‡ä»¤ã€‚è¯¥æŒ‡ä»¤å…·æœ‰å¤šä¸ªå‚æ•°æ¥æŒ‡å®š NGINX åº”å‹ç¼©å“ªç§ä»£ç†è¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œä»…å¯¹ä¸ä¼šåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šç¼“å­˜çš„è¯·æ±‚è¿›è¡Œå‹ç¼©å“åº”ï¼Œä¸ºæ­¤ï¼Œ<code>gzip_proxied</code>æŒ‡ä»¤å…·æœ‰æŒ‡ç¤º NGINX åœ¨å“åº”ä¸­æ£€æŸ¥<code>Cache-Control</code>å¤´å­—æ®µçš„å‚æ•°ï¼Œå¦‚æœå€¼æ˜¯ no-cacheã€no-store æˆ– privateï¼Œåˆ™å‹ç¼©å“åº”ã€‚å¦å¤–ï¼Œæ‚¨å¿…é¡»åŒ…æ‹¬ expired çš„å‚æ•°æ¥æ£€æŸ¥<code>Expires</code>å¤´å­—æ®µçš„å€¼ã€‚è¿™äº›å‚æ•°åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ä¸ auth å‚æ•°ä¸€èµ·è®¾ç½®ï¼Œè¯¥å‚æ•°æ£€æŸ¥<code>Authorization</code>å¤´å­—æ®µçš„å­˜åœ¨ï¼ˆæˆæƒå“åº”ç‰¹å®šäºæœ€ç»ˆç”¨æˆ·ï¼Œå¹¶ä¸”é€šå¸¸ä¸è¢«ç¼“å­˜ï¼‰ï¼š</p><pre><code class="js">gzip_proxied no-cache no-store private expired auth;</code></pre><p>ä¸å¤§å¤šæ•°å…¶ä»–æŒ‡ä»¤ä¸€æ ·ï¼Œé…ç½®å‹ç¼©çš„æŒ‡ä»¤å¯ä»¥åŒ…å«åœ¨<code>http</code>ä¸Šä¸‹æ–‡ä¸­ï¼Œä¹Ÿå¯ä»¥åŒ…å«åœ¨ <code>server</code> æˆ– <code>location</code> å—ä¸­ã€‚</p><p>gzip å‹ç¼©çš„æ•´ä½“é…ç½®å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre><code class="js">server {    gzip on;    gzip_types text/plain application/xml;    gzip_proxied no-cache no-store private expired auth;    gzip_min_length <span class="number">1000</span>;    ...  } </code></pre><h3 id="å¯ç”¨è§£å‹"><a href="#å¯ç”¨è§£å‹" class="headerlink" title="å¯ç”¨è§£å‹"></a>å¯ç”¨è§£å‹</h3><p>æŸäº›å®¢æˆ·ç«¯ä¸æ”¯æŒä½¿ç”¨ gzip ç¼–ç æ–¹æ³•çš„å“åº”ã€‚åŒæ—¶ï¼Œå¯èƒ½éœ€è¦å­˜å‚¨å‹ç¼©æ•°æ®ï¼Œæˆ–è€…å³æ—¶å‹ç¼©å“åº”å¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚ä¸ºäº†éƒ½èƒ½æˆåŠŸåœ°æœåŠ¡äºæ¥å—æˆ–è€…ä¸æ¥å—å‹ç¼©æ•°æ®çš„å®¢æˆ·ç«¯ï¼Œé’ˆå¯¹åä¸€ç§ç±»å‹çš„å®¢æˆ·ç«¯æ—¶ï¼ŒNGINX å¯ä»¥åœ¨å°†æ•°æ®å‘é€æ—¶å³æ—¶è§£å‹ç¼©æ•°æ®ã€‚</p><p>è¦å¯ç”¨è¿è¡Œæ—¶è§£å‹ç¼©ï¼Œè¯·ä½¿ç”¨<code>gunzip</code>æŒ‡ä»¤ã€‚</p><pre><code class="js">location /storage/ {    gunzip on;    ...  }</code></pre><p><code>gunzip</code>æŒ‡ä»¤å¯ä»¥åœ¨ä¸<code>gzip</code>æŒ‡ä»¤ç›¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æŒ‡å®šï¼š</p><pre><code class="js">server {    gzip on;    gzip_min_length <span class="number">1000</span>;    gunzip on;    ...  }</code></pre><p>è¯·æ³¨æ„ï¼Œæ­¤æŒ‡ä»¤åœ¨å•ç‹¬çš„æ¨¡å—ä¸­å®šä¹‰ï¼ˆè§<code>ngx_http_gunzip_module</code><a href="https://nginx.org/en/docs/http/ngx_http_gunzip_module.html" target="_blank" rel="noopener">http://nginx.org/en/docs/http/ngx_http_gunzip_module.html</a>ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯èƒ½ä¸åŒ…å«åœ¨å¼€æº NGINX æ„å»ºä¸­ã€‚</p><h3 id="å‘é€å‹ç¼©æ–‡ä»¶"><a href="#å‘é€å‹ç¼©æ–‡ä»¶" class="headerlink" title="å‘é€å‹ç¼©æ–‡ä»¶"></a>å‘é€å‹ç¼©æ–‡ä»¶</h3><p>è¦å°†æ–‡ä»¶çš„å‹ç¼©ç‰ˆæœ¬å‘é€åˆ°å®¢æˆ·ç«¯è€Œä¸æ˜¯å¸¸è§„æ–‡ä»¶ï¼Œè¯·åœ¨é€‚å½“çš„ä¸Šä¸‹æ–‡ä¸­å°†<code>gzip_static</code>æŒ‡ä»¤è®¾ç½®ä¸º onã€‚</p><pre><code class="js">location / {    gzip_static on;  }</code></pre><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†æœåŠ¡<code>/path/to/file</code>çš„è¯·æ±‚ï¼ŒNGINX å°è¯•æŸ¥æ‰¾å¹¶å‘é€æ–‡ä»¶<code>/path/to/file.gz</code>ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–å®¢æˆ·ç«¯ä¸æ”¯æŒ gzipï¼Œåˆ™ NGINX å°†å‘é€æœªå‹ç¼©ç‰ˆæœ¬çš„æ–‡ä»¶ã€‚</p><p>è¯·æ³¨æ„ï¼Œ<code>gzip_static</code>æŒ‡ä»¤ä¸å¯ç”¨å³æ—¶å‹ç¼©ã€‚å®ƒåªæ˜¯ä½¿ç”¨å‹ç¼©å·¥å…·é¢„å…ˆå‹ç¼©çš„æ–‡ä»¶ã€‚è¦åœ¨è¿è¡Œæ—¶å‹ç¼©å†…å®¹ï¼ˆè€Œä¸ä»…ä»…æ˜¯é™æ€å†…å®¹ï¼‰ï¼Œè¯·ä½¿ç”¨<code>gzip</code>æŒ‡ä»¤ã€‚</p><p>è¯¥æŒ‡ä»¤åœ¨å•ç‹¬çš„æ¨¡å—ä¸­å®šä¹‰ï¼ˆè§<code>ngx_http_gzip_static_module</code><a href="https://nginx.org/en/docs/http/ngx_http_gzip_static_module.html" target="_blank" rel="noopener">http://nginx.org/en/docs/http/ngx_http_gzip_static_module.html</a>ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯èƒ½ä¸åŒ…å«åœ¨å¼€æºNGINXæ„å»ºä¸­ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>ã€ŠNGINX æ•™ç¨‹ã€‹:<a href="https://github.com/waylau/nginx-tutorial" target="_blank" rel="noopener">https://github.com/waylau/nginx-tutorial</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®¹å™¨åå­—å†²çªè§£å†³</title>
      <link href="/2018/08/07/Docker%E5%AE%B9%E5%99%A8%E5%90%8D%E5%AD%97%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3/"/>
      <url>/2018/08/07/Docker%E5%AE%B9%E5%99%A8%E5%90%8D%E5%AD%97%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Dockerå®¹å™¨åå­—å†²çªè§£å†³</p><a id="more"></a><p>â€“ Dockerå®¹å™¨åå­—å†²çªè§£å†³</p><pre><code class="js">docker: <span class="built_in">Error</span> response <span class="keyword">from</span> daemon: Conflict. The container name <span class="string">"/tracker"</span> is already <span class="keyword">in</span> use by container <span class="string">"73b9fc481e0316195ab89d4c4faa38c5a1012a84ce859a65488e983e9b415255"</span>. You have to remove (or rename) that container to be able to reuse that name.See <span class="string">'docker run --help'</span>.</code></pre><p>ä»¥ä¸Šæ˜¯é”™è¯¯çš„æç¤ºï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªåä¸ºtrackerçš„å®¹å™¨å†²çªäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹</p><pre><code class="js">docker ps</code></pre><p>å¦‚æœå®¹å™¨å­˜åœ¨ç›´æ¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤åœæ­¢ã€åˆ é™¤</p><pre><code class="js">docker stop iddocker rm id</code></pre><p>å¦‚æœå®¹å™¨ä¸å­˜åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹,å°±ä¼šæ‰¾åˆ°å­˜åœ¨çš„é•œåƒ</p><pre><code class="js">docker ps -a</code></pre><p>æ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨åˆ é™¤ï¼Œæˆ–è€…æŠŠä»–é‡å¯ï¼Œè®°å¾—åé¢è·Ÿä¸Šidå‚æ•°</p><pre><code class="js">docker restart & docker stop & docker start</code></pre><p>æ³¨æ„ï¼šå› ä¸ºå­˜åœ¨æ•°æ®å·çš„åŸå› ï¼Œæ‰€ä»¥ä»¥å‰çš„æ•°æ®ä¸ä¼šè¢«åˆ é™¤ï¼Œå¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„åˆ é™¤é•œåƒï¼ï¼ï¼</p></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockerå®‰è£…kafka</title>
      <link href="/2018/08/07/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85kafka/"/>
      <url>/2018/08/07/%E4%BD%BF%E7%94%A8docker%E5%AE%89%E8%A3%85kafka/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><ol><li>å¯åŠ¨zookeeperå®¹å™¨</li><li>å¯åŠ¨kafkaå®¹å™¨</li><li>æµ‹è¯•kafka</li><li>é›†ç¾¤æ­å»º</li><li>åˆ›å»ºReplicationä¸º2ï¼ŒPartitionä¸º2çš„topic</li></ol><a id="more"></a><h3 id="1-å¯åŠ¨zookeeperå®¹å™¨"><a href="#1-å¯åŠ¨zookeeperå®¹å™¨" class="headerlink" title="1. å¯åŠ¨zookeeperå®¹å™¨"></a>1. å¯åŠ¨zookeeperå®¹å™¨</h3><pre><code>docker pull wurstmeister/zookeeperdocker run -d --name zookeeper -p 2181:2181 -t wurstmeister/zookeeper</code></pre><h3 id="2-å¯åŠ¨kafkaå®¹å™¨"><a href="#2-å¯åŠ¨kafkaå®¹å™¨" class="headerlink" title="2. å¯åŠ¨kafkaå®¹å™¨"></a><a name="t1" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>2. å¯åŠ¨kafkaå®¹å™¨</h3><pre><code>docker pull wurstmeister/kafkadocker run  -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT=192.168.99.100:2181 -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.99.100:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 -t wurstmeister/kafka </code></pre><p>è¿™é‡Œé¢ä¸»è¦è®¾ç½®äº†4ä¸ªå‚æ•°</p><pre><code>KAFKA_BROKER_ID=0               KAFKA_ZOOKEEPER_CONNECT=192.168.99.100:2181KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.99.100:9092KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092</code></pre><p>ä¸­é—´ä¸¤ä¸ªå‚æ•°çš„192.168.99.100æ”¹ä¸ºå®¿ä¸»æœºå™¨çš„IPåœ°å€ï¼Œå¦‚æœä¸è¿™ä¹ˆè®¾ç½®ï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨åˆ«çš„æœºå™¨ä¸Šè®¿é—®ä¸åˆ°kafkaã€‚</p><h3 id="3-æµ‹è¯•kafka"><a href="#3-æµ‹è¯•kafka" class="headerlink" title="3. æµ‹è¯•kafka"></a><a name="t2" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>3. æµ‹è¯•kafka</h3><p>è¿›å…¥kafkaå®¹å™¨çš„å‘½ä»¤è¡Œ</p><pre><code>docker exec -ti kafka /bin/bash</code></pre><p>è¿›å…¥kafkaæ‰€åœ¨ç›®å½•</p><pre><code>cd opt/kafka_2.11-2.0.0/</code></pre><h3 id="4-é›†ç¾¤æ­å»º"><a href="#4-é›†ç¾¤æ­å»º" class="headerlink" title="4. é›†ç¾¤æ­å»º"></a><a name="t3" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>4. é›†ç¾¤æ­å»º</h3><p>ä½¿ç”¨dockerå‘½ä»¤å¯å¿«é€Ÿåœ¨åŒä¸€å°æœºå™¨æ­å»ºå¤šä¸ªkafkaï¼Œåªéœ€è¦æ”¹å˜brokerIdå’Œç«¯å£</p><pre><code>docker run -d --name kafka1 \-p 9093:9093 \-e KAFKA_BROKER_ID=1 \-e KAFKA_ZOOKEEPER_CONNECT=192.168.99.100:2181 \-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.99.100:9093 \-e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9093 -t wurstmeister/kafka</code></pre><h3 id="5-åˆ›å»ºReplicationä¸º2ï¼ŒPartitionä¸º2çš„topic"><a href="#5-åˆ›å»ºReplicationä¸º2ï¼ŒPartitionä¸º2çš„topic" class="headerlink" title="5. åˆ›å»ºReplicationä¸º2ï¼ŒPartitionä¸º2çš„topic"></a><a name="t4" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>5. åˆ›å»ºReplicationä¸º2ï¼ŒPartitionä¸º2çš„topic</h3><p>åœ¨kafkaå®¹å™¨ä¸­çš„opt/<span style="background-color: transparent; color: inherit; font-family: Menlo, Monaco, Consolas, " courier new", monospace; font-size: inherit; white-space: pre-wrap;">kafka_2.11-2.0.0</span>/ç›®å½•ä¸‹è¾“å…¥</p><pre><code>bin/kafka-topics.sh --create --zookeeper 192.168.99.100:2181 --replication-factor 2 --partitions 2 --topic partopic</code></pre><h3 id="6-æŸ¥çœ‹topicçš„çŠ¶æ€"><a href="#6-æŸ¥çœ‹topicçš„çŠ¶æ€" class="headerlink" title="6. æŸ¥çœ‹topicçš„çŠ¶æ€"></a><a name="t5" style="outline-style: initial; outline-width: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>6. æŸ¥çœ‹topicçš„çŠ¶æ€</h3><p>åœ¨kafkaå®¹å™¨ä¸­çš„opt/<span style="background-color: transparent; color: inherit; font-family: Menlo, Monaco, Consolas, " courier new", monospace; font-size: inherit; white-space: pre-wrap;">kafka_2.11-2.0.0</span>/ç›®å½•ä¸‹è¾“å…¥</p><pre><code>bin/kafka-topics.sh --describe --zookeeper 192.168.99.100:2181 --topic partopic</code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre><code>Topic:partopic  PartitionCount:2    ReplicationFactor:2 Configs:    Topic: partopic Partition: 0    Leader: 0   Replicas: 0,1   Isr: 0,1    Topic: partopic Partition: 1    Leader: 0   Replicas: 1,0   Isr: 0,1</code></pre><p>æ˜¾ç¤ºæ¯ä¸ªåˆ†åŒºçš„Leaderæœºå™¨ä¸ºbroker0ï¼Œåœ¨broker0å’Œ1ä¸Šå…·æœ‰å¤‡ä»½ï¼ŒIsrä»£è¡¨å­˜æ´»çš„å¤‡ä»½æœºå™¨ä¸­å­˜æ´»çš„ã€‚<br>å½“åœæ‰kafka1åï¼Œ</p><pre><code>docker stop kafka1</code></pre><p>å†æŸ¥çœ‹topicçŠ¶æ€ï¼Œè¾“å‡ºç»“æœï¼š</p><pre><code>Topic:partopic  PartitionCount:2    ReplicationFactor:2 Configs:    Topic: partopic Partition: 0    Leader: 0   Replicas: 0,1   Isr: 0    Topic: partopic Partition: 1    Leader: 0   Replicas: 1,0   Isr: 0</code></pre></body></html>]]></content>
      
      
      <categories>
          
          <category> æ¶ˆæ¯é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker å®‰è£…mysql5.7</title>
      <link href="/2018/07/27/Docker%20%E5%AE%89%E8%A3%85mysql5.7/"/>
      <url>/2018/07/27/Docker%20%E5%AE%89%E8%A3%85mysql5.7/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>1 å®‰è£…</p><p>docker pull docker.io/mysql</p><a id="more"></a><p><font face="Arial Black" color="#73a5ad"><span style="font-size: 16px;"><strong>Docker å®‰è£…mysql5.7</strong></span></font>  </p><p>1 å®‰è£…</p><p> docker pull docker.io/mysql  </p><pre><code>[root@iZuf6boi8ejfovwda7q1ynZ ~]# docker pull docker.io/mysqlUsing default tag: latestTrying to pull repository docker.io/library/mysql ... latest: Pulling from docker.io/library/mysqlf49cf87b52c1: Pull complete 78032de49d65: Pull complete 837546b20bc4: Pull complete 9b8316af6cc6: Pull complete 1056cf29b9f1: Pull complete 86f3913b029a: Pull complete 4cbbfc9aebab: Pull complete 8ffd0352f6a8: Pull complete 45d90f823f97: Pull complete ca2a791aeb35: Pull complete Digest: sha256:1f95a2ba07ea2ee2800ec8ce3b5370ed4754b0a71d9d11c0c35c934e9708dcf1</code></pre><p>2 å¯åŠ¨<br>[root@iZuf6boi8ejfovwda7q1ynZ ~]# docker run â€“name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql<br>3c995c988a94ce38a5ade6dcce7cc9168b349051ec51dc5e8a11c8f210658c04</p><p>å¦‚æœéœ€è¦æŠŠæ•°æ®å­˜å‚¨åœ¨å®¿ä¸»æœºå™¨ åŠ å‚æ•°-v</p><pre><code>[root@iZuf6boi8ejfovwda7q1ynZ home]# docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /home/mysql/data:/var/lib/mysql -v /home/mysql/my.cnf:/etc/mysql/my.cnf -d mysql/usr/bin/docker-current: Error response from daemon: Conflict. The name "/mysql" is already in use by container 3c995c988a94ce38a5ade6dcce7cc9168b349051ec51dc5e8a11c8f210658c04\. You have to remove (or rename) that container to be able to reuse that name..See '/usr/bin/docker-current run --help'.</code></pre><p><span style="color: rgb(51, 51, 51); font-family: -apple-system, " sf ui text", arial, "pingfang sc", "hiragino sans gb", "microsoft yahei", "wenquanyi micro hei", sans-serif, simhei, simsun;">æœ‰å®¹å™¨ç”¨äº†mysqlè¿™ä¸ªåç§°ï¼Œéœ€è¦å…ˆåœæ­¢ï¼Œå†åˆ é™¤é•œåƒ</span>  </p><pre><code>[root@iZuf6boi8ejfovwda7q1ynZ home]# docker psCONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS                  PORTS                                                             NAMES3c995c988a94        mysql                               "docker-entrypoint.sh"   8 hours ago         Up 8 hours              0.0.0.0:3306->3306/tcp                                            mysql[root@iZuf6boi8ejfovwda7q1ynZ home]# docker stop mysqlmysql[root@iZuf6boi8ejfovwda7q1ynZ home]# docker rm mysqlmysql</code></pre><p><span style="color: rgb(51, 51, 51); font-family: -apple-system, " sf ui text", arial, "pingfang sc", "hiragino sans gb", "microsoft yahei", "wenquanyi micro hei", sans-serif, simhei, simsun;">å†æ¬¡å¯åŠ¨</span>  </p><pre><code>[root@iZuf6boi8ejfovwda7q1ynZ home]# docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /home/mysql/data:/var/lib/mysql -v /home/mysql/my.cnf:/etc/mysql/my.cnf -d mysqla086c00b114a744e5f3b9f64357aef15e46cc7face8dca0878be37e34e0eb240/usr/bin/docker-current: Error response from daemon: invalid header field value "oci runtime error: container_linux.go:247: starting container process caused \"process_linux.go:364: container init caused \\\"rootfs_linux.go:54: mounting \\\\\\\"/home/mysql/my.cnf\\\\\\\" to rootfs \\\\\\\"/var/lib/docker/devicemapper/mnt/54b2f88d4d6b504e68cdc8dc41e9bf229ecc739bbdce4e23b1253cec6ea62e1e/rootfs\\\\\\\" at \\\\\\\"/var/lib/docker/devicemapper/mnt/54b2f88d4d6b504e68cdc8dc41e9bf229ecc739bbdce4e23b1253cec6ea62e1e/rootfs/etc/mysql/mysql.cnf\\\\\\\" caused \\\\\\\"not a directory\\\\\\\"\\\"\"\n".[root@iZuf6boi8ejfovwda7q1ynZ home]# docker psCONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS                  PORTS                                                             NAMES[root@iZuf6boi8ejfovwda7q1ynZ home]# docker ps -aCONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS                    PORTS                                                             NAMESa086c00b114a        mysql                               "docker-entrypoint.sh"   38 seconds ago      Created                                                                                     mysql</code></pre><p><span style="color: rgb(51, 51, 51); font-family: -apple-system, " sf ui text", arial, "pingfang sc", "hiragino sans gb", "microsoft yahei", "wenquanyi micro hei", sans-serif, simhei, simsun;">å†æ¬¡å¯åŠ¨å‘ç°ï¼Œæ²¡æœ‰é…ç½®æ–‡ä»¶/home/mysql/my.cnf  ä½†æ˜¯å®¹å™¨è¿˜æ˜¯åˆ›å»ºæˆåŠŸäº†</span>  </p><pre><code>[root@iZuf6boi8ejfovwda7q1ynZ home]# docker rm mysqlmysql[root@iZuf6boi8ejfovwda7q1ynZ home]# docker ps -aCONTAINER ID        IMAGE                               COMMAND                  CREATED             STATUS                    PORTS                                                             NAMES[root@iZuf6boi8ejfovwda7q1ynZ home]# docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /home/mysql/data:/var/lib/mysql -d mysql825f0c86efe9fa16e909ac2444ae077a8c68667b3ae6760220971d6f2cda5f19[root@iZuf6boi8ejfovwda7q1ynZ home]# </code></pre><p><span style="color: rgb(51, 51, 51); font-family: -apple-system, " sf ui text", arial, "pingfang sc", "hiragino sans gb", "microsoft yahei", "wenquanyi micro hei", sans-serif, simhei, simsun;">æ‰€ä»¥è¿˜æ˜¯éœ€è¦åˆ é™¤é•œåƒï¼Œé‡æ–°å¯åŠ¨ï¼Œç®€å•ç‚¹æŠŠé…ç½®æ–‡ä»¶å»æ‰å°±å¥½äº†</span>  </p><p>3 è¿›å…¥å®¹å™¨<br>[root@iZuf6boi8ejfovwda7q1ynZ ~]# docker exec -it mysql  bash<br>root@3c995c988a94:/# mysql<br>ERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO)</p><p>4 è¿›å…¥å®¢æˆ·ç«¯  </p><pre><code>[root@3c995c988a94:/# mysql -uroot -pEnter password: Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 4Server version: 5.7.20 MySQL Community Server (GPL)  Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.  Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.  Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.  mysql> select version(); +-----------+| version() |+-----------+| 5.7.20    |+-----------+1 row in set (0.00 sec)</code></pre></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker nginxå®‰è£…ä¸é…ç½®æŒ‚è½½å¹¶å®ç°è´Ÿè½½å‡è¡¡</title>
      <link href="/2018/07/27/Docker%20nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%8C%82%E8%BD%BD%E5%B9%B6%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
      <url>/2018/07/27/Docker%20nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%8C%82%E8%BD%BD%E5%B9%B6%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>åœ¨Dockerä¸‹è½½Nginxé•œåƒ</p><p>docker pull nginx docker images</p><a id="more"></a><h3 id="Docker-nginxå®‰è£…ä¸é…ç½®æŒ‚è½½å¹¶å®ç°è´Ÿè½½å‡è¡¡"><a href="#Docker-nginxå®‰è£…ä¸é…ç½®æŒ‚è½½å¹¶å®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="Docker nginxå®‰è£…ä¸é…ç½®æŒ‚è½½å¹¶å®ç°è´Ÿè½½å‡è¡¡"></a><strong><font color="#a5c6ce" style face="Arial Black">Docker nginxå®‰è£…ä¸é…ç½®æŒ‚è½½å¹¶å®ç°è´Ÿè½½å‡è¡¡</font></strong></h3><ul><li><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">åœ¨Dockerä¸‹è½½Nginxé•œåƒ</span></p><p>docker pull nginx<br>docker images</p></li></ul><p><a href="https://img-blog.csdn.net/2018070213224659?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/2018070213224659?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><ul><li><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">åˆ›å»ºæŒ‚è½½ç›®å½•</span></p><p>mkdir -p /data/nginx/{conf,conf.d,html,logs}</p></li></ul><p><a href="https://img-blog.csdn.net/20180702132449202?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702132449202?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><ul><li><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">ç¼–å†™nginx,confé…ç½®æ–‡ä»¶ï¼Œå¹¶æ”¾åœ¨æ–‡ä»¶å¤¹ä¸­</span></p><h1 id="For-more-information-on-configuration-see"><a href="#For-more-information-on-configuration-see" class="headerlink" title="For more information on configuration, see:"></a>For more information on configuration, see:</h1><h1 id="Official-English-Documentation-http-nginx-org-en-docs"><a href="#Official-English-Documentation-http-nginx-org-en-docs" class="headerlink" title="* Official English Documentation: http://nginx.org/en/docs/"></a>* Official English Documentation: <a href="http://nginx.org/en/docs/" target="_blank" rel="noopener">http://nginx.org/en/docs/</a></h1><h1 id="Official-Russian-Documentation-http-nginx-org-ru-docs"><a href="#Official-Russian-Documentation-http-nginx-org-ru-docs" class="headerlink" title="* Official Russian Documentation: http://nginx.org/ru/docs/"></a>* Official Russian Documentation: <a href="http://nginx.org/ru/docs/" target="_blank" rel="noopener">http://nginx.org/ru/docs/</a></h1><p>user nginx;<br>worker_processes auto;<br>error_log /var/log/nginx/error.log;<br>pid /run/nginx.pid;</p><h1 id="Load-dynamic-modules-See-usr-share-nginx-README-dynamic"><a href="#Load-dynamic-modules-See-usr-share-nginx-README-dynamic" class="headerlink" title="Load dynamic modules. See /usr/share/nginx/README.dynamic."></a>Load dynamic modules. See /usr/share/nginx/README.dynamic.</h1><p>include /usr/share/nginx/modules/*.conf;</p><p>events {</p><pre><code>worker_connections 1024;</code></pre><p>}</p><p>http {</p><pre><code>log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '                  '$status $body_bytes_sent "$http_referer" '                  '"$http_user_agent" "$http_x_forwarded_for"';access_log  /var/log/nginx/access.log  main;sendfile            on;tcp_nopush          on;tcp_nodelay         on;keepalive_timeout   65;types_hash_max_size 2048;include             /etc/nginx/mime.types;default_type        application/octet-stream;# Load modular configuration files from the /etc/nginx/conf.d directory.# See http://nginx.org/en/docs/ngx_core_module.html#include# for more information.include /etc/nginx/conf.d/*.conf;server {    listen       80 default_server;    listen       [::]:80 default_server;    server_name  182.254.161.54;    root         /usr/share/nginx/html;    # Load configuration files for the default server block.    include /etc/nginx/default.d/*.conf;    location / {    proxy_pass http://pic;     }    error_page 404 /404.html;        location = /40x.html {    }    error_page 500 502 503 504 /50x.html;        location = /50x.html {    }}upstream pic{            server 182.254.161.54:8088 weight=5;            server 182.254.161.54:8089 weight=5;}</code></pre><p>}</p></li><li><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">å¯åŠ¨å®¹å™¨</span></p><p>docker run â€“name mynginx -d -p 82:80  -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf  -v /data/nginx/logs:/var/log/nginx -d docker.io/nginx</p></li><li><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">æŸ¥çœ‹å¯åŠ¨çš„å®¹å™¨</span></p><p>docker ps </p></li></ul><p><a href="https://img-blog.csdn.net/20180702132832236?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702132832236?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><ul><li><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">å…ˆå‰å·²ç»åœ¨Dockeréƒ¨ç½²ä¸¤ä¸ªtomcatï¼Œä¸€ä¸ªæ˜¯8088ç«¯å£ï¼Œå¦ä¸€ä¸ªæ˜¯8089ç«¯å£ï¼Œå¹¶è¿›å…¥ä¸¤ä¸ªå®¹å™¨é‡Œç¼–å†™äº†ç®€å•çš„é¡µé¢</span></li></ul><p><a href="https://img-blog.csdn.net/20180702133106139?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702133106139?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">è®¿é—®8088ç«¯å£</span><br><a href="https://img-blog.csdn.net/20180702133728495?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702133728495?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><p><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">è®¿é—®8089ç«¯å£</span><br><a href="https://img-blog.csdn.net/20180702133805719?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702133805719?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><ul><li><span style="outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all;">ç°åœ¨é€šè¿‡Nginxè®¿é—®ä¸¤ä¸ªtomcatçš„å†…å®¹ï¼Œå®ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ï¼Œå‡ºäºåŒºåˆ«ï¼Œæ›´èƒ½ä½“ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ï¼Œä¸¤ä¸ªé¡µé¢çš„å†…å®¹ä¸ä¸€æ ·ï¼Œä½†æ˜¯è®¿é—®è·¯å¾„éƒ½ä¸€æ ·ï¼Œåªæ˜¯é€šè¿‡Nginxåå‘ä»£ç†å»è½®æ¢è®¿é—®</span></li></ul><p><a href="https://img-blog.csdn.net/20180702133452332?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702133452332?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p><p><a href="https://img-blog.csdn.net/20180702133509870?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" data-fancybox="group" data-caption="è¿™é‡Œå†™å›¾ç‰‡æè¿°" class="fancybox"><img alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" data-src="https://img-blog.csdn.net/20180702133509870?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2NjQxNzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" class="lazyload" title="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Excelè¡¨çš„è¯»å†™</title>
      <link href="/2018/07/27/Centos7%E4%B8%8A%E5%AE%89%E8%A3%85docker/"/>
      <url>/2018/07/27/Centos7%E4%B8%8A%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Dockerä»1.13ç‰ˆæœ¬ä¹‹åé‡‡ç”¨æ—¶é—´çº¿çš„æ–¹å¼ä½œä¸ºç‰ˆæœ¬å·ï¼Œåˆ†ä¸ºç¤¾åŒºç‰ˆCEå’Œä¼ä¸šç‰ˆEEã€‚ ç¤¾åŒºç‰ˆæ˜¯å…è´¹æä¾›ç»™ä¸ªäººå¼€å‘è€…å’Œå°å‹å›¢ä½“ä½¿ç”¨çš„ï¼Œä¼ä¸šç‰ˆä¼šæä¾›é¢å¤–çš„æ”¶è´¹æœåŠ¡ï¼Œæ¯”å¦‚ç»è¿‡å®˜æ–¹æµ‹è¯•è®¤è¯è¿‡çš„åŸºç¡€è®¾æ–½ã€å®¹å™¨ã€æ’ä»¶ç­‰ã€‚</p><a id="more"></a><h2 id="Centos7ä¸Šå®‰è£…docker"><a href="#Centos7ä¸Šå®‰è£…docker" class="headerlink" title="Centos7ä¸Šå®‰è£…docker"></a><font color="#9cc6ef">Centos7ä¸Šå®‰è£…docker</font></h2><div id="cnblogs_post_body" class="blogpost-body" style="margin-bottom: 20px; word-break: break-word; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 14.4px; background-color: rgb(238, 238, 238);"><p><span style="font-size: 16px;">Dockerä»1.13ç‰ˆæœ¬ä¹‹åé‡‡ç”¨æ—¶é—´çº¿çš„æ–¹å¼ä½œä¸ºç‰ˆæœ¬å·ï¼Œåˆ†ä¸ºç¤¾åŒºç‰ˆCEå’Œä¼ä¸šç‰ˆEEã€‚</span></p><p><span style="font-size: 16px;">ç¤¾åŒºç‰ˆæ˜¯å…è´¹æä¾›ç»™ä¸ªäººå¼€å‘è€…å’Œå°å‹å›¢ä½“ä½¿ç”¨çš„ï¼Œä¼ä¸šç‰ˆä¼šæä¾›é¢å¤–çš„æ”¶è´¹æœåŠ¡ï¼Œæ¯”å¦‚ç»è¿‡å®˜æ–¹æµ‹è¯•è®¤è¯è¿‡çš„åŸºç¡€è®¾æ–½ã€å®¹å™¨ã€æ’ä»¶ç­‰ã€‚</span></p><p><span style="font-size: 16px;">ç¤¾åŒºç‰ˆæŒ‰ç…§stableå’Œedgeä¸¤ç§æ–¹å¼å‘å¸ƒï¼Œæ¯ä¸ªå­£åº¦æ›´æ–°stableç‰ˆæœ¬ï¼Œå¦‚17.06ï¼Œ17.09ï¼›æ¯ä¸ªæœˆä»½æ›´æ–°edgeç‰ˆæœ¬ï¼Œå¦‚17.09ï¼Œ17.10ã€‚</span></p><h2 id="ä¸€ã€å®‰è£…docker"><a href="#ä¸€ã€å®‰è£…docker" class="headerlink" title="ä¸€ã€å®‰è£…docker"></a>ä¸€ã€å®‰è£…docker</h2><p>1ã€Docker è¦æ±‚ CentOS ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬é«˜äº 3.10 ï¼ŒæŸ¥çœ‹æœ¬é¡µé¢çš„å‰ææ¡ä»¶æ¥éªŒè¯ä½ çš„CentOS ç‰ˆæœ¬æ˜¯å¦æ”¯æŒ Docker ã€‚</p><p>é€šè¿‡ *<em>uname -r *</em>å‘½ä»¤æŸ¥çœ‹ä½ å½“å‰çš„å†…æ ¸ç‰ˆæœ¬</p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"> $ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">uname</span> -r</pre></div><p><span style="font-size: 16px;">2ã€ä½¿ç”¨ <code>root</code> æƒé™ç™»å½• Centosã€‚ç¡®ä¿ yum åŒ…æ›´æ–°åˆ°æœ€æ–°ã€‚</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> update</pre></div><p><span style="font-size: 16px;">3ã€å¸è½½æ—§ç‰ˆæœ¬(å¦‚æœå®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„è¯)</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> <span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">remove docker  docker</span>-<span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">common docker</span>-<span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">selinux docker</span>-engine</pre></div><p><span style="font-size: 16px;">4ã€å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œ </span><span style="font-size: 16px;">yum-util æä¾›yum-config-manageråŠŸèƒ½ï¼Œ</span><span class="pln" style="font-size: 16px;"><span class="com">å¦å¤–ä¸¤ä¸ªæ˜¯devicemapperé©±åŠ¨ä¾èµ–çš„</span></span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> -y <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span>-utils device-mapper-persistent-data lvm2</pre></div><p>5ã€è®¾ç½®yumæº</p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"><span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;"><span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">$</span> sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span>-config-manager --add-repo https:<span style="color: rgb(0, 128, 0); font-size: 12px !important; line-height: 1.5 !important;">//</span><span style="color: rgb(0, 128, 0); font-size: 12px !important; line-height: 1.5 !important;">download.docker.com/linux/centos/docker-ce.repo</span></pre></div><p> <a href="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128094640209-1433322312.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128094640209-1433322312.png" class="lazyload" title></a></p><p>6ã€å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç‰¹å®šç‰ˆæœ¬å®‰è£…</p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> list docker-ce --showduplicates | <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sort</span> -r</pre></div><p><a href="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128095038600-772177322.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128095038600-772177322.png" class="lazyload" title></a></p><p>7ã€å®‰è£…docker</p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> docker-ce  <span style="color: rgb(0, 128, 0); font-size: 12px !important; line-height: 1.5 !important;">#ç”±äºrepoä¸­é»˜è®¤åªå¼€å¯stableä»“åº“ï¼Œæ•…è¿™é‡Œå®‰è£…çš„æ˜¯æœ€æ–°ç¨³å®šç‰ˆ17.12.0</span> <span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">$</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> <fqpn>  <span style="color: rgb(0, 128, 0); font-size: 12px !important; line-height: 1.5 !important;"># ä¾‹å¦‚ï¼šsudo yum install docker-ce-17.12.0.ce</span></fqpn></pre></div><p> <a href="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128103448287-493824081.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128103448287-493824081.png" class="lazyload" title></a></p><p><span style="font-size: 16px;">8ã€å¯åŠ¨å¹¶åŠ å…¥å¼€æœºå¯åŠ¨</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">systemctl start docker$</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> systemctl enable docker</pre></div><p><span style="font-size: 16px;">9ã€éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ(æœ‰clientå’Œserviceä¸¤éƒ¨åˆ†è¡¨ç¤ºdockerå®‰è£…å¯åŠ¨éƒ½æˆåŠŸäº†)</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">docker</span> version</pre></div><p><a href="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128104046600-1053107877.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128104046600-1053107877.png" class="lazyload" title></a></p><h2 id="äºŒã€é—®é¢˜"><a href="#äºŒã€é—®é¢˜" class="headerlink" title="äºŒã€é—®é¢˜"></a>äºŒã€é—®é¢˜</h2><p><span style="font-size: 16px;">1ã€å› ä¸ºä¹‹å‰å·²ç»å®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„dockerï¼Œåœ¨å®‰è£…çš„æ—¶å€™æŠ¥é”™å¦‚ä¸‹ï¼š</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;"><span style="color: rgb(0, 0, 0); font-size: 12px !important; line-height: 1.5 !important;">Transaction check error:</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> /usr/bin/docker from <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> of docker-ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">17.12</span>.<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">0</span>.ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">1</span>.el7.centos.x86_64 conflicts with <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> from package <span style="font-size: 15px; color: rgb(255, 0, 0); line-height: 1.5 !important;">**docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64**</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> /usr/bin/docker-containerd from <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> of docker-ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">17.12</span>.<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">0</span>.ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">1</span>.el7.centos.x86_64 conflicts with <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> from package <span style="font-size: 15px; color: rgb(255, 0, 0); line-height: 1.5 !important;">**docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64**</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> /usr/bin/docker-containerd-shim from <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> of docker-ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">17.12</span>.<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">0</span>.ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">1</span>.el7.centos.x86_64 conflicts with <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> from package <span style="font-size: 15px; color: rgb(255, 0, 0); line-height: 1.5 !important;">**docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64**</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> /usr/bin/dockerd from <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> of docker-ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">17.12</span>.<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">0</span>.ce-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">1</span>.el7.centos.x86_64 conflicts with <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">file</span> from package **<span style="font-size: 15px; color: rgb(255, 0, 0); line-height: 1.5 !important;">docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span>**</pre></div><p><span style="font-size: 16px;">2ã€å¸è½½æ—§ç‰ˆæœ¬çš„åŒ…</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> erase docker-common-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">2</span>:<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">1.12</span>.<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">6</span>-<span style="color: rgb(128, 0, 128); font-size: 12px !important; line-height: 1.5 !important;">68</span>.gitec8512b.el7.centos.x86_64</pre></div><p><a href="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128103145287-536100760.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://images2017.cnblogs.com/blog/1107037/201801/1107037-20180128103145287-536100760.png" class="lazyload" title></a></p><p><span style="font-size: 16px;">3ã€å†æ¬¡å®‰è£…docker</span></p><div class="cnblogs_code" style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; font-family: " courier new" !important; font-size: 12px !important;"><pre style="margin-bottom: 0px; white-space: pre-wrap; font-family: " courier new" !important; font-size: 12px !important;">$ <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">sudo</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">yum</span> <span style="color: rgb(0, 0, 255); font-size: 12px !important; line-height: 1.5 !important;">install</span> docker-ce</pre></div><div id="comment_body_3991824" class="blog_comment_body" style="word-wrap: break-word; overflow: hidden;">4ã€æ¨èä¸€ç§åˆ é™¤dockerçš„æ–¹æ³•ï¼š  <div class="cnblogs_Highlighter sh-gutter"><div id="highlighter_844319" class="syntaxhighlighter  csharp" style="width: 1613px; margin: 1em 0px !important; position: relative !important; overflow: auto !important; font-size: 1em !important; background-color: rgb(255, 255, 255) !important;"><table border="0" cellpadding="0" cellspacing="0" style="width: 1613px; border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, " bitstream vera sans mono", "courier new", courier, monospace !important; font-size: 12px min-height: auto !important;"><tbody style="border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important;"><tr style="border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important;"><td class="gutter" style="border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: 35px !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; color: rgb(175, 175, 175) !important;"><div class="line number1 index0 alt2" style="border-radius: 0px !important; background: none rgb(244, 244, 244) !important; border-width: 0px 2px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 0.5em !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">1</div><div class="line number2 index1 alt1" style="border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; border-width: 0px 2px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 0.5em !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">2</div><div class="line number3 index2 alt2" style="border-radius: 0px !important; background: none rgb(244, 244, 244) !important; border-width: 0px 2px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 0.5em !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">3</div><div class="line number4 index3 alt1" style="border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; border-width: 0px 2px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 0.5em !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">4</div></td><td class="code" style="border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important;"><div class="container" style="border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px !important; position: relative !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important;"><div class="line number1 index0 alt2" style="border-radius: 0px !important; background: none rgb(244, 244, 244) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 1em !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">`yum remove docker docker-common docker-selinux docker-engine -y`</div><div class="line number2 index1 alt1" style="border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 1em !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">`/etc/systemd -name ``'*docker*'` `-exec rm -f {} ;`</div><div class="line number3 index2 alt2" style="border-radius: 0px !important; background: none rgb(244, 244, 244) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 1em !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">`find /etc/systemd -name ``'*docker*'` `-exec rm -f {} \;`</div><div class="line number4 index3 alt1" style="border-radius: 0px !important; background-image: none !important; background-position: initial !important; background-size: initial !important; background-repeat: initial !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.8em !important; margin: 0px !important; outline-style: initial !important; outline-width: 0px !important; overflow: visible !important; padding: 0px 1em !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 12px !important; min-height: auto !important; white-space: nowrap !important;">`find /lib/systemd -name ``'*docker*'` `-exec rm -f {} \;`</div></div></td></tr></tbody></table></div></div></div></div></body></html>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹²è´§ï½œç§’æ€æ¶æ„è®¾è®¡çš„å…³é”®æŠ€æœ¯</title>
      <link href="/2018/07/11/%E5%B9%B2%E8%B4%A7%EF%BD%9C%E7%A7%92%E6%9D%80%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/"/>
      <url>/2018/07/11/%E5%B9%B2%E8%B4%A7%EF%BD%9C%E7%A7%92%E6%9D%80%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>ç§’æ€ä¸šåŠ¡åœºæ™¯è®¾è®¡é—®é¢˜ç»å¸¸è¢«é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°ï¼Œåœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œä¹Ÿå¸¸å¸¸éœ€è¦å®ç°ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ç§’æ€ä¸šåŠ¡ã€‚</p><a id="more"></a><p>ç§’æ€ä¸šåŠ¡åœºæ™¯è®¾è®¡é—®é¢˜ç»å¸¸è¢«é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°ï¼Œåœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œä¹Ÿå¸¸å¸¸éœ€è¦å®ç°ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ç§’æ€ä¸šåŠ¡ã€‚</p><p>ç§’æ€ä¸šåŠ¡ï¼Œæ˜¯å…¸å‹çš„çŸ­æ—¶å¤§é‡çªå‘è®¿é—®ç±»é—®é¢˜ã€‚</p><p>ç‰¹ç‚¹:  </p><p>1. ç§’æ€æ—¶ç½‘ç«™çš„è®¿é—®é‡å¤§å¢;</p><p>2. ç§’æ€æ—¶è´­ä¹°çš„è¯·æ±‚æ•°é‡è¿œå°äºåº“å­˜ï¼Œåªæœ‰éƒ¨åˆ†ç”¨æˆ·èƒ½å¤ŸæˆåŠŸï¼›  </p><p>3. ä¸šåŠ¡æµç¨‹ç®€å•ï¼Œæ ¹æ®å…ˆåé¡ºåºï¼Œä¸‹è®¢å•å‡åº“å­˜ï¼›  </p><p>é¦–å…ˆçœ‹ä¸€ä¸‹æ™®é€šå•†å“è´­ä¹°ä¸šåŠ¡çš„åŸºæœ¬é€»è¾‘</p><p><a href="http://www.hwy.ac.cn/upload/2018/07/1tmobvpukmiqgqua91hd51tf0h.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/07/1tmobvpukmiqgqua91hd51tf0h.png" class="lazyload" title></a></p><p>é‚£ä¹ˆï¼Œç§’æ€ä¸šåŠ¡ï¼Œä¼šå½±å“åˆ°ä¸Šé¢çš„å“ªäº›æ–¹é¢å‘¢ï¼Ÿ</p><p>å‰ç«¯: </p><p>åœ¨åŒä¸€æ—¶æ®µï¼Œå¤§é‡çš„ç”¨æˆ·é›†ä¸­è®¿é—®å‰ç«¯é¡µé¢çš„èµ„æº,æµé‡å‰§å¢,å¯¼è‡´é¡µé¢åˆ·æ–°ä¸åŠæ—¶ï¼Œç”šè‡³æ— æ³•è®¿é—®ï¼Œç§’æ€ç³»ç»Ÿç‰¹ç‚¹æ˜¯å¹¶å‘é‡æå¤§ï¼Œä½†å®é™…ç§’æ€æˆåŠŸçš„è¯·æ±‚æ•°é‡å´å¾ˆå°‘ï¼Œæ‰€ä»¥å¦‚æœä¸åœ¨å‰ç«¯æ‹¦æˆªå¾ˆå¯èƒ½é€ æˆæ•°æ®åº“è¯»å†™é”å†²çªï¼Œç”šè‡³å¯¼è‡´æ­»é”ï¼Œæœ€ç»ˆè¯·æ±‚è¶…æ—¶ï¼›</p><p>è§£å†³æ–¹æ¡ˆï¼š(1). <span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; color: rgb(51, 51, 51); word-wrap: break-word !important;">å½“æµé‡è¿‡å¤§çš„æ—¶å€™ï¼ŒåŠ ä¸€ä¸ªéªŒè¯ç å¯ä»¥åœ¨å•ä½æ—¶é—´å†…æœ‰æ•ˆçš„æ§åˆ¶ä½åˆæ³•ç”¨æˆ·;</span></p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; color: rgb(51, 51, 51); word-wrap: break-word !important;">(2). å°†æ´»åŠ¨é¡µé¢ä¸Šçš„æ‰€æœ‰å¯ä»¥é™æ€çš„å…ƒç´ å…¨éƒ¨é™æ€åŒ–ï¼Œå¹¶å°½é‡å‡å°‘åŠ¨æ€å…ƒç´ ï¼Œé€šè¿‡CDNæ¥æŠ—å³°å€¼ï¼›</span> </p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; color: rgb(51, 51, 51); word-wrap: break-word !important;">(3). ç”¨æˆ·æäº¤ä¹‹åæŒ‰é’®ç½®ç°ï¼Œç¦æ­¢é‡å¤æäº¤,åœ¨æŸä¸€æ—¶é—´æ®µå†…åªå…è®¸ç”¨æˆ·æäº¤ä¸€æ¬¡è¯·æ±‚ï¼Œæ¯”å¦‚å¯ä»¥é‡‡å–IPé™æµ;</span> </p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-size: 15px; word-wrap: break-word !important;">åç«¯:</span></p><p>ä¼ ç»Ÿç§’æ€ç³»ç»Ÿä¹‹æ‰€ä»¥æŒ‚ï¼Œè¯·æ±‚éƒ½å‹å€’äº†åç«¯æ•°æ®å±‚ï¼Œæ•°æ®è¯»å†™é”å†²çªä¸¥é‡ï¼Œå¹¶å‘é«˜å“åº”æ…¢ï¼Œå‡ ä¹æ‰€æœ‰è¯·æ±‚éƒ½è¶…æ—¶ï¼Œæµé‡è™½å¤§ï¼Œä¸‹å•æˆåŠŸçš„æœ‰æ•ˆæµé‡ç”šå°ã€ä¸€è¶Ÿç«è½¦å…¶å®åªæœ‰2000å¼ ç¥¨ï¼Œ200wä¸ªäººæ¥ä¹°ï¼ŒåŸºæœ¬æ²¡æœ‰äººèƒ½ä¹°æˆåŠŸï¼Œè¯·æ±‚æœ‰æ•ˆç‡ä¸º0ã€‘  </p><p>è§£å†³æ–¹æ¡ˆ:</p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; font-size: 18px; word-wrap: break-word !important;">ç«™ç‚¹å±‚è®¾è®¡</span></p><p>å‰ç«¯å±‚çš„è¯·æ±‚æ‹¦æˆªï¼Œåªèƒ½æ‹¦ä½å°ç™½ç”¨æˆ·ï¼ˆä¸è¿‡è¿™æ˜¯99%çš„ç”¨æˆ·å“Ÿï¼‰ï¼Œé«˜ç«¯çš„ç¨‹åºå‘˜æ ¹æœ¬ä¸åƒè¿™ä¸€å¥—ï¼Œå†™ä¸ªforå¾ªç¯ï¼Œç›´æ¥è°ƒç”¨ä½ åç«¯çš„httpè¯·æ±‚ï¼Œæ€ä¹ˆæ•´ï¼Ÿ</p><p>ï¼ˆ1ï¼‰åŒä¸€ä¸ªuidï¼Œé™åˆ¶è®¿é—®é¢‘åº¦ï¼Œåšé¡µé¢ç¼“å­˜ï¼Œxç§’å†…åˆ°è¾¾ç«™ç‚¹å±‚çš„è¯·æ±‚ï¼Œå‡è¿”å›åŒä¸€é¡µé¢</p><p>ï¼ˆ2ï¼‰åŒä¸€ä¸ªitemçš„æŸ¥è¯¢ï¼Œä¾‹å¦‚æ‰‹æœºè½¦æ¬¡ï¼Œåšé¡µé¢ç¼“å­˜ï¼Œxç§’å†…åˆ°è¾¾ç«™ç‚¹å±‚çš„è¯·æ±‚ï¼Œå‡è¿”å›åŒä¸€é¡µé¢</p><p>å¦‚æ­¤é™æµï¼Œåˆæœ‰99%çš„æµé‡ä¼šè¢«æ‹¦æˆªåœ¨ç«™ç‚¹å±‚ã€‚</p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; font-size: 18px; word-wrap: break-word !important;">æœåŠ¡å±‚è®¾è®¡</span></p><p>ç«™ç‚¹å±‚çš„è¯·æ±‚æ‹¦æˆªï¼Œåªèƒ½æ‹¦ä½æ™®é€šç¨‹åºå‘˜ï¼Œé«˜çº§é»‘å®¢ï¼Œå‡è®¾ä»–æ§åˆ¶äº†10wå°è‚‰é¸¡ï¼ˆå¹¶ä¸”å‡è®¾ä¹°ç¥¨ä¸éœ€è¦å®åè®¤è¯ï¼‰ï¼Œè¿™ä¸‹uidçš„é™åˆ¶ä¸è¡Œäº†å§ï¼Ÿæ€ä¹ˆæ•´ï¼Ÿ</p><p>(è¯·æ±‚é˜Ÿåˆ—,cacheç¼“å­˜)</p><p>ï¼ˆ1ï¼‰å¤§å“¥ï¼Œæˆ‘æ˜¯æœåŠ¡å±‚ï¼Œæˆ‘æ¸…æ¥šçš„çŸ¥é“å°ç±³åªæœ‰1ä¸‡éƒ¨æ‰‹æœºï¼Œæˆ‘æ¸…æ¥šçš„çŸ¥é“ä¸€åˆ—ç«è½¦åªæœ‰2000å¼ è½¦ç¥¨ï¼Œæˆ‘é€10wä¸ªè¯·æ±‚å»æ•°æ®åº“æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿå¯¹äºå†™è¯·æ±‚ï¼Œåšè¯·æ±‚é˜Ÿåˆ—ï¼Œæ¯æ¬¡åªé€è¿‡æœ‰é™çš„å†™è¯·æ±‚å»æ•°æ®å±‚ï¼Œå¦‚æœå‡æˆåŠŸå†æ”¾ä¸‹ä¸€æ‰¹ï¼Œå¦‚æœåº“å­˜ä¸å¤Ÿåˆ™é˜Ÿåˆ—é‡Œçš„å†™è¯·æ±‚å…¨éƒ¨è¿”å›â€œå·²å”®å®Œâ€ï¼›</p><p>ï¼ˆ2ï¼‰å¯¹äºè¯»è¯·æ±‚ï¼Œè¿˜ç”¨è¯´ä¹ˆï¼Ÿcacheæ¥æŠ—ï¼Œä¸ç®¡æ˜¯memcachedè¿˜æ˜¯redisï¼Œå•æœºæŠ—ä¸ªæ¯ç§’10wåº”è¯¥éƒ½æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼›</p><p>å¦‚æ­¤é™æµï¼Œåªæœ‰éå¸¸å°‘çš„å†™è¯·æ±‚ï¼Œå’Œéå¸¸å°‘çš„è¯»ç¼“å­˜misçš„è¯·æ±‚ä¼šé€åˆ°æ•°æ®å±‚å»ï¼Œåˆæœ‰99.9%çš„è¯·æ±‚è¢«æ‹¦ä½äº†ã€‚</p><p>ä¸Šé¢åªæ‹¦æˆªäº†ä¸€éƒ¨åˆ†è®¿é—®è¯·æ±‚ï¼Œå½“ç§’æ€çš„ç”¨æˆ·é‡å¾ˆå¤§æ—¶ï¼Œå³ä½¿æ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ°æœåŠ¡å±‚çš„è¯·æ±‚æ•°é‡è¿˜æ˜¯å¾ˆå¤§ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰100Wç”¨æˆ·åŒæ—¶æŠ¢100å°æ‰‹æœºï¼ŒæœåŠ¡å±‚å¹¶å‘è¯·æ±‚å‹åŠ›è‡³å°‘ä¸º100Wã€‚</p><p>(1). é‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—ç¼“å­˜è¯·æ±‚ï¼šæ—¢ç„¶æœåŠ¡å±‚çŸ¥é“åº“å­˜åªæœ‰100å°æ‰‹æœºï¼Œé‚£å®Œå…¨æ²¡æœ‰å¿…è¦æŠŠ100Wä¸ªè¯·æ±‚éƒ½ä¼ é€’åˆ°æ•°æ®åº“å•Šï¼Œé‚£ä¹ˆå¯ä»¥å…ˆæŠŠè¿™äº›è¯·æ±‚éƒ½å†™åˆ°æ¶ˆæ¯é˜Ÿåˆ—ç¼“å­˜ä¸€ä¸‹ï¼Œæ•°æ®åº“å±‚è®¢é˜…æ¶ˆæ¯å‡åº“å­˜ï¼Œå‡åº“å­˜æˆåŠŸçš„è¯·æ±‚è¿”å›ç§’æ€æˆåŠŸï¼Œå¤±è´¥çš„è¿”å›ç§’æ€ç»“æŸã€‚</p><p>(2). åˆ©ç”¨ç¼“å­˜åº”å¯¹è¯»è¯·æ±‚ï¼šå¯¹ç±»ä¼¼äº12306ç­‰è´­ç¥¨ä¸šåŠ¡ï¼Œæ˜¯å…¸å‹çš„è¯»å¤šå†™å°‘ä¸šåŠ¡ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚æ˜¯æŸ¥è¯¢è¯·æ±‚ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ç¼“å­˜åˆ†æ‹…æ•°æ®åº“å‹åŠ›ã€‚</p><p><span style="margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word !important;">(3). åˆ©ç”¨ç¼“å­˜åº”å¯¹å†™è¯·æ±‚ï¼šç¼“å­˜ä¹Ÿæ˜¯å¯ä»¥åº”å¯¹å†™è¯·æ±‚çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±å¯ä»¥æŠŠæ•°æ®åº“ä¸­çš„åº“å­˜æ•°æ®è½¬ç§»åˆ°Redisç¼“å­˜ä¸­ï¼Œæ‰€æœ‰å‡åº“å­˜æ“ä½œéƒ½åœ¨Redisä¸­è¿›è¡Œï¼Œç„¶åå†é€šè¿‡åå°è¿›ç¨‹æŠŠRedisä¸­çš„ç”¨æˆ·ç§’æ€è¯·æ±‚åŒæ­¥åˆ°æ•°æ®åº“ä¸­ã€‚</span>  </p><p> <span style="margin: 0px; padding: 0px; max-width: 100%; word-wrap: break-word !important;"></span> </p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; font-size: 18px; word-wrap: break-word !important;">æ•°æ®åº“å±‚ </span></p><p>æ•°æ®åº“å±‚æ˜¯æœ€è„†å¼±çš„ä¸€å±‚ï¼Œä¸€èˆ¬åœ¨åº”ç”¨è®¾è®¡æ—¶åœ¨ä¸Šæ¸¸å°±éœ€è¦æŠŠè¯·æ±‚æ‹¦æˆªæ‰ï¼Œæ•°æ®åº“å±‚åªæ‰¿æ‹…â€œèƒ½åŠ›èŒƒå›´å†…â€çš„è®¿é—®è¯·æ±‚ã€‚æ‰€ä»¥ï¼Œä¸Šé¢é€šè¿‡åœ¨æœåŠ¡å±‚å¼•å…¥é˜Ÿåˆ—å’Œç¼“å­˜ï¼Œè®©æœ€åº•å±‚çš„æ•°æ®åº“é«˜æ•æ— å¿§ã€‚</p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; font-size: 18px; word-wrap: break-word !important;">æ¥ä¸‹æ¥è¯¦ç»†è®²Redisç¼“å­˜è¯¦ç»†æ€è·¯;</span></p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; word-wrap: break-word !important;">Redis</span>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼Œå¯åˆ©ç”¨Redisè½»æ¾å®ç°ä¸€ä¸ªå¼ºå¤§çš„ç§’æ€ç³»ç»Ÿã€‚</p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700; font-family: KaiTi_GB2312; color: rgb(0, 0, 0); font-size: 18px; word-wrap: break-word !important;">å®ç°åŸç†ï¼šliståŒå‘é“¾è¡¨</span></p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-family: KaiTi_GB2312; color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word !important;">æ­¤å¤„ç”¨åˆ°äº†Redisä¸­çš„é“¾è¡¨(list)æ•°æ®ç±»å‹:</span></p><p><a href="http://www.hwy.ac.cn/upload/2018/07/ok1j63ok9eiufri9uaq2te9t1t.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/07/ok1j63ok9eiufri9uaq2te9t1t.png" class="lazyload" title></a> <span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-family: KaiTi_GB2312; color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word !important;"></span> </p><p><a href="http://www.hwy.ac.cn/upload/2018/07/so6qb80396gigqr6a16j4qre5i.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/07/so6qb80396gigqr6a16j4qre5i.png" class="lazyload" title></a> <span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-family: KaiTi_GB2312; color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word !important;"></span> </p><p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨Redis æœ€ç®€å•çš„key-valueæ•°æ®ç»“æ„ï¼Œç”¨ä¸€ä¸ªåŸå­ç±»å‹çš„å˜é‡å€¼(AtomicInteger)ä½œä¸ºkeyï¼ŒæŠŠç”¨æˆ·idä½œä¸ºvalueï¼Œåº“å­˜æ•°é‡ä¾¿æ˜¯åŸå­å˜é‡çš„æœ€å¤§å€¼ã€‚å¯¹äºæ¯ä¸ªç”¨æˆ·çš„ç§’æ€ï¼Œæˆ‘ä»¬ä½¿ç”¨ RPUSH key valueæ’å…¥ç§’æ€è¯·æ±‚ï¼Œ å½“æ’å…¥çš„ç§’æ€è¯·æ±‚æ•°è¾¾åˆ°ä¸Šé™æ—¶ï¼Œåœæ­¢æ‰€æœ‰åç»­æ’å…¥ã€‚<span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; word-wrap: break-word !important;">å› ä¸ºpopæ“ä½œæ˜¯åŸå­çš„ï¼Œå³ä½¿æœ‰å¾ˆå¤šç”¨æˆ·åŒæ—¶åˆ°è¾¾ï¼Œä¹Ÿæ˜¯ä¾æ¬¡æ‰§è¡Œ.(mysqläº‹åŠ¡åœ¨é«˜å¹¶å‘ä¸‹æ€§èƒ½ä¸‹é™å¾ˆå‰å®³ï¼Œæ–‡ä»¶é”çš„æ–¹å¼ä¹Ÿæ˜¯).</span></p><pre><code>ç„¶åæˆ‘ä»¬å¯ä»¥å†å¯åŠ¨å¤šä¸ªå·¥ä½œçº¿ç¨‹ï¼Œä½¿ç”¨ LPOP key è¯»å–ç§’æ€æˆåŠŸè€…çš„ç”¨æˆ·idï¼Œç„¶åå†æ“ä½œæ•°æ®åº“åšæœ€ç»ˆçš„ä¸‹è®¢å•å‡åº“å­˜æ“ä½œã€‚å½“ç„¶ï¼Œä¸Šé¢Redisä¹Ÿå¯ä»¥æ›¿æ¢æˆæ¶ˆæ¯ä¸­é—´ä»¶å¦‚ActiveMQã€RabbitMQç­‰ï¼Œä¹Ÿå¯ä»¥å°†ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ ç»„åˆèµ·æ¥ï¼Œç¼“å­˜ç³»ç»Ÿè´Ÿè´£æ¥æ”¶è®°å½•ç”¨æˆ·è¯·æ±‚ï¼Œæ¶ˆæ¯ä¸­é—´ä»¶è´Ÿè´£å°†ç¼“å­˜ä¸­çš„è¯·æ±‚åŒæ­¥åˆ°æ•°æ®åº“ã€‚</code></pre><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700; font-size: 18px; word-wrap: break-word !important;">ï¼ˆ1ï¼‰ä½¿ç”¨Redisä¸­é—´ä»¶ç¼“å­˜åŠ¨æ€èµ„æºçš„å¥½å¤„ï¼Ÿ</span></p><pre><code>æé«˜è®¿é—®é€Ÿåº¦ï¼Œå‡å°‘å¯¹æ•°æ®åº“çš„é“¾æ¥çš„æ‰“å¼€ã€å…³é—­ï¼Œ</code></pre><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-weight: 700; font-size: 18px; word-wrap: break-word !important;">ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¸ç”¨JVMå†…å­˜è€Œä½¿ç”¨Redisä½œä¸ºç¼“å­˜å‘¢ï¼Ÿ</span></p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; word-wrap: break-word !important;">      JVM å†…å­˜è¾ƒå°ï¼Œéš”ä¸€æ®µæ—¶é—´ä¼šè‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</span><br><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; word-wrap: break-word !important;">      JVMå’Œä¸šåŠ¡ç¨‹åºç»‘å®šåœ¨ä¸€èµ·äº†ï¼Œå¦‚æœç¨‹åºå‡ºé”™ï¼ŒJVMä¹Ÿä¼šåœæ­¢ï¼Œè¿™æ ·å°±å¯¼è‡´ç¼“å­˜æ•°æ®ä¸¢å¤±ã€‚</span>  </p><pre><code>å¦‚æœä½¿ç”¨Redisï¼Œé™¤äº†ç¼“å­˜æ¯”è¾ƒå¤§ä¹‹å¤–ï¼Œè¿˜å®ç°äº†ç¼“å­˜æ•°æ®å’Œä¸šåŠ¡ç¨‹åºçš„åˆ†ç¦»ï¼Œå³ä½¿è¿è¡Œç¨‹åºå‡ºç°é”™è¯¯ï¼Œä¹Ÿä¸ä¼šå½±å“ç¼“å­˜ã€‚</code></pre><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; font-weight: 700; word-break: break-all; font-size: 18px; word-wrap: break-word !important;">å‹åŠ›æµ‹è¯•å·¥å…·</span></p><p>ä½¿ç”¨JMeter å‹æµ‹å·¥å…· </p><p>ä¸‹è½½ã€å®‰è£…ã€è¿›å…¥C:/JMeter/binä¸‹é¢çš„jmeter.batæ‰¹å¤„ç†æ–‡ä»¶æ¥å¯åŠ¨JMeterçš„å¯è§†åŒ–ç•Œé¢ï¼Œ </p><p>è¿›å…¥æµ‹è¯•è®¡åˆ’æ·»åŠ çº¿ç¨‹ç»„: è®¾ç½®çº¿ç¨‹æ•°ï¼Œå¾ªç¯æ¬¡æ•°ï¼Œæ·»åŠ HTTPé»˜è®¤è¯·æ±‚ï¼ŒæœåŠ¡å™¨åç§°ï¼ŒIPï¼Œä»¥åŠè‡ªå·±è®¾å®šçš„æºå¸¦å‚æ•°</p><p>æ·»åŠ ç›‘å¬å™¨ï¼Œå­˜æ”¾æµ‹è¯•ç»“æœï¼šèšåˆæŠ¥å‘Šï¼Œå¯ä»¥è¡¨æ ¼æŸ¥è¯¢ã€å›¾å½¢ç»“æœã€æ ‘ç»“æœ </p><p>ç‚¹å‡»è¿è¡Œ-ã€‹å¯åŠ¨ã€‚ </p><p><span style="margin: 0px; padding: 0px; max-width: 100%; outline-style: initial; outline-width: 0px; word-break: break-all; font-family: KaiTi_GB2312; color: rgb(0, 0, 0); font-size: 14px; word-wrap: break-word !important;"></span></p><p>å¹¶å‘é‡ï¼š50W-100W 100W-500W</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¶ˆæ¯é˜Ÿåˆ—å¸¸è§çš„ 5 ä¸ªåº”ç”¨åœºæ™¯</title>
      <link href="/2018/07/10/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%B8%B8%E8%A7%81%E7%9A%84%205%20%E4%B8%AA%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
      <url>/2018/07/10/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%B8%B8%E8%A7%81%E7%9A%84%205%20%E4%B8%AA%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è€¦åˆï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šé”‹ç­‰é—®é¢˜ã€‚å®ç°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æ¶æ„ã€‚ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQã€RabbitMQã€ZeroMQã€Kafkaã€MetaMQã€RocketMQã€‚</p><a id="more"></a><p>ä¸€ã€ç®€ä»‹</p><p>æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œä¸»è¦è§£å†³åº”ç”¨è€¦åˆï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šé”‹ç­‰é—®é¢˜ã€‚å®ç°é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æ¶æ„ã€‚ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰ActiveMQã€RabbitMQã€ZeroMQã€Kafkaã€MetaMQã€RocketMQã€‚</p><p>äºŒã€æ¶ˆæ¯é˜Ÿåˆ—åº”ç”¨åœºæ™¯</p><p>ä»¥ä¸‹ä»‹ç»æ¶ˆæ¯é˜Ÿåˆ—åœ¨å®é™…åº”ç”¨ä¸­å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯ï¼šå¼‚æ­¥å¤„ç†ï¼Œåº”ç”¨è§£è€¦ï¼Œæµé‡å‰Šé”‹å’Œæ¶ˆæ¯é€šè®¯å››ä¸ªåœºæ™¯ã€‚</p><p>1ã€å¼‚æ­¥å¤„ç†</p><p>åœºæ™¯è¯´æ˜ï¼šç”¨æˆ·æ³¨å†Œåï¼Œéœ€è¦å‘æ³¨å†Œé‚®ä»¶å’Œæ³¨å†ŒçŸ­ä¿¡ã€‚ä¼ ç»Ÿçš„åšæ³•æœ‰ä¸¤ç§ï¼šä¸²è¡Œçš„æ–¹å¼å’Œå¹¶è¡Œæ–¹å¼ã€‚</p><p>ä¸²è¡Œæ–¹å¼ï¼šå°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“æˆåŠŸåï¼Œå‘é€æ³¨å†Œé‚®ä»¶ï¼Œå†å‘é€æ³¨å†ŒçŸ­ä¿¡ã€‚ä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆåï¼Œè¿”å›ç»™å®¢æˆ·ã€‚</p><p>å¹¶è¡Œæ–¹å¼ï¼šå°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“æˆåŠŸåï¼Œå‘é€æ³¨å†Œé‚®ä»¶çš„åŒæ—¶ï¼Œå‘é€æ³¨å†ŒçŸ­ä¿¡ã€‚ä»¥ä¸Šä¸‰ä¸ªä»»åŠ¡å®Œæˆåï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ä¸ä¸²è¡Œçš„å·®åˆ«æ˜¯ï¼Œå¹¶è¡Œçš„æ–¹å¼å¯ä»¥æé«˜å¤„ç†çš„æ—¶é—´ã€‚</p><p>å‡è®¾ä¸‰ä¸ªä¸šåŠ¡èŠ‚ç‚¹æ¯ä¸ªä½¿ç”¨50æ¯«ç§’é’Ÿï¼Œä¸è€ƒè™‘ç½‘ç»œç­‰å…¶ä»–å¼€é”€ï¼Œåˆ™ä¸²è¡Œæ–¹å¼çš„æ—¶é—´æ˜¯150æ¯«ç§’ï¼Œå¹¶è¡Œçš„æ—¶é—´å¯èƒ½æ˜¯100æ¯«ç§’ã€‚</p><p>å› ä¸ºCPUåœ¨å•ä½æ—¶é—´å†…å¤„ç†çš„è¯·æ±‚æ•°æ˜¯ä¸€å®šçš„ï¼Œå‡è®¾CPU1ç§’å†…ååé‡æ˜¯100æ¬¡ã€‚åˆ™ä¸²è¡Œæ–¹å¼1ç§’å†…CPUå¯å¤„ç†çš„è¯·æ±‚é‡æ˜¯7æ¬¡ï¼ˆ1000/150ï¼‰ã€‚å¹¶è¡Œæ–¹å¼å¤„ç†çš„è¯·æ±‚é‡æ˜¯10æ¬¡ï¼ˆ1000/100ï¼‰ã€‚</p><p>å°ç»“ï¼šå¦‚ä»¥ä¸Šæ¡ˆä¾‹æè¿°ï¼Œä¼ ç»Ÿçš„æ–¹å¼ç³»ç»Ÿçš„æ€§èƒ½ï¼ˆå¹¶å‘é‡ï¼Œååé‡ï¼Œå“åº”æ—¶é—´ï¼‰ä¼šæœ‰ç“¶é¢ˆã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†ä¸æ˜¯å¿…é¡»çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¼‚æ­¥å¤„ç†ã€‚æ”¹é€ åçš„æ¶æ„å¦‚ä¸‹ï¼š</p><p>æŒ‰ç…§ä»¥ä¸Šçº¦å®šï¼Œç”¨æˆ·çš„å“åº”æ—¶é—´ç›¸å½“äºæ˜¯æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯50æ¯«ç§’ã€‚æ³¨å†Œé‚®ä»¶ï¼Œå‘é€çŸ­ä¿¡å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—åï¼Œç›´æ¥è¿”å›ï¼Œå› æ­¤å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„é€Ÿåº¦å¾ˆå¿«ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ï¼Œå› æ­¤ç”¨æˆ·çš„å“åº”æ—¶é—´å¯èƒ½æ˜¯50æ¯«ç§’ã€‚å› æ­¤æ¶æ„æ”¹å˜åï¼Œç³»ç»Ÿçš„ååé‡æé«˜åˆ°æ¯ç§’20QPSã€‚æ¯”ä¸²è¡Œæé«˜äº†3å€ï¼Œæ¯”å¹¶è¡Œæé«˜äº†ä¸¤å€ï¼</p><p>2ã€åº”ç”¨è§£è€¦</p><p>åœºæ™¯è¯´æ˜ï¼šç”¨æˆ·ä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿéœ€è¦é€šçŸ¥åº“å­˜ç³»ç»Ÿã€‚ä¼ ç»Ÿçš„åšæ³•æ˜¯ï¼Œè®¢å•ç³»ç»Ÿè°ƒç”¨åº“å­˜ç³»ç»Ÿçš„æ¥å£ã€‚å¦‚ä¸‹å›¾ï¼š</p><p>ä¼ ç»Ÿæ¨¡å¼çš„ç¼ºç‚¹ï¼š</p><p>å‡å¦‚åº“å­˜ç³»ç»Ÿæ— æ³•è®¿é—®ï¼Œåˆ™è®¢å•å‡åº“å­˜å°†å¤±è´¥ï¼Œä»è€Œå¯¼è‡´è®¢å•å¤±è´¥ï¼Œè®¢å•ç³»ç»Ÿä¸åº“å­˜ç³»ç»Ÿè€¦åˆã€‚</p><p>å¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜å‘¢ï¼Ÿå¼•å…¥åº”ç”¨æ¶ˆæ¯é˜Ÿåˆ—åçš„æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾ï¼š</p><p>è®¢å•ç³»ç»Ÿï¼šç”¨æˆ·ä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿå®ŒæˆæŒä¹…åŒ–å¤„ç†ï¼Œå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿”å›ç”¨æˆ·è®¢å•ä¸‹å•æˆåŠŸ</p><p>åº“å­˜ç³»ç»Ÿï¼šè®¢é˜…ä¸‹å•çš„æ¶ˆæ¯ï¼Œé‡‡ç”¨æ‹‰/æ¨çš„æ–¹å¼ï¼Œè·å–ä¸‹å•ä¿¡æ¯ï¼Œåº“å­˜ç³»ç»Ÿæ ¹æ®ä¸‹å•ä¿¡æ¯ï¼Œè¿›è¡Œåº“å­˜æ“ä½œ</p><p>å‡å¦‚ï¼šåœ¨ä¸‹å•æ—¶åº“å­˜ç³»ç»Ÿä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ä¹Ÿä¸å½±å“æ­£å¸¸ä¸‹å•ï¼Œå› ä¸ºä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—å°±ä¸å†å…³å¿ƒå…¶ä»–çš„åç»­æ“ä½œäº†ã€‚å®ç°è®¢å•ç³»ç»Ÿä¸åº“å­˜ç³»ç»Ÿçš„åº”ç”¨è§£è€¦ã€‚</p><p>3ã€æµé‡å‰Šé”‹</p><p>æµé‡å‰Šé”‹ä¹Ÿæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¸¸ç”¨åœºæ™¯ï¼Œä¸€èˆ¬åœ¨ç§’æ€æˆ–å›¢æŠ¢æ´»åŠ¨ä¸­ä½¿ç”¨å¹¿æ³›ï¼</p><p>åº”ç”¨åœºæ™¯ï¼šç§’æ€æ´»åŠ¨ï¼Œä¸€èˆ¬ä¼šå› ä¸ºæµé‡è¿‡å¤§ï¼Œå¯¼è‡´æµé‡æš´å¢ï¼Œåº”ç”¨æŒ‚æ‰ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬éœ€è¦åœ¨åº”ç”¨å‰ç«¯åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>å¯ä»¥æ§åˆ¶æ´»åŠ¨çš„äººæ•°ï¼Œå¯ä»¥ç¼“è§£çŸ­æ—¶é—´å†…é«˜æµé‡å‹å®åº”ç”¨ã€‚</p><p>ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶åï¼Œé¦–å…ˆå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚å‡å¦‚æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦è¶…è¿‡æœ€å¤§æ•°é‡ï¼Œåˆ™ç›´æ¥æŠ›å¼ƒç”¨æˆ·è¯·æ±‚æˆ–è·³è½¬åˆ°é”™è¯¯é¡µé¢ã€‚</p><p>ç§’æ€ä¸šåŠ¡æ ¹æ®æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ä¿¡æ¯ï¼Œå†åšåç»­å¤„ç†ã€‚</p><p>4ã€æ—¥å¿—å¤„ç†</p><p>æ—¥å¿—å¤„ç†æ˜¯æŒ‡å°†æ¶ˆæ¯é˜Ÿåˆ—ç”¨åœ¨æ—¥å¿—å¤„ç†ä¸­ï¼Œæ¯”å¦‚Kafkaçš„åº”ç”¨ï¼Œè§£å†³å¤§é‡æ—¥å¿—ä¼ è¾“çš„é—®é¢˜ã€‚æ¶æ„ç®€åŒ–å¦‚ä¸‹ï¼š</p><p>æ—¥å¿—é‡‡é›†å®¢æˆ·ç«¯ï¼Œè´Ÿè´£æ—¥å¿—æ•°æ®é‡‡é›†ï¼Œå®šæ—¶å†™å—å†™å…¥Kafkaé˜Ÿåˆ—ï¼›Kafkaæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè´Ÿè´£æ—¥å¿—æ•°æ®çš„æ¥æ”¶ï¼Œå­˜å‚¨å’Œè½¬å‘ï¼›æ—¥å¿—å¤„ç†åº”ç”¨ï¼šè®¢é˜…å¹¶æ¶ˆè´¹kafkaé˜Ÿåˆ—ä¸­çš„æ—¥å¿—æ•°æ®ã€‚</p><p>ä»¥ä¸‹æ˜¯æ–°æµªkafkaæ—¥å¿—å¤„ç†åº”ç”¨æ¡ˆä¾‹ï¼š</p><p>Kafkaï¼šæ¥æ”¶ç”¨æˆ·æ—¥å¿—çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼›</p><p>Logstashï¼šåšæ—¥å¿—è§£æï¼Œç»Ÿä¸€æˆJSONè¾“å‡ºç»™Elasticsearchï¼›</p><p>Elasticsearchï¼šå®æ—¶æ—¥å¿—åˆ†ææœåŠ¡çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸€ä¸ªschemalessï¼Œå®æ—¶çš„æ•°æ®å­˜å‚¨æœåŠ¡ï¼Œé€šè¿‡indexç»„ç»‡æ•°æ®ï¼Œå…¼å…·å¼ºå¤§çš„æœç´¢å’Œç»Ÿè®¡åŠŸèƒ½ï¼›</p><p>Kibanaï¼šåŸºäºElasticsearchçš„æ•°æ®å¯è§†åŒ–ç»„ä»¶ï¼Œè¶…å¼ºçš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›æ˜¯ä¼—å¤šå…¬å¸é€‰æ‹©ELK stackçš„é‡è¦åŸå› ã€‚</p><p>5ã€æ¶ˆæ¯é€šè®¯</p><p>æ¶ˆæ¯é€šè®¯æ˜¯æŒ‡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸€èˆ¬éƒ½å†…ç½®äº†é«˜æ•ˆçš„é€šä¿¡æœºåˆ¶ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨åœ¨çº¯çš„æ¶ˆæ¯é€šè®¯ã€‚æ¯”å¦‚å®ç°ç‚¹å¯¹ç‚¹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…èŠå¤©å®¤ç­‰ã€‚</p><p>ç‚¹å¯¹ç‚¹é€šè®¯ï¼š</p><p>å®¢æˆ·ç«¯Aå’Œå®¢æˆ·ç«¯Bä½¿ç”¨åŒä¸€é˜Ÿåˆ—ï¼Œè¿›è¡Œæ¶ˆæ¯é€šè®¯ã€‚</p><p>èŠå¤©å®¤é€šè®¯ï¼š</p><p>å®¢æˆ·ç«¯Aï¼Œå®¢æˆ·ç«¯Bï¼Œå®¢æˆ·ç«¯Nè®¢é˜…åŒä¸€ä¸»é¢˜ï¼Œè¿›è¡Œæ¶ˆæ¯å‘å¸ƒå’Œæ¥æ”¶ã€‚å®ç°ç±»ä¼¼èŠå¤©å®¤æ•ˆæœã€‚</p><p>ä»¥ä¸Šå®é™…æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸¤ç§æ¶ˆæ¯æ¨¡å¼ï¼Œç‚¹å¯¹ç‚¹æˆ–å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚æ¨¡å‹ä¸ºç¤ºæ„å›¾ï¼Œä¾›å‚è€ƒã€‚</p><p>ä¸‰ã€æ¶ˆæ¯ä¸­é—´ä»¶ç¤ºä¾‹<br>1ã€ç”µå•†ç³»ç»Ÿ</p><p>æ¶ˆæ¯é˜Ÿåˆ—é‡‡ç”¨é«˜å¯ç”¨ï¼Œå¯æŒä¹…åŒ–çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ¯”å¦‚Active MQï¼ŒRabbit MQï¼ŒRocket Mqã€‚</p><p>åº”ç”¨å°†ä¸»å¹²é€»è¾‘å¤„ç†å®Œæˆåï¼Œå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¶ˆæ¯å‘é€æ˜¯å¦æˆåŠŸå¯ä»¥å¼€å¯æ¶ˆæ¯çš„ç¡®è®¤æ¨¡å¼ã€‚ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—è¿”å›æ¶ˆæ¯æ¥æ”¶æˆåŠŸçŠ¶æ€åï¼Œåº”ç”¨å†è¿”å›ï¼Œè¿™æ ·ä¿éšœæ¶ˆæ¯çš„å®Œæ•´æ€§ï¼‰ï¼›</p><p>æ‰©å±•æµç¨‹ï¼ˆå‘çŸ­ä¿¡ï¼Œé…é€å¤„ç†ï¼‰è®¢é˜…é˜Ÿåˆ—æ¶ˆæ¯ã€‚é‡‡ç”¨æ¨æˆ–æ‹‰çš„æ–¹å¼è·å–æ¶ˆæ¯å¹¶å¤„ç†ï¼›</p><p>æ¶ˆæ¯å°†åº”ç”¨è§£è€¦çš„åŒæ—¶ï¼Œå¸¦æ¥äº†æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹å¼è§£å†³ã€‚æ¯”å¦‚ä¸»æ•°æ®å†™å…¥æ•°æ®åº“ï¼Œæ‰©å±•åº”ç”¨æ ¹æ®æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶ç»“åˆæ•°æ®åº“æ–¹å¼å®ç°åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„åç»­å¤„ç†ï¼›</p><p>2ã€æ—¥å¿—æ”¶é›†ç³»ç»Ÿ</p><p>åˆ†ä¸ºZookeeperæ³¨å†Œä¸­å¿ƒï¼Œæ—¥å¿—æ”¶é›†å®¢æˆ·ç«¯ï¼ŒKafkaé›†ç¾¤å’ŒStormé›†ç¾¤ï¼ˆOtherAppï¼‰å››éƒ¨åˆ†ç»„æˆã€‚</p><p>Zookeeperæ³¨å†Œä¸­å¿ƒï¼Œæå‡ºè´Ÿè½½å‡è¡¡å’Œåœ°å€æŸ¥æ‰¾æœåŠ¡ï¼›</p><p>æ—¥å¿—æ”¶é›†å®¢æˆ·ç«¯ï¼Œç”¨äºé‡‡é›†åº”ç”¨ç³»ç»Ÿçš„æ—¥å¿—ï¼Œå¹¶å°†æ•°æ®æ¨é€åˆ°kafkaé˜Ÿåˆ—ï¼›</p><p>Kafkaé›†ç¾¤ï¼šæ¥æ”¶ï¼Œè·¯ç”±ï¼Œå­˜å‚¨ï¼Œè½¬å‘ç­‰æ¶ˆæ¯å¤„ç†ï¼›</p><p>Stormé›†ç¾¤ï¼šä¸OtherAppå¤„äºåŒä¸€çº§åˆ«ï¼Œé‡‡ç”¨æ‹‰çš„æ–¹å¼æ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼›</p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ¶ˆæ¯é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼ä¸€å®šè¦æœ‰Redis?</title>
      <link href="/2018/07/09/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9C%89Redis/"/>
      <url>/2018/07/09/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9C%89Redis/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>è€ƒè™‘åˆ°ç»å¤§éƒ¨åˆ†å†™ä¸šåŠ¡çš„ç¨‹åºå‘˜ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ Redis çš„æ—¶å€™ï¼Œåªä¼š Set Value å’Œ Get Value ä¸¤ä¸ªæ“ä½œï¼Œå¯¹ Redis æ•´ä½“ç¼ºä¹ä¸€ä¸ªè®¤çŸ¥ã€‚</p><a id="more"></a><p>ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼ä¸€å®šè¦æœ‰Redis?<br>â€œ<br>è€ƒè™‘åˆ°ç»å¤§éƒ¨åˆ†å†™ä¸šåŠ¡çš„ç¨‹åºå‘˜ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ Redis çš„æ—¶å€™ï¼Œåªä¼š Set Value å’Œ Get Value ä¸¤ä¸ªæ“ä½œï¼Œå¯¹ Redis æ•´ä½“ç¼ºä¹ä¸€ä¸ªè®¤çŸ¥ã€‚</p><p>æ‰€ä»¥æˆ‘æ–—èƒ†ä»¥ Redis ä¸ºé¢˜æï¼Œå¯¹ Redis å¸¸è§é—®é¢˜åšä¸€ä¸ªæ€»ç»“ï¼Œå¸Œæœ›èƒ½å¤Ÿå¼¥è¡¥å¤§å®¶çš„çŸ¥è¯†ç›²ç‚¹ã€‚</p><p>æœ¬æ–‡å›´ç»•ä»¥ä¸‹å‡ ç‚¹è¿›è¡Œé˜è¿°ï¼š</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨ Redis</p><p>ä½¿ç”¨ Redis æœ‰ä»€ä¹ˆç¼ºç‚¹</p><p>å•çº¿ç¨‹çš„ Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</p><p>Redis çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯</p><p>Redis çš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶</p><p>Redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜</p><p>å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜</p><p>å¦‚ä½•è§£å†³ Redis çš„å¹¶å‘ç«äº‰ Key é—®é¢˜</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨ Redis</p><p>æˆ‘è§‰å¾—åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Redisï¼Œä¸»è¦æ˜¯ä»ä¸¤ä¸ªè§’åº¦å»è€ƒè™‘ï¼šæ€§èƒ½å’Œå¹¶å‘ã€‚</p><p>å½“ç„¶ï¼ŒRedis è¿˜å…·å¤‡å¯ä»¥åšåˆ†å¸ƒå¼é”ç­‰å…¶ä»–åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ä¸ºäº†åˆ†å¸ƒå¼é”è¿™äº›å…¶ä»–åŠŸèƒ½ï¼Œå®Œå…¨è¿˜æœ‰å…¶ä»–ä¸­é—´ä»¶ï¼Œå¦‚ ZooKpeer ç­‰ä»£æ›¿ï¼Œå¹¶ä¸æ˜¯éè¦ä½¿ç”¨ Redisã€‚å› æ­¤ï¼Œè¿™ä¸ªé—®é¢˜ä¸»è¦ä»æ€§èƒ½å’Œå¹¶å‘ä¸¤ä¸ªè§’åº¦å»ç­”ã€‚</p><p>æ€§èƒ½</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç¢°åˆ°éœ€è¦æ‰§è¡Œè€—æ—¶ç‰¹åˆ«ä¹…ï¼Œä¸”ç»“æœä¸é¢‘ç¹å˜åŠ¨çš„ SQLï¼Œå°±ç‰¹åˆ«é€‚åˆå°†è¿è¡Œç»“æœæ”¾å…¥ç¼“å­˜ã€‚è¿™æ ·ï¼Œåé¢çš„è¯·æ±‚å°±å»ç¼“å­˜ä¸­è¯»å–ï¼Œä½¿å¾—è¯·æ±‚èƒ½å¤Ÿè¿…é€Ÿå“åº”ã€‚</p><p>é¢˜å¤–è¯ï¼šå¿½ç„¶æƒ³èŠä¸€ä¸‹è¿™ä¸ªè¿…é€Ÿå“åº”çš„æ ‡å‡†ã€‚æ ¹æ®äº¤äº’æ•ˆæœçš„ä¸åŒï¼Œè¿™ä¸ªå“åº”æ—¶é—´æ²¡æœ‰å›ºå®šæ ‡å‡†ã€‚</p><p>ä¸è¿‡æ›¾ç»æœ‰äººè¿™ä¹ˆå‘Šè¯‰æˆ‘ï¼šâ€åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬çš„é¡µé¢è·³è½¬éœ€è¦åœ¨ç¬é—´è§£å†³ï¼Œå¯¹äºé¡µå†…æ“ä½œåˆ™éœ€è¦åœ¨åˆ¹é‚£é—´è§£å†³ã€‚</p><p>å¦å¤–ï¼Œè¶…è¿‡ä¸€å¼¹æŒ‡çš„è€—æ—¶æ“ä½œè¦æœ‰è¿›åº¦æç¤ºï¼Œå¹¶ä¸”å¯ä»¥éšæ—¶ä¸­æ­¢æˆ–å–æ¶ˆï¼Œè¿™æ ·æ‰èƒ½ç»™ç”¨æˆ·æœ€å¥½çš„ä½“éªŒã€‚â€</p><p>é‚£ä¹ˆç¬é—´ã€åˆ¹é‚£ã€ä¸€å¼¹æŒ‡å…·ä½“æ˜¯å¤šå°‘æ—¶é—´å‘¢ï¼Ÿ</p><p>æ ¹æ®ã€Šæ‘©è¯ƒåƒ§ç¥—å¾‹ã€‹è®°è½½ï¼š</p><p>ä¸€åˆ¹é‚£è€…ä¸ºä¸€å¿µï¼ŒäºŒåå¿µä¸ºä¸€ç¬ï¼ŒäºŒåç¬ä¸ºä¸€å¼¹æŒ‡ï¼ŒäºŒåå¼¹æŒ‡ä¸ºä¸€ç½—é¢„ï¼ŒäºŒåç½—é¢„ä¸ºä¸€é¡»è‡¾ï¼Œä¸€æ—¥ä¸€å¤œæœ‰ä¸‰åé¡»è‡¾ã€‚</p><p>é‚£ä¹ˆï¼Œç»è¿‡å‘¨å¯†çš„è®¡ç®—ï¼Œä¸€ç¬é—´ä¸º 0.36 ç§’ã€ä¸€åˆ¹é‚£æœ‰ 0.018 ç§’ã€ä¸€å¼¹æŒ‡é•¿è¾¾ 7.2 ç§’ã€‚</p><p>å¹¶å‘</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å¤§å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ•°æ®åº“ä¼šå‡ºç°è¿æ¥å¼‚å¸¸ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ Redis åšä¸€ä¸ªç¼“å†²æ“ä½œï¼Œè®©è¯·æ±‚å…ˆè®¿é—®åˆ° Redisï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚</p><p>ä½¿ç”¨ Redis æœ‰ä»€ä¹ˆç¼ºç‚¹</p><p>å¤§å®¶ç”¨ Redis è¿™ä¹ˆä¹…ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å¿…é¡»è¦äº†è§£çš„ï¼ŒåŸºæœ¬ä¸Šä½¿ç”¨ Redis éƒ½ä¼šç¢°åˆ°ä¸€äº›é—®é¢˜ï¼Œå¸¸è§çš„ä¹Ÿå°±å‡ ä¸ªã€‚</p><p>å›ç­”ä¸»è¦æ˜¯å››ä¸ªé—®é¢˜ï¼š</p><p>ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜</p><p>ç¼“å­˜é›ªå´©é—®é¢˜</p><p>ç¼“å­˜å‡»ç©¿é—®é¢˜</p><p>ç¼“å­˜çš„å¹¶å‘ç«äº‰é—®é¢˜</p><p>è¿™å››ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸ªäººè§‰å¾—åœ¨é¡¹ç›®ä¸­æ˜¯å¸¸é‡è§çš„ï¼Œå…·ä½“è§£å†³æ–¹æ¡ˆï¼Œåæ–‡ç»™å‡ºã€‚</p><p>å•çº¿ç¨‹çš„ Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</p><p>è¿™ä¸ªé—®é¢˜æ˜¯å¯¹ Redis å†…éƒ¨æœºåˆ¶çš„ä¸€ä¸ªè€ƒå¯Ÿã€‚æ ¹æ®æˆ‘çš„é¢è¯•ç»éªŒï¼Œå¾ˆå¤šäººéƒ½ä¸çŸ¥é“ Redis æ˜¯å•çº¿ç¨‹å·¥ä½œæ¨¡å‹ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æ˜¯åº”è¯¥è¦å¤ä¹ ä¸€ä¸‹çš„ã€‚</p><p>å›ç­”ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><p>çº¯å†…å­˜æ“ä½œ</p><p>å•çº¿ç¨‹æ“ä½œï¼Œé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</p><p>é‡‡ç”¨äº†éé˜»å¡ I/O å¤šè·¯å¤ç”¨æœºåˆ¶</p><p>é¢˜å¤–è¯ï¼šæˆ‘ä»¬ç°åœ¨è¦ä»”ç»†çš„è¯´ä¸€è¯´ I/O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå› ä¸ºè¿™ä¸ªè¯´æ³•å®åœ¨æ˜¯å¤ªé€šä¿—äº†ï¼Œé€šä¿—åˆ°ä¸€èˆ¬äººéƒ½ä¸æ‡‚æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><p>æ‰“ä¸€ä¸ªæ¯”æ–¹ï¼šå°æ›²åœ¨ S åŸå¼€äº†ä¸€å®¶å¿«é€’åº—ï¼Œè´Ÿè´£åŒåŸå¿«é€æœåŠ¡ã€‚å°æ›²å› ä¸ºèµ„é‡‘é™åˆ¶ï¼Œé›‡ä½£äº†ä¸€æ‰¹å¿«é€’å‘˜ï¼Œç„¶åå°æ›²å‘ç°èµ„é‡‘ä¸å¤Ÿäº†ï¼Œåªå¤Ÿä¹°ä¸€è¾†è½¦é€å¿«é€’ã€‚</p><p>ç»è¥æ–¹å¼ä¸€</p><p>å®¢æˆ·æ¯é€æ¥ä¸€ä»½å¿«é€’ï¼Œå°æ›²å°±è®©ä¸€ä¸ªå¿«é€’å‘˜ç›¯ç€ï¼Œç„¶åå¿«é€’å‘˜å¼€è½¦å»é€å¿«é€’ã€‚</p><p>æ…¢æ…¢çš„å°æ›²å°±å‘ç°äº†è¿™ç§ç»è¥æ–¹å¼å­˜åœ¨ä¸‹è¿°é—®é¢˜ï¼š</p><p>å‡ åä¸ªå¿«é€’å‘˜åŸºæœ¬ä¸Šæ—¶é—´éƒ½èŠ±åœ¨äº†æŠ¢è½¦ä¸Šäº†ï¼Œå¤§éƒ¨åˆ†å¿«é€’å‘˜éƒ½å¤„åœ¨é—²ç½®çŠ¶æ€ï¼Œè°æŠ¢åˆ°äº†è½¦ï¼Œè°å°±èƒ½å»é€å¿«é€’ã€‚</p><p>éšç€å¿«é€’çš„å¢å¤šï¼Œå¿«é€’å‘˜ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå°æ›²å‘ç°å¿«é€’åº—é‡Œè¶Šæ¥è¶ŠæŒ¤ï¼Œæ²¡åŠæ³•é›‡ä½£æ–°çš„å¿«é€’å‘˜äº†ã€‚</p><p>å¿«é€’å‘˜ä¹‹é—´çš„åè°ƒå¾ˆèŠ±æ—¶é—´ã€‚</p><p>ç»¼åˆä¸Šè¿°ç¼ºç‚¹ï¼Œå°æ›²ç—›å®šæ€ç—›ï¼Œæå‡ºäº†ä¸‹é¢çš„ç»è¥æ–¹å¼ã€‚</p><p>ç»è¥æ–¹å¼äºŒ</p><p>å°æ›²åªé›‡ä½£ä¸€ä¸ªå¿«é€’å‘˜ã€‚ç„¶åå‘¢ï¼Œå®¢æˆ·é€æ¥çš„å¿«é€’ï¼Œå°æ›²æŒ‰é€è¾¾åœ°ç‚¹æ ‡æ³¨å¥½ï¼Œç„¶åä¾æ¬¡æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</p><p>æœ€åï¼Œé‚£ä¸ªå¿«é€’å‘˜ä¾æ¬¡çš„å»å–å¿«é€’ï¼Œä¸€æ¬¡æ‹¿ä¸€ä¸ªï¼Œç„¶åå¼€ç€è½¦å»é€å¿«é€’ï¼Œé€å¥½äº†å°±å›æ¥æ‹¿ä¸‹ä¸€ä¸ªå¿«é€’ã€‚</p><p>ä¸Šè¿°ä¸¤ç§ç»è¥æ–¹å¼å¯¹æ¯”ï¼Œæ˜¯ä¸æ˜¯æ˜æ˜¾è§‰å¾—ç¬¬äºŒç§ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ›´å¥½å‘¢ï¼Ÿ</p><p>åœ¨ä¸Šè¿°æ¯”å–»ä¸­ï¼š</p><p>æ¯ä¸ªå¿«é€’å‘˜â†’æ¯ä¸ªçº¿ç¨‹</p><p>æ¯ä¸ªå¿«é€’â†’æ¯ä¸ª Socket(I/O æµ)</p><p>å¿«é€’çš„é€è¾¾åœ°ç‚¹â†’Socket çš„ä¸åŒçŠ¶æ€</p><p>å®¢æˆ·é€å¿«é€’è¯·æ±‚â†’æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚</p><p>å°æ›²çš„ç»è¥æ–¹å¼â†’æœåŠ¡ç«¯è¿è¡Œçš„ä»£ç </p><p>ä¸€è¾†è½¦â†’CPU çš„æ ¸æ•°</p><p>äºæ˜¯æˆ‘ä»¬æœ‰å¦‚ä¸‹ç»“è®ºï¼š</p><p>ç»è¥æ–¹å¼ä¸€å°±æ˜¯ä¼ ç»Ÿçš„å¹¶å‘æ¨¡å‹ï¼Œæ¯ä¸ª I/O æµ(å¿«é€’)éƒ½æœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹(å¿«é€’å‘˜)ç®¡ç†ã€‚</p><p>ç»è¥æ–¹å¼äºŒå°±æ˜¯ I/O å¤šè·¯å¤ç”¨ã€‚åªæœ‰å•ä¸ªçº¿ç¨‹(ä¸€ä¸ªå¿«é€’å‘˜)ï¼Œé€šè¿‡è·Ÿè¸ªæ¯ä¸ª I/O æµçš„çŠ¶æ€(æ¯ä¸ªå¿«é€’çš„é€è¾¾åœ°ç‚¹)ï¼Œæ¥ç®¡ç†å¤šä¸ª I/O æµã€‚</p><p>ä¸‹é¢ç±»æ¯”åˆ°çœŸå®çš„ Redis çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ redis-client åœ¨æ“ä½œçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå…·æœ‰ä¸åŒäº‹ä»¶ç±»å‹çš„ Socketã€‚</p><p>åœ¨æœåŠ¡ç«¯ï¼Œæœ‰ä¸€æ®µ I/O å¤šè·¯å¤ç”¨ç¨‹åºï¼Œå°†å…¶ç½®å…¥é˜Ÿåˆ—ä¹‹ä¸­ã€‚ç„¶åï¼Œæ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ï¼Œä¾æ¬¡å»é˜Ÿåˆ—ä¸­å–ï¼Œè½¬å‘åˆ°ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ä¸­ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™ä¸ª I/O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼ŒRedis è¿˜æä¾›äº† selectã€epollã€evportã€kqueue ç­‰å¤šè·¯å¤ç”¨å‡½æ•°åº“ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå»äº†è§£ã€‚</p><p>Redis çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯</p><p>æ˜¯ä¸æ˜¯è§‰å¾—è¿™ä¸ªé—®é¢˜å¾ˆåŸºç¡€ï¼Ÿæˆ‘ä¹Ÿè¿™ä¹ˆè§‰å¾—ã€‚ç„¶è€Œæ ¹æ®é¢è¯•ç»éªŒå‘ç°ï¼Œè‡³å°‘ç™¾åˆ†ä¹‹å…«åçš„äººç­”ä¸ä¸Šè¿™ä¸ªé—®é¢˜ã€‚</p><p>å»ºè®®ï¼Œåœ¨é¡¹ç›®ä¸­ç”¨åˆ°åï¼Œå†ç±»æ¯”è®°å¿†ï¼Œä½“ä¼šæ›´æ·±ï¼Œä¸è¦ç¡¬è®°ã€‚åŸºæœ¬ä¸Šï¼Œä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜ï¼Œäº”ç§ç±»å‹éƒ½ä¼šç”¨åˆ°ã€‚</p><p>String</p><p>è¿™ä¸ªæ²¡å•¥å¥½è¯´çš„ï¼Œæœ€å¸¸è§„çš„ set/get æ“ä½œï¼ŒValue å¯ä»¥æ˜¯ String ä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚ä¸€èˆ¬åšä¸€äº›å¤æ‚çš„è®¡æ•°åŠŸèƒ½çš„ç¼“å­˜ã€‚</p><p>Hash</p><p>è¿™é‡Œ Value å­˜æ”¾çš„æ˜¯ç»“æ„åŒ–çš„å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å°±æ˜¯æ“ä½œå…¶ä¸­çš„æŸä¸ªå­—æ®µã€‚</p><p>æˆ‘åœ¨åšå•ç‚¹ç™»å½•çš„æ—¶å€™ï¼Œå°±æ˜¯ç”¨è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥ CookieId ä½œä¸º Keyï¼Œè®¾ç½® 30 åˆ†é’Ÿä¸ºç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œèƒ½å¾ˆå¥½çš„æ¨¡æ‹Ÿå‡ºç±»ä¼¼ Session çš„æ•ˆæœã€‚</p><p>List</p><p>ä½¿ç”¨ List çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åšç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ï¼Œå¯ä»¥åˆ©ç”¨ lrange å‘½ä»¤ï¼ŒåšåŸºäº Redis çš„åˆ†é¡µåŠŸèƒ½ï¼Œæ€§èƒ½æä½³ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚</p><p>Set</p><p>å› ä¸º Set å †æ”¾çš„æ˜¯ä¸€å †ä¸é‡å¤å€¼çš„é›†åˆã€‚æ‰€ä»¥å¯ä»¥åšå…¨å±€å»é‡çš„åŠŸèƒ½ã€‚ä¸ºä»€ä¹ˆä¸ç”¨ JVM è‡ªå¸¦çš„ Set è¿›è¡Œå»é‡ï¼Ÿ</p><p>å› ä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿä¸€èˆ¬éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œä½¿ç”¨ JVM è‡ªå¸¦çš„ Setï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œéš¾é“ä¸ºäº†ä¸€ä¸ªåšä¸€ä¸ªå…¨å±€å»é‡ï¼Œå†èµ·ä¸€ä¸ªå…¬å…±æœåŠ¡ï¼Œå¤ªéº»çƒ¦äº†ã€‚</p><p>å¦å¤–ï¼Œå°±æ˜¯åˆ©ç”¨äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥è®¡ç®—å…±åŒå–œå¥½ï¼Œå…¨éƒ¨çš„å–œå¥½ï¼Œè‡ªå·±ç‹¬æœ‰çš„å–œå¥½ç­‰åŠŸèƒ½ã€‚</p><p>Sorted Set</p><p>Sorted Setå¤šäº†ä¸€ä¸ªæƒé‡å‚æ•° Scoreï¼Œé›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰ Score è¿›è¡Œæ’åˆ—ã€‚</p><p>å¯ä»¥åšæ’è¡Œæ¦œåº”ç”¨ï¼Œå– TOP N æ“ä½œã€‚Sorted Set å¯ä»¥ç”¨æ¥åšå»¶æ—¶ä»»åŠ¡ã€‚æœ€åä¸€ä¸ªåº”ç”¨å°±æ˜¯å¯ä»¥åšèŒƒå›´æŸ¥æ‰¾ã€‚</p><p>Redis çš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶</p><p>è¿™ä¸ªé—®é¢˜ç›¸å½“é‡è¦ï¼Œåˆ°åº• Redis æœ‰æ²¡ç”¨åˆ°å®¶ï¼Œè¿™ä¸ªé—®é¢˜å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚</p><p>æ¯”å¦‚ä½  Redis åªèƒ½å­˜ 5G æ•°æ®ï¼Œå¯æ˜¯ä½ å†™äº† 10Gï¼Œé‚£ä¼šåˆ  5G çš„æ•°æ®ã€‚æ€ä¹ˆåˆ çš„ï¼Œè¿™ä¸ªé—®é¢˜æ€è€ƒè¿‡ä¹ˆï¼Ÿ</p><p>è¿˜æœ‰ï¼Œä½ çš„æ•°æ®å·²ç»è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯æ—¶é—´åˆ°äº†ï¼Œå†…å­˜å ç”¨ç‡è¿˜æ˜¯æ¯”è¾ƒé«˜ï¼Œæœ‰æ€è€ƒè¿‡åŸå› ä¹ˆ?</p><p>å›ç­”ï¼šRedis é‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ã€‚</p><p>ä¸ºä»€ä¹ˆä¸ç”¨å®šæ—¶åˆ é™¤ç­–ç•¥</p><p>å®šæ—¶åˆ é™¤ï¼Œç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥è´Ÿè´£ç›‘è§† Keyï¼Œè¿‡æœŸåˆ™è‡ªåŠ¨åˆ é™¤ã€‚è™½ç„¶å†…å­˜åŠæ—¶é‡Šæ”¾ï¼Œä½†æ˜¯ååˆ†æ¶ˆè€— CPU èµ„æºã€‚</p><p>åœ¨å¤§å¹¶å‘è¯·æ±‚ä¸‹ï¼ŒCPU è¦å°†æ—¶é—´åº”ç”¨åœ¨å¤„ç†è¯·æ±‚ï¼Œè€Œä¸æ˜¯åˆ é™¤ Keyï¼Œå› æ­¤æ²¡æœ‰é‡‡ç”¨è¿™ä¸€ç­–ç•¥ã€‚</p><p>å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤æ˜¯å¦‚ä½•å·¥ä½œ</p><p>å®šæœŸåˆ é™¤ï¼ŒRedis é»˜è®¤æ¯ä¸ª 100ms æ£€æŸ¥ï¼Œæ˜¯å¦æœ‰è¿‡æœŸçš„ Keyï¼Œæœ‰è¿‡æœŸ Key åˆ™åˆ é™¤ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒRedis ä¸æ˜¯æ¯ä¸ª 100ms å°†æ‰€æœ‰çš„ Key æ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥(å¦‚æœæ¯éš” 100msï¼Œå…¨éƒ¨ Key è¿›è¡Œæ£€æŸ¥ï¼ŒRedis å²‚ä¸æ˜¯å¡æ­»)ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤š Key åˆ°æ—¶é—´æ²¡æœ‰åˆ é™¤ã€‚äºæ˜¯ï¼Œæƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ª Key çš„æ—¶å€™ï¼ŒRedis ä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ª Key å¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ã€‚</p><p>é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å°±æ²¡å…¶ä»–é—®é¢˜äº†ä¹ˆ?</p><p>ä¸æ˜¯çš„ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ²¡åˆ é™¤ Keyã€‚ç„¶åä½ ä¹Ÿæ²¡å³æ—¶å»è¯·æ±‚ Keyï¼Œä¹Ÿå°±æ˜¯è¯´æƒ°æ€§åˆ é™¤ä¹Ÿæ²¡ç”Ÿæ•ˆã€‚è¿™æ ·ï¼ŒRedisçš„å†…å­˜ä¼šè¶Šæ¥è¶Šé«˜ã€‚é‚£ä¹ˆå°±åº”è¯¥é‡‡ç”¨å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚</p><p>åœ¨ redis.conf ä¸­æœ‰ä¸€è¡Œé…ç½®ï¼š</p><h1 id="maxmemory-policy-volatile-lru"><a href="#maxmemory-policy-volatile-lru" class="headerlink" title="maxmemory-policy volatile-lru"></a>maxmemory-policy volatile-lru</h1><p>è¯¥é…ç½®å°±æ˜¯é…å†…å­˜æ·˜æ±°ç­–ç•¥çš„(ä»€ä¹ˆï¼Œä½ æ²¡é…è¿‡ï¼Ÿå¥½å¥½åçœä¸€ä¸‹è‡ªå·±)ï¼š</p><p>noevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚åº”è¯¥æ²¡äººç”¨å§ã€‚</p><p>allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚æ¨èä½¿ç”¨ï¼Œç›®å‰é¡¹ç›®åœ¨ç”¨è¿™ç§ã€‚</p><p>allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚åº”è¯¥ä¹Ÿæ²¡äººç”¨å§ï¼Œä½ ä¸åˆ æœ€å°‘ä½¿ç”¨ Keyï¼Œå»éšæœºåˆ ã€‚</p><p>volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ Redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™æ‰ç”¨ã€‚ä¸æ¨èã€‚</p><p>volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ä¾ç„¶ä¸æ¨èã€‚</p><p>volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ Key ä¼˜å…ˆç§»é™¤ã€‚ä¸æ¨èã€‚</p><p>PSï¼šå¦‚æœæ²¡æœ‰è®¾ç½® expire çš„ Keyï¼Œä¸æ»¡è¶³å…ˆå†³æ¡ä»¶(prerequisites)ï¼›é‚£ä¹ˆ volatile-lruï¼Œvolatile-random å’Œ volatile-ttl ç­–ç•¥çš„è¡Œä¸ºï¼Œå’Œ noeviction(ä¸åˆ é™¤) åŸºæœ¬ä¸Šä¸€è‡´ã€‚</p><p>Redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜</p><p>ä¸€è‡´æ€§é—®é¢˜æ˜¯åˆ†å¸ƒå¼å¸¸è§é—®é¢˜ï¼Œè¿˜å¯ä»¥å†åˆ†ä¸ºæœ€ç»ˆä¸€è‡´æ€§å’Œå¼ºä¸€è‡´æ€§ã€‚æ•°æ®åº“å’Œç¼“å­˜åŒå†™ï¼Œå°±å¿…ç„¶ä¼šå­˜åœ¨ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><p>ç­”è¿™ä¸ªé—®é¢˜ï¼Œå…ˆæ˜ç™½ä¸€ä¸ªå‰æã€‚å°±æ˜¯å¦‚æœå¯¹æ•°æ®æœ‰å¼ºä¸€è‡´æ€§è¦æ±‚ï¼Œä¸èƒ½æ”¾ç¼“å­˜ã€‚æˆ‘ä»¬æ‰€åšçš„ä¸€åˆ‡ï¼Œåªèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬æ‰€åšçš„æ–¹æ¡ˆä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œåªèƒ½è¯´é™ä½ä¸ä¸€è‡´å‘ç”Ÿçš„æ¦‚ç‡ï¼Œæ— æ³•å®Œå…¨é¿å…ã€‚å› æ­¤ï¼Œæœ‰å¼ºä¸€è‡´æ€§è¦æ±‚çš„æ•°æ®ï¼Œä¸èƒ½æ”¾ç¼“å­˜ã€‚</p><p>å›ç­”ï¼šé¦–å…ˆï¼Œé‡‡å–æ­£ç¡®æ›´æ–°ç­–ç•¥ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜ã€‚å…¶æ¬¡ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨åˆ é™¤ç¼“å­˜å¤±è´¥çš„é—®é¢˜ï¼Œæä¾›ä¸€ä¸ªè¡¥å¿æªæ–½å³å¯ï¼Œä¾‹å¦‚åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜</p><p>è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œè¯´å¥å®åœ¨è¯ï¼Œä¸€èˆ¬ä¸­å°å‹ä¼ ç»Ÿè½¯ä»¶ä¼ä¸šï¼Œå¾ˆéš¾ç¢°åˆ°è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæœ‰å¤§å¹¶å‘çš„é¡¹ç›®ï¼Œæµé‡æœ‰å‡ ç™¾ä¸‡å·¦å³ã€‚è¿™ä¸¤ä¸ªé—®é¢˜ä¸€å®šè¦æ·±åˆ»è€ƒè™‘ã€‚</p><p>ç¼“å­˜ç©¿é€ï¼Œå³é»‘å®¢æ•…æ„å»è¯·æ±‚ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚éƒ½æ€¼åˆ°æ•°æ®åº“ä¸Šï¼Œä»è€Œæ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚</p><p>ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆï¼š</p><p>åˆ©ç”¨äº’æ–¥é”ï¼Œç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œå…ˆå»è·å¾—é”ï¼Œå¾—åˆ°é”äº†ï¼Œå†å»è¯·æ±‚æ•°æ®åº“ã€‚æ²¡å¾—åˆ°é”ï¼Œåˆ™ä¼‘çœ ä¸€æ®µæ—¶é—´é‡è¯•ã€‚</p><p>é‡‡ç”¨å¼‚æ­¥æ›´æ–°ç­–ç•¥ï¼Œæ— è®º Key æ˜¯å¦å–åˆ°å€¼ï¼Œéƒ½ç›´æ¥è¿”å›ã€‚Value å€¼ä¸­ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼Œç¼“å­˜å¦‚æœè¿‡æœŸï¼Œå¼‚æ­¥èµ·ä¸€ä¸ªçº¿ç¨‹å»è¯»æ•°æ®åº“ï¼Œæ›´æ–°ç¼“å­˜ã€‚éœ€è¦åšç¼“å­˜é¢„çƒ­(é¡¹ç›®å¯åŠ¨å‰ï¼Œå…ˆåŠ è½½ç¼“å­˜)æ“ä½œã€‚</p><p>æä¾›ä¸€ä¸ªèƒ½è¿…é€Ÿåˆ¤æ–­è¯·æ±‚æ˜¯å¦æœ‰æ•ˆçš„æ‹¦æˆªæœºåˆ¶ï¼Œæ¯”å¦‚ï¼Œåˆ©ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ç³»åˆ—åˆæ³•æœ‰æ•ˆçš„ Keyã€‚è¿…é€Ÿåˆ¤æ–­å‡ºï¼Œè¯·æ±‚æ‰€æºå¸¦çš„ Key æ˜¯å¦åˆæ³•æœ‰æ•ˆã€‚å¦‚æœä¸åˆæ³•ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚</p><p>ç¼“å­˜é›ªå´©ï¼Œå³ç¼“å­˜åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œè¿™ä¸ªæ—¶å€™åˆæ¥äº†ä¸€æ³¢è¯·æ±‚ï¼Œç»“æœè¯·æ±‚éƒ½æ€¼åˆ°æ•°æ®åº“ä¸Šï¼Œä»è€Œå¯¼è‡´æ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚</p><p>ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆï¼š</p><p>ç»™ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œé¿å…é›†ä½“å¤±æ•ˆã€‚</p><p>ä½¿ç”¨äº’æ–¥é”ï¼Œä½†æ˜¯è¯¥æ–¹æ¡ˆååé‡æ˜æ˜¾ä¸‹é™äº†ã€‚</p><p>åŒç¼“å­˜ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªç¼“å­˜ï¼Œç¼“å­˜ A å’Œç¼“å­˜ Bã€‚ç¼“å­˜ A çš„å¤±æ•ˆæ—¶é—´ä¸º 20 åˆ†é’Ÿï¼Œç¼“å­˜ B ä¸è®¾å¤±æ•ˆæ—¶é—´ã€‚è‡ªå·±åšç¼“å­˜é¢„çƒ­æ“ä½œã€‚</p><p>ç„¶åç»†åˆ†ä»¥ä¸‹å‡ ä¸ªå°ç‚¹ï¼šä»ç¼“å­˜ A è¯»æ•°æ®åº“ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ï¼›A æ²¡æœ‰æ•°æ®ï¼Œç›´æ¥ä» B è¯»æ•°æ®ï¼Œç›´æ¥è¿”å›ï¼Œå¹¶ä¸”å¼‚æ­¥å¯åŠ¨ä¸€ä¸ªæ›´æ–°çº¿ç¨‹ï¼Œæ›´æ–°çº¿ç¨‹åŒæ—¶æ›´æ–°ç¼“å­˜ A å’Œç¼“å­˜ Bã€‚</p><p>å¦‚ä½•è§£å†³ Redis çš„å¹¶å‘ç«äº‰ Key é—®é¢˜</p><p>è¿™ä¸ªé—®é¢˜å¤§è‡´å°±æ˜¯ï¼ŒåŒæ—¶æœ‰å¤šä¸ªå­ç³»ç»Ÿå» Set ä¸€ä¸ª Keyã€‚è¿™ä¸ªæ—¶å€™å¤§å®¶æ€è€ƒè¿‡è¦æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘æå‰ç™¾åº¦äº†ä¸€ä¸‹ï¼Œå‘ç°ç­”æ¡ˆåŸºæœ¬éƒ½æ˜¯æ¨èç”¨ Redis äº‹åŠ¡æœºåˆ¶ã€‚</p><p>æˆ‘å¹¶ä¸æ¨èä½¿ç”¨ Redis çš„äº‹åŠ¡æœºåˆ¶ã€‚å› ä¸ºæˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒï¼ŒåŸºæœ¬éƒ½æ˜¯ Redis é›†ç¾¤ç¯å¢ƒï¼Œåšäº†æ•°æ®åˆ†ç‰‡æ“ä½œã€‚</p><p>ä½ ä¸€ä¸ªäº‹åŠ¡ä¸­æœ‰æ¶‰åŠåˆ°å¤šä¸ª Key æ“ä½œçš„æ—¶å€™ï¼Œè¿™å¤šä¸ª Key ä¸ä¸€å®šéƒ½å­˜å‚¨åœ¨åŒä¸€ä¸ª redis-server ä¸Šã€‚å› æ­¤ï¼ŒRedis çš„äº‹åŠ¡æœºåˆ¶ï¼Œååˆ†é¸¡è‚‹ã€‚</p><p>å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œä¸è¦æ±‚é¡ºåº</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œå‡†å¤‡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œå¤§å®¶å»æŠ¢é”ï¼ŒæŠ¢åˆ°é”å°±åš set æ“ä½œå³å¯ï¼Œæ¯”è¾ƒç®€å•ã€‚</p><p>å¦‚æœå¯¹è¿™ä¸ª Key æ“ä½œï¼Œè¦æ±‚é¡ºåº</p><p>å‡è®¾æœ‰ä¸€ä¸ª key1ï¼Œç³»ç»Ÿ A éœ€è¦å°† key1 è®¾ç½®ä¸º valueAï¼Œç³»ç»Ÿ B éœ€è¦å°† key1 è®¾ç½®ä¸º valueBï¼Œç³»ç»Ÿ C éœ€è¦å°† key1 è®¾ç½®ä¸º valueCã€‚</p><p>æœŸæœ›æŒ‰ç…§ key1 çš„ value å€¼æŒ‰ç…§ valueA > valueB > valueC çš„é¡ºåºå˜åŒ–ã€‚è¿™ç§æ—¶å€™æˆ‘ä»¬åœ¨æ•°æ®å†™å…¥æ•°æ®åº“çš„æ—¶å€™ï¼Œéœ€è¦ä¿å­˜ä¸€ä¸ªæ—¶é—´æˆ³ã€‚</p><p>å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š</p><p>ç³»ç»ŸA key 1 {valueA  3:00}<br>ç³»ç»ŸB key 1 {valueB  3:05}<br>ç³»ç»ŸC key 1 {valueC  3:10}</p><p>é‚£ä¹ˆï¼Œå‡è®¾è¿™ä¼šç³»ç»Ÿ B å…ˆæŠ¢åˆ°é”ï¼Œå°† key1 è®¾ç½®ä¸º{valueB 3:05}ã€‚æ¥ä¸‹æ¥ç³»ç»Ÿ A æŠ¢åˆ°é”ï¼Œå‘ç°è‡ªå·±çš„ valueA çš„æ—¶é—´æˆ³æ—©äºç¼“å­˜ä¸­çš„æ—¶é—´æˆ³ï¼Œé‚£å°±ä¸åš set æ“ä½œäº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚åˆ©ç”¨é˜Ÿåˆ—ï¼Œå°† set æ–¹æ³•å˜æˆä¸²è¡Œè®¿é—®ä¹Ÿå¯ä»¥ã€‚æ€»ä¹‹ï¼Œçµæ´»å˜é€šã€‚</p><p>æ€»ç»“</p><p>æœ¬æ–‡å¯¹ Redis çš„å¸¸è§é—®é¢˜åšäº†ä¸€ä¸ªæ€»ç»“ã€‚å¤§éƒ¨åˆ†æ˜¯è‡ªå·±åœ¨å·¥ä½œä¸­é‡åˆ°ï¼Œä»¥åŠä¹‹å‰é¢è¯•åˆ«äººçš„æ—¶å€™ï¼Œçˆ±é—®çš„ä¸€äº›é—®é¢˜ã€‚</p><p>å¦å¤–ï¼Œä¸æ¨èå¤§å®¶ä¸´æ—¶æŠ±ä½›è„šï¼ŒçœŸæ­£ç¢°åˆ°ä¸€äº›æœ‰ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œå…¶å®å‡ ä¸‹å°±èƒ½æŠŠä½ é—®æ‡µã€‚æœ€åï¼Œå¸Œæœ›å¤§å®¶æœ‰æ‰€æ”¶è·å§ã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot é›†æˆ Lombok è®©ä»£ç æ›´ç®€æ´!</title>
      <link href="/2018/06/05/Spring%20Boot%20%E9%9B%86%E6%88%90%20Lombok%20%E8%AE%A9%E4%BB%A3%E7%A0%81%E6%9B%B4%E7%AE%80%E6%B4%81!/"/>
      <url>/2018/06/05/Spring%20Boot%20%E9%9B%86%E6%88%90%20Lombok%20%E8%AE%A9%E4%BB%A3%E7%A0%81%E6%9B%B4%E7%AE%80%E6%B4%81!/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="lombokçš„å¨åŠ›"><a href="#lombokçš„å¨åŠ›" class="headerlink" title="lombokçš„å¨åŠ›"></a>lombokçš„å¨åŠ›</h3><p><a href="https://i.loli.net/2019/03/11/5c85b64e19a51.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b64e19a51.png" class="lazyload" title="alt"></a><br><a href="https://i.loli.net/2019/03/11/5c85b5f797450.png" data-fancybox="group" data-caption="ç®€åŒ–ä»£ç " class="fancybox"><img alt="ç®€åŒ–ä»£ç " data-src="https://i.loli.net/2019/03/11/5c85b5f797450.png" class="lazyload" title="ç®€åŒ–ä»£ç "></a></p><h3 id="IntelliJ-IDEAå®‰è£…lombokæ’ä»¶"><a href="#IntelliJ-IDEAå®‰è£…lombokæ’ä»¶" class="headerlink" title="IntelliJ IDEAå®‰è£…lombokæ’ä»¶"></a>IntelliJ IDEAå®‰è£…lombokæ’ä»¶</h3><p>1ã€èœå•æ  File > Settings > Plugins > Browse repositoriesâ€¦<br><a href="https://i.loli.net/2019/03/11/5c85b636a981e.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b636a981e.png" class="lazyload" title="alt"></a></p><p>2ã€æœç´¢ Lombok Plugin å®‰è£…åï¼Œé‡å¯IDEAå³å¯ç”Ÿæ•ˆ<br><a href="https://i.loli.net/2019/03/11/5c85b659d61c8.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b659d61c8.png" class="lazyload" title="alt"></a></p><h3 id="Spring-Booté¡¹ç›®ä¸­ä½¿ç”¨lombok"><a href="#Spring-Booté¡¹ç›®ä¸­ä½¿ç”¨lombok" class="headerlink" title="Spring Booté¡¹ç›®ä¸­ä½¿ç”¨lombok."></a>Spring Booté¡¹ç›®ä¸­ä½¿ç”¨lombok.</h3><p>1ã€æ·»åŠ lombokä¾èµ–<br><a href="https://i.loli.net/2019/03/11/5c85b67b0e9f0.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b67b0e9f0.png" class="lazyload" title="alt"></a></p><p>2ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±» Userï¼Œä½¿ç”¨@Dataæ³¨è§£<br><a href="https://i.loli.net/2019/03/11/5c85b68b392cc.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b68b392cc.png" class="lazyload" title="alt"></a></p><p>3ã€ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œæµ‹è¯•@Dataçš„ä½œç”¨<br><a href="https://i.loli.net/2019/03/11/5c85b69fcbb30.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b69fcbb30.png" class="lazyload" title="alt"></a><br><a href="https://i.loli.net/2019/03/11/5c85b6aae397b.png" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://i.loli.net/2019/03/11/5c85b6aae397b.png" class="lazyload" title="alt"></a></p><h3 id="å…¶å®ƒç®€åŒ–ä»£ç çš„ç‰¹æ€§ä»‹ç»"><a href="#å…¶å®ƒç®€åŒ–ä»£ç çš„ç‰¹æ€§ä»‹ç»" class="headerlink" title="å…¶å®ƒç®€åŒ–ä»£ç çš„ç‰¹æ€§ä»‹ç»"></a>å…¶å®ƒç®€åŒ–ä»£ç çš„ç‰¹æ€§ä»‹ç»</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">val : æœ€ç»ˆå±€éƒ¨å˜é‡</span><br><span class="line"><span class="meta">@NonNull</span> : è®©ä½ ä¸åœ¨æ‹…å¿§å¹¶ä¸”çˆ±ä¸ŠNullPointerException</span><br><span class="line"><span class="meta">@CleanUp</span> : è‡ªåŠ¨èµ„æºç®¡ç†ï¼šä¸ç”¨å†åœ¨<span class="keyword">finally</span>ä¸­æ·»åŠ èµ„æºçš„closeæ–¹æ³•</span><br><span class="line"><span class="meta">@Setter</span>/<span class="meta">@Getter</span> : è‡ªåŠ¨ç”Ÿæˆsetå’Œgetæ–¹æ³•</span><br><span class="line"><span class="meta">@ToString</span> : è‡ªåŠ¨ç”ŸæˆtoStringæ–¹æ³•</span><br><span class="line"><span class="meta">@EqualsAndHashcode</span> : ä»å¯¹è±¡çš„å­—æ®µä¸­ç”ŸæˆhashCodeå’Œequalsçš„å®ç°</span><br><span class="line"><span class="meta">@NoArgsConstructor</span>/<span class="meta">@RequiredArgsConstructor</span>/<span class="meta">@AllArgsConstructor</span></span><br><span class="line">è‡ªåŠ¨ç”Ÿæˆæ„é€ æ–¹æ³•</span><br><span class="line"><span class="meta">@Data</span> : è‡ªåŠ¨ç”Ÿæˆset/getæ–¹æ³•ï¼ŒtoStringæ–¹æ³•ï¼Œequalsæ–¹æ³•ï¼ŒhashCodeæ–¹æ³•ï¼Œä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•</span><br><span class="line"><span class="meta">@Value</span> : ç”¨äºæ³¨è§£<span class="keyword">final</span>ç±»</span><br><span class="line"><span class="meta">@Builder</span> : äº§ç”Ÿå¤æ‚çš„æ„å»ºå™¨apiç±»</span><br><span class="line"><span class="meta">@SneakyThrows</span> : å¼‚å¸¸å¤„ç†ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span><br><span class="line"><span class="meta">@Synchronized</span> : åŒæ­¥æ–¹æ³•å®‰å…¨çš„è½¬åŒ–</span><br><span class="line"><span class="meta">@Getter</span>(lazy=<span class="keyword">true</span>) :</span><br><span class="line"><span class="meta">@Log</span> : æ”¯æŒå„ç§loggerå¯¹è±¡ï¼Œä½¿ç”¨æ—¶ç”¨å¯¹åº”çš„æ³¨è§£ï¼Œå¦‚ï¼š<span class="meta">@Log</span>4j</span><br></pre></td></tr></tbody></table></figure></div><h3 id="æ¨èç”¨æ³•"><a href="#æ¨èç”¨æ³•" class="headerlink" title="æ¨èç”¨æ³•"></a>æ¨èç”¨æ³•</h3><p>1ã€åœ¨ Bean / Entity ç±»ä¸Šä½¿ç”¨ @Data æ³¨è§£ã€‚<br>2ã€éœ€è¦ä½¿ç”¨ Log å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ @Log4jï¼ˆä¾é¡¹ç›®æ—¥å¿—æ¡†æ¶å†³å®šï¼‰ã€‚</p><p><strong>æ³¨æ„ï¼šlombok çš„æ³¨è§£ä¸èƒ½è¢«ç»§æ‰¿ã€‚</strong></p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/dd5349ac8473" target="_blank" rel="noopener">https://www.jianshu.com/p/dd5349ac8473</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Lombok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æƒ³è¦åšåˆ°é«˜å¹¶å‘å’Œé«˜æ€§èƒ½ï¼Œè¯·å…ˆçœŸæ­£çš„ç†è§£å®ƒä»¬ï¼Œä»¥åŠè·ŸCPUï¼Œå†…å­˜ï¼Œåˆ†å¸ƒå¼åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢?</title>
      <link href="/2018/06/01/%E6%83%B3%E8%A6%81%E5%81%9A%E5%88%B0%E9%AB%98%E5%B9%B6%E5%8F%91%E5%92%8C%E9%AB%98%E6%80%A7%E8%83%BD%EF%BC%8C%E8%AF%B7%E5%85%88%E7%9C%9F%E6%AD%A3%E7%9A%84%E7%90%86%E8%A7%A3%E5%AE%83%E4%BB%AC%EF%BC%8C%E4%BB%A5%E5%8F%8A%E8%B7%9FCPU%EF%BC%8C%E5%86%85%E5%AD%98%EF%BC%8C%E5%88%86%E5%B8%83%E5%BC%8F%E5%8F%88%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%E5%91%A2/"/>
      <url>/2018/06/01/%E6%83%B3%E8%A6%81%E5%81%9A%E5%88%B0%E9%AB%98%E5%B9%B6%E5%8F%91%E5%92%8C%E9%AB%98%E6%80%A7%E8%83%BD%EF%BC%8C%E8%AF%B7%E5%85%88%E7%9C%9F%E6%AD%A3%E7%9A%84%E7%90%86%E8%A7%A3%E5%AE%83%E4%BB%AC%EF%BC%8C%E4%BB%A5%E5%8F%8A%E8%B7%9FCPU%EF%BC%8C%E5%86%85%E5%AD%98%EF%BC%8C%E5%88%86%E5%B8%83%E5%BC%8F%E5%8F%88%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%E5%91%A2/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>äº’è”ç½‘åº”ç”¨ç³»ç»Ÿå¼€å‘è‚¯å®šç»å¸¸ä¼šçœ‹åˆ°é«˜å¹¶å‘å’Œé«˜æ€§èƒ½è¿™ä¸¤ä¸ªè¯ï¼Œå¯è°“æ˜¯è€³ç†Ÿèƒ½è¯¦ï¼Œè€Œå…·ä½“çš„å«ä¹‰å’Œå…³ç³»çœŸçš„å¦‚ä½ æ‰€æƒ³çš„ï¼ŒçœŸæ­£çš„ç†è§£äº†å—ï¼Ÿ</p><p>è¿™æ¬¡ï¼Œæˆ‘ä¹Ÿç»“åˆè‡ªå·±çš„ç†è§£ï¼Œæ¥è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚</p><p><a href="https://img4.mukewang.com/5afa59c00001f85205000479.jpg" data-fancybox="group" data-caption="alt" class="fancybox"><img alt="alt" data-src="https://img4.mukewang.com/5afa59c00001f85205000479.jpg" class="lazyload" title="alt"></a></p><p>å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><p>ä¸€ä¸ªè“„æ°´æ± ï¼Œæ˜¯1m<em>1m</em>1m=1ç«‹æ–¹ç±³å¤§å°ï¼Œæœ‰ä¸€ä¸ªå‡ºæ°´å£ï¼Œå‡ºæ°´å£æ¯ç§’é’Ÿæµå‡º0.1ç«‹æ–¹ç±³ï¼Œé‚£ä¹ˆè¿™ä¸ªè“„æ°´æ± çš„å¹¶å‘é‡æ˜¯1ç«‹æ–¹ç±³ï¼Œå‡ºæ°´é€Ÿåº¦æ˜¯0.1ç«‹æ–¹ç±³/ç§’ã€‚</p><p>å¦‚æœå¢åŠ ä¸€ä¸ªå‡ºæ°´å£ï¼Œéƒ½æ˜¯æ¯ç§’é’Ÿæµå‡º0.1ç«‹æ–¹ç±³ï¼Œé‚£ä¹ˆè¿™ä¸ªè“„æ°´æ± çš„å¹¶å‘é‡æ²¡å˜ï¼Œä½†æ˜¯å‡ºæ°´é€Ÿåº¦å˜æˆäº†0.2ç«‹æ–¹ç±³/ç§’ã€‚</p><p>åŒç†ï¼Œå¢å¤§äº†å‡ºæ°´å£ï¼Œè“„æ°´æ± çš„å‡ºæ°´é€Ÿåº¦ä¹Ÿå˜å¿«äº†ã€‚</p><h3 id="ä¸Šé¢æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“ï¼Œå¹¶å‘é‡æ˜¯ä¸€ä¸ªå®¹é‡çš„æ¦‚å¿µï¼Œæ€§èƒ½å°±æ˜¯å‡ºæ°´é€Ÿåº¦ï¼Œè€Œä¸”æœ‰ä¸‹é¢è¿™äº›ç»“æœã€‚"><a href="#ä¸Šé¢æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“ï¼Œå¹¶å‘é‡æ˜¯ä¸€ä¸ªå®¹é‡çš„æ¦‚å¿µï¼Œæ€§èƒ½å°±æ˜¯å‡ºæ°´é€Ÿåº¦ï¼Œè€Œä¸”æœ‰ä¸‹é¢è¿™äº›ç»“æœã€‚" class="headerlink" title="ä¸Šé¢æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“ï¼Œå¹¶å‘é‡æ˜¯ä¸€ä¸ªå®¹é‡çš„æ¦‚å¿µï¼Œæ€§èƒ½å°±æ˜¯å‡ºæ°´é€Ÿåº¦ï¼Œè€Œä¸”æœ‰ä¸‹é¢è¿™äº›ç»“æœã€‚"></a>ä¸Šé¢æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“ï¼Œå¹¶å‘é‡æ˜¯ä¸€ä¸ªå®¹é‡çš„æ¦‚å¿µï¼Œæ€§èƒ½å°±æ˜¯å‡ºæ°´é€Ÿåº¦ï¼Œè€Œä¸”æœ‰ä¸‹é¢è¿™äº›ç»“æœã€‚</h3><p>1 å¢å¤§è“„æ°´æ± çš„é•¿å®½é«˜ï¼Œå¯ä»¥å¢åŠ å¹¶å‘èƒ½åŠ›ã€‚</p><p>2 å‡ºæ°´å£å¦‚æœæ‰©å¤§äº†å‡ºå£å¤§å°ï¼Œåˆ™å¯ä»¥æé«˜å‡ºæ°´çš„é€Ÿåº¦ï¼Œä¹Ÿå°±æ˜¯æ€§èƒ½æé«˜äº†ã€‚</p><p>3 å¢åŠ å‡ºæ°´å£çš„æ•°é‡ï¼Œåˆ™æ˜¯å¢åŠ äº†å¹¶è¡Œå¤„ç†çš„èƒ½åŠ›ï¼ŒåŒæ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚</p><h3 id="é‚£ä¹ˆå¯¹ç…§æˆ‘ä»¬è®¡ç®—æœºä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ˜¯æ€ä¹ˆæ ·çš„ç»“æœå‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆå¯¹ç…§æˆ‘ä»¬è®¡ç®—æœºä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ˜¯æ€ä¹ˆæ ·çš„ç»“æœå‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆå¯¹ç…§æˆ‘ä»¬è®¡ç®—æœºä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ˜¯æ€ä¹ˆæ ·çš„ç»“æœå‘¢ï¼Ÿ"></a>é‚£ä¹ˆå¯¹ç…§æˆ‘ä»¬è®¡ç®—æœºä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ˜¯æ€ä¹ˆæ ·çš„ç»“æœå‘¢ï¼Ÿ</h3><p>1 å¢åŠ æœåŠ¡å™¨çš„å†…å­˜å¤§å°ï¼Œå¯ä»¥å¢åŠ å¹¶å‘é‡ã€‚å› ä¸ºå†…å­˜å¢åŠ äº†ï¼Œå°±å¯ä»¥å¼€æ›´å¤šçš„è¿›ç¨‹ï¼Œæ›´å¤šçš„çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æ‰©å¤§ä»»åŠ¡é˜Ÿåˆ—çš„å¤§å°ã€‚</p><p>2 æé«˜cpuçš„ä¸»é¢‘é€Ÿåº¦ï¼Œä¼˜åŒ–ç¨‹åºï¼Œå¯ä»¥æé«˜æ€§èƒ½ã€‚cpuæ›´å¿«äº†ï¼Œç¨‹åºä¼˜åŒ–çš„æ›´å¥½äº†ï¼Œå¤„ç†å•ä¸ªä»»åŠ¡çš„æ—¶é—´ä¹Ÿå°±æ›´çŸ­äº†ã€‚</p><p>3 å¢åŠ å¤šæ ¸ç”šè‡³åˆ†å¸ƒå¼æœåŠ¡å™¨æ•°é‡ï¼Œä¹Ÿå¯ä»¥æé«˜æ€§èƒ½ï¼ŒåŒæ—¶æé«˜å¹¶å‘é‡ã€‚</p><h3 id="å¦‚æœåªæ˜¯æ€§èƒ½æé«˜äº†ï¼Œå¹¶å‘é‡æ˜¯å¦ä¹Ÿèƒ½æé«˜å‘¢ï¼Ÿ"><a href="#å¦‚æœåªæ˜¯æ€§èƒ½æé«˜äº†ï¼Œå¹¶å‘é‡æ˜¯å¦ä¹Ÿèƒ½æé«˜å‘¢ï¼Ÿ" class="headerlink" title="å¦‚æœåªæ˜¯æ€§èƒ½æé«˜äº†ï¼Œå¹¶å‘é‡æ˜¯å¦ä¹Ÿèƒ½æé«˜å‘¢ï¼Ÿ"></a>å¦‚æœåªæ˜¯æ€§èƒ½æé«˜äº†ï¼Œå¹¶å‘é‡æ˜¯å¦ä¹Ÿèƒ½æé«˜å‘¢ï¼Ÿ</h3><p>å¦‚æœæˆ‘ä»¬é™æ€çš„ç†è§£å¹¶å‘é‡ï¼Œé‚£å®ƒæ˜¯ä¸ä¼šæé«˜çš„ã€‚</p><p>è€Œæˆ‘æ›´æ„¿æ„åŠ¨æ€çš„æ¥ç†è§£å¹¶å‘é‡ï¼Œå³ï¼šå•ä½æ—¶é—´å†…å¯ä»¥è¿›æ¥çš„æœ€å¤§æ•°é‡ã€‚</p><p>é‚£ä¹ˆæé«˜æ€§èƒ½ï¼Œæ˜¯å¯ä»¥çº¿æ€§æé«˜å¹¶å‘é‡çš„ï¼Œå› ä¸ºå•ä½æ—¶é—´å†…ï¼Œè¿›æ¥çš„åŒæ—¶ä¹Ÿæœ‰å‡ºå»ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå†æ¥å…·ä½“çš„åˆ†æä¸‹ï¼Œä¸Šé¢çš„å‡ ç§ç»“æœï¼Œæ˜¯ä¸æ˜¯çœŸçš„å¯ä»¥å®ç°å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å®Œå…¨æ­£ç¡®å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆæ¥åšä¸€ä¸ªå‡è®¾ï¼Œå•ä¸ªè¿›ç¨‹å†…å­˜å ç”¨10Mï¼Œå•ä¸ªçº¿ç¨‹å†…å­˜å ç”¨2Mï¼Œå•ä¸ªåç¨‹å†…å­˜å ç”¨20Kï¼Œé˜Ÿåˆ—ä»»åŠ¡å†…å­˜å ç”¨2Kï¼Œæˆ‘ä»¬ä¸‹é¢æ¥çœ‹çœ‹å†…å­˜ä¸å¹¶å‘é‡çš„å…³ç³»ã€‚</p><p>ï¼ˆå…·ä½“çš„å†…å­˜å ç”¨å¤§å°åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸­ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿è®¡ç®—è€Œåšçš„ä¸€ä¸ªå‡è®¾ï¼‰</p><pre><code class="js">å†…å­˜é‡  è¿›ç¨‹æ•°  çº¿ç¨‹æ•°  åç¨‹    é˜Ÿåˆ—ä»»åŠ¡<span class="number">1</span>G      <span class="number">100</span>     <span class="number">500</span>     <span class="number">50</span>K     <span class="number">500</span>K<span class="number">2</span>G      <span class="number">200</span>     <span class="number">1000</span>    <span class="number">100</span>K    <span class="number">1000</span>K<span class="number">4</span>G      <span class="number">400</span>     <span class="number">2000</span>    <span class="number">200</span>K    <span class="number">2000</span>K<span class="number">8</span>G      <span class="number">800</span>     <span class="number">4000</span>    <span class="number">400</span>K    <span class="number">4000</span>K</code></pre><h3 id="å¯¹åº”çš„å‡ ç§è¿è¡Œæ¨¡å¼"><a href="#å¯¹åº”çš„å‡ ç§è¿è¡Œæ¨¡å¼" class="headerlink" title="å¯¹åº”çš„å‡ ç§è¿è¡Œæ¨¡å¼"></a>å¯¹åº”çš„å‡ ç§è¿è¡Œæ¨¡å¼</h3><p>å¤šè¿›ç¨‹ï¼š php fast-cgi</p><p>å¤šçº¿ç¨‹ï¼š java web</p><p>åç¨‹ï¼š   go</p><p>é˜Ÿåˆ—ï¼š   nginx</p><p>ä»ä¸Šé¢çš„ç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºæ¥ï¼Œå¹¶å‘èƒ½åŠ›åœ¨ä¸åŒçš„è¿è¡Œæ¨¡å¼ä¸­çš„å·¨å¤§åŒºåˆ«ã€‚</p><p>å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„æ¨¡å¼ï¼Œä¸ä»…æ˜¯å†…å­˜å¼€é”€å·¨å¤§ï¼Œè€Œä¸”åœ¨æ•°é‡ä¸æ–­å¢åŠ çš„æƒ…å†µä¸‹ï¼Œå¯¹CPUçš„å‹åŠ›ä¹Ÿæ˜¯éå¸¸å·¨å¤§ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ç±»ç³»ç»Ÿåœ¨å¹¶å‘é‡å¤§çš„æƒ…å†µä¸‹ä¼šå¾ˆä¸ç¨³å®šï¼Œç”šè‡³å®•æœºã€‚</p><p>ä¸Šé¢å‡è®¾ä¸­è®¡ç®—å‡ºæ¥çš„æ•°æ®ï¼Œéƒ½æ˜¯é™æ€çš„å®¹é‡ï¼Œå¦‚æœæ‰€æœ‰ä»»åŠ¡éƒ½ä¸å¤„ç†ï¼Œé‚£ä¹ˆè‚¯å®šéƒ½æ˜¯ä¼šå¾ˆå¿«å°±è¢«æ’‘çˆ†ã€‚</p><p>æ‰€ä»¥è¦è¾¾åˆ°æ›´é«˜çš„å¹¶å‘é‡ï¼Œå°±éœ€è¦æœ‰æ›´å¿«çš„å¤„ç†é€Ÿåº¦ï¼Œå³åšå¥½æ€§èƒ½ä¼˜åŒ–ã€‚</p><p>ä¸‹é¢ï¼Œå†æ¥åšä¸€ä¸ªå‡è®¾ã€‚</p><p>æˆ‘ä»¬ç°åœ¨æœ‰ä¸€å°æœåŠ¡å™¨ï¼Œé…ç½®æ˜¯8æ ¸16Gå†…å­˜ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„åº”ç”¨æ˜¯è®¡ç®—å¯†é›†å‹ï¼Œçº¯è¿ç®—çš„ç³»ç»Ÿï¼Œå¦‚ï¼šæ•°æ®ç´¢å¼•æŸ¥è¯¢ã€æ’åºç­‰æ“ä½œã€‚</p><p>è€Œä¸”è¿˜è¦å‡è®¾ï¼Œè¿™ä¸ªåº”ç”¨åœ¨å¤šæ ¸å¹¶è¡Œè¿ç®—æ—¶ä¸å­˜åœ¨é”ç«äº‰çš„æƒ…å†µï¼ˆåªè¯»ï¼‰ã€‚</p><p>qps=1000ms/å•ä¸ªè¯·æ±‚è€—æ—¶*8</p><p>å¦‚æœå•ä¸ªè¯·æ±‚ï¼ˆä»»åŠ¡ï¼‰è€—æ—¶100msï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºæ¥</p><p>qps=1000ms/100ms*8=80ä¸ª/ç§’</p><p>å¦‚æœæˆ‘ä»¬ä¼˜åŒ–å¤„ç†çš„ç®—æ³•ï¼Œå•ä¸ªè¯·æ±‚è€—æ—¶é™ä½åˆ°10msï¼Œé‚£ä¹ˆ</p><p>qps=1000ms/10ms*8=800ä¸ª/ç§’</p><p>å¦‚æœå¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œå°†å•ä¸ªè¯·æ±‚è€—æ—¶é™ä½åˆ°1msï¼Œé‚£ä¹ˆ</p><p>qpså°±å¯ä»¥è¾¾åˆ°æ›´é«˜çš„8kã€‚</p><p>ä¸Šé¢çš„æƒ…å†µå’Œä¼˜åŒ–çš„æ•ˆæœç†è§£èµ·æ¥åº”è¯¥å¾ˆå®¹æ˜“ï¼Œå› ä¸ºå¯¹æœåŠ¡å™¨èµ„æºçš„ä¾èµ–æ›´å¤šæ˜¯CPUçš„è¿ç®—èƒ½åŠ›å’Œæ•°é‡ã€‚</p><p>åœ¨å®é™…çš„äº’è”ç½‘åº”ç”¨ä¸­ï¼Œç³»ç»Ÿæ›´å¤šæ˜¯ä¾èµ–mysqlï¼Œredisï¼Œrest apiæˆ–è€…å¾®æœåŠ¡ï¼Œå±äºIOå¯†é›†å‹ã€‚</p><p>æŒ‰ç…§ä¸Šé¢çš„è®¡ç®—æ–¹å¼ï¼Œå¯èƒ½å°±ä¸å¤ªå‡†ç¡®äº†ï¼Œå› ä¸ºcpuæ˜¯æœ‰å¯Œä½™çš„ã€‚</p><p>åœ¨IOé˜»å¡çš„æ—¶å€™ï¼Œå¼€å¯æ›´å¤šä»»åŠ¡çš„æ–¹å¼å½“ç„¶æœ‰ä¸Šé¢å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹ã€å¤šåç¨‹å’Œé˜Ÿåˆ—çš„æ–¹å¼æ¥å®ç°ã€‚</p><p>è€Œä¸”ä¹Ÿæ˜¯æœ‰æ•ˆçš„æ›´å¥½çš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºçš„æ–¹æ³•ï¼Œå¯ä»¥è¾¾åˆ°æ›´é«˜çš„å¹¶å‘é‡ï¼Œæ¯•ç«Ÿæˆ‘ä»¬æŠŠå¤§éƒ¨åˆ†çš„è¿ç®—æ”¾åˆ°äº†åº”ç”¨å¤–éƒ¨çš„mysqlï¼Œredisï¼Œrest apiç­‰æœåŠ¡ã€‚</p><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å¹¶å‘é‡ã€æ€§èƒ½ä¼˜åŒ–è·ŸæœåŠ¡å™¨èµ„æºï¼ˆæœåŠ¡å™¨æ•°é‡ï¼Œcpuï¼Œå†…å­˜ï¼‰çš„å…³ç³»ï¼Œä¹ŸçŸ¥é“æ€§èƒ½ä¼˜åŒ–å¯¹å¹¶å‘é‡çš„å½±å“ã€‚</p><p>è¿˜æœ‰ä»€ä¹ˆç–‘é—®å‘¢ï¼Ÿ</p><h3 id="1-å†…å­˜è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šå¯ä»¥è¶Šå¤§å—ï¼Ÿ"><a href="#1-å†…å­˜è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šå¯ä»¥è¶Šå¤§å—ï¼Ÿ" class="headerlink" title="1 å†…å­˜è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šå¯ä»¥è¶Šå¤§å—ï¼Ÿ"></a>1 å†…å­˜è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šå¯ä»¥è¶Šå¤§å—ï¼Ÿ</h3><p>å¤§éƒ¨åˆ†æƒ…å†µæ˜¯çš„ã€‚</p><p>è¿™ä¸ªé—®é¢˜ï¼Œä¸Šé¢æœ‰æåˆ°è¿‡ï¼Œå¯¹äºå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹çš„æ¨¡å¼ï¼Œçº¿ç¨‹å¤ªå¤šçš„æ—¶å€™ï¼Œçº¿ç¨‹æŠ¢å æ—¶é—´ç‰‡ï¼ŒCPUåˆ‡æ¢ä¸Šä¸‹æ–‡ä¼šè¶Šæ¥è¶Šæ…¢ã€‚</p><p>å¯¹äºåç¨‹ã€é˜Ÿåˆ—çš„è¿è¡Œæ¨¡å¼ï¼Œè¿™ä¸ªé—®é¢˜ä¼šå¥½å¾ˆå¤šï¼Œå½“ç„¶åç¨‹è°ƒåº¦ã€é˜Ÿåˆ—ç»´æŠ¤çš„å¼€é”€ï¼Œè‚¯å®šä¹Ÿæ˜¯ä¼šå¢åŠ ï¼Œåªæ˜¯å¢åŠ çš„å¼€é”€ä¸è‡³äºå¯¹ç³»ç»Ÿæ€§èƒ½é€ æˆç›´çº¿ä¸‹é™ã€‚</p><h3 id="2-CPUè¶Šå¿«ï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"><a href="#2-CPUè¶Šå¿«ï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ" class="headerlink" title="2 CPUè¶Šå¿«ï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"></a>2 CPUè¶Šå¿«ï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ</h3><p>ç»å¯¹çš„ã€‚</p><p>åªä¸è¿‡CPUå’Œåº”ç”¨æ€§èƒ½æå‡å¯èƒ½ä¸æˆçº¿æ€§å¢é•¿çš„å…³ç³»ï¼Œå› ä¸ºåº”ç”¨å¯èƒ½æ˜¯IOå¯†é›†å‹ï¼Œåº”ç”¨æ€§èƒ½è¿˜ä¼šå—åˆ°IOé˜»å¡çš„å½±å“ã€‚</p><h3 id="3-CPUè¶Šå¤šï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"><a href="#3-CPUè¶Šå¤šï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ" class="headerlink" title="3 CPUè¶Šå¤šï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"></a>3 CPUè¶Šå¤šï¼Œåº”ç”¨çš„æ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ</h3><p>å¤§éƒ¨åˆ†æƒ…å†µæ˜¯çš„ã€‚</p><p>å¦‚æœå¤§é‡é”å­˜åœ¨ï¼Œæ€§èƒ½æå‡å¯èƒ½ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œå› ä¸ºå¹¶è¡Œèƒ½åŠ›ä¼šè¢«é”ä½ï¼Œåˆå˜æˆå•çº¿ç¨‹æ‰§è¡Œäº†ï¼Œæ²¡æœ‰æœ€å¤§çš„å‘æŒ¥å¤šCPUçš„ä½œç”¨ã€‚</p><h3 id="4-æœåŠ¡å™¨è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šè¶Šå¤§å—ï¼Ÿ"><a href="#4-æœåŠ¡å™¨è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šè¶Šå¤§å—ï¼Ÿ" class="headerlink" title="4 æœåŠ¡å™¨è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šè¶Šå¤§å—ï¼Ÿ"></a>4 æœåŠ¡å™¨è¶Šå¤šï¼Œå¹¶å‘é‡ä¸€å®šè¶Šå¤§å—ï¼Ÿ</h3><p>ç»å¯¹çš„ã€‚</p><p>æœåŠ¡å™¨å¢åŠ ï¼ŒCPUå’Œå†…å­˜èµ„æºç›¸åº”ä¹Ÿå°±è¶Šå¤šï¼Œå¹¶å‘èƒ½åŠ›ä¹Ÿå°±ä¼šå¢å¤§ï¼Œä»–ä»¬ä¹‹é—´æ˜¯çº¿æ€§ç›¸å…³ã€‚</p><h3 id="5-æœåŠ¡å™¨è¶Šå¤šï¼Œæ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"><a href="#5-æœåŠ¡å™¨è¶Šå¤šï¼Œæ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ" class="headerlink" title="5 æœåŠ¡å™¨è¶Šå¤šï¼Œæ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ"></a>5 æœåŠ¡å™¨è¶Šå¤šï¼Œæ€§èƒ½ä¸€å®šè¶Šå¥½å—ï¼Ÿ</h3><p>å¤§éƒ¨åˆ†æƒ…å†µæ˜¯çš„ã€‚</p><p>ä½†æ˜¯å•ä¸ªæœåŠ¡å™¨çš„æ•ˆç‡å¯èƒ½ä¼šæ˜¯ä¸‹é™çš„ï¼Œæ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€åŒæ­¥é—®é¢˜ã€é”é—®é¢˜ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´å•ä¸ªæœåŠ¡å™¨çš„æ•ˆç‡ä¸‹é™ï¼Œæ‰€ä»¥ä¸æ˜¯çº¿æ€§ç›¸å…³ã€‚</p><p>å¦‚æœåªæ˜¯è€ƒè™‘åº”ç”¨å¯¹CPUåˆ©ç”¨æ•ˆç‡çš„è¯</p><p>å•æ ¸>=å¤šæ ¸>=å¤šæœåŠ¡å™¨</p><p>å•è¿›ç¨‹å•çº¿ç¨‹çš„ç³»ç»Ÿå¯¹äºæœåŠ¡å™¨èµ„æºçš„åˆ©ç”¨ç‡æ›´é«˜ã€‚</p><p>åˆ°å¤šæ ¸çš„ç³»ç»Ÿä¸­ï¼Œå°±ä¼šå› ä¸ºé”çš„é—®é¢˜ï¼Œå¤šä»»åŠ¡åŒæ­¥çš„é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿè°ƒåº¦çš„é—®é¢˜ï¼Œé€ æˆä¸€å®šçš„èµ„æºæµªè´¹ã€‚</p><p>è€Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¿™äº›æµªè´¹ä¹Ÿä¼šæ›´ä¸¥é‡ã€‚</p><h3 id="6-æ€æ ·æ›´å¥½çš„æ›´æœ‰æ•ˆçš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºå‘¢ï¼Ÿ"><a href="#6-æ€æ ·æ›´å¥½çš„æ›´æœ‰æ•ˆçš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºå‘¢ï¼Ÿ" class="headerlink" title="6 æ€æ ·æ›´å¥½çš„æ›´æœ‰æ•ˆçš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºå‘¢ï¼Ÿ"></a>6 æ€æ ·æ›´å¥½çš„æ›´æœ‰æ•ˆçš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºå‘¢ï¼Ÿ</h3><p>é¿å…å› ä¸ºIOé˜»å¡è®©CPUé—²ç½®ï¼Œå¯¼è‡´CPUçš„æµªè´¹ï¼›</p><p>é¿å…å¤šçº¿ç¨‹é—´å¢åŠ é”æ¥ä¿è¯åŒæ­¥ï¼Œå¯¼è‡´å¹¶è¡Œç³»ç»Ÿä¸²è¡ŒåŒ–ï¼›</p><p>é¿å…åˆ›å»ºã€é”€æ¯ã€ç»´æŠ¤å¤ªå¤šè¿›ç¨‹ã€çº¿ç¨‹ï¼Œå¯¼è‡´æ“ä½œç³»ç»Ÿæµªè´¹èµ„æºåœ¨è°ƒåº¦ä¸Šï¼›</p><p>é¿å…åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¤šæœåŠ¡å™¨çš„å…³è”ï¼Œæ¯”å¦‚ï¼šä¾èµ–åŒä¸€ä¸ªmysqlï¼Œç¨‹åºé€»è¾‘ä¸­ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œå¯¼è‡´ç“¶é¢ˆåœ¨mysqlï¼Œåˆ†å¸ƒå¼åˆå˜æˆä¸²è¡ŒåŒ–è¿ç®—ã€‚</p><p>ä¸Šé¢è¯´äº†è¦é¿å…çš„åœ°æ–¹ï¼Œè¦å…·ä½“æ€ä¹ˆæ¥é¿å…ï¼Œåˆ°å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å°±éœ€è¦å…·ä½“åˆ†æäº†ã€‚</p><p>è€Œä¸”æœ‰äº›æ—¶å€™ï¼Œä¸ºäº†ä¸šåŠ¡åŠŸèƒ½ï¼Œæˆ–è€…å…¶å®ƒæ–¹é¢çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šå¯ç”¨æ€§ã€ä¼¸ç¼©æ€§ã€æ‰©å±•æ€§ã€å®‰å…¨æ€§ï¼Œä¸å¾—ä¸ç‰ºç‰²æ‰ä¸€éƒ¨åˆ†æ€§èƒ½ã€‚</p><h3 id="æœ€åï¼Œåšä¸€ä¸ªæ€»ç»“ï¼š"><a href="#æœ€åï¼Œåšä¸€ä¸ªæ€»ç»“ï¼š" class="headerlink" title="æœ€åï¼Œåšä¸€ä¸ªæ€»ç»“ï¼š"></a>æœ€åï¼Œåšä¸€ä¸ªæ€»ç»“ï¼š</h3><p>å¹¶å‘é‡ï¼Œæ˜¯ä¸€ä¸ªå®¹é‡çš„æ¦‚å¿µï¼ŒæœåŠ¡å¯ä»¥æ¥å—çš„æœ€å¤§ä»»åŠ¡æ•°é‡ï¼ŒåŠ¨æ€çš„çœ‹å¾…å®ƒï¼Œè¿˜éœ€è¦æŠŠæ€§èƒ½è€ƒè™‘è¿›å»ã€‚</p><p>æ€§èƒ½ï¼Œæ˜¯ä¸€ä¸ªé€Ÿåº¦çš„æ¦‚å¿µï¼Œå•ä½æ—¶é—´å†…å¯ä»¥å¤„ç†çš„ä»»åŠ¡æ•°é‡ã€‚</p><p>é«˜å¹¶å‘å’Œé«˜æ€§èƒ½æ˜¯ç´§å¯†ç›¸å…³çš„ï¼Œæé«˜åº”ç”¨çš„æ€§èƒ½ï¼Œæ˜¯è‚¯å®šå¯ä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›çš„ã€‚</p><p>åº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå¯¹äºè®¡ç®—å¯†é›†å‹å’ŒIOå¯†é›†å‹è¿˜æ˜¯æœ‰å¾ˆå¤§å·®åˆ«ï¼Œéœ€è¦åˆ†å¼€æ¥è€ƒè™‘ã€‚</p><p>å¢åŠ æœåŠ¡å™¨èµ„æºï¼ˆCPUã€å†…å­˜ã€æœåŠ¡å™¨æ•°é‡ï¼‰ï¼Œç»å¤§éƒ¨åˆ†æ—¶å€™æ˜¯å¯ä»¥æé«˜åº”ç”¨çš„å¹¶å‘èƒ½åŠ›å’Œæ€§èƒ½ï¼ˆå‰ææ˜¯åº”ç”¨èƒ½å¤Ÿæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œè®¡ç®—ï¼Œå¤šæœåŠ¡å™¨åˆ†å¸ƒå¼è®¡ç®—æ‰è¡Œï¼‰ï¼Œä½†ä¹Ÿæ˜¯è¦é¿å…å…¶ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œæ‰å¯ä»¥æ›´å¥½çš„æ›´æœ‰æ•ˆç‡çš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚</p></body></html>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜å¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºSpring Bootçš„Elasticsearch-5.5.2ä¼ªåˆ†å¸ƒå¼æ˜¯é›†ç¾¤</title>
      <link href="/2018/05/25/%E5%9F%BA%E4%BA%8ESpring%20Boot%E7%9A%84Elasticsearch-5.5.2%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%98%AF%E9%9B%86%E7%BE%A4/"/>
      <url>/2018/05/25/%E5%9F%BA%E4%BA%8ESpring%20Boot%E7%9A%84Elasticsearch-5.5.2%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%98%AF%E9%9B%86%E7%BE%A4/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘</p><p>æˆ‘ä»¬å…ˆå»å®˜ç½‘ä¸‹è½½elasticsearch</p><p>Windowsï¼š<a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.zip" target="_blank" rel="noopener">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.zip</a></p><p>Linuxï¼š<a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.tar.gz" target="_blank" rel="noopener">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.tar.gz</a></p><a id="more"></a><h3 id="è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘"><a href="#è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘" class="headerlink" title="è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘"></a>è¿™å°±æ˜¯æˆ‘è¸©è¿‡çš„å‘</h3><p>æˆ‘ä»¬å…ˆå»å®˜ç½‘ä¸‹è½½elasticsearch</p><pre><code>Windowsï¼šhttps://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.zipLinuxï¼šhttps://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.2.0.tar.gz</code></pre><p>è§£å‹åæˆ‘ä»¬å¤åˆ¶ä¸‰ä»½å‡ºæ¥åˆ†åˆ«å‘½åä¸ºï¼šelasticsearch-5.5.2-noed1ã€elasticsearch-5.5.2-noed2ã€elasticsearch-5.5.2-noed3<br>ç„¶åæˆ‘ä»¬è¿›å…¥å„ä¸ªé‡Œé¢çš„configæ–‡ä»¶å¤¹é‡Œé¢æ‰¾åˆ° elasticsearch.yml æ–‡ä»¶ï¼Œåœ¨æœ€åæ·»åŠ ä¸Šå¦‚ä¸‹é…ç½®ï¼ŒIPåœ°å€æ¢ä¸ºè‡ªå·±ç”µè„‘çš„IPåœ°å€ã€‚</p><p>elasticsearch-5.5.2-noed1ï¼š</p><pre><code>#èŠ‚ç‚¹1çš„é…ç½®ä¿¡æ¯ï¼š  cluster.name: elasticsearch   #é›†ç¾¤åç§°ï¼Œä¿è¯å”¯ä¸€  node.name: Elasticsearch-node1   #èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»ä¸ä¸€æ ·  network.host: 192.168.0.103   #å¿…é¡»ä¸ºæœ¬æœºçš„ipåœ°å€  http.port: 9200   #æœåŠ¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  transport.tcp.port : 9300   #é›†ç¾¤é—´é€šä¿¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  #è®¾ç½®é›†ç¾¤è‡ªåŠ¨å‘ç°æœºå™¨ipé›†åˆ  discovery.zen.ping.unicast.hosts: ["192.168.0.103:9300", "192.168.0.103:9301", "192.168.0.103:9302"]</code></pre><p>elasticsearch-5.5.2-noed2ï¼š</p><pre><code>#èŠ‚ç‚¹1çš„é…ç½®ä¿¡æ¯ï¼š  cluster.name: elasticsearch   #é›†ç¾¤åç§°ï¼Œä¿è¯å”¯ä¸€  node.name: Elasticsearch-node1   #èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»ä¸ä¸€æ ·  network.host: 192.168.0.103   #å¿…é¡»ä¸ºæœ¬æœºçš„ipåœ°å€  http.port: 9201   #æœåŠ¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  transport.tcp.port : 9301   #é›†ç¾¤é—´é€šä¿¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  #è®¾ç½®é›†ç¾¤è‡ªåŠ¨å‘ç°æœºå™¨ipé›†åˆ  discovery.zen.ping.unicast.hosts: ["192.168.0.103:9300", "192.168.0.103:9301", "192.168.0.103:9302"]</code></pre><p>elasticsearch-5.5.2-noed3ï¼š</p><pre><code>#èŠ‚ç‚¹1çš„é…ç½®ä¿¡æ¯ï¼š  cluster.name: elasticsearch   #é›†ç¾¤åç§°ï¼Œä¿è¯å”¯ä¸€  node.name: Elasticsearch-node1   #èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»ä¸ä¸€æ ·  network.host: 192.168.0.103   #å¿…é¡»ä¸ºæœ¬æœºçš„ipåœ°å€  http.port: 9202   #æœåŠ¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  transport.tcp.port : 9302   #é›†ç¾¤é—´é€šä¿¡ç«¯å£å·ï¼Œåœ¨åŒä¸€æœºå™¨ä¸‹å¿…é¡»ä¸ä¸€æ ·  #è®¾ç½®é›†ç¾¤è‡ªåŠ¨å‘ç°æœºå™¨ipé›†åˆ  discovery.zen.ping.unicast.hosts: ["192.168.0.103:9300", "192.168.0.103:9301", "192.168.0.103:9302"]</code></pre><p>é…ç½®å¥½ä¹‹åå°±å¯ä»¥ä¾æ¬¡å¯åŠ¨äº†ï¼Œåœ¨binç›®å½•ä¸‹æœ‰å¯åŠ¨è„šæœ¬ã€‚</p><h2 id="æ³¨æ„ï¼šIPåœ°å€åˆ«ç”¨localhost-æˆ–è€…-127-0-0-1-è¿™æ˜¯ä¸€ä¸ªæ·±å‘w-ï¾ŸĞ”ï¾Ÿ-w"><a href="#æ³¨æ„ï¼šIPåœ°å€åˆ«ç”¨localhost-æˆ–è€…-127-0-0-1-è¿™æ˜¯ä¸€ä¸ªæ·±å‘w-ï¾ŸĞ”ï¾Ÿ-w" class="headerlink" title="æ³¨æ„ï¼šIPåœ°å€åˆ«ç”¨localhost æˆ–è€… 127.0.0.1 è¿™æ˜¯ä¸€ä¸ªæ·±å‘w(ï¾ŸĞ”ï¾Ÿ)w"></a>æ³¨æ„ï¼šIPåœ°å€åˆ«ç”¨localhost æˆ–è€… 127.0.0.1 è¿™æ˜¯ä¸€ä¸ªæ·±å‘w(ï¾ŸĞ”ï¾Ÿ)w</h2><p>å¯åŠ¨ä¹‹åæˆ‘ä»¬å®‰è£…ElasticSearch Headè¿™ä¸ªæ’ä»¶ï¼Œå¦‚æœä½ ç”¨è°·æ­Œæµè§ˆå™¨åˆèƒ½ç¿»å¢™çš„è¯å»ºè®®ç›´æ¥åˆ°è°·æ­Œå•†åº—å»ä¸‹è½½ï¼Œè¿™æ ·å¾ˆæ–¹ä¾¿ï¼Œå¦‚æœä½ ä¸å…·å¤‡ä»¥ä¸Šæ¡ä»¶è¯·è‡ªè¡Œç™¾åº¦å®‰è£…æ–¹æ³•ï¼ˆä»¥ä¸‹æˆªå›¾ä¸ºè°·æ­Œå•†åº—ï¼‰ï¼š</p><p><a href="http://www.hwy.ac.cn/upload/2018/05/1c23o36pbag4uon0nulpcmjt3d.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/05/1c23o36pbag4uon0nulpcmjt3d.png" class="lazyload" title></a></p><p>ä»¥ä¸‹æ˜¯æµ‹è¯•å®‰è£…æ˜¯å¦æ­£ç¡®ï¼š<br><a href="http://www.hwy.ac.cn/upload/2018/05/s16kodfgjgjpoq7sqr7mpe7a63.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/05/s16kodfgjgjpoq7sqr7mpe7a63.png" class="lazyload" title></a></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡Spring Bootç¼–å†™æ“ä½œè¿™ä¸ªé›†ç¾¤çš„Javaä»£ç ï¼Œå…ˆçœ‹çœ‹æˆ‘ä»£ç çš„ç›®å½•ç»“æ„ï¼š</p><p><a href="http://www.hwy.ac.cn/upload/2018/05/35di1ipmniif2r029a8q47eqaq.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/05/35di1ipmniif2r029a8q47eqaq.png" class="lazyload" title></a></p><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„ä»£ç å’Œé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨mavenå·¥ç¨‹æ„å»ºï¼Œæˆ‘çš„mavenç‰ˆæœ¬ä¸ºï¼šapache-maven-3.3.9ï¼ŒJDKç‰ˆæœ¬ï¼šjdk1.8.0_111<br>ä»£ç å¦‚ä¸‹ï¼š</p><p>pom.xml</p><pre><code class="js"><project xmlns="<span" class="string">"http://maven.apache.org/POM/4.0.0" xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>  xsi:schemaLocation=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>>  <modelversion><span class="number">4.0</span><span class="number">.0</span><<span class="regexp">/modelVersion></span><span class="regexp"></span><span class="regexp">  <groupid>com.yiroupId>  <artifactid>spring-boot-elasticsearch<<span class="regexp">/artifactId></span><span class="regexp">  <version>1.0-SNAPSHOT<!--</span-->version>  <packaging>jar<<span class="regexp">/packaging></span><span class="regexp"></span><span class="regexp">  <name>spring-boot-elasticsearch<!--</span-->name>  <url>http:<span class="comment">//maven.apache.org</span></url></name></span>  <properties>    <project.build.sourceencoding>UTF<span class="number">-8</span><<span class="regexp">/project.build.sourceEncoding></span><span class="regexp">    <spring-boot.version>2.0.0.RELEASE<!--</span-->spring-boot.version>    <hutool-all.version><span class="number">4.0</span><span class="number">.2</span><<span class="regexp">/hutool-all.version></span><span class="regexp">    <log4j.version>2.11.0<!--</span-->log4j.version>    <spring-data-elasticsearch.version><span class="number">3.0</span><span class="number">.3</span>.RELEASE<<span class="regexp">/spring-data-elasticsearch.version></span><span class="regexp">    <jna.version>4.5.1<!--</span-->jna.version>    <junit.version><span class="number">4.12</span><<span class="regexp">/junit.version></span><span class="regexp">  <!--</span-->properties>  <dependencies>    <!--spring bootæ¡†æ¶-->    <dependency>      <groupid>org.springframework.boot<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>spring-boot-starter-web<!--</span-->artifactId>      <version>${spring-boot.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--Spring Bootè§†å›¾æ¨¡æ¿-->    <dependency>      <groupid>org.springframework.boot<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>spring-boot-starter-freemarker<!--</span-->artifactId>      <version>${spring-boot.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--é…ç½®æ–‡ä»¶è¯»å–-->    <dependency>      <groupid>org.springframework.boot<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>spring-boot-configuration-processor<!--</span-->artifactId>      <version>${spring-boot.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--elasticsearch -->    <dependency>      <groupid>org.springframework.data<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>spring-data-elasticsearch<!--</span-->artifactId>      <version>${spring-data-elasticsearch.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <dependency>      <groupid>net.java.dev.jna<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>jna<!--</span-->artifactId>      <version>${jna.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--elasticsearch å¿…é¡»ä¾èµ–æ—¥å¿—æ‰èƒ½å¯åŠ¨-->    <dependency>      <groupid>org.apache.logging.log4j<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>log4j-api<!--</span-->artifactId>      <version>${log4j.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <dependency>      <groupid>org.apache.logging.log4j<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>log4j-core<!--</span-->artifactId>      <version>${log4j.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--hutool å·¥å…·ç±»-->    <dependency>      <groupid>cn.hutool<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>hutool-all<!--</span-->artifactId>      <version>${hutool-all.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>    <!--å•å…ƒæµ‹è¯•å·¥å…·-->    <dependency>      <groupid>junit<<span class="regexp">/groupId></span><span class="regexp">      <artifactid>junit<!--</span-->artifactId>      <version>${junit.version}<<span class="regexp">/version></span><span class="regexp">    <!--</span-->dependency>  <<span class="regexp">/dependencies></span><span class="regexp"><!--</span-->project></span></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></span></version></artifactid></span></groupid></dependency></dependencies></span></junit.version></jna.version></span></spring-data-elasticsearch.version></log4j.version></span></hutool-all.version></spring-boot.version></span></project.build.sourceencoding></properties></packaging></version></span></artifactid></groupid></span></modelversion></project></code></pre><p>application.properties</p><pre><code># ELASTICSEARCH (ElasticsearchProperties})#é›†ç¾¤åã€‚(é»˜è®¤å€¼: elasticsearch)spring.data.elasticsearch.cluster-name=elasticsearch#é›†ç¾¤å…¶ä»–èŠ‚ç‚¹åœ°å€åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå°±å¯åŠ¨ä¸€ä¸ªå®¢æˆ·ç«¯èŠ‚ç‚¹ã€‚é»˜è®¤ 9300 æ˜¯ Java å®¢æˆ·ç«¯çš„ç«¯å£ã€‚spring.data.elasticsearch.cluster-nodes=192.168.0.103:9300#æ˜¯å¦å¼€å¯æœ¬åœ°ï¼ˆæˆ‘æœ¬åœ°æµ‹è¯•ç”¨å°±å¯ç”¨æœ¬åœ°äº†ï¼‰spring.data.elasticsearch.local=true#å¼€å¯ Elasticsearch ä»“åº“ã€‚(é»˜è®¤å€¼:trueã€‚)spring.data.elasticsearch.repositories.enabled=true#å­˜å‚¨ç´¢å¼•çš„ä½ç½®#spring.data.elasticsearch.properties.path.home=data/elasticsearch#æ—¥å¿—å­˜å‚¨ç›®å½•#spring.data.elasticsearch.properties.path.logs=./elasticsearch/log#æ•°æ®å­˜å‚¨ç›®å½•#spring.data.elasticsearch.properties.path.data=./elasticsearch/data#è¿æ¥è¶…æ—¶çš„æ—¶é—´#spring.data.elasticsearch.properties.transport.tcp.connect_timeout=120s</code></pre><p>Book.java</p><pre><code>package com.yi.model;import org.springframework.data.annotation.Id;import org.springframework.data.elasticsearch.annotations.Document;@Document(indexName = "book_index", type = "books")public class Book {    @Id    private String id;    private String title;    private String content;    private String author;    private String releaseDate;    public Book() {    }    public Book(String id, String title, String content, String author, String releaseDate) {        this.id = id;        this.title = title;        this.content = content;        this.author = author;        this.releaseDate = releaseDate;    }    å¿½ç•¥getå’Œsetæ–¹æ³•ï¼Œè‡ªå·±åŠ ä¸Š}</code></pre><p>BookRepository.java</p><pre><code>package com.yi.repository;import com.yi.model.Book;import org.springframework.data.domain.Page;import org.springframework.data.domain.Pageable;import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;import java.util.List;/** * æè¿°: * * @author YI * @date 2018-3-21 12:08:48 **/public interface BookRepository extends ElasticsearchRepository<book, string> {    Page<book> findByAuthor(String author, Pageable pageable);    List<book> findByTitle(String title);    Book save(Book book);}</book></book></book,></code></pre><p>BookService.java</p><pre><code>package com.yi.service;import com.yi.model.Book;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import java.util.List;/** * æè¿°: * * @author YI * @date 2018-3-21 12:08:48 **/public interface BookService {    Book save(Book book);    void delete(Book book);    Iterable<book> findAll();    Page<book> findByAuthor(String author, PageRequest pageRequest);    List<book> findByTitle(String title);}</book></book></book></code></pre><p>BookServiceImpl.java</p><pre><code>package com.yi.service.impl;import com.yi.model.Book;import com.yi.repository.BookRepository;import com.yi.service.BookService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.stereotype.Service;import java.util.List;/** * æè¿°: * * @author YI * @date 2018-3-21 12:08:48 **/@Servicepublic class BookServiceImpl implements BookService {    @Autowired    private BookRepository bookRepository;    @Override    public Book save(Book book) {        return bookRepository.save(book);    }    @Override    public void delete(Book book) {        bookRepository.delete(book);    }    @Override    public Iterable<book> findAll() {        return bookRepository.findAll();    }    @Override    public Page<book> findByAuthor(String author, PageRequest pageRequest) {        return bookRepository.findByAuthor(author, pageRequest);    }    @Override    public List<book> findByTitle(String title) {        return bookRepository.findByTitle(title);    }}</book></book></book></code></pre><p>ElasticSearchController.java</p><pre><code>package com.yi.controller;import com.yi.model.Book;import com.yi.service.BookService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import java.util.ArrayList;import java.util.List;/** * ElasticSearchæ“ä½œ * @author YI * @date 2018-3-21 12:08:48 */@Controller@RequestMapping("/elasticsearch")public class ElasticSearchController {    @Autowired    private BookService bookService;    /**     * ä¿å­˜åˆ°elasticsearchä¸­     */    @RequestMapping("/save")    public void save(){        for (int i = 0; i < getTitle().size(); i++) {            bookService.save(new Book(String.valueOf(i), getTitle().get(i), getContent().get(i), "é»„æ–‡æ‡¿", i + "-FEB-2017"));        }    }    /**     * é€šè¿‡ä½œè€…æŸ¥æ‰¾     * http://localhost:8080/elasticsearch/findByAuthor?name=é»„æ–‡æ‡¿     * @param name     * @return     */    @RequestMapping("/findByAuthor")    @ResponseBody    public Page<book> findByAuthor(String name){        return bookService.findByAuthor(name, new PageRequest(0, 10));    }    /**     * é€šè¿‡æ ‡é¢˜æŸ¥æ‰¾     * @return     */    @RequestMapping("/findByTitle")    @ResponseBody    public List<book> findByTitle(){        return bookService.findByTitle("å¦‚æ¢¦ä»¤");    }    private List<string> getTitle() {        List<string> list = new ArrayList<>();        list.add("ã€Šå¦‚æ¢¦ä»¤Â·å¸¸è®°æºªäº­æ—¥æš®ã€‹");        list.add("ã€Šé†‰èŠ±é˜´Â·è–„é›¾æµ“äº‘æ„æ°¸æ˜¼ã€‹");        list.add("ã€Šå£°å£°æ…¢Â·å¯»å¯»è§…è§…ã€‹");        list.add("ã€Šæ°¸é‡ä¹Â·è½æ—¥ç†”é‡‘ã€‹");        list.add("ã€Šå¦‚æ¢¦ä»¤Â·æ˜¨å¤œé›¨ç–é£éª¤ã€‹");        list.add("ã€Šæ¸”å®¶å‚²Â·é›ªé‡Œå·²çŸ¥æ˜¥ä¿¡è‡³ã€‹");        list.add("ã€Šç‚¹ç»›å”‡Â·è¹´[1]ç½¢ç§‹åƒã€‹");        list.add("ã€Šç‚¹ç»›å”‡Â·å¯‚å¯æ·±é—ºã€‹");        list.add("ã€Šè¶æ‹èŠ±Â·æ³ªæ¹¿ç½—è¡£è„‚ç²‰æ»¡ã€‹");        list.add("ã€Šè¶æ‹èŠ± ç¦»æƒ…ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šå‡å­—æœ¨å…°èŠ±Â·å–èŠ±æ‹…ä¸Šã€‹");        list.add("ã€Šä¸´æ±Ÿä»™Â·æ¬§é˜³å…¬ä½œã€Šè¶æ‹èŠ±ã€‹");        list.add("ã€Šä¸´æ±Ÿä»™Â·åº­é™¢æ·±æ·±æ·±å‡ è®¸ã€‹");        list.add("ã€Šå¿µå¥´å¨‡Â·è§æ¡åº­é™¢ã€‹");        list.add("ã€Šè©è¨è›®Â·é£æŸ”æ—¥è–„æ˜¥çŠ¹æ—©ã€‹");        list.add("ã€Šè©è¨è›®Â·å½’é¸¿å£°æ–­æ®‹äº‘ç¢§ã€‹");        list.add("ã€Šæ­¦é™µæ˜¥Â·é£ä½å°˜é¦™èŠ±å·²å°½ã€‹");        list.add("ã€Šä¸€å‰ªæ¢…Â·çº¢è—•é¦™æ®‹ç‰è•ˆç§‹ã€‹");        list.add("ã€Šæ¸”å®¶å‚²Â·å¤©æ¥äº‘æ¶›è¿æ™“é›¾ã€‹");        list.add("ã€Šé¹§é¸ªå¤©Â·æš—æ·¡è½»é»„ä½“æ€§æŸ”ã€‹");        list.add("ã€Šé¹§é¸ªå¤©Â·å¯’æ—¥è§è§ä¸Šé”çª—ã€‹");        list.add("ã€Šä¸€å‰ªæ¢…Â·çº¢è—•é¦™æ®‹ç‰ç°Ÿç§‹ã€‹");        list.add("ã€Šå¦‚æ¢¦ä»¤Â·å¸¸è®°æºªäº­æ—¥æš®ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šè¶æ‹èŠ±Â·æ³ªæ¹¿ç½—è¡£è„‚ç²‰æ»¡ã€‹");        list.add("ã€Šè¶æ‹èŠ±Â·æš–æ—¥æ™´é£åˆç ´å†»ã€‹");        list.add("ã€Šé¹§é¸ªå¤©Â·å¯’æ—¥è§è§ä¸Šé”çª—ã€‹");        list.add("ã€Šé†‰èŠ±é˜´Â·è–„é›¾æµ“äº‘æ„æ°¸æ˜¼ã€‹");        list.add("ã€Šé¹§é¸ªå¤©Â·æš—æ·¡è½»é»„ä½“æ€§æŸ”ã€‹");        list.add("ã€Šè¶æ‹èŠ±Â·æ°¸å¤œæ¹æ¹æ¬¢æ„å°‘ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šæµ£æºªæ²™ã€‹");        list.add("ã€Šå¦‚æ¢¦ä»¤Â·è°ä¼´æ˜çª—ç‹¬åã€‹");        return list;    }    private List<string> getContent() {        List<string> list = new ArrayList<>();        list.add("åˆä¸­ å®‹Â·ææ¸…ç…§ å¸¸è®°æºªäº­æ—¥æš®ï¼Œæ²‰é†‰ä¸çŸ¥å½’è·¯ï¼Œå…´å°½æ™šå›èˆŸï¼Œè¯¯å…¥è—•èŠ±æ·±å¤„ã€‚äº‰æ¸¡ï¼Œäº‰æ¸¡");        list.add("é‡é˜³èŠ‚ å®‹Â·ææ¸…ç…§ è–„é›¾æµ“äº‘æ„æ°¸æ˜¼ï¼Œç‘è„‘æ¶ˆé‡‘å…½ã€‚ä½³èŠ‚åˆé‡é˜³ï¼Œç‰æ•çº±å¨ï¼ŒåŠå¤œå‡‰åˆé€ã€‚ä¸œ");        list.add("é—ºæ€¨è¯— å®‹Â·ææ¸…ç…§ å¯»å¯»è§…è§…ï¼Œå†·å†·æ¸…æ¸…ï¼Œå‡„å‡„æƒ¨æƒ¨æˆšæˆšã€‚ä¹æš–è¿˜å¯’æ—¶å€™ï¼Œæœ€éš¾å°†æ¯ã€‚ä¸‰æ¯ä¸¤");        list.add("å…ƒå®µèŠ‚ å®‹Â·ææ¸…ç…§ è½æ—¥ç†”é‡‘ï¼Œæš®äº‘åˆç’§ï¼Œäººåœ¨ä½•å¤„ã€‚æŸ“æŸ³çƒŸæµ“ï¼Œå¹æ¢…ç¬›æ€¨ï¼Œæ˜¥æ„çŸ¥å‡ è®¸ã€‚å…ƒ");        list.add("å©‰çº¦è¯— å®‹Â·ææ¸…ç…§ æ˜¨å¤œé›¨ç–é£éª¤ï¼Œæµ“ç¡ä¸æ¶ˆæ®‹é…’ï¼Œè¯•é—®å·å¸˜äººï¼Œå´é“æµ·æ£ ä¾æ—§ã€‚çŸ¥å¦ï¼ŒçŸ¥å¦");        list.add("æå†™æ¢…èŠ± å®‹Â·ææ¸…ç…§ é›ªé‡Œå·²çŸ¥æ˜¥ä¿¡è‡³ï¼Œå¯’æ¢…ç‚¹ç¼€ç¼æè…»ï¼Œé¦™è„¸åŠå¼€å¨‡æ—–æ—ï¼Œå½“åº­é™…ï¼Œç‰äººæµ´å‡º");        list.add(" å®‹Â·ææ¸…ç…§ è¹´ç½¢ç§‹åƒï¼Œèµ·æ¥æ…µæ•´çº¤çº¤æ‰‹ã€‚éœ²æµ“èŠ±ç˜¦ï¼Œè–„æ±—è½»è¡£é€ã€‚è§å®¢å…¥æ¥ï¼Œè¢œåˆ¬é‡‘");        list.add("é—ºæ€¨è¯— å®‹Â·ææ¸…ç…§ å¯‚å¯æ·±é—ºï¼ŒæŸ”è‚ ä¸€å¯¸æ„åƒç¼•ã€‚æƒœæ˜¥æ˜¥å»ã€‚å‡ ç‚¹å‚¬èŠ±é›¨ã€‚å€šéé˜‘å¹²ï¼Œåªæ˜¯æ— ");        list.add("å©‰çº¦è¯— å®‹Â·ææ¸…ç…§ æ³ªæ¹¿ç½—è¡£è„‚ç²‰æ»¡ã€‚å››å é˜³å…³ï¼Œå”±åˆ°åƒåƒéã€‚äººé“å±±é•¿æ°´åˆæ–­ã€‚è§è§å¾®é›¨é—»");        list.add("æå†™æ˜¥å¤© å®‹Â·ææ¸…ç…§ æš–é›¨æ™´é£åˆç ´å†»ï¼ŒæŸ³çœ¼æ¢…è…®ï¼Œå·²è§‰æ˜¥å¿ƒåŠ¨ã€‚é…’æ„è¯—æƒ…è°ä¸å…±ï¼Ÿæ³ªèæ®‹ç²‰èŠ±");        list.add("å¯’é£ŸèŠ‚ å®‹Â·ææ¸…ç…§ æ·¡è¡æ˜¥å…‰å¯’é£Ÿå¤©ï¼Œç‰ç‚‰æ²ˆæ°´è¢…æ®‹çƒŸï¼Œæ¢¦å›å±±æ•éšèŠ±é’¿ã€‚æµ·ç‡•æœªæ¥äººæ–—è‰ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ é«»å­ä¼¤æ˜¥æ…µæ›´æ¢³ï¼Œæ™šé£åº­é™¢è½æ¢…åˆï¼Œæ·¡äº‘æ¥å¾€æœˆç–ç–ï¼Œç‰é¸­è–°ç‚‰é—²ç‘è„‘ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ è«è®¸æ¯æ·±ç¥ç€æµ“ï¼Œæœªæˆæ²‰é†‰æ„å…ˆèã€‚ç–é’Ÿå·²åº”æ™šæ¥é£ã€‚ç‘è„‘é¦™æ¶ˆé­‚æ¢¦æ–­ï¼Œ");        list.add("é—ºæ€¨è¯— å®‹Â·ææ¸…ç…§ å°é™¢é—²çª—æ˜¥å·²æ·±ï¼Œé‡å¸˜æœªå·å½±æ²‰æ²‰ã€‚å€šæ¥¼æ— è¯­ç†ç‘¶ç´ï¼Œè¿œå²«å‡ºå±±å‚¬è–„æš®ã€‚");        list.add("çˆ±æƒ…è¯— å®‹Â·ææ¸…ç…§ ç»£å¹•èŠ™è“‰ä¸€ç¬‘å¼€ï¼Œæ–œåå®é¸­äº²é¦™è…®ï¼Œçœ¼æ³¢æ‰åŠ¨è¢«äººçŒœã€‚ä¸€é¢é£æƒ…æ·±æœ‰éŸµï¼Œ");        list.add("æå†™æ˜¥å¤© å®‹Â·ææ¸…ç…§ å–èŠ±æ‹…ä¸Šï¼Œä¹°å¾—ä¸€ææ˜¥æ¬²æ”¾ã€‚æ³ªæŸ“è½»åŒ€ï¼ŒçŠ¹å¸¦å½¤éœæ™“éœ²ç—•ã€‚æ€•éƒçŒœé“ï¼Œå¥´");        list.add("ã€‹ å®‹Â·ææ¸…ç…§ æ¬§é˜³å…¬ä½œã€Šè¶æ‹èŠ±ã€‹ï¼Œæœ‰â€œæ·±æ·±æ·±å‡ è®¸â€ä¹‹å¥ï¼Œäºˆé…·çˆ±ä¹‹ã€‚ç”¨å…¶è¯­ä½œâ€œåº­");        list.add("æå†™æ¢…èŠ± å®‹Â·ææ¸…ç…§ åº­é™¢æ·±æ·±æ·±å‡ è®¸ï¼Œäº‘çª—é›¾é˜æ˜¥è¿Ÿï¼Œä¸ºè°æ†”æ‚´æŸèŠ³å§¿ã€‚å¤œæ¥æ¸…æ¢¦å¥½ï¼Œåº”æ˜¯å‘");        list.add("å¯’é£ŸèŠ‚ å®‹Â·ææ¸…ç…§ è§æ¡åº­é™¢ï¼Œåˆæ–œé£ç»†é›¨ï¼Œé‡é—¨é¡»é—­ã€‚å® æŸ³å¨‡èŠ±å¯’é£Ÿè¿‘ï¼Œç§ç§æ¼äººå¤©æ°”ã€‚é™©");        list.add("æ€ä¹¡è¯— å®‹Â·ææ¸…ç…§ é£æŸ”æ—¥è–„æ˜¥çŠ¹æ—©ï¼Œå¤¹è¡«ä¹è‘—å¿ƒæƒ…å¥½ã€‚ç¡èµ·è§‰å¾®å¯’ï¼Œæ¢…èŠ±é¬“ä¸Šæ®‹ã€‚æ•…ä¹¡ä½•å¤„");        list.add("æå†™æ˜¥å¤© å®‹Â·ææ¸…ç…§ å½’é¸¿å£°æ–­æ®‹äº‘ç¢§ï¼ŒèƒŒçª—é›ªè½ç‚‰çƒŸç›´ã€‚çƒ›åº•å‡¤é’—æ˜ï¼Œé’—å¤´äººèƒœè½»ã€‚è§’å£°å‚¬æ™“");        list.add("é—ºæ€¨è¯— å®‹Â·ææ¸…ç…§ é£ä½å°˜é¦™èŠ±å·²å°½ï¼Œæ—¥æ™šå€¦æ¢³å¤´ã€‚ç‰©æ˜¯äººéäº‹äº‹ä¼‘ï¼Œæ¬²è¯­æ³ªå…ˆæµã€‚é—»è¯´åŒæºª");        list.add(" å®‹Â·ææ¸…ç…§ çº¢è—•é¦™æ®‹ç‰è•ˆç§‹ï¼Œè½»è§£ç½—è£³ï¼Œç‹¬ä¸Šå…°èˆŸã€‚äº‘ä¸­è°å¯„é”¦ä¹¦æ¥ï¼Ÿé›å­—å›æ—¶ï¼Œæœˆ");        list.add("è±ªæ”¾è¯— å®‹Â·ææ¸…ç…§ å¤©æ¥äº‘æ¶›è¿æ™“é›¾ã€‚æ˜Ÿæ²³æ¬²è½¬åƒå¸†èˆã€‚ä»¿ä½›æ¢¦é­‚å½’å¸æ‰€ã€‚é—»å¤©è¯­ã€‚æ®·å‹¤é—®æˆ‘");        list.add("æå†™èŠ± å®‹Â·ææ¸…ç…§ æš—æ·¡è½»é»„ä½“æ€§æŸ”ã€‚æƒ…ç–è¿¹è¿œåªé¦™ç•™ã€‚ä½•é¡»æµ…ç¢§æ·±çº¢è‰²ï¼Œè‡ªæ˜¯èŠ±ä¸­ç¬¬ä¸€æµã€‚");        list.add("æå†™ç§‹å¤© å®‹Â·ææ¸…ç…§ å¯’æ—¥è§è§ä¸Šççª—ï¼Œæ¢§æ¡åº”æ¨å¤œæ¥éœœã€‚é…’é˜‘æ›´å–œå›¢èŒ¶è‹¦ï¼Œæ¢¦æ–­åå®œç‘è„‘é¦™ã€‚");        list.add("é—ºæ€¨è¯— å®‹Â·ææ¸…ç…§ çº¢è—•é¦™æ®‹ç‰ç°Ÿç§‹ã€‚è½»è§£ç½—è£³ï¼Œç‹¬ä¸Šå…°èˆŸã€‚äº‘ä¸­è°å¯„é”¦ä¹¦æ¥ï¼Ÿé›å­—å›æ—¶ï¼Œæœˆ");        list.add(" å®‹Â·ææ¸…ç…§ å¸¸è®°æºªäº­æ—¥æš®ã€‚æ²ˆé†‰ä¸çŸ¥å½’è·¯ã€‚å…´å°½æ™šå›èˆŸï¼Œè¯¯å…¥è—•èŠ±æ·±å¤„ã€‚äº‰æ¸¡ã€‚äº‰æ¸¡");        list.add(" å®‹Â·ææ¸…ç…§ è«è®¸æ¯æ·±ç¥ç€æµ“ã€‚æœªæˆæ²ˆé†‰æ„å…ˆèã€‚å·²åº”æ™šæ¥é£ã€‚ç‘è„‘é¦™æ¶ˆé­‚æ¢¦æ–­ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ å°é™¢é—²çª—æ˜¥è‰²æ·±ã€‚é‡å¸˜æœªå·å½±æ²ˆæ²ˆã€‚å€šæ¥¼æ— è¯­ç†ç‘¶ç´ã€‚è¿œå²«å‡ºå±±å‚¬è–„æš®ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ æ·¡è¡æ˜¥å…‰å¯’é£Ÿå¤©ã€‚ç‰ç‚‰æ²ˆæ°´è¢…æ®‹çƒŸã€‚æ¢¦å›å±±æ•éšèŠ±é’¿ã€‚æµ·ç‡•æœªæ¥äººæ–—è‰ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ æ³ªæ¹¿ç½—è¡£è„‚ç²‰æ»¡ã€‚å››å é˜³å…³ï¼Œå”±åˆ°åƒåƒéã€‚äººé“å±±é•¿å±±åˆæ–­ã€‚è§è§å¾®é›¨é—»");        list.add(" å®‹Â·ææ¸…ç…§ æš–æ—¥æ™´é£åˆç ´å†»ã€‚æŸ³çœ¼çœ‰è…®ï¼Œå·²è§‰æ˜¥å¿ƒåŠ¨ã€‚é…’æ„è¯—æƒ…è°ä¸å…±ã€‚æ³ªèæ®‹ç²‰èŠ±");        list.add(" å®‹Â·ææ¸…ç…§ å¯’æ—¥è§è§ä¸Šé”çª—ã€‚æ¢§æ¡åº”æ¨å¤œæ¥éœœã€‚é…’é˜‘æ›´å–œå›¢èŒ¶è‹¦ï¼Œæ¢¦æ–­åå®œç‘è„‘é¦™ã€‚");        list.add(" å®‹Â·ææ¸…ç…§ è–„é›¾æµ“äº‘æ„æ°¸æ˜¼ã€‚ç‘è„‘æ¶ˆé‡‘å…½ã€‚ä½³èŠ‚åˆé‡é˜³ï¼Œç‰æ•çº±å¨ï¼ŒåŠå¤œå‡‰åˆé€ã€‚ä¸œ");        list.add(" å®‹Â·ææ¸…ç…§ æš—æ·¡è½»é»„ä½“æ€§æŸ”ã€‚æƒ…ç–è¿¹è¿œåªé¦™ç•™ã€‚ä½•é¡»æµ…ç¢§æ·±çº¢è‰²ï¼Œè‡ªæ˜¯èŠ±ä¸­ç¬¬ä¸€æµã€‚");        list.add(" å®‹Â·ææ¸…ç…§ æ°¸å¤œæ¹æ¹æ¬¢æ„å°‘ã€‚ç©ºæ¢¦é•¿å®‰ï¼Œè®¤å–é•¿å®‰é“ã€‚ä¸ºæŠ¥ä»Šå¹´æ˜¥è‰²å¥½ã€‚èŠ±å…‰æœˆå½±å®œ");        list.add(" å®‹Â·ææ¸…ç…§ é«»å­ä¼¤æ˜¥æ…µæ›´æ¢³ã€‚æ™šé£åº­é™¢è½æ¢…åˆã€‚æ·¡äº‘æ¥å¾€æœˆç–ç–ã€‚ç‰é¸­ç†ç‚‰é—²ç‘è„‘ï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ ç»£é¢èŠ™è“‰ä¸€ç¬‘å¼€ã€‚æ–œé£å®é¸­è¡¬é¦™è…®ã€‚çœ¼æ³¢æ‰åŠ¨è¢«äººçŒœã€‚ä¸€é¢é£æƒ…æ·±æœ‰éŸµï¼Œ");        list.add(" å®‹Â·ææ¸…ç…§ è°ä¼´æ˜çª—ç‹¬åï¼Œæˆ‘å…±å½±å„¿ä¿©ä¸ªã€‚ç¯å°½æ¬²çœ æ—¶ï¼Œå½±ä¹ŸæŠŠäººæŠ›èº²ã€‚æ— é‚£ï¼Œæ— é‚£");        return list;    }}</string></string></string></string></book></book></code></pre><p>Application.java</p><pre><code>package com.yi;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * Spring boot å¯åŠ¨ç¨‹åº * @author YI * @date 2018-3-15 15:49:59 */@SpringBootApplicationpublic class Application {    public static void main(String[] args) {        SpringApplication.run(Application.class, args);    }}</code></pre><p>å†™å¥½ä¹‹åå¯åŠ¨å§ï¼Œé€šè¿‡æµè§ˆå™¨æˆ–è€…å…¶ä»–å·¥å…·è®¿é—®ä½ æƒ³è®¿é—®çš„æ¥å£å§ï¼Œä¸‹å›¾å°±ä¼šè®¿é—®ä¿å­˜æ•°æ®æ¥å£åelasticsearchä¸­çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡elasticsearch-headè®¿é—®ï¼š</p><p><a href="http://www.hwy.ac.cn/upload/2018/05/3gssim7b6egrkqt0uipknom811.png" data-fancybox="group" data-caption class="fancybox"><img alt data-src="http://www.hwy.ac.cn/upload/2018/05/3gssim7b6egrkqt0uipknom811.png" class="lazyload" title></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> æœç´¢å¼•æ“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Solrç©ºé—´æœç´¢</title>
      <link href="/2018/01/19/Solr%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2/"/>
      <url>/2018/01/19/Solr%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>Solrç©ºé—´æœç´¢</p><p><strong>åœ¨fqä¸­ä½¿ç”¨{!geofilt}</strong></p><p><a href="https://s2.ax1x.com/2020/02/26/3Ufphq.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/26/3Ufphq.png" class="lazyload" title="image"></a></p><p>åœ¨</p><p><a href="https://s2.ax1x.com/2020/02/26/3U7LwT.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/26/3U7LwT.png" class="lazyload" title="image"></a></p><p><strong>ä½¿ç”¨æ­¤æœç´¢å³å¯è®¡ç®—å‡ºç©ºé—´æœç´¢ä½ç½®ï¼Œç›®å‰å¯ä»¥ä½¿ç”¨ç©ºé—´æœç´¢çš„æœ‰solrå’Œmongodb</strong></p><p>å¦‚æ­¤ç®€å•å°±å¯ä»¥å®ç°ç©ºæœèŒƒå›´æœç´¢</p><p><a href="https://s2.ax1x.com/2020/02/26/3U7jkF.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/26/3U7jkF.png" class="lazyload" title="image"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> æœç´¢å¼•æ“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Solr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>S2SHæ¡†æ¶ç¯å¢ƒæ­å»º</title>
      <link href="/2017/12/14/S2SH%E6%A1%86%E6%9E%B6%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2017/12/14/S2SH%E6%A1%86%E6%9E%B6%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h1 id="1-ä½¿ç”¨HibernateDaoSupportç®€åŒ–æ•´åˆä»£ç "><a href="#1-ä½¿ç”¨HibernateDaoSupportç®€åŒ–æ•´åˆä»£ç " class="headerlink" title="1.ä½¿ç”¨HibernateDaoSupportç®€åŒ–æ•´åˆä»£ç "></a>1.ä½¿ç”¨HibernateDaoSupportç®€åŒ–æ•´åˆä»£ç </h1><p>åŸç†ï¼šHibernateDaoSupportç±»æœ‰ä¸€ä¸ªHibernateTemplateæˆå‘˜å˜é‡ï¼Œæä¾›ä¸€ä¸ªsetSessionFactoryçš„æ–¹æ³•ï¼Œç”¨äºæ³¨å…¥SessionFactoryï¼ŒæŠŠHibernateTemplateåˆ›å»ºå‡ºæ¥ã€‚</p><p><a href="https://s2.ax1x.com/2020/02/27/3doan0.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3doan0.png" class="lazyload" title="image"></a></p><p>1ï¼‰è®©daoç±»ç»§æ‰¿HibernateDaoSupportç±»</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class ProductDao extends HibernateDaoSupport implements IProductDao {</span><br><span class="line"> </span><br><span class="line">@Override</span><br><span class="line">public List<product> findAll() {</product></span><br><span class="line">return this.getHibernateTemplate().loadAll(Product.class);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">@Override</span><br><span class="line">public void save(Product p) {</span><br><span class="line">this.getHibernateTemplate().save(p);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>2ï¼‰ç®€åŒ–applicationContext.xmlé…ç½®æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><bean id="sessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean"></bean></span><br><span class="line"><!-- configLocationï¼šç”¨äºåŠ è½½hibernate.cfg.xmlæ–‡ä»¶ --></span><br><span class="line"><property name="configLocation" value="classpath:/hibernate.cfg.xml"></property></span><br><span class="line"></span><br><span class="line"><!-- åˆ›å»ºdao --></span><br><span class="line"><bean id="productDao" class="gz.itheima.dao.impl.ProductDao"></bean></span><br><span class="line"><property name="sessionFactory" ref="sessionFactory"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><h1 id="2-Springæ•´åˆHibernate-çš„ä¸¤å¥—æ–¹æ¡ˆ"><a href="#2-Springæ•´åˆHibernate-çš„ä¸¤å¥—æ–¹æ¡ˆ" class="headerlink" title="2.Springæ•´åˆHibernate çš„ä¸¤å¥—æ–¹æ¡ˆ"></a>2.Springæ•´åˆHibernate çš„ä¸¤å¥—æ–¹æ¡ˆ</h1><p>2.1 å­˜åœ¨hibernate.cfg.xmlæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><bean id="sessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean"></bean></span><br><span class="line"><!-- configLocationï¼šç”¨äºåŠ è½½hibernate.cfg.xmlæ–‡ä»¶ --></span><br><span class="line"><property name="configLocation" value="classpath:/hibernate.cfg.xml"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>2.2 ä¸éœ€è¦hibernate.cfg.xmlæ–‡ä»¶ï¼ˆé‡ç‚¹çœ‹ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><bean id="sessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean"></bean></span><br><span class="line"><!-- æ³¨å…¥è¿æ¥æ±  --></span><br><span class="line"><property name="dataSource" ref="dataSource"></property></span><br><span class="line"><!-- æ³¨å…¥hibernateå±æ€§ --></span><br><span class="line"><property name="hibernateProperties"></property></span><br><span class="line"><props></props></span><br><span class="line"><prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop></span><br><span class="line"><prop key="hibernate.show_sql">true</prop></span><br><span class="line"><prop key="hibernate.format_sql">true</prop></span><br><span class="line"><prop key="hibernate.hbm2ddl.auto">update</prop></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><!-- æ³¨å…¥æ˜ å°„æ–‡ä»¶çš„ä¿¡æ¯ --></span><br><span class="line"><property name="mappingResources"></property></span><br><span class="line"><array></array></span><br><span class="line"><value>gz/itheima/entity/Category.hbm.xml</value></span><br><span class="line"><value>gz/itheima/entity/Product.hbm.xml</value></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><h1 id="3-Springæ•´åˆStruts2"><a href="#3-Springæ•´åˆStruts2" class="headerlink" title="3.Springæ•´åˆStruts2"></a>3.Springæ•´åˆStruts2</h1><p>3.1 å•ç‹¬å¼€å‘ä¸šåŠ¡å±‚ï¼ŒæŠŠäº‹åŠ¡åˆ‡æ¢åˆ°ä¸šåŠ¡å±‚</p><p>1)ç±»</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class ProductBiz implements IProductBiz {</span><br><span class="line">    //æ³¨å…¥dao</span><br><span class="line">    private IProductDao productDao;</span><br><span class="line">        public void setProductDao(IProductDao productDao) {</span><br><span class="line">        this.productDao = productDao;</span><br><span class="line">    }</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">        public List<product> findAll() {</product></span><br><span class="line">        return productDao.findAll();</span><br><span class="line">    }</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">        public void save(Product p) {</span><br><span class="line">        productDao.save(p);</span><br><span class="line">    }</span><br><span class="line">     </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>2ï¼‰é…ç½®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><!-- åˆ›å»ºbiz --></span><br><span class="line"><bean id="prductBiz" class="gz.itheima.biz.impl.ProductBiz"></bean></span><br><span class="line"><property name="productDao" ref="productDao"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹äº‹åŠ¡é…ç½®ï¼ŒæŠŠåˆ‡å…¥ç‚¹æ¢æˆä¸šåŠ¡å±‚ç±»</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><!-- é…ç½®Springçš„äº‹åŠ¡ç®¡ç† --></span><br><span class="line"><!-- 1.åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ --></span><br><span class="line"><bean id="transactionManager" class="org.springframework.orm.hibernate5.HibernateTransactionManager"></bean></span><br><span class="line"><property name="sessionFactory" ref="sessionFactory"></property></span><br><span class="line"></span><br><span class="line"><!-- 2.åˆ›å»ºäº‹åŠ¡é€šçŸ¥ --></span><br><span class="line"><tx:advice id="txAdvice" transaction-manager="transactionManager"></tx:advice></span><br><span class="line"><tx:attributes></tx:attributes></span><br><span class="line"><tx:method name="*" isolation="DEFAULT" propagation="REQUIRED"></tx:method></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><!-- 3.é…ç½®åˆ‡é¢ --></span><br><span class="line"><aop:config></aop:config></span><br><span class="line"><aop:pointcut expression="execution(* gz.itheima.biz.impl.*Biz.*(..))" id="myPT"></aop:pointcut></span><br><span class="line"><aop:advisor advice-ref="txAdvice" pointcut-ref="myPT"></aop:advisor></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>3ï¼‰æµ‹è¯•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration({"classpath:/applicationContext.xml"})</span><br><span class="line">public class Demo1 {</span><br><span class="line">    //æ³¨å…¥biz</span><br><span class="line">    @Resource(name="productBiz")</span><br><span class="line">    private IProductBiz productBiz;</span><br><span class="line">    @Test</span><br><span class="line">    public void test1(){</span><br><span class="line">        Product p  =new Product();</span><br><span class="line">        p.setName("vivo");</span><br><span class="line">        productBiz.save(p);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼šä¸€æ—¦æŠŠäº‹åŠ¡æ¢åˆ°äº†ä¸šåŠ¡å±‚åï¼Œdaoå±‚çš„æµ‹è¯•ä»£ç å°±ä¸å¯ç”¨äº†ï¼å› ä¸ºdaoå±‚æ²¡æœ‰äº‹åŠ¡å•¦!</p><p>3.2 å•ç‹¬ä½¿ç”¨Struts2æ¡†æ¶</p><p>1ï¼‰åŒ…</p><p>Struts2æœ€å°åŒ…ï¼ˆ12ï¼‰</p><p><strong>æ³¨æ„ï¼šä¸è¦å¯¼å…¥javassist-3.11.0.GA.jar,å› ä¸ºhibernateæ¡†æ¶æœ‰äº†è¿™ä¸ªåŒ…ï¼Œå¹¶ä¸”ç‰ˆæœ¬æ›´é«˜ï¼</strong></p><p>2ï¼‰ç±»å’Œé¡µé¢</p><p>Add.jspé¡µé¢</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><s:form action="product_add"></s:form></span><br><span class="line">  <br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><table border="1"><tbody><tr><td>äº§å“åç§°</td><td><s:textfield name="name"></s:textfield></td></tr><tr><td><input type="submit" value="ä¿å­˜"></td></tr></tbody></table></span><br><span class="line">  </span><br></pre></td></tr></tbody></table></figure></div><p>ProductAction</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class ProductAction extends ActionSupport implements ModelDriven<product>{</product></span><br><span class="line">//æ¥æ”¶å‚æ•°</span><br><span class="line">    private Product p = new Product();</span><br><span class="line">    /**</span><br><span class="line">     * ä¿å­˜æ•°æ®</span><br><span class="line">     */</span><br><span class="line">    public String add(){</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        //è°ƒç”¨ä¸šåŠ¡</span><br><span class="line">        //å›æ˜¾ä¿¡æ¯é¡µé¢</span><br><span class="line">        ActionContext ac = ActionContext.getContext();</span><br><span class="line">        ac.put("msg", "æ·»åŠ æˆåŠŸ");</span><br><span class="line">        return SUCCESS;</span><br><span class="line">    }</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">        public Product getModel() {</span><br><span class="line">        return p;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>3ï¼‰é…ç½®</p><p>Web.xml</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><!-- strutsçš„æ ¸å¿ƒè¿‡æ»¤å™¨ --></span><br><span class="line">  <filter></filter></span><br><span class="line">  <filter-name>struts2</filter-name></span><br><span class="line"><filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class></span><br><span class="line">  </span><br><span class="line">  <filter-mapping></filter-mapping></span><br><span class="line">  <filter-name>struts2</filter-name></span><br><span class="line">  <url-pattern>/*</url-pattern></span><br><span class="line">  </span><br></pre></td></tr></tbody></table></figure></div><p>Struts.xml</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><!--?xml version="1.0" encoding="UTF-8" ?--></span><br><span class="line"><br><span class="line">"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"</span><br><span class="line">"http://struts.apache.org/dtds/struts-2.3.dtd"></span><br><span class="line"> </span><br><span class="line"><struts></struts></span><br><span class="line"><!-- ä¿®æ”¹strutsçš„UIæ¨¡å— ,è¯¥ä¸ºç®€å•æ¨¡æ¿--></span><br><span class="line"><constant name="struts.ui.theme" value="simple"></constant></span><br><span class="line"> </span><br><span class="line"><package name="ssh" extends="struts-default" namespace="/"></package></span><br><span class="line"><action name="product_*" class="gz.itheima.web.ProductAction" method="{1}"></action></span><br><span class="line"><result>/succ.jsp</result></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br></span></pre></td></tr></tbody></table></figure></div><p>4ï¼‰æµ‹è¯•</p><p>éƒ¨ç½²tomcatï¼Œæµè§ˆå™¨è®¿é—®ï¼š</p><p><a href="http://localhost:8080/day38_04_ssh_1/add.jsp" target="_blank" rel="noopener">http://localhost:8080/day38_04_ssh_1/add.jsp</a></p><p>3.3 Springæ¡†æ¶æ•´åˆStrut2</p><p>1ï¼‰åœ¨Springæ²¡æœ‰æ•´åˆStruts2çš„æƒ…å†µä¸‹ï¼Œéœ€è¦æ‰‹åŠ¨åˆ°springçš„IOCå·¥å‚è·å–bizå¯¹è±¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//1.ä¸æ•´åˆçš„æƒ…å†µä¸‹ï¼Œç›´æ¥è°ƒç”¨springçš„IOCå·¥å‚çš„bizçš„å¯¹è±¡</span><br><span class="line">ApplicationContext context = new ClassPathXmlApplicationContext("/applicationContext.xml");</span><br><span class="line">productBiz = (IProductBiz)context.getBean("productBiz");</span><br><span class="line">productBiz.save(p);</span><br></pre></td></tr></tbody></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œactionæ¯æ¬¡éƒ½éœ€è¦é‡æ–°è¯»å–applicationContext.xmlæ–‡ä»¶ï¼Œé‡æ–°åˆ›å»ºIOCå·¥å‚ï¼Œæ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼</span><br></pre></td></tr></tbody></table></figure></div><p>2ï¼‰Springæ¡†æ¶æ•´åˆstruts2ï¼ˆé‡ç‚¹ï¼‰</p><p>åŸç†ï¼šSpringæ¡†æ¶æä¾›äº†ä¸€ä¸ªwebç›‘å¬å™¨ï¼Œæ”¾åœ¨spring-webçš„jaré‡Œé¢ã€‚</p><p><a href="https://s2.ax1x.com/2020/02/27/3doBAU.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3doBAU.png" class="lazyload" title="image"></a></p><p>è¿™ä¸ªwebç›‘å¬å™¨ï¼ˆContextLoaderListenerï¼‰ï¼Œä¸»è¦æ˜¯ç”¨äºåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§åœ°æŠŠapplicationContext.xmlæ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œæ–¹ä¾¿è¡¨ç°å±‚å»ä½¿ç”¨springçš„å¯¹è±¡ã€‚</p><p><a href="https://s2.ax1x.com/2020/02/27/3doccR.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3doccR.png" class="lazyload" title="image"></a></p><p>æ•´åˆæ­¥éª¤ï¼š</p><p>1ï¼‰å¯¼å…¥spring-webçš„jaråŒ…</p><p><a href="https://s2.ax1x.com/2020/02/27/3doWB6.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3doWB6.png" class="lazyload" title="image"></a></p><p>2ï¼‰åœ¨web.xmlé…ç½®webç›‘å¬å™¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><!-- é…ç½®springçš„webç›‘å¬å™¨ï¼Œç”¨äºåŠ è½½applicationContext.xml --></span><br><span class="line"> <!-- é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ°WEB-INFç›®å½•ä¸‹è¯»å–applicationContext.xml --></span><br><span class="line"> <listener></listener></span><br><span class="line"> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class></span><br><span class="line"> </span><br><span class="line"> <!-- ä¿®æ”¹webç›‘å¬å™¨è¯»å–æ–‡ä»¶çš„è·¯å¾„ --></span><br><span class="line"> <context-param></context-param></span><br><span class="line"> <param-name>contextConfigLocation</param-name></span><br><span class="line"> <param-value>classpath:applicationContext.xml</param-value></span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure></div><p>3ï¼‰ä¿®æ”¹actionä»£ç ï¼Œä»å†…å­˜å–å‡ºbizå¯¹è±¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//2.Springæ•´åˆstruts2</span><br><span class="line">//ä»å†…å­˜ä¸­å–å‡ºbizå¯¹è±¡</span><br><span class="line">ApplicationContext context = </span><br><span class="line">WebApplicationContextUtils.getWebApplicationContext(ServletActionContext.getServletContext());</span><br><span class="line">productBiz = (IProductBiz)context.getBean("productBiz");</span><br><span class="line">productBiz.save(p);</span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œactionçš„ä»£ç æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥struts2æä¾›äº†æ•´åˆspringçš„æ–¹æ¡ˆï¼Œç®€åŒ–actionè·å–bizå¯¹è±¡çš„ä»£ç </p><p>3.4 Struts2æ¡†æ¶æ•´åˆSpring</p><p>1ï¼‰å¯¼å…¥struts2-spring-pluginçš„jaråŒ…</p><p><a href="https://s2.ax1x.com/2020/02/27/3dTpCQ.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3dTpCQ.png" class="lazyload" title="image"></a></p><p>Struts-plugin.xml : ç¼–å†™äº†ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚ä¸»è¦ç”¨äºè®©actionè·å–åˆ°springç¯å¢ƒçš„å¯¹è±¡</p><p><a href="https://s2.ax1x.com/2020/02/27/3do73d.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3do73d.png" class="lazyload" title="image"></a></p><p>2ï¼‰ä¿®æ”¹actionç±»å’Œé…ç½®æ–‡ä»¶</p><p>æ–¹æ¡ˆä¸€ï¼šActionå¯¹è±¡æ˜¯ç”±Struts2åˆ›å»ºçš„ï¼ˆæ ¹æ®springçš„åç§°ï¼ˆbeançš„idï¼‰è‡ªåŠ¨åŒ¹é…ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private IProductBiz productBiz;</span><br><span class="line">public void setProductBiz(IProductBiz productBiz) {</span><br><span class="line">this.productBiz = productBiz;</span><br><span class="line">}</span><br><span class="line"><!-- åˆ›å»ºbiz --></span><br><span class="line"><bean id="productBiz" class="gz.itheima.biz.impl.ProductBiz"></bean></span><br><span class="line"><property name="productDao" ref="productDao"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>æ–¹æ¡ˆäºŒï¼šActionå¯¹è±¡æ˜¯ç”±Springåˆ›å»º  ï¼ˆæ¨èä½¿ç”¨ï¼‰</p><p>åœ¨applicationContext.xmlåˆ›å»ºactionå¯¹è±¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><!-- åˆ›å»º action --></span><br><span class="line"><bean id="productAction" class="gz.itheima.web.ProductAction"></bean></span><br><span class="line"><property name="prdoBiz" ref="productBiz"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>ä¿®æ”¹struts.xmlæ–‡ä»¶çš„classå±æ€§</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><action name="product_*" class="productAction" method="{1}"></action></span><br><span class="line"><result>/succ.jsp</result></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p><a href="https://s2.ax1x.com/2020/02/27/3dTVET.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3dTVET.png" class="lazyload" title="image"></a></p><p>æ³¨æ„ï¼šåœ¨æ–¹æ¡ˆäºŒçš„æƒ…å†µï¼Œspringåˆ›å»ºå‡ºæ¥çš„actionå¿…é¡»æ˜¯è®¾ç½®æˆå¤šä¾‹ï¼Œå¦åˆ™ä¼šå‡ºç°çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><bean id="productAction" class="gz.itheima.web.ProductAction" scope="prototype"></bean></span><br><span class="line"><property name="prdoBiz" ref="productBiz"></property></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><h1 id="4-è§£å†³Hibernateå»¶è¿ŸåŠ è½½æ•°æ®æ˜¾ç¤ºé—®é¢˜"><a href="#4-è§£å†³Hibernateå»¶è¿ŸåŠ è½½æ•°æ®æ˜¾ç¤ºé—®é¢˜" class="headerlink" title="4.è§£å†³Hibernateå»¶è¿ŸåŠ è½½æ•°æ®æ˜¾ç¤ºé—®é¢˜"></a>4.è§£å†³Hibernateå»¶è¿ŸåŠ è½½æ•°æ®æ˜¾ç¤ºé—®é¢˜</h1><p>åŸç†ï¼šspringæ¡†æ¶è®¾è®¡äº†ä¸€ä¸ªè¿‡æ»¤å™¨ï¼šOpenSessionInViewFilter</p><p><a href="https://s2.ax1x.com/2020/02/27/3dTK29.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3dTK29.png" class="lazyload" title="image"></a></p><p><a href="https://s2.ax1x.com/2020/02/27/3dT1Dx.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3dT1Dx.png" class="lazyload" title="image"></a></p><p>é…ç½®æ­¥éª¤ï¼š</p><p>åœ¨web.xmlé…ç½®è¿‡æ»¤å™¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><!-- æ³¨æ„ï¼šOpenSessionInViewFilterå¿…é¡»é…ç½®åœ¨struts2çš„å‰é¢ --></span><br><span class="line"> <filter></filter></span><br><span class="line">   <filter-name>OpenSessionInViewFilter</filter-name></span><br><span class="line">   <filter-class>org.springframework.orm.hibernate5.support.OpenSessionInViewFilter</filter-class></span><br><span class="line"> </span><br><span class="line"> <filter-mapping></filter-mapping></span><br><span class="line">   <filter-name>OpenSessionInViewFilter</filter-name></span><br><span class="line">   <url-pattern>/*</url-pattern></span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure></div><p>æ³¨æ„ï¼šå¿…é¡»æŠŠè¿™ä¸ªè¿‡æ»¤å™¨é…ç½®åœ¨struts2çš„é…ç½®å‰é¢æ‰ä¼šç”Ÿæ•ˆï¼</p><h3 id="é—®é¢˜å»ºè®®"><a href="#é—®é¢˜å»ºè®®" class="headerlink" title="é—®é¢˜å»ºè®®"></a>é—®é¢˜å»ºè®®</h3><ul><li>è”ç³»æˆ‘çš„é‚®ç®±ï¼š<a href="mailto:ilovey_hwy@163.com">ilovey_hwy@163.com</a></li><li>æˆ‘çš„åšå®¢ï¼š<a href="http://hwy.ac.cn">http://hwy.ac.cn</a></li><li>GitHubï¼š<a href="https://www.github.com/HWYWL" target="_blank" rel="noopener">https://www.github.com/HWYWL</a></li></ul></body></html>]]></content>
      
      
      <categories>
          
          <category> ORM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ORM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring MVCæ•°æ®è‡ªåŠ¨ç»‘å®š</title>
      <link href="/2017/05/27/Spring%20MVC%E6%95%B0%E6%8D%AE%E8%87%AA%E5%8A%A8%E7%BB%91%E5%AE%9A/"/>
      <url>/2017/05/27/Spring%20MVC%E6%95%B0%E6%8D%AE%E8%87%AA%E5%8A%A8%E7%BB%91%E5%AE%9A/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>é€šè¿‡ä¾‹å­ä»‹ç»å‡ ç§è‡ªåŠ¨ç»‘å®šæ–¹å¼ï¼š</p><p>SpringmvcServletAPI .java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.controller;</span><br><span class="line"></span><br><span class="line">import com.yi.entity.User;</span><br><span class="line">import com.yi.entity.Users;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ•°æ®è‡ªåŠ¨ç»‘å®š</span><br><span class="line"> * Created by Administrator on 2017/4/17.</span><br><span class="line"> */</span><br><span class="line">@Controller</span><br><span class="line">public class SpringmvcServletAPI {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å°†å­—æ®µä¸è¡¨å•å­—æ®µä¸€ä¸€å¯¹åº”å°±èƒ½è‡ªåŠ¨ç»‘å®š</span><br><span class="line">     * @param session</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(value = "login")</span><br><span class="line">    public String login(HttpSession session, String username){</span><br><span class="line">        System.out.println("ç”¨æˆ·åï¼š" + username);</span><br><span class="line">        session.setAttribute("username",username);</span><br><span class="line">        return "index.jsp";</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å°†pojo(Javabean)çš„å­—æ®µä¸å‰ç«¯å­—æ®µä¸€ä¸€å¯¹åº”å°±èƒ½è‡ªåŠ¨ç»‘å®š</span><br><span class="line">     * @param request</span><br><span class="line">     * @param user</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(value = "getup")</span><br><span class="line">    public String login(HttpServletRequest request, User user){</span><br><span class="line">        System.out.println("è´¦å·ï¼š" + user.getUsername());</span><br><span class="line">        System.out.println("å¯†ç ï¼š" + user.getPassword());</span><br><span class="line"></span><br><span class="line">        request.setAttribute("user",user);</span><br><span class="line">        return "index.jsp";</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å°†listé›†åˆä¸­å…ƒç´ çš„å­—æ®µä¸å‰ç«¯å­—æ®µä¸€ä¸€å¯¹åº”å°±èƒ½è‡ªåŠ¨ç»‘å®š</span><br><span class="line">     * @param request</span><br><span class="line">     * @param users</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(value = "batchinput")</span><br><span class="line">    public String login(HttpServletRequest request,Users users){</span><br><span class="line">        System.out.println("é•¿åº¦ï¼š" + users.getUsers().size());</span><br><span class="line">        for (User user:users.getUsers()</span><br><span class="line">             ) {</span><br><span class="line">            System.out.println("è´¦å·ï¼š" + user.getUsername());</span><br><span class="line">            System.out.println("å¯†ç ï¼š" + user.getPassword());</span><br><span class="line">        }</span><br><span class="line">        request.setAttribute("list",users.getUsers());</span><br><span class="line"></span><br><span class="line">        return "index.jsp";</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å°†æ•°ç»„çš„å­—æ®µä¸å‰ç«¯å­—æ®µå¯¹åº”å°±èƒ½è‡ªåŠ¨ç»‘å®š</span><br><span class="line">     * @param request</span><br><span class="line">     * @param username</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(value = "arrayinput")</span><br><span class="line">    public String login(HttpServletRequest request,String[] username){</span><br><span class="line">        for (String name:username</span><br><span class="line">             ) {</span><br><span class="line">            System.out.println("å§“åï¼š" + name);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        request.setAttribute("nameArr",username);</span><br><span class="line">        return "index.jsp";</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>User.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.entity;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç”¨æˆ·ä¿¡æ¯pojo</span><br><span class="line"> * Created by Administrator on 2017/4/18.</span><br><span class="line"> */</span><br><span class="line">public class User {</span><br><span class="line">    private Integer uid;</span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line"></span><br><span class="line">    public User() {</span><br><span class="line">        super();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public User(Integer uid, String username, String password) {</span><br><span class="line">        this.uid = uid;</span><br><span class="line">        this.username = username;</span><br><span class="line">        this.password = password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public User(String username, String password) {</span><br><span class="line">        this.username = username;</span><br><span class="line">        this.password = password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public Integer getUid() {</span><br><span class="line">        return uid;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUid(Integer uid) {</span><br><span class="line">        this.uid = uid;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getUsername() {</span><br><span class="line">        return username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) {</span><br><span class="line">        this.username = username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getPassword() {</span><br><span class="line">        return password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) {</span><br><span class="line">        this.password = password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() {</span><br><span class="line">        return "User{" +</span><br><span class="line">                "uid=" + uid +</span><br><span class="line">                ", username='" + username + '\'' +</span><br><span class="line">                ", password='" + password + '\'' +</span><br><span class="line">                '}';</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>Users.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.yi.entity;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å°è£…Useråˆ°é›†åˆä¸­ï¼Œç”¨æˆ·æ•°æ®ç»‘å®š</span><br><span class="line"> * Created by Administrator on 2017/4/18.</span><br><span class="line"> */</span><br><span class="line">public class Users {</span><br><span class="line">    List<user> users = new ArrayList<>();</user></span><br><span class="line"></span><br><span class="line">    public List<user> getUsers() {</user></span><br><span class="line">        return users;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUsers(List<user> users) {</user></span><br><span class="line">        this.users = users;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>index.jsp</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Administrator</span><br><span class="line">  Date: 2017/4/17</span><br><span class="line">  Time: 20:28</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%></span><br><span class="line"><%@ page contentType="text/html;charset=UTF-8" language="java" %></span><br><span class="line"><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    <title>$Title$</title></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šå­—æ®µ</h3><hr></span><br><span class="line">    ${username},æ¬¢è¿å›æ¥...<br></span><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šjavabean</h3><hr></span><br><span class="line">    ${requestScope.user.username},æ¬¢è¿å›æ¥...<br></span><br><span class="line">    ${requestScope.user.password},è¿™æ˜¯å¯†ç <br></span><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šé›†åˆ</h3><hr></span><br><span class="line">    <c:foreach items="${list}" var="user"></c:foreach></span><br><span class="line">        ${user.username},æ¬¢è¿å›æ¥...<br></span><br><span class="line">        ${user.password},è¿™æ˜¯å¯†ç <br></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šæ•°ç»„</h3><hr></span><br><span class="line">    <c:foreach items="${nameArr}" var="name"></c:foreach></span><br><span class="line">        ${name},æ¬¢è¿å›æ¥...<br></span><br><span class="line">    </span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>login.jsp</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Administrator</span><br><span class="line">  Date: 2017/4/17</span><br><span class="line">  Time: 21:45</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%></span><br><span class="line"><%@ page contentType="text/html;charset=UTF-8" language="java" %></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <title>ç™»å½•</title></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šå­—æ®µ</h3><hr></span><br><span class="line">    <form action="${pageContext.request.contextPath}/login.mvc" method="post"><br><span class="line">        è´¦å·ï¼š<input type="text" name="username"><br><br></span><br><span class="line">        <input type="submit"></span><br><span class="line">    </span></form><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šjavabean</h3><hr></span><br><span class="line">    <form action="${pageContext.request.contextPath}/getup.mvc" method="post"><br><span class="line">        è´¦å·ï¼š<input type="text" name="username"><br><br></span><br><span class="line">        å¯†ç ï¼š<input type="text" name="password"><br><br></span><br><span class="line">        <input type="submit"></span><br><span class="line">    </span></form><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šé›†åˆ</h3><hr></span><br><span class="line">    <form action="${pageContext.request.contextPath}/batchinput.mvc" method="post"><br><span class="line">        è´¦å·ï¼š<input type="text" name="users[0].username"><br><br></span><br><span class="line">        å¯†ç ï¼š<input type="text" name="users[0].password"><br><br></span><br><span class="line">        è´¦å·ï¼š<input type="text" name="users[1].username"><br><br></span><br><span class="line">        å¯†ç ï¼š<input type="text" name="users[1].password"><br><br></span><br><span class="line">        è´¦å·ï¼š<input type="text" name="users[2].username"><br><br></span><br><span class="line">        å¯†ç ï¼š<input type="text" name="users[2].password"><br><br></span><br><span class="line">        <input type="submit"></span><br><span class="line">    </span></form><br><span class="line"></span><br><span class="line">    <h3>SpringMVCè‡ªåŠ¨ç»‘å®šæ•°ç»„</h3><hr></span><br><span class="line">    <form action="${pageContext.request.contextPath}/arrayinput.mvc" method="post"><br><span class="line">        è´¦å·ï¼š<input type="text" name="username"><br><br></span><br><span class="line">        è´¦å·ï¼š<input type="text" name="username"><br><br></span><br><span class="line">        <input type="submit"></span><br><span class="line">    </span></form><br><span class="line"></span><br><span class="line"></span><br></span></span></span></span></pre></td></tr></tbody></table></figure></div><p>ç»“æœï¼š</p><p><a href="https://s2.ax1x.com/2020/02/27/3d7b0P.png" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="https://s2.ax1x.com/2020/02/27/3d7b0P.png" class="lazyload" title="image"></a></p><hr>![image](https://s2.ax1x.com/2020/02/27/3dHM0x.png)</body></html>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBCåŸºç¡€</title>
      <link href="/2017/01/11/JDBC%E5%9F%BA%E7%A1%80/"/>
      <url>/2017/01/11/JDBC%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>å­¦ä¹ ç›®æ ‡</p><ol><li>èƒ½å¤Ÿè¯´å‡ºä»€ä¹ˆæ˜¯JDBC</li><li>èƒ½å¤Ÿè¯´å‡ºJDBCè¿æ¥æ•°æ®åº“çš„å››ä¸ªå‚æ•°ã€‚</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(â€œcom.mysql.jdbc.Driverâ€);</span><br><span class="line">DriverManager.getConnection(url, name, password)</span><br><span class="line">url:  jdbc:mysql:<span class="comment">//localhost:3306/æ•°æ®åº“</span></span><br></pre></td></tr></tbody></table></figure></div><ol start="3"><li>èƒ½å¤Ÿè¯´å‡ºJDBCçš„æ ¸å¿ƒAPI</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DriverManager: 1) åŠ è½½é©±åŠ¨ï¼›2ï¼‰è·å–æ•°æ®åº“è¿æ¥ï¼›</span><br><span class="line">Connection: æ•°æ®åº“çš„ä¸€ä¸ªè¿æ¥ï¼›</span><br><span class="line">Statement</span><br><span class="line">execute()</span><br><span class="line">executeQuery() executeUpdate()</span><br><span class="line">ResultSet: å¯æ»šåŠ¨ç»“æœé›†ã€‚</span><br><span class="line">next() previous() first() last() absolute(int n)</span><br><span class="line">getXxx(int columnIndex)  getXxx(String columnName)</span><br></pre></td></tr></tbody></table></figure></div><ol start="4"><li>èƒ½å¤Ÿè¿ç”¨Statementæ‰§è¡ŒSQLæ“ä½œ</li><li>èƒ½å¤Ÿè¿ç”¨PreparedStatementæ‰§è¡ŒSQLæ“ä½œ</li></ol><ul><li>ç¬¬ä¸€æ­¥ï¼šè·å–æ•°æ®åº“è¿æ¥ï¼›</li><li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºPreparedStatementå¯¹è±¡;<br>PreparedStatement pstmt = conn.prearedStatement(sql);</li><li>ç¬¬ä¸‰æ­¥ï¼šå¦‚æœæœ‰å‚æ•°ï¼Œå°±è¦è®¾ç½®å‚æ•°ï¼›</li><li>ç¬¬å››æ­¥ï¼šè°ƒç”¨è¯¥å¯¹è±¡executeQueryæˆ–executeUpdateæ–¹æ³•ï¼›</li><li>ç¬¬äº”æ­¥ï¼šéå†ç»“æœï¼›</li><li>ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æºï¼›ï¼ˆResultSetã€Statementã€Connectionï¼‰</li></ul><ol start="6"><li>èƒ½å¤ŸåŒºåˆ«Statementä¸PreparedStatement</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PreparedStatementæ˜¯Statementçš„å­æ¥å£ï¼›</span><br><span class="line">PreparedStatementçš„æ‰§è¡Œç‡æ¯”Statementæ›´é«˜ï¼›</span><br><span class="line">PreparedStatementçš„å¯è¯»æ€§æ¯”Statementæ›´å¥½ï¼›</span><br><span class="line">PreparedStatementçš„å®‰å…¨æ€§æ¯”Statementæ›´é«˜ï¼›</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸€ã€-JDBCæ¦‚è¿°"><a href="#ä¸€ã€-JDBCæ¦‚è¿°" class="headerlink" title="ä¸€ã€ JDBCæ¦‚è¿°"></a>ä¸€ã€ JDBCæ¦‚è¿°</h1><p>JDBCï¼ˆJava Database Connectivityï¼‰ï¼šjavaæ•°æ®åº“è¿æ¥æŠ€æœ¯ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯é€šè¿‡javaä»£ç è®¿é—®å’Œæ“ä½œæ•°æ®åº“ã€‚<br>JDBCæ˜¯ä¸€ä¸ªæ¥å£è§„èŒƒã€‚å®ƒå®šä¹‰äº†ä¸€äº›è®¿é—®æ•°æ®åº“çš„è§„åˆ™ã€‚å…·ä½“æ•°æ®åº“çš„å®ç°æ˜¯ç”±å„ä¸ªæ•°æ®åº“å‚å•†è´Ÿè´£å®ç°ã€‚</p><p><a href="F14813315E3741EB9AA0C5B2DDD882A5" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="F14813315E3741EB9AA0C5B2DDD882A5" class="lazyload" title="image"></a></p><p>ä¸åŒçš„æ•°æ®åº“å‚å•†éƒ½å¿…é¡»è¦æä¾›è‡ªå·±çš„é©±åŠ¨ç¨‹åºã€‚å…¶å®ï¼Œè¯¥é©±åŠ¨ç¨‹åºå°±æ˜¯å®ç°äº†JDBCè§„èŒƒçš„ç¨‹åºã€‚</p><h1 id="äºŒã€JDBCçš„ä½¿ç”¨"><a href="#äºŒã€JDBCçš„ä½¿ç”¨" class="headerlink" title="äºŒã€JDBCçš„ä½¿ç”¨"></a>äºŒã€JDBCçš„ä½¿ç”¨</h1><h2 id="2-1-JDBCçš„æ ¸å¿ƒAPI"><a href="#2-1-JDBCçš„æ ¸å¿ƒAPI" class="headerlink" title="2.1 JDBCçš„æ ¸å¿ƒAPI"></a>2.1 JDBCçš„æ ¸å¿ƒAPI</h2><ul><li>DriverManger: æ•°æ®åº“çš„é©±åŠ¨ç®¡ç†ç±»ã€‚ä½œç”¨ï¼š1ï¼‰åŠ è½½é©±åŠ¨ï¼›2ï¼‰è·å–æ•°æ®åº“çš„è¿æ¥ï¼›</li><li>Conectionï¼šä»£è¡¨ä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€‚è®¿é—®æ•°æ®åº“ä¹‹å‰å¿…é¡»è¦å…ˆè·å–Connctionå¯¹è±¡ï¼›</li><li>Statementï¼šä»£è¡¨ä¸€ä¸ªSQLè¯­å¥ï¼Œå®ƒè´Ÿè´£æŠŠSQLçš„å‘½ä»¤å‘é€MySQLæœåŠ¡å™¨æ‰§è¡Œï¼›</li><li>ResultSetï¼šä»£è¡¨ä¸€ä¸ªç»“æœé›†å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†æ‰€æœ‰æŸ¥è¯¢ç»“æœï¼›</li></ul><h2 id="2-2-JDBCè¿æ¥MySQLæ•°æ®åº“"><a href="#2-2-JDBCè¿æ¥MySQLæ•°æ®åº“" class="headerlink" title="2.2 JDBCè¿æ¥MySQLæ•°æ®åº“"></a>2.2 JDBCè¿æ¥MySQLæ•°æ®åº“</h2><p>1) ç¬¬ä¸€æ­¥ï¼šåŠ è½½é©±åŠ¨ï¼ˆmysql-connector-java-5.1.13-bin.jarï¼‰ï¼›<br>2) ç¬¬äºŒæ­¥ï¼šè·å–æ•°æ®åº“è¿æ¥ï¼›<br>MySQLï¼šjdbc:mysql://localhost:3306/itheima<br>Oracleï¼šjdbc:oracle:thin:localhost:1521:orcl<br>æ ¼å¼ï¼šjdbc:æ•°æ®åº“å:å…¶ä»–<br>jdbc: å›ºå®šçš„<br>æ•°æ®åº“åï¼šä¾‹å¦‚ï¼šmysql<br>å…¶ä»–ï¼šä¸åŒæ•°æ®åº“çš„å†™æ³•ä¼šä¸ä¸€æ ·ï¼›<br>3) ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºStatementå¯¹è±¡ï¼›<br>4) ç¬¬å››æ­¥ï¼šè°ƒç”¨Statementå¯¹è±¡ä¸€äº›æ–¹æ³•ï¼›<br>execute(): å¯ä»¥æ‰§è¡ŒæŸ¥è¯¢æˆ–æ›´æ–°æ“ä½œï¼›<br>executeQuery(): æ‰§è¡ŒæŸ¥è¯¢ï¼›<br>executeUpdate(): æ‰§è¡Œæ›´æ–°ï¼›<br>5) ç¬¬äº”æ­¥ï¼šéå†ç»“æœç»“æœé›†ï¼ˆæ‰§è¡ŒæŸ¥è¯¢æ‰æœ‰ç»“æœé›†ï¼‰ï¼›</p><p>ResultSetå¸¸ç”¨çš„æ–¹æ³•ï¼š</p><ul><li>next()ï¼šæŠŠæ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¦‚æœè¯¥è¡Œæœ‰æ•°æ®ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›</li><li>previous()ï¼šæŠŠæ¸¸æ ‡å‘ä¸Šç§»åŠ¨ä¸€è¡Œï¼Œå¦‚æœè¯¥è¡Œæœ‰æ•°æ®ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›</li><li>first()ï¼šæŠŠæ¸¸æ ‡ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œï¼Œå¦‚æœè¯¥è¡Œæœ‰æ•°æ®ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›</li><li>last()ï¼šæŠŠæ¸¸æ ‡ç§»åŠ¨åˆ°æœ€åä¸€è¡Œï¼Œå¦‚æœè¯¥è¡Œæœ‰æ•°æ®ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›</li><li>getXxx(int columnIndex)ï¼šæ ¹æ®å­—æ®µçš„ç´¢å¼•è·å–å­—æ®µå†…å®¹ï¼›</li><li>getXxx(String columnName)ï¼šæ ¹æ®å­—æ®µåæˆ–å­—æ®µåˆ«åè·å–å­—æ®µå†…å®¹ï¼›<br>6) ç¬¬å…­æ­¥ï¼šå…³é—­èµ„æºï¼›</li></ul><p><strong>==æ³¨æ„==ï¼šå…³é—­èµ„æºçš„æ—¶å€™ï¼Œè¦å…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³ã€‚</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Demo {</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException, SQLException {</span><br><span class="line">        //åŠ è½½é©±åŠ¨</span><br><span class="line">        Class.forName("com.mysql.jdbc.Driver");</span><br><span class="line">        //è·å–æ•°æ®åº“è¿æ¥</span><br><span class="line">        Connection conn = DriverManager.getConnection(</span><br><span class="line">                "jdbc:mysql://localhost:3306/itheima",</span><br><span class="line">                "root",</span><br><span class="line">                "root");</span><br><span class="line">        //åˆ›å»ºStatementå¯¹è±¡</span><br><span class="line">        String sql = "insert into students values(14, 'jacky', 100, 100, 100, 'java054')";</span><br><span class="line">//      String sql = "select * from students";</span><br><span class="line">        Statement stat = conn.createStatement();</span><br><span class="line">        //è°ƒç”¨Statementçš„æ–¹æ³•</span><br><span class="line">        int rows = stat.executeUpdate(sql);</span><br><span class="line">        System.out.println("è¿”å›ç»“æœï¼š" + rows);</span><br><span class="line">        //å…³é—­èµ„æºï¼ˆæ³¨æ„ï¼šå…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³ï¼‰</span><br><span class="line">        stat.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h2 id="2-3-JDBCçš„å¢åˆ æŸ¥è¯¥æ“ä½œ"><a href="#2-3-JDBCçš„å¢åˆ æŸ¥è¯¥æ“ä½œ" class="headerlink" title="2.3 JDBCçš„å¢åˆ æŸ¥è¯¥æ“ä½œ"></a>2.3 JDBCçš„å¢åˆ æŸ¥è¯¥æ“ä½œ</h2><p>2.2.1 æ·»åŠ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ </span><br><span class="line">String insertSql = "insert into user(name, age) values('jacky', 18),('joe', 19);";</span><br><span class="line">int rows = stmt.executeUpdate(insertSql);</span><br><span class="line">System.out.println("ç»“æœï¼š" + rows);</span><br></pre></td></tr></tbody></table></figure></div><p>2.2.2 åˆ é™¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//åˆ é™¤</span><br><span class="line">String deleteSql = "delete from user where name = 'joe'";</span><br><span class="line">int rows = stmt.executeUpdate(deleteSql);</span><br><span class="line">System.out.println("ç»“æœï¼š" + rows);</span><br></pre></td></tr></tbody></table></figure></div><p>2.2.4 æŸ¥è¯¢</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢</span><br><span class="line">String selectSql = "select id, name as FullName, age from user";</span><br><span class="line">ResultSet rs = stmt.executeQuery(selectSql);</span><br><span class="line">while (rs.next()) { //æŠŠæ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">    //é€šè¿‡ç´¢å¼•å€¼è·å–å­—æ®µçš„å€¼</span><br><span class="line">    int id = rs.getInt(1); //è·å–ç¬¬ä¸€ä¸ªå­—æ®µï¼Œç´¢å¼•å€¼ä»1å¼€å§‹è®¡ç®—ã€‚</span><br><span class="line">    String name = rs.getString(2);</span><br><span class="line">    int age = rs.getInt(3);</span><br><span class="line"></span><br><span class="line">    //é€šè¿‡å­—æ®µåæˆ–å­—æ®µåˆ«åè·å–å­—æ®µçš„å€¼</span><br><span class="line">    int id = rs.getInt("id");</span><br><span class="line">    String name = rs.getString("FullName"); //å­—æ®µåæˆ–åˆ«åéƒ½å¯ä»¥</span><br><span class="line">    int age = rs.getInt("age");</span><br><span class="line">    System.out.println("ç¼–å·ï¼š" + id + "ï¼Œå§“åï¼š" + name + "ï¼Œå¹´é¾„ï¼š" + age);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸‰ã€-SQLæ³¨å…¥"><a href="#ä¸‰ã€-SQLæ³¨å…¥" class="headerlink" title="ä¸‰ã€ SQLæ³¨å…¥"></a>ä¸‰ã€ SQLæ³¨å…¥</h1><p>æ‰€è°“çš„SQLæ³¨å…¥ï¼Œå°±æ˜¯ç”¨æˆ·æŠŠSQLå‘½ä»¤é€šè¿‡webè¡¨å•æäº¤åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æŠŠSQLå‘½ä»¤ä¸å·²æœ‰SQLå‘½ä»¤ä¸€èµ·è¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¬ºéª—æ•°æ®åº“æœåŠ¡å™¨çš„ç›®çš„ã€‚</p><p><a href="0B278DBD7CA74979B6C04E43B8EBF9F7" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="0B278DBD7CA74979B6C04E43B8EBF9F7" class="lazyload" title="image"></a></p><p>è§£å†³åŠæ³•ï¼š</p><p>1) ä½¿ç”¨jséªŒè¯ï¼Œè§„å®šç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¸èƒ½å¤Ÿå‡ºç°ç‰¹æ®Šçš„å­—ç¬¦ï¼›<br>2) ä¸èƒ½å¤ŸæŠŠç”¨æˆ·è¾“å…¥çš„å†…å®¹ç›´æ¥æ”¾åœ¨SQLè¯­å¥ä¸€èµ·æ‰§è¡Œï¼› </p><h1 id="å››ã€é¢„ç¼–è¯‘å¯¹è±¡"><a href="#å››ã€é¢„ç¼–è¯‘å¯¹è±¡" class="headerlink" title="å››ã€é¢„ç¼–è¯‘å¯¹è±¡"></a>å››ã€é¢„ç¼–è¯‘å¯¹è±¡</h1><p>PreparedStatementå…¶å®å°±æ˜¯Statementçš„ä¸€ä¸ªå­æ¥å£ã€‚å®ƒçš„ä¸»è¦ä½œç”¨ï¼š</p><p>1) é˜²æ­¢SQLæ³¨å…¥ï¼›<br>2) æé«˜ç¨‹åºçš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼›<br>3) æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼›</p><p><a href="54C3C1B58C0B450E962C28F6EDF010DA" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="54C3C1B58C0B450E962C28F6EDF010DA" class="lazyload" title="image"></a></p><p><a href="FFCB56D2DF804D8DA15C7035CDD5FF4A" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="FFCB56D2DF804D8DA15C7035CDD5FF4A" class="lazyload" title="image"></a></p><p>PreparedStatementæä¾›ä¸€ä¸ªé¢„ç¼–è¯‘çš„åŠŸèƒ½ã€‚ä½†æ˜¯ä»MySQL4.1ä¹‹åé»˜è®¤é¢„ç¼–è¯‘çš„åŠŸèƒ½æ˜¯å…³é—­çš„ã€‚å¦‚æœè¦å¯ç”¨é¢„ç¼–è¯‘çš„åŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨URLçš„åé¢ç”°é—´ä¸¤ä¸ªå‚æ•°ï¼š</p><p><a href="96F38638A15146649E80C5266EE62FC7" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="96F38638A15146649E80C5266EE62FC7" class="lazyload" title="image"></a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-DBUtilä½¿ç”¨</title>
      <link href="/2017/01/11/JDBC-DBUtil%E4%BD%BF%E7%94%A8/"/>
      <url>/2017/01/11/JDBC-DBUtil%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li><ol><li>èƒ½å¤Ÿæè¿°ä»€ä¹ˆæ˜¯è¿æ¥æ± </li></ol></li><li><ol start="2"><li>èƒ½å¤Ÿå®ç°è‡ªå®šä¹‰è¿æ¥æ± </li></ol></li><li><ol start="3"><li>èƒ½å¤Ÿè§£å†³è‡ªå®šä¹‰Connectionçš„closeé‡Šæ”¾è¿æ¥çš„é—®é¢˜</li></ol></li><li><ol start="4"><li>èƒ½å¤Ÿè¿ç”¨ç¬¬ä¸‰æ–¹è¿æ¥æ± å®ç°æŠ€æœ¯ DBCP C3P0<ul><li>ç¬¬ä¸€æ­¥ï¼šå¯¼å…¥c3p0çš„jaråŒ…ï¼›</li><li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¿æ¥æ± å¯¹è±¡(ComboPooledDataSource)ï¼›</li><li>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å‚æ•°ï¼›ï¼ˆé…ç½®æ–‡ä»¶ï¼‰<ul><li>c3p0-config.xmlï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰</li><li>c3p0.properties</li></ul></li><li>ç¬¬å››æ­¥ï¼šè°ƒç”¨getConnectionè·å–æ•°æ®åº“è¿æ¥ï¼›</li><li>ç¬¬äº”æ­¥ï¼šè°ƒç”¨Connectionå¯¹è±¡çš„closeæ–¹æ³•é‡Šæ”¾Connectionï¼›</li></ul></li></ol></li><li><ol start="5"><li>èƒ½å¤Ÿæè¿°å‡ºä¸‰ç§æ•°æ®åº“å…ƒæ•°æ®</li></ol></li><li><ol start="6"><li>èƒ½å¤Ÿè¿ç”¨æ•°æ®åº“è¡¨å…ƒæ•°æ®</li></ol></li></ul><h1 id="ä¸€ã€-æ•°æ®åº“è¿æ¥æ± "><a href="#ä¸€ã€-æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="ä¸€ã€ æ•°æ®åº“è¿æ¥æ± "></a>ä¸€ã€ æ•°æ®åº“è¿æ¥æ± </h1><p>ä¹‹å‰æˆ‘ä»¬è®¿é—®æ•°æ®åº“ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šè·å–æ•°æ®åº“è¿æ¥</li><li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºPreparedStatementå¯¹è±¡ï¼›</li><li>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å‚æ•°ï¼›</li><li>ç¬¬å››æ­¥ï¼šéå†ç»“æœé›†ï¼›</li><li>ç¬¬äº”æ­¥ï¼šå…³é—­èµ„æºï¼›</li></ul><p>è·å–æ•°æ®åº“è¿æ¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œã€‚</p><h2 id="1-1-ä»€ä¹ˆæ•°æ®åº“è¿æ¥æ± "><a href="#1-1-ä»€ä¹ˆæ•°æ®åº“è¿æ¥æ± " class="headerlink" title="1.1 ä»€ä¹ˆæ•°æ®åº“è¿æ¥æ± "></a>1.1 ä»€ä¹ˆæ•°æ®åº“è¿æ¥æ± </h2><p>æ•°æ®åº“è¿æ¥æ± å°±å°±æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨äº†æ•°æ®åº“è¿æ¥çš„é›†åˆå¯¹è±¡ã€‚<br>ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± çš„å¥½å¤„ï¼šå‡å°‘åœ¨è·å–Connectionå¯¹è±¡çš„ç­‰å¾…æ—¶é—´ï¼Œä»è€Œå¯ä»¥æé«˜è®¿é—®æ•°æ®åº“çš„æ•ˆç‡ã€‚</p><ul><li><p>åº”ç”¨ç¨‹åºç›´æ¥è·å–æ•°æ®åº“è¿æ¥çš„ç¼ºç‚¹ï¼š</p></li><li><p><a href="6842DEDE225343B7962DD019055278AB" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="6842DEDE225343B7962DD019055278AB" class="lazyload" title="image"></a></p></li><li><p>æ•°æ®åº“è¿æ¥æ± ï¼š</p></li></ul><p><a href="C94854159CCC4AE8820DFECC76DBB652" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="C94854159CCC4AE8820DFECC76DBB652" class="lazyload" title="image"></a></p><h2 id="1-2-è‡ªå®šä¹‰è¿æ¥æ± çš„å®ç°"><a href="#1-2-è‡ªå®šä¹‰è¿æ¥æ± çš„å®ç°" class="headerlink" title="1.2 è‡ªå®šä¹‰è¿æ¥æ± çš„å®ç°"></a>1.2 è‡ªå®šä¹‰è¿æ¥æ± çš„å®ç°</h2><p>1) ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ç°DataSouceæ¥å£ï¼›<br>2) ç¬¬äºŒæ­¥ï¼šæ·»åŠ ä¸€äº›å±æ€§ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­˜å‚¨æ‰€æœ‰Connectionå¯¹è±¡</span></span><br><span class="line">LinkedList<myconnection> pool = <span class="keyword">new</span> LinkedList<myconnection>();</myconnection></myconnection></span><br><span class="line"><span class="comment">//æ•°æ®åº“çš„è¿æ¥å‚æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String driverClass = <span class="string">"com.mysql.jdbc.Driver"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String url = <span class="string">"jdbc:mysql://localhost:3306/itheima"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String user = <span class="string">"root"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="string">"root"</span>;</span><br><span class="line"><span class="comment">//æ•°æ®åº“è¿æ¥æ± çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> initialPoolSize = <span class="number">3</span>; <span class="comment">//åˆå§‹åŒ–çš„è¿æ¥æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> maxPoolSize = <span class="number">5</span>; <span class="comment">//æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> curPoolSize = <span class="number">0</span>; <span class="comment">//å½“å‰çš„è¿æ¥æ•°</span></span><br></pre></td></tr></tbody></table></figure></div><p>3) ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ–¹æ³•ç”Ÿæˆæ•°æ®åº“è¿æ¥ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ç”Ÿæˆæ•°æ®åº“è¿æ¥</span><br><span class="line">public MyConnection createConnection() throws SQLException {</span><br><span class="line">    Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">    return new MyConnection(this, conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>4) ç¬¬å››æ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ–¹æ³•è·å–æ•°æ®åº“è¿æ¥ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//è·å–æ•°æ®åº“è¿æ¥</span><br><span class="line">public Connection getConnection() throws SQLException {</span><br><span class="line">    if (pool.size() > 0) { //æ•°æ®åº“è¿æ¥æ± ä¸­æœ‰Connectionå¯¹è±¡</span><br><span class="line">        //åˆ é™¤å¹¶è¿”å›é›†åˆä¸­çš„Connectionå¯¹è±¡</span><br><span class="line">        return pool.removeLast();</span><br><span class="line">    }</span><br><span class="line">    if (curPoolSize < maxPoolSize) { //å¦‚æœæ•°æ®åº“è¿æ¥æ± ä¸­æ²¡æœ‰äº†Connectionï¼Œä½†æ˜¯å½“å‰çš„è¿æ¥æ•°æ²¡æœ‰è¶…è¿‡å¯å…è®¸çš„æœ€å¤§è¿æ¥æ•°æ®</span><br><span class="line">        Connection conn = createConnection();</span><br><span class="line">        curPoolSize++;</span><br><span class="line">        return conn;</span><br><span class="line">    }</span><br><span class="line">    //å¦‚æœæ•°æ®åº“è¿æ¥æ± ä¸­æ²¡æœ‰Connection,è€Œä¸”å½“å‰è¿æ¥æ•°å¤§äºç­‰äºè¿æ¥æ± å¯å…è®¸çš„æœ€å¤§è¿æ¥æ•°</span><br><span class="line">    throw new RuntimeException("å·²ç»è¾¾åˆ°æœ€å¤§çš„è¿æ¥æ•°ï¼");</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>5) ç¬¬äº”æ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ–¹æ³•é‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//é‡Šæ”¾æ•°æ®åº“è¿æ¥</span><br><span class="line">public void releaseConnection(MyConnection conn) {</span><br><span class="line">    //æŠŠConnectionå¯¹è±¡è¿”å›ç»™é›†åˆä¸­</span><br><span class="line">    pool.add(conn);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h2 id="1-3-è£…é¥°è€…å¼€å‘æ¨¡å¼"><a href="#1-3-è£…é¥°è€…å¼€å‘æ¨¡å¼" class="headerlink" title="1.3 è£…é¥°è€…å¼€å‘æ¨¡å¼"></a>1.3 è£…é¥°è€…å¼€å‘æ¨¡å¼</h2><p>é—®é¢˜ï¼šè°ƒç”¨conn.close()æ–¹æ³•çš„æ—¶å€™ï¼Œä¸æ˜¯å…³é—­æ•°æ®åº“è¿æ¥ï¼Œè€Œæ˜¯æŠŠæ•°æ®åº“çš„è¿æ¥é‡Šæ”¾åˆ°è¿æ¥æ± ä¸­ï¼Œå¦‚ä½•å®ç°?ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ã€‚</p><p>ä½œç”¨ï¼šå¯ä»¥å¯¹ä¸€äº›ç±»è¿›è¡Œè£…é¥°ï¼Œè£…é¥°åçš„ç±»ç§°ä¹‹ä¸ºè£…é¥°ç±»ã€‚æ‰€è°“çš„è£…é¥°ç±»å°±æ˜¯å¯¹åŸå…ˆç±»çš„ä¸€äº›æ–¹æ³•è¿›è¡Œå¢å¼ºå¤„ç†ã€‚</p><p>å®ç°æ­¥éª¤ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šå¤šä¸ªè£…é¥°ç±»è¦å®ç°ä¸€ä¸ªå…±åŒçš„æ¥å£ï¼Œæˆ–è€…ç»§æ‰¿ä¸€ä¸ªå…±åŒçš„çˆ¶ç±»ï¼›</li><li>ç¬¬äºŒæ­¥ï¼šè£…é¥°ç±»è¦ä¿å­˜è¢«è£…é¥°ç±»çš„ä¸€ä¸ªå¼•ç”¨ï¼›</li></ul><p>éœ€æ±‚ï¼šè¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼ŒæŠŠè¯»å–åˆ°çš„å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><p>1) è¾“å‡ºå†…å®¹çš„æ¯ä¸€è¡Œè¦æœ‰è¡Œå·ï¼›<br>2) è¾“å‡ºå†…å®¹çš„æ¯ä¸€è¡Œçš„æœ«å°¾è¦æœ‰æ¢è¡Œæ ‡ç­¾ï¼›<br>3) è¾“å…¥å†…å®¹çš„æ¯ä¸€è¡Œçš„è¦æœ‰è¡Œå·å’Œæ¢è¡Œæ ‡ç­¾ï¼›</p><h2 id="1-4-DBCPè¿æ¥æ± æŠ€æœ¯"><a href="#1-4-DBCPè¿æ¥æ± æŠ€æœ¯" class="headerlink" title="1.4 DBCPè¿æ¥æ± æŠ€æœ¯"></a>1.4 DBCPè¿æ¥æ± æŠ€æœ¯</h2><p>1) ç¬¬ä¸€æ­¥ï¼šä¸‹è½½DBCPè¿æ¥æ± å‹ç¼©åŒ…ï¼Œå¹¶è§£å‹ç¼©ï¼›<br>2) ç¬¬äºŒæ­¥ï¼šæŠŠDBCPçš„æ ¸å¿ƒjaråŒ…å¤åˆ¶åˆ°é¡¹ç›®ä¸­(commons-dbcp-1.4.jarã€commons-pool-1.5.6.jar)ï¼›<br>3) ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸€ä¸ªBasicDataSourceå¯¹è±¡ï¼›<br>4) ç¬¬å››æ­¥ï¼šè®¾ç½®æ•°æ®åº“è¿æ¥æ± çš„å‚æ•°ï¼›<br>5) ç¬¬äº”æ­¥ï¼šè°ƒç”¨è¯¥å¯¹è±¡çš„getConnectionæ–¹æ³•ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws SQLException {</span><br><span class="line">        //åˆ›å»ºBasicDataSourceå¯¹è±¡</span><br><span class="line">        BasicDataSource dataSource = new BasicDataSource();</span><br><span class="line">        //è®¾ç½®è¿æ¥æ± å‚æ•°</span><br><span class="line">        //è¿æ¥æ•°æ®åº“çš„å‚æ•°</span><br><span class="line">        dataSource.setDriverClassName("com.mysql.jdbc.Driver");</span><br><span class="line">        dataSource.setUrl("jdbc:mysql://localhost:3306/itheima");</span><br><span class="line">        dataSource.setUsername("root");</span><br><span class="line">        dataSource.setPassword("root");</span><br><span class="line">        //è¿æ¥æ± çš„å‚æ•°</span><br><span class="line">        dataSource.setInitialSize(5); //è®¾ç½®è¿æ¥æ± çš„åˆå§‹è¿æ¥æ•°</span><br><span class="line">        dataSource.setMaxActive(10); //è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°</span><br><span class="line">        dataSource.setMaxIdle(10); //è®¾ç½®æœ€å¤§ç©ºé—²çš„è¿æ¥æ•°</span><br><span class="line">        dataSource.setMinIdle(5); //æœ€å°ç©ºé—²çš„è¿æ¥æ•°</span><br><span class="line">        dataSource.setMaxWait(3000); //æœ€å¤§ç­‰å¾…çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line"> </span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        Connection conn = dataSource.getConnection();</span><br><span class="line">        System.out.println(conn);</span><br><span class="line">        conn.close();</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure></div><h2 id="1-5-C3P0è¿æ¥æ± æŠ€æœ¯"><a href="#1-5-C3P0è¿æ¥æ± æŠ€æœ¯" class="headerlink" title="1.5 C3P0è¿æ¥æ± æŠ€æœ¯"></a>1.5 C3P0è¿æ¥æ± æŠ€æœ¯</h2><h3 id="1-5-1-ä½¿ç”¨C3P0çš„æ­¥éª¤"><a href="#1-5-1-ä½¿ç”¨C3P0çš„æ­¥éª¤" class="headerlink" title="1.5.1 ä½¿ç”¨C3P0çš„æ­¥éª¤"></a>1.5.1 ä½¿ç”¨C3P0çš„æ­¥éª¤</h3><p>1) ç¬¬ä¸€æ­¥ï¼šä¸‹è½½c3p0å‹ç¼©åŒ…ï¼Œè§£å‹ç¼©ï¼›<br>2) ç¬¬äºŒæ­¥ï¼šæŠŠc3p0çš„æ ¸å¿ƒjaråŒ…å¯¼å…¥å·¥ç¨‹ä¸­ï¼ˆc3p0-0.9.5.2.jarã€mchange-commons-java-0.2.11.jarï¼‰ï¼›<br>3) ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºè¿æ¥æ± å¯¹è±¡ï¼›<br>4) ç¬¬å››æ­¥ï¼šè®¾ç½®è¿æ¥æ± å‚æ•°ï¼›<br>5) ç¬¬äº”æ­¥ï¼šè·å–Connectionå¯¹è±¡ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws PropertyVetoException, SQLException {</span><br><span class="line">        //åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span><br><span class="line">        ComboPooledDataSource dataSource = new ComboPooledDataSource();</span><br><span class="line">        //æ•°æ®åº“è¿æ¥å‚æ•°</span><br><span class="line">        dataSource.setDriverClass("com.mysql.jdbc.Driver");</span><br><span class="line">        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/itheima");</span><br><span class="line">        dataSource.setUser("root");</span><br><span class="line">        dataSource.setPassword("root");</span><br><span class="line">        //æ•°æ®åº“è¿æ¥æ± å‚æ•°</span><br><span class="line">        dataSource.setInitialPoolSize(3); //è¿æ¥æ± åˆå§‹è¿æ¥æ•°</span><br><span class="line">        dataSource.setMaxPoolSize(5); //è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°</span><br><span class="line">        dataSource.setMinPoolSize(3); //æ•°æ®åº“çš„æœ€å°è¿æ¥æ•°</span><br><span class="line">        dataSource.setAcquireIncrement(2); //æ¯æ¬¡åˆ›å»ºçš„è¿æ¥æ•°</span><br><span class="line">        dataSource.setCheckoutTimeout(3000); //æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line"> </span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">        Connection conn = dataSource.getConnection();</span><br><span class="line">        System.out.println(conn);</span><br><span class="line">        conn.close(); //ä¸æ˜¯å…³é—­è¿æ¥ï¼Œæ˜¯é‡Šæ”¾è¿æ¥</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure></div><p>1.5.1 ä½¿ç”¨é…ç½®æ–‡ä»¶</p><p>1) æ–¹å¼ä¸€ï¼šåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªc3p0-config.xmlæ–‡ä»¶ï¼ˆè¯¥åå­—æ˜¯å›ºå®šçš„ï¼‰ï¼›<br><a href="3083D9606F184F98985DF67F93485630" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="3083D9606F184F98985DF67F93485630" class="lazyload" title="image"></a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><!--?xml version="1.0" encoding="UTF-8"?--></span><br><span class="line"><c3p0-config></c3p0-config></span><br><span class="line">    <!-- é»˜è®¤é…ç½® --></span><br><span class="line">    <default-config></default-config></span><br><span class="line">        <!-- é…ç½®å‚æ•° --></span><br><span class="line">        <property name="driverClass">com.mysql.jdbc.Driver</property></span><br><span class="line">        <property name="jdbcUrl">jdbc:mysql://localhost:3306/itheima?generateParameterMetadata=true</property></span><br><span class="line">        <property name="user">root</property></span><br><span class="line">        <property name="password">root</property></span><br><span class="line">        <property name="initialPoolSize">3</property></span><br><span class="line">        <property name="maxPoolSize">5</property></span><br><span class="line">        <property name="minPoolSize">3</property></span><br><span class="line">        <property name="acquireIncrement">2</property></span><br><span class="line">        <property name="checkoutTimeout">3000</property></span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><p>2) æ–¹å¼äºŒï¼šåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªc3p0.propertiesæ–‡ä»¶ï¼ˆè¯¥åå­—æ˜¯å›ºå®šçš„ï¼‰ï¼›<br><a href="A5F8F26D34A8488B822F7718E74E7A8E" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="A5F8F26D34A8488B822F7718E74E7A8E" class="lazyload" title="image"></a><br><a href="25CDF7CD3D3746C5A2CE724711893B7D" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="25CDF7CD3D3746C5A2CE724711893B7D" class="lazyload" title="image"></a></p><p><strong>==æ³¨æ„==ï¼šä½¿ç”¨XMLæ–‡ä»¶é…ç½®æ–¹å¼çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</strong></p><h1 id="äºŒã€-è‡ªå®šä¹‰æ•°æ®åº“å·¥å…·ç±»"><a href="#äºŒã€-è‡ªå®šä¹‰æ•°æ®åº“å·¥å…·ç±»" class="headerlink" title="äºŒã€ è‡ªå®šä¹‰æ•°æ®åº“å·¥å…·ç±»"></a>äºŒã€ è‡ªå®šä¹‰æ•°æ®åº“å·¥å…·ç±»</h1><ul><li>1.1 ä»€ä¹ˆæ˜¯å…ƒæ•°æ®<br>å…ƒæ•°æ®å°±æ˜¯æ•°æ®ä¸­çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šè·å–æ•°æ®åº“çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè·å–è¡¨çš„å­—æ®µç­‰ç­‰ã€‚</li><li>1.2 è·å–æ•°æ®åº“å…ƒæ•°æ®</li><li>1.2.1 è·å–æ•°æ®åº“çš„å…ƒæ•°æ®</li></ul><p>DatabaseMetaDataï¼šæ•°æ®åº“çš„å…ƒæ•°æ®å¯¹è±¡ï¼›<br><a href="D18611EB56884BCD9F30E837957BA6CC" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="D18611EB56884BCD9F30E837957BA6CC" class="lazyload" title="image"></a></p><p><strong>1.2.2 è·å–ç”¨æˆ·æ“ä½œçš„å…ƒæ•°æ®</strong></p><p>ParameterMetaDataï¼šå‚æ•°çš„å…ƒæ•°æ®å¯¹è±¡ï¼›<br><a href="38A1574B7E9B40A697F6179BD3C5CF63" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="38A1574B7E9B40A697F6179BD3C5CF63" class="lazyload" title="image"></a></p><p>ResultSetMetaDataï¼šè·å–ç»“æœé›†çš„å…ƒæ•°æ®å¯¹è±¡ï¼›</p><p><a href="BFD6ABAB8EF94594A74490159E4FD652" data-fancybox="group" data-caption="image" class="fancybox"><img alt="image" data-src="BFD6ABAB8EF94594A74490159E4FD652" class="lazyload" title="image"></a></p><h3 id="1-3-è‡ªå®šä¹‰æ¡†æ¶å®ç°"><a href="#1-3-è‡ªå®šä¹‰æ¡†æ¶å®ç°" class="headerlink" title="1.3 è‡ªå®šä¹‰æ¡†æ¶å®ç°"></a>1.3 è‡ªå®šä¹‰æ¡†æ¶å®ç°</h3><p>1.3.1 å¢åˆ æ”¹åŠŸèƒ½<br>BaseDao.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//å¢åˆ æ”¹æ“ä½œ</span><br><span class="line">public void update(String sql, Object[] params) throws SQLException {</span><br><span class="line">    //è·å–æ•°æ®åº“è¿æ¥</span><br><span class="line">    Connection conn = DbUtil.getConnection();</span><br><span class="line">    //åˆ›å»ºPreparedStatementå¯¹è±¡</span><br><span class="line">    PreparedStatement pstmt = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">    //é—®é¢˜ï¼šå¦‚æœç”¨æˆ·ä¼ å‚æ•°çš„ä¸ªæ•°ä¸å®é™…éœ€è¦ä¼ å…¥å‚æ•°çš„ä¸ªæ•°ä¸ä¸€è‡´ï¼Œå’‹åŠï¼Ÿ</span><br><span class="line">    ParameterMetaData metadata = pstmt.getParameterMetaData();</span><br><span class="line">    //è·å–å‚æ•°çš„ä¸ªæ•°</span><br><span class="line">    int count = metadata.getParameterCount();</span><br><span class="line">    if (params != null) {</span><br><span class="line">        if (count != params.length) {</span><br><span class="line">            throw new RuntimeException("å‚æ•°ä¸ªæ•°ä¸æ­£ç¡®ï¼");</span><br><span class="line">        }</span><br><span class="line">        //è®¾ç½®å‚æ•°</span><br><span class="line">        for (int i = 1; i <= params.length; i++) {</span><br><span class="line">            pstmt.setObject(i, params[i-1]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    //æ‰§è¡Œæ›´æ–°æ“ä½œ</span><br><span class="line">    pstmt.executeUpdate();</span><br><span class="line">    //é‡Šæ”¾è¿æ¥</span><br><span class="line">    conn.close();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>1.3.2 æŸ¥è¯¢åŠŸèƒ½<br>BaseDao.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢</span><br><span class="line">public Object find(String sql, Object[] params, ResultSetHandler handler) throws Exception {</span><br><span class="line">    //æ•°æ®åº“è¿æ¥</span><br><span class="line">    Connection conn = DbUtil.getConnection();</span><br><span class="line">    //åˆ›å»ºPrepardStatementå¯¹è±¡</span><br><span class="line">    PreparedStatement pstmt = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">    ParameterMetaData metadata = pstmt.getParameterMetaData();</span><br><span class="line">    //è·å–å‚æ•°çš„ä¸ªæ•°</span><br><span class="line">    int count = metadata.getParameterCount();</span><br><span class="line">    //è®¾ç½®å‚æ•°</span><br><span class="line">    if (params != null) {</span><br><span class="line">        if (count != params.length) {</span><br><span class="line">            throw new RuntimeException("å‚æ•°ä¸ªæ•°ä¸æ­£ç¡®ï¼");</span><br><span class="line">        }</span><br><span class="line">        //è®¾ç½®å‚æ•°</span><br><span class="line">        for (int i = 1; i <= params.length; i++) {</span><br><span class="line">            pstmt.setObject(i, params[i-1]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    //æ‰§è¡ŒæŸ¥è¯¢</span><br><span class="line">    ResultSet rs = pstmt.executeQuery();</span><br><span class="line">    //é—®é¢˜ï¼šæ€ä¹ˆå¤„ç†ç»“æœé›†ï¼Ÿç»“æœé›†æœ‰å¯èƒ½åªè¿”å›ä¸€æ¡æ•°æ®ï¼Œä¹Ÿæœ‰å¯èƒ½è¿”å›å¤šè¡Œæ•°æ®ã€‚</span><br><span class="line">    return handler.handle(rs);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>ResultSetHandler.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public interface ResultSetHandler {</span><br><span class="line"> </span><br><span class="line">    //ä¸“é—¨å¤„ç†ç»“æœé›†çš„æ–¹æ³•</span><br><span class="line">    public Object handle(ResultSet rs) throws Exception;</span><br><span class="line"> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>BeanHandler.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">    ç»“æœé›†å¤„ç†ç±»ï¼ˆä¸“é—¨å¤„ç†å•è¡Œçš„ç»“æœï¼‰</span><br><span class="line"> </span><br><span class="line">        è§„åˆ™ï¼šæ•°æ®åº“è¡¨çš„åˆ—åå¿…é¡»è¦ä¸Beanå¯¹è±¡çš„å±æ€§åè¦ä¸€è‡´ã€‚</span><br><span class="line">*/</span><br><span class="line">public class BeanHandler implements ResultSetHandler {</span><br><span class="line"> </span><br><span class="line">    private Class clazz;</span><br><span class="line"> </span><br><span class="line">    public BeanHandler(Class clazz) {</span><br><span class="line">        this.clazz = clazz;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    //å¯¹ç»“æœé›†è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæˆåè¿”å›ä¸€ä¸ªBeanå¯¹è±¡</span><br><span class="line">    public Object handle(ResultSet rs) throws Exception {</span><br><span class="line">        //å…ˆç§»åŠ¨æŒ‡é’ˆ</span><br><span class="line">        if (rs.next()) {</span><br><span class="line">            //é€šè¿‡classç±»åˆ›å»ºå¯¹è±¡</span><br><span class="line">            Object o = clazz.newInstance();</span><br><span class="line">            //è·å–ç»“æœé›†çš„å…ƒæ•°æ®å¯¹è±¡</span><br><span class="line">            ResultSetMetaData metadata = rs.getMetaData();</span><br><span class="line">            //è·å–åˆ—çš„æ•°é‡</span><br><span class="line">            int count = metadata.getColumnCount();</span><br><span class="line">            //è·å–æ‰€æœ‰åˆ—çš„æ•°æ®</span><br><span class="line">            for (int i = 1; i <= count; i++) {</span><br><span class="line">                //è·å–äº†æ¯ä¸€åˆ—çš„æ•°æ®ï¼ŒæŠŠæ¯ä¸€åˆ—æ•°æ®è®¾ç½®classå¯¹è±¡ä¸­ï¼Ÿ</span><br><span class="line">                //è·å–åˆ—å</span><br><span class="line">                String fieldName = metadata.getColumnLabel(i);</span><br><span class="line">                //ä½¿ç”¨åå°„è®¾ç½®å¯¹è±¡çš„å±æ€§</span><br><span class="line">                Field field = clazz.getDeclaredField(fieldName);</span><br><span class="line">                //æš´åŠ›åå°„</span><br><span class="line">                field.setAccessible(true);</span><br><span class="line">                //è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼</span><br><span class="line">                field.set(o, rs.getObject(i));</span><br><span class="line">            }</span><br><span class="line">            return o;</span><br><span class="line">        }</span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>BeanListHandler.java</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">    ç»“æœé›†å¤„ç†ç±»ï¼ˆä¸“é—¨å¤„ç†å¤šè¡Œç»“æœçš„å¤„ç†ç±»ï¼‰</span><br><span class="line">*/</span><br><span class="line">public class BeanListHandler implements ResultSetHandler {</span><br><span class="line"> </span><br><span class="line">    private Class clazz;</span><br><span class="line"> </span><br><span class="line">    public BeanListHandler(Class clazz) {</span><br><span class="line">        this.clazz = clazz;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    //å¯¹ç»“æœé›†è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæˆåè¿”å›ä¸€ä¸ªBeanå¯¹è±¡</span><br><span class="line">    public List handle(ResultSet rs) throws Exception {</span><br><span class="line">        List result = new ArrayList();</span><br><span class="line">        //éå†ç»“æœé›†</span><br><span class="line">        while (rs.next()) {</span><br><span class="line">            //é€šè¿‡classç±»åˆ›å»ºå¯¹è±¡</span><br><span class="line">            Object o = clazz.newInstance();</span><br><span class="line">            //è·å–ç»“æœé›†çš„å…ƒæ•°æ®å¯¹è±¡</span><br><span class="line">            ResultSetMetaData metadata = rs.getMetaData();</span><br><span class="line">            //è·å–åˆ—çš„æ•°é‡</span><br><span class="line">            int count = metadata.getColumnCount();</span><br><span class="line">            //è·å–æ‰€æœ‰åˆ—çš„æ•°æ®</span><br><span class="line">            for (int i = 1; i <= count; i++) {</span><br><span class="line">                //è·å–äº†æ¯ä¸€åˆ—çš„æ•°æ®ï¼ŒæŠŠæ¯ä¸€åˆ—æ•°æ®è®¾ç½®classå¯¹è±¡ä¸­ï¼Ÿ</span><br><span class="line">                //è·å–åˆ—å</span><br><span class="line">                String fieldName = metadata.getColumnLabel(i);</span><br><span class="line">                //ä½¿ç”¨åå°„è®¾ç½®å¯¹è±¡çš„å±æ€§</span><br><span class="line">                Field field = clazz.getDeclaredField(fieldName);</span><br><span class="line">                //æš´åŠ›åå°„</span><br><span class="line">                field.setAccessible(true);</span><br><span class="line">                //è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼</span><br><span class="line">                field.set(o, rs.getObject(i));</span><br><span class="line">            }</span><br><span class="line">            result.add(o);</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h1 id="ä¸‰ã€-DbUtil"><a href="#ä¸‰ã€-DbUtil" class="headerlink" title="ä¸‰ã€ DbUtil"></a>ä¸‰ã€ DbUtil</h1><p><strong>3.1 DbUtilä»‹ç»</strong></p><p>ä½œç”¨ï¼šç®€åŒ–ä¸€äº›æ•°æ®åº“çš„æ“ä½œã€‚</p><p><strong>3.2 DbUtilçš„ä½¿ç”¨æ­¥éª¤</strong></p><ul><li>ç¬¬ä¸€æ­¥ï¼šå¯¼å…¥DbUtilçš„æ ¸å¿ƒjaråŒ…ï¼›</li><li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºQueryRunnerå¯¹è±¡ï¼›</li><li>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨è¯¥å¯¹è±¡ä¸€äº›æ–¹æ³•è®¿é—®æ•°æ®åº“ï¼›</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Demo5 {</span><br><span class="line">    //ä¸å¸¦äº‹åŠ¡</span><br><span class="line">    private static QueryRunner queryRunner = new QueryRunner(new ComboPooledDataSource());</span><br><span class="line">    //å¸¦äº‹åŠ¡</span><br><span class="line">    private static QueryRunner queryRunner2 = new QueryRunner();</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) throws SQLException {</span><br><span class="line">        String sql = "select * from employees where id = 2";</span><br><span class="line">        List<employee> empList = (List<employee>) queryRunner.query(</employee></employee></span><br><span class="line">                sql, new BeanListHandler(Employee.class));</span><br><span class="line">        System.out.println(empList);</span><br><span class="line"> </span><br><span class="line">        Employee emp = (Employee) queryRunner.query(</span><br><span class="line">                sql, new BeanHandler(Employee.class));</span><br><span class="line">        System.out.println(emp);</span><br><span class="line"> </span><br><span class="line">        sql = "insert into employees(name, age, sal) values(?, ?, ?)";</span><br><span class="line">        queryRunner.update(sql, new Object[]{"å¤§å¤§å®", 60,100000});</span><br><span class="line"> </span><br><span class="line">        sql = "delete from employees where id = ?";</span><br><span class="line">        queryRunner.update(sql, 5);</span><br></pre></td></tr></tbody></table></figure></div><p>å¸¦äº‹åŠ¡çš„QueryRunnerï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//å¼€å¯äº‹åŠ¡</span><br><span class="line">    Connection conn = DbUtil.getConnection();</span><br><span class="line">    try {</span><br><span class="line">        conn.setAutoCommit(false);</span><br><span class="line">        String sql = "insert into employees(name, age, sal) values(?, ?, ?)";</span><br><span class="line">        queryRunner2.update(conn, sql, new Object[]{"å¤§å¤§å®1å·", 60, 100000});</span><br><span class="line">        sql = "insert into employees(name, age, sal) values(?, ?, ?)";</span><br><span class="line">        queryRunner2.update(conn, sql, new Object[]{"å¤§å¤§å®2å·", 60, 100000});</span><br><span class="line">        sql = "insert into employees(name, age, sal) values(?, ?, ?)";</span><br><span class="line">        queryRunner2.update(conn, sql, new Object[]{"å¤§å¤§å®3å·", 60, 100000});</span><br><span class="line">        int i = 10 / 0;</span><br><span class="line">        conn.commit();</span><br><span class="line">    } catch (Exception e) {</span><br><span class="line">        conn.rollback();</span><br><span class="line">        System.out.println("äº‹åŠ¡å›æ»šäº†ï¼");</span><br><span class="line">        //throw new RuntimeException(e);</span><br><span class="line">    } finally {</span><br><span class="line">        conn.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="3-4-æ‰¹å¤„ç†"><a href="#3-4-æ‰¹å¤„ç†" class="headerlink" title="3.4 æ‰¹å¤„ç†"></a>3.4 æ‰¹å¤„ç†</h3><p>æ‰§è¡Œæ‰¹å¤„ç†æ“ä½œéœ€è¦ä¼ å…¥ä¸€ä¸ªäºŒç»´æ•°ç»„ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ç»´å°±æ˜¯å‚æ•°ä¸ªæ•°ï¼Œç¬¬äºŒç»´å­˜å‚¨äº†æ¯ä¸ªå‚æ•°çš„å†…å®¹ï¼›</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package cn.yi.test;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.util.Random;</span><br><span class="line"> </span><br><span class="line">import org.apache.commons.dbutils.QueryRunner;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"> </span><br><span class="line">import cn.yi.util.DbUtil;</span><br><span class="line">/*</span><br><span class="line"> * ä»£ç æµ‹è¯•</span><br><span class="line"> */</span><br><span class="line">public class TestCode {</span><br><span class="line">    private static QueryRunner queryRunner = new QueryRunner(DbUtil.cpds);</span><br><span class="line"> </span><br><span class="line">    //æ•°æ®åº“æ•°æ®å‡†å¤‡,ä½¿ç”¨æ‰¹å¤„ç†</span><br><span class="line">    @Test</span><br><span class="line">    public void dataPrepare() throws SQLException{</span><br><span class="line">        Random random = new Random();</span><br><span class="line">        long starTime=System.currentTimeMillis();</span><br><span class="line">        String sql = "INSERT INTO student(NAME,age,result) VALUES(?,?,?)";</span><br><span class="line">        Object[][] params = new Object[1500][3];</span><br><span class="line">        String[] str = new String[]{"å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", "å°æ˜", "ç”°ä¸ƒ"};</span><br><span class="line">        int i;</span><br><span class="line">        for (i = 0; i < 1500; i++){</span><br><span class="line">            int randomNum = random.nextInt(str.length);</span><br><span class="line">            params[i][0] = str[randomNum];</span><br><span class="line">            params[i][1] = "21";</span><br><span class="line">            params[i][2] = i;</span><br><span class="line">        }</span><br><span class="line">        queryRunner.batch(sql, params);</span><br><span class="line">        long endTime=System.currentTimeMillis();</span><br><span class="line">        long Time=(endTime-starTime);</span><br><span class="line">        System.out.println("è¿è¡Œæ—¶é—´ï¼š"+Time + "ms");</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
